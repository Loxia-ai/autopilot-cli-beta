const a0_0x5ea379=a0_0x96bf;function a0_0x444b(){const _0x5e3b43=['CgfYC2vuB29Sq29TBwfUzhm','ntm5qxDvuuDi','wMTJwKy','x19WCM90B19F','z2vLuhm','y29UDgvUDa','Bg9N','ogTPDgvjBa','DhjPBq','Aw5MBW','yxbWBhK','r25MB3O','Dg9tDhjPBMC','CMvJAxbPzw50','AM9IlwrVBMu','yxr0CMLIDxrLCW','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','Dg9VBhmTy29TBwfUzhm','CMf3vgfN','kcGOlISPkYKRksSK','nJKXnJncAhbgDLK','ndK0ntG5mLDnBgrfvG','y29UC3rYDwn0B3i','BMfTzq','DgvnCKq','rxH0CMfJDgvKihrVB2WGy29TBwfUzdOG','nZeZmdGYng54v3bRBa','ChjVBxb0','ChjVDg90ExbL','tLHcyNy','Cev4EeO','zxjYB3i','Bg9Nz2vY','ENrXB2y','ugfYC2LUzYbTzxnZywDLihDPDgGGvgfNugfYC2vY','Dg9VBeLK','Dg9VBenVBw1HBMrZ','sgz5Eu0','nZe1nJGXoe1ty3z1va','DKfnCwS','mJuZmff3Du9XuG','svjdwKe','yMLUza','ChvZAa','CMv0DxjUicHMDw5JDgLVBIGPia','BgvUz3rO','r3rtsg4','CxvLCNK','r3j4t3y','mJbPrMPIENq','wwvVA2G','tLvZEuO','r2nSqKm','zxH0CMfJDenVBNrLBNq','B3b0Aw9U','ig9WDgLVBNm','AM9Irg9Uzq','qMnzzK8','swXRvuS','twvZC2fNzsb0BYbYzwnPCgLLBNq6ia','sujPCNi','sNvAwLm','D2fYBG','DgfIBgu','odeWnZuWs1LtCNHY','uvzVDeu','vxnLCIbqCM9TChq','w3rVB2WGAwq9','CMvWBgfJzq','uvrbvLC','ufn2DKq','C2vHCMnO','uvPSAMm','y29UC29Szq','Cg1Wy0C','CgfYC2vqCM9TChq','EwflDhG','ihDPDgGG','r0jvrKO','nJK2nJi3u2fSterJ','weX3wNq','EeHjtNO','Aw5JBhvKzxm','mKXlvwLstG','zxHJzxb0Aw9U','rxH0CMfJDgvKigrPCMvJDcb0B29SignVBw1HBMq6ia','sgLKqNG','rxjYB3iGCgfYC2LUzYbTzxnZywDLihDPDgGGvgfNugfYC2vYoG','DhjHy2u','BNfNDxC','rxH0CMfJDgvKihbYB21WDdOG','AxPzuhG','yKT6BxK','CgfYC2vnzxnZywDL'];a0_0x444b=function(){return _0x5e3b43;};return a0_0x444b();}(function(_0x4cb700,_0x48bfc6){const _0x501a1b=a0_0x96bf,_0x230c5a=_0x4cb700();while(!![]){try{const _0x292d0b=parseInt(_0x501a1b(0x130))/0x1*(parseInt(_0x501a1b(0x16f))/0x2)+-parseInt(_0x501a1b(0x16b))/0x3*(-parseInt(_0x501a1b(0x181))/0x4)+-parseInt(_0x501a1b(0x14d))/0x5*(-parseInt(_0x501a1b(0x15c))/0x6)+-parseInt(_0x501a1b(0x131))/0x7+parseInt(_0x501a1b(0x136))/0x8+-parseInt(_0x501a1b(0x142))/0x9+-parseInt(_0x501a1b(0x144))/0xa*(parseInt(_0x501a1b(0x17b))/0xb);if(_0x292d0b===_0x48bfc6)break;else _0x230c5a['push'](_0x230c5a['shift']());}catch(_0x1ce1f0){_0x230c5a['push'](_0x230c5a['shift']());}}}(a0_0x444b,0x6e2cf));const a0_0x343023=(function(){let _0x2abe07=!![];return function(_0x23e07b,_0x5ae254){const _0x594228=a0_0x96bf,_0x5b713a={};_0x5b713a[_0x594228(0x14f)]=_0x594228(0x150);const _0x1c54dd=_0x5b713a,_0x4a6b9e=_0x2abe07?function(){const _0x59dfd3=_0x594228;if(_0x1c54dd['NUsyJ']!==_0x59dfd3(0x166)){if(_0x5ae254){const _0x394270=_0x5ae254[_0x59dfd3(0x126)](_0x23e07b,arguments);return _0x5ae254=null,_0x394270;}}else{const _0x5cae3b=_0x4e2807[0x0];_0x33e0a2[_0x59dfd3(0x129)]=_0x5cae3b[_0x59dfd3(0x12b)]['to'],_0x570e08[_0x59dfd3(0x17f)]=_0x5cae3b[_0x59dfd3(0x17f)],this[_0x59dfd3(0x13c)]['info'](_0x59dfd3(0x157)+_0x452a75[_0x59dfd3(0x129)]);}}:function(){};return _0x2abe07=![],_0x4a6b9e;};}()),a0_0x1e8ffe=a0_0x343023(this,function(){const _0x48b60a=a0_0x96bf,_0x15f2e9={};_0x15f2e9['GtSHn']=_0x48b60a(0x12f);const _0x40f50a=_0x15f2e9;return a0_0x1e8ffe[_0x48b60a(0x128)]()['search'](_0x40f50a[_0x48b60a(0x14a)])['toString']()['constructor'](a0_0x1e8ffe)[_0x48b60a(0x163)](_0x40f50a[_0x48b60a(0x14a)]);});a0_0x1e8ffe();const a0_0x6c10e0=(function(){let _0x577164=!![];return function(_0x91f0c1,_0x3b80d7){const _0x833099=_0x577164?function(){const _0x58a6d7=a0_0x96bf;if(_0x3b80d7){const _0x2013e1=_0x3b80d7[_0x58a6d7(0x126)](_0x91f0c1,arguments);return _0x3b80d7=null,_0x2013e1;}}:function(){};return _0x577164=![],_0x833099;};}()),a0_0x41c86a=a0_0x6c10e0(this,function(){const _0x28ec28=a0_0x96bf,_0x3fc70c={'geePs':function(_0x3532f3,_0x47d048){return _0x3532f3+_0x47d048;},'HfyyM':_0x28ec28(0x12c),'ZkcZF':function(_0x2f9fd9){return _0x2f9fd9();},'QZljc':_0x28ec28(0x15a),'rEdiE':'info','XLwZt':'error','vAMqk':_0x28ec28(0x15b),'yaKtx':_0x28ec28(0x174),'yIBum':_0x28ec28(0x159),'PSvvD':'kTBOp'};let _0x252d5a;try{const _0x36bfd1=Function(_0x3fc70c[_0x28ec28(0x17e)](_0x3fc70c[_0x28ec28(0x17e)](_0x28ec28(0x148),_0x3fc70c[_0x28ec28(0x141)]),');'));_0x252d5a=_0x3fc70c[_0x28ec28(0x17c)](_0x36bfd1);}catch(_0xab7e3){_0x252d5a=window;}const _0xb331d9=_0x252d5a[_0x28ec28(0x165)]=_0x252d5a[_0x28ec28(0x165)]||{},_0x42159e=[_0x28ec28(0x180),_0x3fc70c[_0x28ec28(0x164)],_0x3fc70c['rEdiE'],_0x3fc70c[_0x28ec28(0x16c)],_0x28ec28(0x170),_0x3fc70c[_0x28ec28(0x143)],_0x3fc70c[_0x28ec28(0x168)]];for(let _0x58e275=0x0;_0x58e275<_0x42159e[_0x28ec28(0x149)];_0x58e275++){if(_0x3fc70c['yIBum']!==_0x3fc70c[_0x28ec28(0x162)]){const _0x187bca=a0_0x6c10e0[_0x28ec28(0x132)][_0x28ec28(0x138)]['bind'](a0_0x6c10e0),_0x16ca69=_0x42159e[_0x58e275],_0x4945da=_0xb331d9[_0x16ca69]||_0x187bca;_0x187bca[_0x28ec28(0x17d)]=a0_0x6c10e0[_0x28ec28(0x146)](a0_0x6c10e0),_0x187bca[_0x28ec28(0x128)]=_0x4945da['toString'][_0x28ec28(0x146)](_0x4945da),_0xb331d9[_0x16ca69]=_0x187bca;}else this[_0x28ec28(0x13c)]=_0x260b25;}});function a0_0x96bf(_0x409cd4,_0x2f9b78){const _0x3a4e55=a0_0x444b();return a0_0x96bf=function(_0x41c86a,_0x6c10e0){_0x41c86a=_0x41c86a-0x126;let _0x1f6d2d=_0x3a4e55[_0x41c86a];if(a0_0x96bf['UDZLsd']===undefined){var _0x47c16d=function(_0x96bf25){const _0x5c93f6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x18a2b6='',_0x1e5068='',_0x3ee15f=_0x18a2b6+_0x47c16d;for(let _0x511532=0x0,_0x305f8d,_0x4c8e32,_0xfb03a2=0x0;_0x4c8e32=_0x96bf25['charAt'](_0xfb03a2++);~_0x4c8e32&&(_0x305f8d=_0x511532%0x4?_0x305f8d*0x40+_0x4c8e32:_0x4c8e32,_0x511532++%0x4)?_0x18a2b6+=_0x3ee15f['charCodeAt'](_0xfb03a2+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x305f8d>>(-0x2*_0x511532&0x6)):_0x511532:0x0){_0x4c8e32=_0x5c93f6['indexOf'](_0x4c8e32);}for(let _0x311ec3=0x0,_0x181866=_0x18a2b6['length'];_0x311ec3<_0x181866;_0x311ec3++){_0x1e5068+='%'+('00'+_0x18a2b6['charCodeAt'](_0x311ec3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1e5068);};a0_0x96bf['UGlsNH']=_0x47c16d,_0x409cd4=arguments,a0_0x96bf['UDZLsd']=!![];}const _0x1e8ffe=_0x3a4e55[0x0],_0x343023=_0x41c86a+_0x1e8ffe,_0x444b6f=_0x409cd4[_0x343023];if(!_0x444b6f){const _0x1f6f85=function(_0x3370be){this['Jufktq']=_0x3370be,this['CMtxjZ']=[0x1,0x0,0x0],this['zqFCpe']=function(){return'newState';},this['aHFAXD']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['zFMQmi']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x1f6f85['prototype']['JbVSKh']=function(){const _0x3ccc73=new RegExp(this['aHFAXD']+this['zFMQmi']),_0x116332=_0x3ccc73['test'](this['zqFCpe']['toString']())?--this['CMtxjZ'][0x1]:--this['CMtxjZ'][0x0];return this['kyBKtu'](_0x116332);},_0x1f6f85['prototype']['kyBKtu']=function(_0x4b96a0){if(!Boolean(~_0x4b96a0))return _0x4b96a0;return this['YiYtBK'](this['Jufktq']);},_0x1f6f85['prototype']['YiYtBK']=function(_0x67c05d){for(let _0x3f2b71=0x0,_0x1250da=this['CMtxjZ']['length'];_0x3f2b71<_0x1250da;_0x3f2b71++){this['CMtxjZ']['push'](Math['round'](Math['random']())),_0x1250da=this['CMtxjZ']['length'];}return _0x67c05d(this['CMtxjZ'][0x0]);},new _0x1f6f85(a0_0x96bf)['JbVSKh'](),_0x1f6d2d=a0_0x96bf['UGlsNH'](_0x1f6d2d),_0x409cd4[_0x343023]=_0x1f6d2d;}else _0x1f6d2d=_0x444b6f;return _0x1f6d2d;},a0_0x96bf(_0x409cd4,_0x2f9b78);}a0_0x41c86a();import{TagParser}from'../utilities/tagParser.js';export class TagParserService{constructor(_0x27f859){const _0x5a8442=a0_0x96bf;this[_0x5a8442(0x13c)]=_0x27f859;}[a0_0x5ea379(0x179)](_0x28925a){const _0x595d2c=a0_0x5ea379,_0x388f5b={};_0x388f5b[_0x595d2c(0x127)]=_0x595d2c(0x12a),_0x388f5b['HidBx']=function(_0x243385,_0x137261){return _0x243385>_0x137261;},_0x388f5b[_0x595d2c(0x155)]='message',_0x388f5b[_0x595d2c(0x13d)]=function(_0x7fec47,_0x3520a5){return _0x7fec47>_0x3520a5;},_0x388f5b[_0x595d2c(0x177)]=function(_0x347eef,_0x2b82aa){return _0x347eef!==_0x2b82aa;},_0x388f5b[_0x595d2c(0x15d)]='xCYKg',_0x388f5b['QTAVW']=_0x595d2c(0x173);const _0x4bbeeb=_0x388f5b;this[_0x595d2c(0x13c)]['info'](_0x595d2c(0x13e));const _0x4ce0f1={};_0x4ce0f1['recipient']=null,_0x4ce0f1[_0x595d2c(0x17f)]=_0x28925a,_0x4ce0f1[_0x595d2c(0x140)]=[],_0x4ce0f1[_0x595d2c(0x137)]=null,_0x4ce0f1['jobDone']=null;const _0xd29e3e=_0x4ce0f1;try{const _0x113993=TagParser[_0x595d2c(0x151)](_0x28925a,_0x4bbeeb[_0x595d2c(0x127)]);_0x4bbeeb[_0x595d2c(0x172)](_0x113993[_0x595d2c(0x149)],0x0)&&(_0xd29e3e[_0x595d2c(0x154)]=_0x113993[0x0]);const _0x32b61d=TagParser[_0x595d2c(0x14b)](_0x28925a,_0x4bbeeb['BcYfO']);if(_0x4bbeeb[_0x595d2c(0x13d)](_0x32b61d[_0x595d2c(0x149)],0x0)){const _0x6d96a7=_0x32b61d[0x0];_0xd29e3e[_0x595d2c(0x129)]=_0x6d96a7[_0x595d2c(0x12b)]['to'],_0xd29e3e[_0x595d2c(0x17f)]=_0x6d96a7['content'],this[_0x595d2c(0x13c)][_0x595d2c(0x183)]('Message\x20to\x20recipient:\x20'+_0xd29e3e['recipient']);}return this['parseToolCommands'](_0x28925a,_0xd29e3e),this[_0x595d2c(0x167)](_0x28925a,_0xd29e3e),_0xd29e3e;}catch(_0x5117c2){if(_0x4bbeeb[_0x595d2c(0x177)](_0x4bbeeb[_0x595d2c(0x15d)],_0x595d2c(0x175)))return this['logger'][_0x595d2c(0x13b)](_0x4bbeeb[_0x595d2c(0x161)],_0x5117c2),_0xd29e3e;else _0x1dd0aa=_0x52de27;}}[a0_0x5ea379(0x17a)](_0x569b63,_0x278612){const _0x3f560b=a0_0x5ea379,_0x17ae1e={};_0x17ae1e[_0x3f560b(0x158)]=_0x3f560b(0x152),_0x17ae1e[_0x3f560b(0x134)]=_0x3f560b(0x12d),_0x17ae1e[_0x3f560b(0x14e)]=function(_0x47ffd6,_0x534a95){return _0x47ffd6!==_0x534a95;},_0x17ae1e[_0x3f560b(0x145)]=_0x3f560b(0x13a),_0x17ae1e[_0x3f560b(0x16a)]='maiBc',_0x17ae1e[_0x3f560b(0x14c)]=function(_0x1dda58,_0x3708e6){return _0x1dda58===_0x3708e6;},_0x17ae1e[_0x3f560b(0x156)]=_0x3f560b(0x15f);const _0x2c03c1=_0x17ae1e,_0xe4a898=TagParser[_0x3f560b(0x14b)](_0x569b63,_0x2c03c1[_0x3f560b(0x134)]);for(const _0x4f8f59 of _0xe4a898){if(_0x2c03c1['Yeokh'](_0x2c03c1[_0x3f560b(0x145)],_0x2c03c1[_0x3f560b(0x16a)])){const _0x48454f=_0x4f8f59[_0x3f560b(0x17f)],_0xc7a1c7=TagParser[_0x3f560b(0x14b)](_0x48454f,'tool');for(const _0x3f6616 of _0xc7a1c7){const _0xa20b7d=_0x3f6616[_0x3f560b(0x12b)]['id'];if(!_0xa20b7d)continue;const _0x24ab3b=_0x3f6616[_0x3f560b(0x17f)],_0x54006f={};_0x54006f[_0x3f560b(0x13f)]=_0xa20b7d,_0x54006f[_0x3f560b(0x17f)]=_0x24ab3b,_0x54006f[_0x3f560b(0x12e)]=_0x3f6616,_0x278612['toolCommands'][_0x3f560b(0x147)](_0x54006f),this[_0x3f560b(0x13c)][_0x3f560b(0x183)](_0x3f560b(0x135)+_0xa20b7d);}}else{const _0x561494=_0x3620ce[0x0],_0x56ffe9=_0x561494[_0x3f560b(0x12b)][_0x3f560b(0x133)]||_0x3f560b(0x15e),_0x1531da=_0x561494[_0x3f560b(0x17f)],_0x22a2ee=_0x3ea2f9[_0x3f560b(0x151)](_0x1531da,_0x2c03c1[_0x3f560b(0x158)]);_0x4a7280[_0x3f560b(0x137)]={'name':_0x56ffe9,'text':_0x1531da[_0x3f560b(0x160)](/\[option\](.*?)\[\/option\]/gs,'')[_0x3f560b(0x182)](),'options':_0x22a2ee},this['logger'][_0x3f560b(0x183)](_0x3f560b(0x176)+_0x56ffe9+_0x3f560b(0x169)+_0x22a2ee['length']+_0x3f560b(0x153));}}if(_0x2c03c1['GrxOv'](_0xe4a898[_0x3f560b(0x149)],0x0)&&_0x569b63[_0x3f560b(0x16e)](_0x2c03c1[_0x3f560b(0x156)])){if(_0x3f560b(0x178)==='bKzmy'){const _0x1ec1e1=TagParser['query'](_0x569b63,'tool');for(const _0x329c84 of _0x1ec1e1){const _0x430e4e=_0x329c84[_0x3f560b(0x12b)]['id'];if(!_0x430e4e)continue;const _0x556958=_0x329c84['content'],_0x3a5b48={};_0x3a5b48[_0x3f560b(0x13f)]=_0x430e4e,_0x3a5b48[_0x3f560b(0x17f)]=_0x556958,_0x3a5b48[_0x3f560b(0x12e)]=_0x329c84,_0x278612[_0x3f560b(0x140)][_0x3f560b(0x147)](_0x3a5b48),this[_0x3f560b(0x13c)][_0x3f560b(0x183)](_0x3f560b(0x171)+_0x430e4e);}}else{const _0x230418=_0x262791[_0x3f560b(0x132)][_0x3f560b(0x138)]['bind'](_0x2b8fd1),_0x3f3415=_0xa2beb5[_0x511aab],_0x47ab1d=_0x3cbf97[_0x3f3415]||_0x230418;_0x230418[_0x3f560b(0x17d)]=_0x46918c[_0x3f560b(0x146)](_0x2ba566),_0x230418[_0x3f560b(0x128)]=_0x47ab1d['toString'][_0x3f560b(0x146)](_0x47ab1d),_0x5e2b34[_0x3f3415]=_0x230418;}}}[a0_0x5ea379(0x167)](_0x348027,_0x352f00){const _0x3b1093=a0_0x5ea379,_0xbb9ffa={};_0xbb9ffa[_0x3b1093(0x16d)]=function(_0xc0ace3,_0x3a36ca){return _0xc0ace3>_0x3a36ca;},_0xbb9ffa[_0x3b1093(0x139)]='option';const _0x16e4c0=_0xbb9ffa,_0x2d8fd5=TagParser[_0x3b1093(0x14b)](_0x348027,_0x3b1093(0x137));if(_0x16e4c0[_0x3b1093(0x16d)](_0x2d8fd5['length'],0x0)){const _0x185f61=_0x2d8fd5[0x0],_0x44e0b0=_0x185f61[_0x3b1093(0x12b)][_0x3b1093(0x133)]||_0x3b1093(0x15e),_0x3412ae=_0x185f61[_0x3b1093(0x17f)],_0x5e3a05=TagParser[_0x3b1093(0x151)](_0x3412ae,_0x16e4c0[_0x3b1093(0x139)]);_0x352f00['prompt']={'name':_0x44e0b0,'text':_0x3412ae[_0x3b1093(0x160)](/\[option\](.*?)\[\/option\]/gs,'')[_0x3b1093(0x182)](),'options':_0x5e3a05},this[_0x3b1093(0x13c)][_0x3b1093(0x183)]('Extracted\x20prompt:\x20'+_0x44e0b0+'\x20with\x20'+_0x5e3a05['length']+_0x3b1093(0x153));}}}