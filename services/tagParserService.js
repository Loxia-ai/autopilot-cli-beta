const a0_0x2efe65=a0_0x17e1;(function(_0x3f9bae,_0x233fc2){const _0x19c26d=a0_0x17e1,_0xc09516=_0x3f9bae();while(!![]){try{const _0x193706=parseInt(_0x19c26d(0x1b7))/0x1+parseInt(_0x19c26d(0x19e))/0x2+-parseInt(_0x19c26d(0x1a3))/0x3*(-parseInt(_0x19c26d(0x1bd))/0x4)+parseInt(_0x19c26d(0x1a8))/0x5*(-parseInt(_0x19c26d(0x1ae))/0x6)+parseInt(_0x19c26d(0x1a0))/0x7+parseInt(_0x19c26d(0x19c))/0x8*(-parseInt(_0x19c26d(0x1be))/0x9)+parseInt(_0x19c26d(0x1b0))/0xa*(-parseInt(_0x19c26d(0x1bc))/0xb);if(_0x193706===_0x233fc2)break;else _0xc09516['push'](_0xc09516['shift']());}catch(_0xa3bac3){_0xc09516['push'](_0xc09516['shift']());}}}(a0_0x2b7d,0x44f45));import{TagParser}from'../utilities/tagParser.js';export class TagParserService{constructor(_0x1ba69e){const _0x3af78f=a0_0x17e1;this[_0x3af78f(0x1b2)]=_0x1ba69e;}['parseMessage'](_0x5b6af0){const _0x412bbe=a0_0x17e1;this[_0x412bbe(0x1b2)]['info']('Parsing\x20message\x20with\x20TagParser');const _0x356eb7={'recipient':null,'content':_0x5b6af0,'toolCommands':[],'prompt':null,'jobDone':null};try{const _0x460f05=TagParser['extractContent'](_0x5b6af0,_0x412bbe(0x1af));_0x460f05[_0x412bbe(0x1ac)]>0x0&&(_0x356eb7[_0x412bbe(0x1ba)]=_0x460f05[0x0]);const _0x21b53a=TagParser[_0x412bbe(0x1ab)](_0x5b6af0,'message');if(_0x21b53a[_0x412bbe(0x1ac)]>0x0){const _0x1a08e3=_0x21b53a[0x0];_0x356eb7['recipient']=_0x1a08e3[_0x412bbe(0x1a2)]['to'],_0x356eb7['content']=_0x1a08e3['content'],this[_0x412bbe(0x1b2)][_0x412bbe(0x1aa)]('Message\x20to\x20recipient:\x20'+_0x356eb7['recipient']);}return this['parseToolCommands'](_0x5b6af0,_0x356eb7),this['parsePrompt'](_0x5b6af0,_0x356eb7),_0x356eb7;}catch(_0x221a6d){return this['logger'][_0x412bbe(0x1b6)](_0x412bbe(0x19d),_0x221a6d),_0x356eb7;}}[a0_0x2efe65(0x1a4)](_0x2057a5,_0x2cb31f){const _0x452c89=a0_0x2efe65,_0x10e69d=TagParser['query'](_0x2057a5,'tools-commands');for(const _0x37acf6 of _0x10e69d){const _0x5b4ecb=_0x37acf6[_0x452c89(0x19f)],_0x76de6c=TagParser[_0x452c89(0x1ab)](_0x5b4ecb,'tool');for(const _0x557d07 of _0x76de6c){const _0x103f7f=_0x557d07[_0x452c89(0x1a2)]['id'];if(!_0x103f7f)continue;const _0x1a9994=_0x557d07['content'];_0x2cb31f['toolCommands']['push']({'toolId':_0x103f7f,'content':_0x1a9994,'rawTag':_0x557d07}),this[_0x452c89(0x1b2)][_0x452c89(0x1aa)]('Extracted\x20tool\x20command:\x20'+_0x103f7f);}}if(_0x10e69d[_0x452c89(0x1ac)]===0x0&&_0x2057a5[_0x452c89(0x1a5)](_0x452c89(0x1a6))){const _0x372702=TagParser[_0x452c89(0x1ab)](_0x2057a5,'tool');for(const _0xeaa353 of _0x372702){const _0x39c069=_0xeaa353['attributes']['id'];if(!_0x39c069)continue;const _0x371da8=_0xeaa353[_0x452c89(0x19f)];_0x2cb31f['toolCommands'][_0x452c89(0x1a1)]({'toolId':_0x39c069,'content':_0x371da8,'rawTag':_0xeaa353}),this['logger'][_0x452c89(0x1aa)](_0x452c89(0x1bb)+_0x39c069);}}}[a0_0x2efe65(0x1b3)](_0x1900ac,_0x5887b4){const _0x21e7a4=a0_0x2efe65,_0x29e6be=TagParser['query'](_0x1900ac,_0x21e7a4(0x1a7));if(_0x29e6be[_0x21e7a4(0x1ac)]>0x0){const _0x13410a=_0x29e6be[0x0],_0x15f513=_0x13410a[_0x21e7a4(0x1a2)]['name']||_0x21e7a4(0x1b9),_0x1d034e=_0x13410a[_0x21e7a4(0x19f)],_0x10c558=TagParser[_0x21e7a4(0x1b8)](_0x1d034e,_0x21e7a4(0x1b1));_0x5887b4[_0x21e7a4(0x1a7)]={'name':_0x15f513,'text':_0x1d034e[_0x21e7a4(0x1b5)](/\[option\](.*?)\[\/option\]/gs,'')['trim'](),'options':_0x10c558},this[_0x21e7a4(0x1b2)]['info'](_0x21e7a4(0x1a9)+_0x15f513+_0x21e7a4(0x1ad)+_0x10c558['length']+_0x21e7a4(0x1b4));}}}function a0_0x17e1(_0x331c75,_0x3cf19c){const _0x2b7dd9=a0_0x2b7d();return a0_0x17e1=function(_0x17e183,_0x19afa9){_0x17e183=_0x17e183-0x19c;let _0x5272b7=_0x2b7dd9[_0x17e183];if(a0_0x17e1['UaNxnM']===undefined){var _0x4fcb32=function(_0x1ba69e){const _0x5b6af0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x356eb7='',_0x460f05='';for(let _0x21b53a=0x0,_0x1a08e3,_0x221a6d,_0x2057a5=0x0;_0x221a6d=_0x1ba69e['charAt'](_0x2057a5++);~_0x221a6d&&(_0x1a08e3=_0x21b53a%0x4?_0x1a08e3*0x40+_0x221a6d:_0x221a6d,_0x21b53a++%0x4)?_0x356eb7+=String['fromCharCode'](0xff&_0x1a08e3>>(-0x2*_0x21b53a&0x6)):0x0){_0x221a6d=_0x5b6af0['indexOf'](_0x221a6d);}for(let _0x2cb31f=0x0,_0x10e69d=_0x356eb7['length'];_0x2cb31f<_0x10e69d;_0x2cb31f++){_0x460f05+='%'+('00'+_0x356eb7['charCodeAt'](_0x2cb31f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x460f05);};a0_0x17e1['wTCGQK']=_0x4fcb32,_0x331c75=arguments,a0_0x17e1['UaNxnM']=!![];}const _0x4089ff=_0x2b7dd9[0x0],_0x5b453d=_0x17e183+_0x4089ff,_0x47dbbc=_0x331c75[_0x5b453d];return!_0x47dbbc?(_0x5272b7=a0_0x17e1['wTCGQK'](_0x5272b7),_0x331c75[_0x5b453d]=_0x5272b7):_0x5272b7=_0x47dbbc,_0x5272b7;},a0_0x17e1(_0x331c75,_0x3cf19c);}function a0_0x2b7d(){const _0x59e38c=['mtbJuKfKuNq','B3b0Aw9U','Bg9Nz2vY','CgfYC2vqCM9TChq','ig9WDgLVBNm','CMvWBgfJzq','zxjYB3i','ndyWmdiWzMPnC1Lk','zxH0CMfJDenVBNrLBNq','vxnLCIbqCM9TChq','AM9Irg9Uzq','rxH0CMfJDgvKigrPCMvJDcb0B29SignVBw1HBMq6ia','mte4ndC4mdnIEMvUBxq','mJe0mJKYmg9xBeHpDa','mZGYnuzbugX1uG','ndG1nNvsq1vIta','rxjYB3iGCgfYC2LUzYbTzxnZywDLihDPDgGGvgfNugfYC2vYoG','ndiXmZuWC21WzxjV','y29UDgvUDa','mZu4mJC0mgHJs21eza','ChvZAa','yxr0CMLIDxrLCW','m2zLqur6CG','CgfYC2vuB29Sq29TBwfUzhm','Aw5JBhvKzxm','w3rVB2WGAwq9','ChjVBxb0','ntCYnvHzvMLJAa','rxH0CMfJDgvKihbYB21WDdOG','Aw5MBW','CxvLCNK','BgvUz3rO','ihDPDgGG','nti4BK5TsvzJ','AM9IlwrVBMu'];a0_0x2b7d=function(){return _0x59e38c;};return a0_0x2b7d();}