function a0_0x32b9(){const _0x5b8bb9=['B3b0Aw9U','BMfTzq','ode1mdm5B1frzxjx','DhjPBq','mte1nJGWnM9lrKDdva','Bg9Nz2vY','rxH0CMfJDgvKihrVB2WGy29TBwfUzdOG','mJeWotfnvKHks0u','nZbuzvHkBLq','Dg9VBenVBw1HBMrZ','twvZC2fNzsb0BYbYzwnPCgLLBNq6ia','AM9IlwrVBMu','oti3ovnyr3DIDW','CMvJAxbPzw50','y29UDgvUDa','w3rVB2WGAwq9','nda4q3nrz0vo','mtGWnZmYB2LjDKPr','BgvUz3rO','rxH0CMfJDgvKihbYB21WDdOG','CxvLCNK','ugfYC2LUzYbTzxnZywDLihDPDgGGvgfNugfYC2vY','ody4otuWvwnHDhHP','ntbgsMzVANq','CgfYC2vnzxnZywDL','ChjVBxb0','zxjYB3i','yxr0CMLIDxrLCW','Dg9VBhmTy29TBwfUzhm','Dg9VBa','vxnLCIbqCM9TChq','ntqZmZa2nwPuBM5jqW','Aw5MBW','oda4CNjirgDU'];a0_0x32b9=function(){return _0x5b8bb9;};return a0_0x32b9();}const a0_0x33891b=a0_0x2eb3;(function(_0x5c5a1b,_0x499a1a){const _0x281a99=a0_0x2eb3,_0x3b9289=_0x5c5a1b();while(!![]){try{const _0xfba9ea=parseInt(_0x281a99(0x13e))/0x1+-parseInt(_0x281a99(0x140))/0x2+parseInt(_0x281a99(0x148))/0x3*(parseInt(_0x281a99(0x14c))/0x4)+-parseInt(_0x281a99(0x144))/0x5*(parseInt(_0x281a99(0x14d))/0x6)+parseInt(_0x281a99(0x143))/0x7*(parseInt(_0x281a99(0x13b))/0x8)+-parseInt(_0x281a99(0x130))/0x9*(-parseInt(_0x281a99(0x131))/0xa)+-parseInt(_0x281a99(0x139))/0xb;if(_0xfba9ea===_0x499a1a)break;else _0x3b9289['push'](_0x3b9289['shift']());}catch(_0xd41af7){_0x3b9289['push'](_0x3b9289['shift']());}}}(a0_0x32b9,0x6768a));function a0_0x2eb3(_0x278459,_0x123ce8){const _0x32b987=a0_0x32b9();return a0_0x2eb3=function(_0x2eb3a5,_0x5a8a0c){_0x2eb3a5=_0x2eb3a5-0x12f;let _0x2dad47=_0x32b987[_0x2eb3a5];if(a0_0x2eb3['aatHjj']===undefined){var _0x59e7bc=function(_0x36be7a){const _0x185c40='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x421da3='',_0x153463='';for(let _0x413f98=0x0,_0x5449de,_0x1a9563,_0x43ba42=0x0;_0x1a9563=_0x36be7a['charAt'](_0x43ba42++);~_0x1a9563&&(_0x5449de=_0x413f98%0x4?_0x5449de*0x40+_0x1a9563:_0x1a9563,_0x413f98++%0x4)?_0x421da3+=String['fromCharCode'](0xff&_0x5449de>>(-0x2*_0x413f98&0x6)):0x0){_0x1a9563=_0x185c40['indexOf'](_0x1a9563);}for(let _0x2e92d3=0x0,_0x3a3a22=_0x421da3['length'];_0x2e92d3<_0x3a3a22;_0x2e92d3++){_0x153463+='%'+('00'+_0x421da3['charCodeAt'](_0x2e92d3)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x153463);};a0_0x2eb3['CEpStb']=_0x59e7bc,_0x278459=arguments,a0_0x2eb3['aatHjj']=!![];}const _0x7894e7=_0x32b987[0x0],_0x3d0505=_0x2eb3a5+_0x7894e7,_0xdf4d58=_0x278459[_0x3d0505];return!_0xdf4d58?(_0x2dad47=a0_0x2eb3['CEpStb'](_0x2dad47),_0x278459[_0x3d0505]=_0x2dad47):_0x2dad47=_0xdf4d58,_0x2dad47;},a0_0x2eb3(_0x278459,_0x123ce8);}import{TagParser}from'../utilities/tagParser.js';export class TagParserService{constructor(_0x36be7a){this['logger']=_0x36be7a;}[a0_0x33891b(0x132)](_0x185c40){const _0x15a184=a0_0x33891b;this[_0x15a184(0x141)][_0x15a184(0x13a)](_0x15a184(0x12f));const _0x421da3={'recipient':null,'content':_0x185c40,'toolCommands':[],'prompt':null,'jobDone':null};try{const _0x153463=TagParser['extractContent'](_0x185c40,_0x15a184(0x147));_0x153463['length']>0x0&&(_0x421da3['jobDone']=_0x153463[0x0]);const _0x413f98=TagParser['query'](_0x185c40,'message');if(_0x413f98[_0x15a184(0x14e)]>0x0){const _0x5449de=_0x413f98[0x0];_0x421da3[_0x15a184(0x149)]=_0x5449de[_0x15a184(0x135)]['to'],_0x421da3[_0x15a184(0x14a)]=_0x5449de[_0x15a184(0x14a)],this['logger'][_0x15a184(0x13a)](_0x15a184(0x146)+_0x421da3[_0x15a184(0x149)]);}return this['parseToolCommands'](_0x185c40,_0x421da3),this['parsePrompt'](_0x185c40,_0x421da3),_0x421da3;}catch(_0x1a9563){return this['logger'][_0x15a184(0x134)]('Error\x20parsing\x20message\x20with\x20TagParser:',_0x1a9563),_0x421da3;}}['parseToolCommands'](_0x43ba42,_0x2e92d3){const _0xb2dae1=a0_0x33891b,_0x3a3a22=TagParser[_0xb2dae1(0x150)](_0x43ba42,_0xb2dae1(0x136));for(const _0x3db217 of _0x3a3a22){const _0x11ef83=_0x3db217[_0xb2dae1(0x14a)],_0x363816=TagParser[_0xb2dae1(0x150)](_0x11ef83,_0xb2dae1(0x137));for(const _0x3caecf of _0x363816){const _0x1c672b=_0x3caecf[_0xb2dae1(0x135)]['id'];if(!_0x1c672b)continue;const _0x9c4272=_0x3caecf['content'];_0x2e92d3[_0xb2dae1(0x145)]['push']({'toolId':_0x1c672b,'content':_0x9c4272,'rawTag':_0x3caecf}),this[_0xb2dae1(0x141)][_0xb2dae1(0x13a)](_0xb2dae1(0x142)+_0x1c672b);}}if(_0x3a3a22['length']===0x0&&_0x43ba42['includes'](_0xb2dae1(0x14b))){const _0x31d02b=TagParser['query'](_0x43ba42,_0xb2dae1(0x137));for(const _0xa87871 of _0x31d02b){const _0x2286fa=_0xa87871[_0xb2dae1(0x135)]['id'];if(!_0x2286fa)continue;const _0xd0267d=_0xa87871[_0xb2dae1(0x14a)];_0x2e92d3['toolCommands']['push']({'toolId':_0x2286fa,'content':_0xd0267d,'rawTag':_0xa87871}),this['logger'][_0xb2dae1(0x13a)]('Extracted\x20direct\x20tool\x20command:\x20'+_0x2286fa);}}}['parsePrompt'](_0x591dc5,_0x3be2ec){const _0x1ceedf=a0_0x33891b,_0x315e07=TagParser['query'](_0x591dc5,_0x1ceedf(0x133));if(_0x315e07[_0x1ceedf(0x14e)]>0x0){const _0x418ab6=_0x315e07[0x0],_0x9967b=_0x418ab6['attributes'][_0x1ceedf(0x13d)]||_0x1ceedf(0x138),_0x2ae01d=_0x418ab6['content'],_0x3f0476=TagParser['extractContent'](_0x2ae01d,_0x1ceedf(0x13c));_0x3be2ec[_0x1ceedf(0x133)]={'name':_0x9967b,'text':_0x2ae01d['replace'](/\[option\](.*?)\[\/option\]/gs,'')[_0x1ceedf(0x13f)](),'options':_0x3f0476},this[_0x1ceedf(0x141)][_0x1ceedf(0x13a)](_0x1ceedf(0x14f)+_0x9967b+'\x20with\x20'+_0x3f0476[_0x1ceedf(0x14e)]+'\x20options');}}}