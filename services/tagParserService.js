const a0_0x29855b=a0_0xbd42;function a0_0x55b3(){const _0x335002=['CMvWBgfJzq','Dg9VBa','mZm1nLHwywzAtG','ihDPDgGG','kcGOlISPkYKRksSK','CMf3vgfN','rxH0CMfJDgvKigrPCMvJDcb0B29SignVBw1HBMq6ia','v2PlD2q','sLf3Cxq','mJqYnZeWmLrrB05cuW','zergDwm','AM9Irg9Uzq','mtu5otC3m2PJzgzfBG','CePouMu','zxjYB3i','y01yD24','DfH3t24','u2Xct0C','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','ChjVDg90ExbL','shHXCNy','Bg9N','rxH0CMfJDgvKihrVB2WGy29TBwfUzdOG','ChjVBxb0','vu5mv1C','nJa1AMjmAwPQ','DLnxq3C','mJbZA25fA2S','C0vStM4','ANf2DuS','sePbugy','CgfYC2vnzxnZywDL','zKXMr3C','Dg9tDhjPBMC','ntm2otGWoffZz3vQyG','yxr0CMLIDxrLCW','mtzMC0HHyMW','werbsvi','AxjHCe8','x19WCM90B19F','v1Lgswq','y29UC3rYDwn0B3i','y29UDgvUDa','CgfYC2vuB29Sq29TBwfUzhm','BwvZC2fNzq','BgvUz3rO','CgfYC2vqCM9TChq','yxbWBhK','CMv0DxjUicHMDw5JDgLVBIGPia','yKXls2y','zxH0CMfJDenVBNrLBNq','CgDcCfq','wxjKDfe','mZCWnJeWmdjxzwHSsMu','C2PZt28','DhjHy2u','BKTHzeG','C2vHCMnO','ugfYC2LUzYbTzxnZywDLihDPDgGGvgfNugfYC2vY','yMLUza','CxvLCNK','CMvbtee','vhnbtuq','D0v3BLe','muPNwwXKzq','wfPQD0C','y29UC29Szq','Bg9Nz2vY','zxHJzxb0Aw9U','zwj5A2C','B09hsK0','A0jbweG','vML6A3G','rMvYrxa','twvZC2fNzsb0BYbYzwnPCgLLBNq6ia','ChvZAa','ndi3nJGYs3ziuhHU','wM5XAwe','tLDQDMW','Aw5MBW','zvPqD1K','ig9WDgLVBNm','rxH0CMfJDgvKihbYB21WDdOG','vMjrwhu','mZaZnJuXoxHcC1D0wa','Dg9VBenVBw1HBMrZ','BwLXrwe','D2fYBG','AM9IlwrVBMu','CMvJAxbPzw50','v0TXyNG','CNjcy0G','y1Dtvxm','r2Psz3G','uwPVDKe','Dg9VBhmTy29TBwfUzhm','B1niExq','t3Dmt2G','ruzNwwK','DMrhwfe','vhfUu1u','Afrnzxe','s0LbwuW','uunktxm','BMfTzq','vfzIzwm','DhjPBq'];a0_0x55b3=function(){return _0x335002;};return a0_0x55b3();}(function(_0x1b91bb,_0x6e6477){const _0x14cb38=a0_0xbd42,_0x50f2a6=_0x1b91bb();while(!![]){try{const _0x5a394f=parseInt(_0x14cb38(0x124))/0x1*(parseInt(_0x14cb38(0x130))/0x2)+-parseInt(_0x14cb38(0xed))/0x3+-parseInt(_0x14cb38(0xe6))/0x4*(parseInt(_0x14cb38(0xfd))/0x5)+-parseInt(_0x14cb38(0x106))/0x6+parseInt(_0x14cb38(0xf0))/0x7*(-parseInt(_0x14cb38(0x108))/0x8)+parseInt(_0x14cb38(0x138))/0x9*(-parseInt(_0x14cb38(0xff))/0xa)+parseInt(_0x14cb38(0x119))/0xb;if(_0x5a394f===_0x6e6477)break;else _0x50f2a6['push'](_0x50f2a6['shift']());}catch(_0x3d0556){_0x50f2a6['push'](_0x50f2a6['shift']());}}}(a0_0x55b3,0x9da0a));const a0_0x438fe6=(function(){const _0xa30abd=a0_0xbd42,_0x391f1a={};_0x391f1a[_0xa30abd(0xde)]=function(_0x150ad7,_0x8ffc5d){return _0x150ad7!==_0x8ffc5d;};const _0x39ecd3=_0x391f1a;let _0x1dff2b=!![];return function(_0x10eeb8,_0x53715a){const _0x3288ee={'wDduf':function(_0x162343,_0x5aecd4){const _0x307fe6=a0_0xbd42;return _0x39ecd3[_0x307fe6(0xde)](_0x162343,_0x5aecd4);}},_0x4c8a6e=_0x1dff2b?function(){const _0x17417b=a0_0xbd42;if(_0x3288ee['wDduf'](_0x17417b(0xec),'HheNY')){if(_0x53715a){const _0x3d639f=_0x53715a['apply'](_0x10eeb8,arguments);return _0x53715a=null,_0x3d639f;}}else{const _0x3fbafd=_0x313dd6?function(){if(_0x528f94){const _0x3e9160=_0x4ca702['apply'](_0x532928,arguments);return _0x14cc42=null,_0x3e9160;}}:function(){};return _0x1e94f3=![],_0x3fbafd;}}:function(){};return _0x1dff2b=![],_0x4c8a6e;};}()),a0_0x562614=a0_0x438fe6(this,function(){const _0x287c0f=a0_0xbd42,_0x11fb57={};_0x11fb57[_0x287c0f(0x121)]=_0x287c0f(0xe8);const _0x46149e=_0x11fb57;return a0_0x562614['toString']()['search'](_0x46149e[_0x287c0f(0x121)])['toString']()['constructor'](a0_0x562614)[_0x287c0f(0x11d)](_0x46149e[_0x287c0f(0x121)]);});a0_0x562614();const a0_0x49493f=(function(){const _0x5a0eb7=a0_0xbd42,_0x3f7542={};_0x3f7542[_0x5a0eb7(0x131)]='Error\x20parsing\x20message\x20with\x20TagParser:',_0x3f7542[_0x5a0eb7(0x12d)]=function(_0x510ab4,_0x380be2){return _0x510ab4!==_0x380be2;},_0x3f7542[_0x5a0eb7(0xd3)]=_0x5a0eb7(0xd6),_0x3f7542[_0x5a0eb7(0xf1)]=function(_0x322490,_0x15e5bf){return _0x322490!==_0x15e5bf;},_0x3f7542['Hxqrv']=_0x5a0eb7(0x123);const _0x438882=_0x3f7542;let _0x2fbf20=!![];return function(_0x100876,_0x208d71){const _0x319bbc=_0x5a0eb7,_0x162985={'vSWCw':function(_0x30b0f3,_0x4502f1){const _0x3f9359=a0_0xbd42;return _0x438882[_0x3f9359(0x12d)](_0x30b0f3,_0x4502f1);},'nKadH':_0x438882[_0x319bbc(0xd3)]};if(_0x438882[_0x319bbc(0xf1)](_0x438882[_0x319bbc(0xf8)],_0x319bbc(0x115))){const _0x236963=_0x2fbf20?function(){const _0x11e8b=_0x319bbc;if(_0x208d71){if(_0x162985[_0x11e8b(0xfe)](_0x162985[_0x11e8b(0x11c)],_0x162985[_0x11e8b(0x11c)])){const _0x3bcee6=_0x2cfff9[_0x11e8b(0x113)](_0x291cc1,arguments);return _0x570d1b=null,_0x3bcee6;}else{const _0x2a8159=_0x208d71[_0x11e8b(0x113)](_0x100876,arguments);return _0x208d71=null,_0x2a8159;}}}:function(){};return _0x2fbf20=![],_0x236963;}else return this[_0x319bbc(0x127)][_0x319bbc(0xf2)](_0x438882[_0x319bbc(0x131)],_0x9222fe),_0x2b87a1;};}()),a0_0x45cf25=a0_0x49493f(this,function(){const _0x2abce5=a0_0xbd42,_0x4a9aaf={'VbQXu':function(_0x7edd28,_0x1ca475){return _0x7edd28+_0x1ca475;},'TVbec':_0x2abce5(0x114),'NWjvl':_0x2abce5(0xf6),'EFgYi':function(_0xe21cfd){return _0xe21cfd();},'lvYLJ':_0x2abce5(0xf9),'LyqWc':_0x2abce5(0x13b),'DChrG':_0x2abce5(0xf2),'EqdQC':'table','sElNn':_0x2abce5(0x11b),'eZPwY':function(_0x9d80ff,_0x23170a){return _0x9d80ff<_0x23170a;}},_0x254d42=function(){const _0x62d8b8=_0x2abce5;let _0x4ec5ea;try{_0x4ec5ea=Function(_0x4a9aaf[_0x62d8b8(0x137)](_0x4a9aaf[_0x62d8b8(0x137)](_0x4a9aaf[_0x62d8b8(0xe2)],_0x4a9aaf[_0x62d8b8(0x132)]),');'))();}catch(_0x69eee5){_0x4ec5ea=window;}return _0x4ec5ea;},_0x1957ce=_0x4a9aaf[_0x2abce5(0xdb)](_0x254d42),_0xf7c7ee=_0x1957ce[_0x2abce5(0x126)]=_0x1957ce[_0x2abce5(0x126)]||{},_0x4dd7f9=[_0x4a9aaf['lvYLJ'],_0x4a9aaf['LyqWc'],_0x2abce5(0x133),_0x4a9aaf['DChrG'],_0x2abce5(0x128),_0x4a9aaf['EqdQC'],_0x4a9aaf[_0x2abce5(0x100)]];for(let _0x551fd2=0x0;_0x4a9aaf[_0x2abce5(0x134)](_0x551fd2,_0x4dd7f9[_0x2abce5(0x111)]);_0x551fd2++){const _0x4429c3=a0_0x49493f[_0x2abce5(0x10d)][_0x2abce5(0xf7)][_0x2abce5(0x11f)](a0_0x49493f),_0x25c1f3=_0x4dd7f9[_0x551fd2],_0x54a0e4=_0xf7c7ee[_0x25c1f3]||_0x4429c3;_0x4429c3[_0x2abce5(0x10b)]=a0_0x49493f[_0x2abce5(0x11f)](a0_0x49493f),_0x4429c3['toString']=_0x54a0e4[_0x2abce5(0x105)]['bind'](_0x54a0e4),_0xf7c7ee[_0x25c1f3]=_0x4429c3;}});function a0_0xbd42(_0x38d9a7,_0x4c1854){const _0x594c91=a0_0x55b3();return a0_0xbd42=function(_0x45cf25,_0x49493f){_0x45cf25=_0x45cf25-0xd2;let _0x4414cd=_0x594c91[_0x45cf25];if(a0_0xbd42['TZBMPW']===undefined){var _0x59a717=function(_0xbd4280){const _0x27cb66='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4ea8eb='',_0xd95567='',_0x3125be=_0x4ea8eb+_0x59a717;for(let _0x4373f6=0x0,_0x3c2f77,_0x1bc4eb,_0x330fd8=0x0;_0x1bc4eb=_0xbd4280['charAt'](_0x330fd8++);~_0x1bc4eb&&(_0x3c2f77=_0x4373f6%0x4?_0x3c2f77*0x40+_0x1bc4eb:_0x1bc4eb,_0x4373f6++%0x4)?_0x4ea8eb+=_0x3125be['charCodeAt'](_0x330fd8+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x3c2f77>>(-0x2*_0x4373f6&0x6)):_0x4373f6:0x0){_0x1bc4eb=_0x27cb66['indexOf'](_0x1bc4eb);}for(let _0x56b9a8=0x0,_0x5e0b77=_0x4ea8eb['length'];_0x56b9a8<_0x5e0b77;_0x56b9a8++){_0xd95567+='%'+('00'+_0x4ea8eb['charCodeAt'](_0x56b9a8)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xd95567);};a0_0xbd42['vdBpLu']=_0x59a717,_0x38d9a7=arguments,a0_0xbd42['TZBMPW']=!![];}const _0x562614=_0x594c91[0x0],_0x438fe6=_0x45cf25+_0x562614,_0x55b320=_0x38d9a7[_0x438fe6];if(!_0x55b320){const _0xb72ec2=function(_0x368519){this['YNeaaY']=_0x368519,this['WbiDOK']=[0x1,0x0,0x0],this['hclBqo']=function(){return'newState';},this['lByWJN']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['grHyVM']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0xb72ec2['prototype']['CrSuOb']=function(){const _0x3be67a=new RegExp(this['lByWJN']+this['grHyVM']),_0x590a21=_0x3be67a['test'](this['hclBqo']['toString']())?--this['WbiDOK'][0x1]:--this['WbiDOK'][0x0];return this['ZcyOtM'](_0x590a21);},_0xb72ec2['prototype']['ZcyOtM']=function(_0x31347b){if(!Boolean(~_0x31347b))return _0x31347b;return this['kbxkoj'](this['YNeaaY']);},_0xb72ec2['prototype']['kbxkoj']=function(_0x43083b){for(let _0xf262d8=0x0,_0x5daffd=this['WbiDOK']['length'];_0xf262d8<_0x5daffd;_0xf262d8++){this['WbiDOK']['push'](Math['round'](Math['random']())),_0x5daffd=this['WbiDOK']['length'];}return _0x43083b(this['WbiDOK'][0x0]);},new _0xb72ec2(a0_0xbd42)['CrSuOb'](),_0x4414cd=a0_0xbd42['vdBpLu'](_0x4414cd),_0x38d9a7[_0x438fe6]=_0x4414cd;}else _0x4414cd=_0x55b320;return _0x4414cd;},a0_0xbd42(_0x38d9a7,_0x4c1854);}a0_0x45cf25();import{TagParser}from'../utilities/tagParser.js';export class TagParserService{constructor(_0x1e39da){const _0x4ee075=a0_0xbd42;this[_0x4ee075(0x127)]=_0x1e39da;}[a0_0x29855b(0x103)](_0x46e224){const _0x5088c1=a0_0x29855b,_0x23777b={'WYFId':function(_0xada61b,_0x3bfa55){return _0xada61b(_0x3bfa55);},'fLfGw':function(_0x122a8d,_0x19efdd){return _0x122a8d+_0x19efdd;},'oSHyt':function(_0x30da1e,_0x4930fc){return _0x30da1e+_0x4930fc;},'TCvNm':_0x5088c1(0x114),'KIAYL':_0x5088c1(0xf6),'WjKwd':_0x5088c1(0x13c),'kBAXH':function(_0x117944,_0x69ea4e){return _0x117944>_0x69ea4e;},'miqEa':_0x5088c1(0x110),'eYZqI':function(_0x4b193a,_0x28c814){return _0x4b193a===_0x28c814;},'tXwOn':_0x5088c1(0xf5),'TqnSU':_0x5088c1(0x122),'OwLOh':_0x5088c1(0xf3),'QjovA':'Error\x20parsing\x20message\x20with\x20TagParser:'};this['logger'][_0x5088c1(0x133)](_0x5088c1(0x11e));const _0x4d619f={};_0x4d619f[_0x5088c1(0xd2)]=null,_0x4d619f['content']=_0x46e224,_0x4d619f[_0x5088c1(0x139)]=[],_0x4d619f[_0x5088c1(0xfb)]=null,_0x4d619f[_0x5088c1(0xef)]=null;const _0x48fad4=_0x4d619f;try{const _0x5525c9=TagParser['extractContent'](_0x46e224,_0x23777b[_0x5088c1(0xeb)]);_0x23777b[_0x5088c1(0x12b)](_0x5525c9[_0x5088c1(0x111)],0x0)&&(_0x48fad4['jobDone']=_0x5525c9[0x0]);const _0x3ba2c1=TagParser['query'](_0x46e224,_0x23777b[_0x5088c1(0x13a)]);if(_0x23777b[_0x5088c1(0x12b)](_0x3ba2c1['length'],0x0)){if(_0x23777b['eYZqI'](_0x23777b[_0x5088c1(0xf4)],_0x23777b[_0x5088c1(0xdd)])){const _0x3dd148=_0x103cfe[0x0];_0xb4396f['recipient']=_0x3dd148[_0x5088c1(0x107)]['to'],_0x31f13e[_0x5088c1(0x10e)]=_0x3dd148[_0x5088c1(0x10e)],this[_0x5088c1(0x127)]['info'](_0x5088c1(0x12e)+_0x53656e['recipient']);}else{const _0x1f6722=_0x3ba2c1[0x0];_0x48fad4[_0x5088c1(0xd2)]=_0x1f6722['attributes']['to'],_0x48fad4[_0x5088c1(0x10e)]=_0x1f6722[_0x5088c1(0x10e)],this[_0x5088c1(0x127)][_0x5088c1(0x133)](_0x5088c1(0x12e)+_0x48fad4[_0x5088c1(0xd2)]);}}return this[_0x5088c1(0x10f)](_0x46e224,_0x48fad4),this['parsePrompt'](_0x46e224,_0x48fad4),_0x48fad4;}catch(_0x4c7b91){if(_0x5088c1(0xd4)!==_0x23777b[_0x5088c1(0xda)])return this[_0x5088c1(0x127)][_0x5088c1(0xf2)](_0x23777b[_0x5088c1(0xd7)],_0x4c7b91),_0x48fad4;else{let _0x261def;try{_0x261def=tzlDPK[_0x5088c1(0x10c)](_0x2f9758,tzlDPK[_0x5088c1(0x104)](tzlDPK[_0x5088c1(0xd9)](tzlDPK['TCvNm'],tzlDPK[_0x5088c1(0xdf)]),');'))();}catch(_0xd40400){_0x261def=_0x292a21;}return _0x261def;}}}[a0_0x29855b(0x10f)](_0x1b65fe,_0x1a348f){const _0x123f64=a0_0x29855b,_0x3971b1={};_0x3971b1[_0x123f64(0x125)]=_0x123f64(0xd8),_0x3971b1[_0x123f64(0x118)]='tool',_0x3971b1['cYWul']=function(_0x1cdf5d,_0x31dd29){return _0x1cdf5d===_0x31dd29;},_0x3971b1['vdGXQ']='[tool\x20id=',_0x3971b1[_0x123f64(0x10a)]='ysiHO',_0x3971b1['jqvuK']=_0x123f64(0x117);const _0x529340=_0x3971b1,_0x56e0b6=TagParser[_0x123f64(0x120)](_0x1b65fe,_0x529340['XZjwG']);for(const _0x1ef31e of _0x56e0b6){const _0x105b43=_0x1ef31e[_0x123f64(0x10e)],_0xbd600c=TagParser['query'](_0x105b43,_0x529340[_0x123f64(0x118)]);for(const _0x3ed377 of _0xbd600c){const _0x5150d2=_0x3ed377[_0x123f64(0x107)]['id'];if(!_0x5150d2)continue;const _0x1e0481=_0x3ed377[_0x123f64(0x10e)],_0x4c9c45={};_0x4c9c45['toolId']=_0x5150d2,_0x4c9c45[_0x123f64(0x10e)]=_0x1e0481,_0x4c9c45[_0x123f64(0xe9)]=_0x3ed377,_0x1a348f[_0x123f64(0x139)][_0x123f64(0x12f)](_0x4c9c45),this[_0x123f64(0x127)][_0x123f64(0x133)](_0x123f64(0xfa)+_0x5150d2);}}if(_0x529340['cYWul'](_0x56e0b6['length'],0x0)&&_0x1b65fe['includes'](_0x529340[_0x123f64(0xdc)])){if(_0x529340[_0x123f64(0x10a)]===_0x529340[_0x123f64(0x101)])this['logger']=_0x36e805;else{const _0x2a607b=TagParser[_0x123f64(0x120)](_0x1b65fe,_0x123f64(0xe5));for(const _0x6121fa of _0x2a607b){const _0x4cc4b1=_0x6121fa[_0x123f64(0x107)]['id'];if(!_0x4cc4b1)continue;const _0x59facb=_0x6121fa[_0x123f64(0x10e)],_0x4b36c3={};_0x4b36c3['toolId']=_0x4cc4b1,_0x4b36c3['content']=_0x59facb,_0x4b36c3['rawTag']=_0x6121fa,_0x1a348f[_0x123f64(0x139)]['push'](_0x4b36c3),this[_0x123f64(0x127)][_0x123f64(0x133)](_0x123f64(0xea)+_0x4cc4b1);}}}}[a0_0x29855b(0x112)](_0x36c197,_0x21fce2){const _0x1cb5d8=a0_0x29855b,_0x13b349={'UNLWW':function(_0x48b546,_0x11c83a){return _0x48b546(_0x11c83a);},'Vizkx':function(_0x1efeb1,_0x2bd10a){return _0x1efeb1+_0x2bd10a;},'ebykg':function(_0x582da5,_0xa3ba77){return _0x582da5+_0xa3ba77;},'cWSUs':_0x1cb5d8(0x114),'HJAPf':'{}.constructor(\x22return\x20this\x22)(\x20)','oOGJM':function(_0x1f7a04,_0x1d69b0){return _0x1f7a04>_0x1d69b0;},'MDnrM':_0x1cb5d8(0x11a),'dDFuc':_0x1cb5d8(0x109),'QCJMs':'option'},_0x2c274c=TagParser['query'](_0x36c197,_0x1cb5d8(0xfb));if(_0x13b349[_0x1cb5d8(0x12a)](_0x2c274c['length'],0x0)){if(_0x13b349['MDnrM']!==_0x13b349[_0x1cb5d8(0xee)]){const _0x2c3926=_0x2c274c[0x0],_0xcfb819=_0x2c3926[_0x1cb5d8(0x107)][_0x1cb5d8(0xe1)]||'User\x20Prompt',_0x544cb2=_0x2c3926[_0x1cb5d8(0x10e)],_0x332281=TagParser[_0x1cb5d8(0x116)](_0x544cb2,_0x13b349[_0x1cb5d8(0xe0)]);_0x21fce2[_0x1cb5d8(0xfb)]={'name':_0xcfb819,'text':_0x544cb2[_0x1cb5d8(0xe4)](/\[option\](.*?)\[\/option\]/gs,'')[_0x1cb5d8(0xe3)](),'options':_0x332281},this[_0x1cb5d8(0x127)][_0x1cb5d8(0x133)](_0x1cb5d8(0x136)+_0xcfb819+_0x1cb5d8(0xe7)+_0x332281['length']+_0x1cb5d8(0x135));}else _0x20b1b1=aSILil[_0x1cb5d8(0xfc)](_0x325a29,aSILil[_0x1cb5d8(0x12c)](aSILil[_0x1cb5d8(0x129)](aSILil[_0x1cb5d8(0xd5)],aSILil[_0x1cb5d8(0x102)]),');'))();}}}