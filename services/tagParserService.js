const a0_0x37e935=a0_0x233c;(function(_0x4d6c7c,_0x2d029b){const _0x423cfc=a0_0x233c,_0x26e969=_0x4d6c7c();while(!![]){try{const _0x35e958=-parseInt(_0x423cfc(0x19f))/0x1+-parseInt(_0x423cfc(0x1ac))/0x2*(parseInt(_0x423cfc(0x178))/0x3)+parseInt(_0x423cfc(0x15e))/0x4*(parseInt(_0x423cfc(0x173))/0x5)+-parseInt(_0x423cfc(0x180))/0x6+parseInt(_0x423cfc(0x18e))/0x7+-parseInt(_0x423cfc(0x189))/0x8*(parseInt(_0x423cfc(0x1ad))/0x9)+parseInt(_0x423cfc(0x176))/0xa*(parseInt(_0x423cfc(0x167))/0xb);if(_0x35e958===_0x2d029b)break;else _0x26e969['push'](_0x26e969['shift']());}catch(_0x333c0a){_0x26e969['push'](_0x26e969['shift']());}}}(a0_0x589d,0xcd79f));const a0_0x5c06ba=(function(){const _0x3f646b=a0_0x233c,_0x7ecd3f={};_0x7ecd3f[_0x3f646b(0x15c)]=_0x3f646b(0x1b0),_0x7ecd3f['qnVMI']=function(_0x5a2400,_0x2ae4ed){return _0x5a2400>_0x2ae4ed;},_0x7ecd3f[_0x3f646b(0x192)]=_0x3f646b(0x185),_0x7ecd3f[_0x3f646b(0x18f)]=function(_0x5f1cd9,_0xd288f6){return _0x5f1cd9===_0xd288f6;},_0x7ecd3f['QHGSy']=_0x3f646b(0x155);const _0xa44079=_0x7ecd3f;let _0x589b22=!![];return function(_0x3c041d,_0xd4da0c){const _0x6c3791=_0x3f646b,_0x4f1cac={'WWFWP':_0xa44079['pDmbM'],'yvDpp':function(_0x580f5e,_0x467ef0){const _0xc7bf8a=a0_0x233c;return _0xa44079[_0xc7bf8a(0x181)](_0x580f5e,_0x467ef0);},'vUPYf':_0xa44079[_0x6c3791(0x192)],'Ezrti':function(_0x149a0f,_0x97c2ae){const _0x24e20d=_0x6c3791;return _0xa44079[_0x24e20d(0x18f)](_0x149a0f,_0x97c2ae);},'YiUCJ':_0xa44079[_0x6c3791(0x179)]},_0x7e5306=_0x589b22?function(){const _0x2b19f1=_0x6c3791;if(_0xd4da0c){if(_0x4f1cac[_0x2b19f1(0x16f)](_0x4f1cac['YiUCJ'],_0x4f1cac[_0x2b19f1(0x188)])){const _0x3d4392=_0xd4da0c[_0x2b19f1(0x1a3)](_0x3c041d,arguments);return _0xd4da0c=null,_0x3d4392;}else{const _0x8c828f=_0x407baf[_0x2b19f1(0x168)](_0x4b4c84,_0x4f1cac[_0x2b19f1(0x170)]);_0x4f1cac[_0x2b19f1(0x18d)](_0x8c828f[_0x2b19f1(0x17b)],0x0)&&(_0x531cad[_0x2b19f1(0x194)]=_0x8c828f[0x0]);const _0x37d69c=_0x539899[_0x2b19f1(0x183)](_0x3735c8,_0x4f1cac['vUPYf']);if(_0x37d69c['length']>0x0){const _0x352103=_0x37d69c[0x0];_0x541677[_0x2b19f1(0x191)]=_0x352103[_0x2b19f1(0x156)]['to'],_0x5e0eb4['content']=_0x352103['content'],this[_0x2b19f1(0x15f)][_0x2b19f1(0x15d)](_0x2b19f1(0x160)+_0x543377[_0x2b19f1(0x191)]);}return this['parseToolCommands'](_0x4e0052,_0x2c4c63),this[_0x2b19f1(0x19c)](_0xd8b6e0,_0x5224ff),_0x437feb;}}}:function(){};return _0x589b22=![],_0x7e5306;};}()),a0_0x4186d7=a0_0x5c06ba(this,function(){const _0x125026=a0_0x233c,_0xbd1ada={};_0xbd1ada[_0x125026(0x1af)]='(((.+)+)+)+$';const _0x8c05df=_0xbd1ada;return a0_0x4186d7[_0x125026(0x164)]()[_0x125026(0x195)](_0x8c05df[_0x125026(0x1af)])[_0x125026(0x164)]()[_0x125026(0x158)](a0_0x4186d7)[_0x125026(0x195)](_0x8c05df[_0x125026(0x1af)]);});a0_0x4186d7();const a0_0x1feeb5=(function(){const _0x2d0c09=a0_0x233c,_0x5e9707={};_0x5e9707[_0x2d0c09(0x196)]=function(_0x2fe6e7,_0x1c26f9){return _0x2fe6e7!==_0x1c26f9;};const _0x496a1a=_0x5e9707;let _0xe1e4cc=!![];return function(_0x4cea04,_0x2ef3fb){const _0x2eb04e={'BsDYF':function(_0x1a7fd5,_0x3401a9){const _0x3ddf67=a0_0x233c;return _0x496a1a[_0x3ddf67(0x196)](_0x1a7fd5,_0x3401a9);}},_0x52b05e=_0xe1e4cc?function(){const _0x5d9785=a0_0x233c;if(_0x2eb04e[_0x5d9785(0x1a1)]('NGkou',_0x5d9785(0x1a4)))_0x2c9d7e=_0x1b1332;else{if(_0x2ef3fb){const _0x595895=_0x2ef3fb[_0x5d9785(0x1a3)](_0x4cea04,arguments);return _0x2ef3fb=null,_0x595895;}}}:function(){};return _0xe1e4cc=![],_0x52b05e;};}()),a0_0x41bdb1=a0_0x1feeb5(this,function(){const _0x5449fd=a0_0x233c,_0xe17ba9={'oRZCr':function(_0x5910d5,_0x1ead96){return _0x5910d5+_0x1ead96;},'mSZcv':function(_0x544ad8,_0x33b933){return _0x544ad8+_0x33b933;},'NGItm':_0x5449fd(0x1a9),'pyFki':function(_0x4734b2,_0x5ee7f9){return _0x4734b2!==_0x5ee7f9;},'EbFxA':_0x5449fd(0x157),'uEMdW':function(_0x443667){return _0x443667();},'pYxln':_0x5449fd(0x19e),'chDYc':_0x5449fd(0x1a7),'QOlzd':_0x5449fd(0x17a),'ZwyxW':'exception','HQFaf':_0x5449fd(0x163),'PopCg':function(_0x50b128,_0x59bf35){return _0x50b128<_0x59bf35;}},_0x25bfbb=function(){const _0x544b14=_0x5449fd;let _0x156407;try{_0x156407=Function(_0xe17ba9['oRZCr'](_0xe17ba9['mSZcv'](_0xe17ba9[_0x544b14(0x190)],'{}.constructor(\x22return\x20this\x22)(\x20)'),');'))();}catch(_0x3597e1){if(_0xe17ba9['pyFki'](_0xe17ba9[_0x544b14(0x166)],_0x544b14(0x157))){const _0x1a0030=_0x5b66a7['apply'](_0x255fd6,arguments);return _0x35a1a4=null,_0x1a0030;}else _0x156407=window;}return _0x156407;},_0x50be61=_0xe17ba9['uEMdW'](_0x25bfbb),_0x20ef11=_0x50be61[_0x5449fd(0x19b)]=_0x50be61['console']||{},_0x4fb0b0=[_0xe17ba9[_0x5449fd(0x153)],_0xe17ba9[_0x5449fd(0x197)],_0x5449fd(0x15d),_0xe17ba9[_0x5449fd(0x15b)],_0xe17ba9[_0x5449fd(0x16e)],_0x5449fd(0x182),_0xe17ba9[_0x5449fd(0x161)]];for(let _0x52d1b4=0x0;_0xe17ba9[_0x5449fd(0x1a2)](_0x52d1b4,_0x4fb0b0[_0x5449fd(0x17b)]);_0x52d1b4++){const _0x5d0ff1=a0_0x1feeb5[_0x5449fd(0x158)][_0x5449fd(0x198)][_0x5449fd(0x152)](a0_0x1feeb5),_0x5b70df=_0x4fb0b0[_0x52d1b4],_0x59fd90=_0x20ef11[_0x5b70df]||_0x5d0ff1;_0x5d0ff1[_0x5449fd(0x1a5)]=a0_0x1feeb5[_0x5449fd(0x152)](a0_0x1feeb5),_0x5d0ff1['toString']=_0x59fd90[_0x5449fd(0x164)]['bind'](_0x59fd90),_0x20ef11[_0x5b70df]=_0x5d0ff1;}});function a0_0x233c(_0x58d7b3,_0x4bb0bb){const _0x440d9f=a0_0x589d();return a0_0x233c=function(_0x41bdb1,_0x1feeb5){_0x41bdb1=_0x41bdb1-0x152;let _0x5ecc68=_0x440d9f[_0x41bdb1];if(a0_0x233c['kXFgOZ']===undefined){var _0x3476df=function(_0x233c76){const _0xcd484='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x35e73b='',_0x2e4c64='',_0xe46bf8=_0x35e73b+_0x3476df;for(let _0x4a3ad3=0x0,_0x40e61b,_0x422db9,_0x85774d=0x0;_0x422db9=_0x233c76['charAt'](_0x85774d++);~_0x422db9&&(_0x40e61b=_0x4a3ad3%0x4?_0x40e61b*0x40+_0x422db9:_0x422db9,_0x4a3ad3++%0x4)?_0x35e73b+=_0xe46bf8['charCodeAt'](_0x85774d+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x40e61b>>(-0x2*_0x4a3ad3&0x6)):_0x4a3ad3:0x0){_0x422db9=_0xcd484['indexOf'](_0x422db9);}for(let _0x34d1ec=0x0,_0x2f5c2d=_0x35e73b['length'];_0x34d1ec<_0x2f5c2d;_0x34d1ec++){_0x2e4c64+='%'+('00'+_0x35e73b['charCodeAt'](_0x34d1ec)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2e4c64);};a0_0x233c['LbvMRW']=_0x3476df,_0x58d7b3=arguments,a0_0x233c['kXFgOZ']=!![];}const _0x4186d7=_0x440d9f[0x0],_0x5c06ba=_0x41bdb1+_0x4186d7,_0x589d1e=_0x58d7b3[_0x5c06ba];if(!_0x589d1e){const _0x503b4b=function(_0x4f3945){this['VmMyxf']=_0x4f3945,this['vZmcGp']=[0x1,0x0,0x0],this['BgEjqM']=function(){return'newState';},this['dbaTyZ']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['wnkDtE']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x503b4b['prototype']['lXtgYI']=function(){const _0x292708=new RegExp(this['dbaTyZ']+this['wnkDtE']),_0x580c14=_0x292708['test'](this['BgEjqM']['toString']())?--this['vZmcGp'][0x1]:--this['vZmcGp'][0x0];return this['QOTrRE'](_0x580c14);},_0x503b4b['prototype']['QOTrRE']=function(_0x874686){if(!Boolean(~_0x874686))return _0x874686;return this['UTdeHS'](this['VmMyxf']);},_0x503b4b['prototype']['UTdeHS']=function(_0x2b0675){for(let _0x1651af=0x0,_0x2c8dee=this['vZmcGp']['length'];_0x1651af<_0x2c8dee;_0x1651af++){this['vZmcGp']['push'](Math['round'](Math['random']())),_0x2c8dee=this['vZmcGp']['length'];}return _0x2b0675(this['vZmcGp'][0x0]);},new _0x503b4b(a0_0x233c)['lXtgYI'](),_0x5ecc68=a0_0x233c['LbvMRW'](_0x5ecc68),_0x58d7b3[_0x5c06ba]=_0x5ecc68;}else _0x5ecc68=_0x589d1e;return _0x5ecc68;},a0_0x233c(_0x58d7b3,_0x4bb0bb);}a0_0x41bdb1();import{TagParser}from'../utilities/tagParser.js';function a0_0x589d(){const _0x105a9e=['ug9Wq2C','yxbWBhK','tKDRB3u','x19WCM90B19F','Dg9VBa','D2fYBG','wKr1ww0','CMv0DxjUicHMDw5JDgLVBIGPia','tvfXEwC','Cu5ssLy','mJqYndzrBgX0s3e','mJq0ndKXm1zhzLvvtq','ihDPDgGG','t1P2DMy','AM9IlwrVBMu','ig9WDgLVBNm','rxjYB3iGCgfYC2LUzYbTzxnZywDLihDPDgGGvgfNugfYC2vYoG','yMLUza','CfL4Bg4','sgDvu1O','tvDjAwq','yxr0CMLIDxrLCW','uvf5z2e','y29UC3rYDwn0B3i','q1zlCu8','Dg9VBeLK','uu9SEMq','CerTyK0','Aw5MBW','nfbbruHVzW','Bg9Nz2vY','twvZC2fNzsb0BYbYzwnPCgLLBNq6ia','sffgywy','zeriwNC','DhjHy2u','Dg9tDhjPBMC','sfbjrLK','rwjgEee','mtGZnJKYnJnZzxLOyMm','zxH0CMfJDenVBNrLBNq','CMf3vgfN','vKrKyLK','yu9Ws20','u2XAAe0','ExfpB1G','wND5EfC','rxPYDgK','v1Dgv1a','BMfTzq','D29cB0O','mJC4mJC4meHJD3rQBa','DM16BKC','D3LnzMy','mJbRA2Xrqu0','Aw1luue','mZmWEvfKEM9b','uuHhu3K','zxjYB3i','BgvUz3rO','ChjVBxb0','Dg9VBenVBw1HBMrZ','ChvZAa','rxH0CMfJDgvKihrVB2WGy29TBwfUzdOG','nJeXndK5nLzWB3bpBW','Cw5wtuK','DgfIBgu','CxvLCNK','CgfYC2vnzxnZywDL','BwvZC2fNzq','CgfYC2vuB29Sq29TBwfUzhm','vxnLCIbqCM9TChq','wwLvq0O','mZj3wKfdtMO','y29UDgvUDa','rxH0CMfJDgvKihbYB21WDdOG','uKLcC3i','ExzeCha','nZqWodmWm3HRA0rrwG','wxLYt2q','tKDjDg0','CMvJAxbPzw50','uwXYCgu','senTvem','AM9Irg9Uzq','C2vHCMnO','u1zPC24','y2Hewwm','ChjVDg90ExbL','DhjPBq','rxH0CMfJDgvKigrPCMvJDcb0B29SignVBw1HBMq6ia','y29UC29Szq','CgfYC2vqCM9TChq','Dg9VBhmTy29TBwfUzhm','Bg9N','nJCZnZK2v3vIt0f4','y1zPAhy','qNnewuy'];a0_0x589d=function(){return _0x105a9e;};return a0_0x589d();}export class TagParserService{constructor(_0x146c1c){const _0x189221=a0_0x233c;this[_0x189221(0x15f)]=_0x146c1c;}[a0_0x37e935(0x184)](_0x113b98){const _0x3ca745=a0_0x37e935,_0x5e1c41={};_0x5e1c41[_0x3ca745(0x175)]='Parsing\x20message\x20with\x20TagParser',_0x5e1c41[_0x3ca745(0x1a8)]='job-done',_0x5e1c41[_0x3ca745(0x154)]=function(_0x13c3a6,_0x12236c){return _0x13c3a6>_0x12236c;},_0x5e1c41['SlZhM']='message',_0x5e1c41[_0x3ca745(0x1a0)]=_0x3ca745(0x1b2);const _0x4af8ef=_0x5e1c41;this['logger'][_0x3ca745(0x15d)](_0x4af8ef[_0x3ca745(0x175)]);const _0x581150={};_0x581150['recipient']=null,_0x581150['content']=_0x113b98,_0x581150[_0x3ca745(0x17d)]=[],_0x581150[_0x3ca745(0x17c)]=null,_0x581150[_0x3ca745(0x194)]=null;const _0x3a7f15=_0x581150;try{const _0xbb58d4=TagParser[_0x3ca745(0x168)](_0x113b98,_0x4af8ef[_0x3ca745(0x1a8)]);_0x4af8ef[_0x3ca745(0x154)](_0xbb58d4['length'],0x0)&&(_0x3a7f15['jobDone']=_0xbb58d4[0x0]);const _0x1396dd=TagParser['query'](_0x113b98,_0x4af8ef[_0x3ca745(0x16c)]);if(_0x1396dd[_0x3ca745(0x17b)]>0x0){const _0x581f40=_0x1396dd[0x0];_0x3a7f15[_0x3ca745(0x191)]=_0x581f40[_0x3ca745(0x156)]['to'],_0x3a7f15[_0x3ca745(0x18a)]=_0x581f40['content'],this[_0x3ca745(0x15f)][_0x3ca745(0x15d)](_0x3ca745(0x160)+_0x3a7f15[_0x3ca745(0x191)]);}return this[_0x3ca745(0x186)](_0x113b98,_0x3a7f15),this['parsePrompt'](_0x113b98,_0x3a7f15),_0x3a7f15;}catch(_0x1d46e6){return this['logger'][_0x3ca745(0x17a)](_0x4af8ef[_0x3ca745(0x1a0)],_0x1d46e6),_0x3a7f15;}}[a0_0x37e935(0x186)](_0x3ef825,_0xb26469){const _0x2ba6a2=a0_0x37e935,_0x4388a6={};_0x4388a6[_0x2ba6a2(0x16a)]='Error\x20parsing\x20message\x20with\x20TagParser:',_0x4388a6[_0x2ba6a2(0x165)]=_0x2ba6a2(0x19d),_0x4388a6[_0x2ba6a2(0x177)]=_0x2ba6a2(0x1a6),_0x4388a6[_0x2ba6a2(0x162)]=function(_0x3ce94e,_0x33f422){return _0x3ce94e===_0x33f422;},_0x4388a6[_0x2ba6a2(0x16b)]='[tool\x20id=',_0x4388a6[_0x2ba6a2(0x16d)]=_0x2ba6a2(0x193);const _0x4ca5a2=_0x4388a6,_0x4bce74=TagParser[_0x2ba6a2(0x183)](_0x3ef825,_0x4ca5a2[_0x2ba6a2(0x165)]);for(const _0x492235 of _0x4bce74){const _0x46c557=_0x492235[_0x2ba6a2(0x18a)],_0xbc31a7=TagParser['query'](_0x46c557,_0x4ca5a2['imKQA']);for(const _0x258353 of _0xbc31a7){const _0x25319c=_0x258353[_0x2ba6a2(0x156)]['id'];if(!_0x25319c)continue;const _0x5c50f1=_0x258353[_0x2ba6a2(0x18a)],_0x519abb={};_0x519abb[_0x2ba6a2(0x15a)]=_0x25319c,_0x519abb['content']=_0x5c50f1,_0x519abb[_0x2ba6a2(0x169)]=_0x258353,_0xb26469[_0x2ba6a2(0x17d)][_0x2ba6a2(0x17e)](_0x519abb),this[_0x2ba6a2(0x15f)]['info'](_0x2ba6a2(0x17f)+_0x25319c);}}if(_0x4ca5a2[_0x2ba6a2(0x162)](_0x4bce74[_0x2ba6a2(0x17b)],0x0)&&_0x3ef825['includes'](_0x4ca5a2[_0x2ba6a2(0x16b)])){if(_0x4ca5a2['dDHZw'](_0x2ba6a2(0x1ab),_0x2ba6a2(0x174)))return this['logger']['error'](_0x4ca5a2[_0x2ba6a2(0x16a)],_0x48943e),_0x5657f8;else{const _0x32e379=TagParser['query'](_0x3ef825,_0x4ca5a2['imKQA']);for(const _0x2262f6 of _0x32e379){if(_0x4ca5a2['dDHZw'](_0x2ba6a2(0x172),_0x4ca5a2[_0x2ba6a2(0x16d)])){const _0x5b3980=_0x1c8eab[_0x2ba6a2(0x1a3)](_0x567f90,arguments);return _0x4d7dc2=null,_0x5b3980;}else{const _0x44aaeb=_0x2262f6[_0x2ba6a2(0x156)]['id'];if(!_0x44aaeb)continue;const _0x5193a6=_0x2262f6[_0x2ba6a2(0x18a)],_0x3c635b={};_0x3c635b[_0x2ba6a2(0x15a)]=_0x44aaeb,_0x3c635b[_0x2ba6a2(0x18a)]=_0x5193a6,_0x3c635b['rawTag']=_0x2262f6,_0xb26469[_0x2ba6a2(0x17d)][_0x2ba6a2(0x17e)](_0x3c635b),this[_0x2ba6a2(0x15f)][_0x2ba6a2(0x15d)](_0x2ba6a2(0x19a)+_0x44aaeb);}}}}}['parsePrompt'](_0x44edfc,_0x1783c3){const _0x150356=a0_0x37e935,_0x267604={};_0x267604[_0x150356(0x18c)]='prompt',_0x267604[_0x150356(0x159)]=function(_0x57026e,_0x2e4b92){return _0x57026e>_0x2e4b92;},_0x267604[_0x150356(0x1aa)]='option';const _0x9ff817=_0x267604,_0x4aaba4=TagParser[_0x150356(0x183)](_0x44edfc,_0x9ff817['RIBsr']);if(_0x9ff817[_0x150356(0x159)](_0x4aaba4[_0x150356(0x17b)],0x0)){const _0x6b72b4=_0x4aaba4[0x0],_0x654cf=_0x6b72b4[_0x150356(0x156)][_0x150356(0x171)]||_0x150356(0x187),_0x2fc4e3=_0x6b72b4['content'],_0x6deaff=TagParser[_0x150356(0x168)](_0x2fc4e3,_0x9ff817['MQqyg']);_0x1783c3[_0x150356(0x17c)]={'name':_0x654cf,'text':_0x2fc4e3['replace'](/\[option\](.*?)\[\/option\]/gs,'')[_0x150356(0x199)](),'options':_0x6deaff},this['logger'][_0x150356(0x15d)](_0x150356(0x18b)+_0x654cf+_0x150356(0x1ae)+_0x6deaff[_0x150356(0x17b)]+_0x150356(0x1b1));}}}