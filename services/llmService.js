const a0_0x23ba4a=a0_0x5729;(function(_0x47abff,_0x2f319e){const _0x3d0090=a0_0x5729,_0x450461=_0x47abff();while(!![]){try{const _0x626613=parseInt(_0x3d0090(0x27f))/0x1*(-parseInt(_0x3d0090(0x2f4))/0x2)+-parseInt(_0x3d0090(0x1cf))/0x3*(-parseInt(_0x3d0090(0x225))/0x4)+-parseInt(_0x3d0090(0x25e))/0x5+-parseInt(_0x3d0090(0x1e5))/0x6+-parseInt(_0x3d0090(0x1d9))/0x7+parseInt(_0x3d0090(0x3a4))/0x8+parseInt(_0x3d0090(0x394))/0x9;if(_0x626613===_0x2f319e)break;else _0x450461['push'](_0x450461['shift']());}catch(_0x41ae6c){_0x450461['push'](_0x450461['shift']());}}}(a0_0x13d8,0xcd2cb));const a0_0x1fd606=(function(){const _0x4c2f67=a0_0x5729,_0x4e28bb={};_0x4e28bb[_0x4c2f67(0x39b)]=function(_0xe29e00,_0x319791){return _0xe29e00===_0x319791;},_0x4e28bb['TdvcS']=_0x4c2f67(0x2ef),_0x4e28bb[_0x4c2f67(0x26a)]=function(_0x7e9a8d,_0xf461fc){return _0x7e9a8d!==_0xf461fc;},_0x4e28bb['OcAUs']=_0x4c2f67(0x3ad),_0x4e28bb[_0x4c2f67(0x2d9)]='openai',_0x4e28bb[_0x4c2f67(0x22b)]='google',_0x4e28bb[_0x4c2f67(0x37d)]=function(_0x49c4a5,_0x535192){return _0x49c4a5===_0x535192;},_0x4e28bb[_0x4c2f67(0x312)]=_0x4c2f67(0x351);const _0x2f2bbd=_0x4e28bb;let _0x6f8383=!![];return function(_0x47a4bd,_0x5b1584){const _0x249098=_0x4c2f67,_0x46ebe2={'TOlIk':_0x2f2bbd[_0x249098(0x2db)],'GXqhp':_0x2f2bbd['jBbrS'],'KQgMj':_0x2f2bbd['yTCsD'],'VLsVo':function(_0x3ec196,_0x1adc7c){const _0x58e2bd=_0x249098;return _0x2f2bbd[_0x58e2bd(0x39b)](_0x3ec196,_0x1adc7c);}};if(_0x2f2bbd['ueWBZ'](_0x2f2bbd[_0x249098(0x312)],_0x2f2bbd[_0x249098(0x312)])){const _0x2dc6a4=_0x6f8383?function(){const _0x18184e=_0x249098;if(_0x2f2bbd['OtbyO'](_0x2f2bbd[_0x18184e(0x2bc)],_0x2f2bbd[_0x18184e(0x2bc)])){if(_0x5b1584){if(_0x2f2bbd['ajnnp']('puvLi','puvLi')){const _0x18fac3=[_0x46ebe2[_0x18184e(0x39e)],_0x46ebe2['GXqhp'],_0x46ebe2['KQgMj']],_0x3645ca=_0x18fac3[_0x18184e(0x386)](_0x4aeabc=>!_0x1cb40e['includes'](_0x4aeabc)&&this[_0x18184e(0x2b1)]['has'](_0x4aeabc)&&this[_0x18184e(0x200)][_0x18184e(0x2ce)](_0x4aeabc)!==_0x4d127e[_0x18184e(0x355)][_0x18184e(0x35e)]);if(_0x46ebe2[_0x18184e(0x1bb)](_0x3645ca[_0x18184e(0x204)],0x0))return null;const _0x58372f=[_0x46ebe2[_0x18184e(0x39e)],_0x46ebe2[_0x18184e(0x297)],_0x18184e(0x1a1)];for(const _0x4b851c of _0x58372f){if(_0x3645ca[_0x18184e(0x1d2)](_0x4b851c))return _0x4b851c;}return _0x3645ca[0x0];}else{const _0x37852e=_0x5b1584[_0x18184e(0x294)](_0x47a4bd,arguments);return _0x5b1584=null,_0x37852e;}}}else this[_0x18184e(0x214)][_0x18184e(0x319)](_0x18184e(0x3ca),_0x383cbe);}:function(){};return _0x6f8383=![],_0x2dc6a4;}else throw new _0x47643f(_0x249098(0x264)+_0x4cdda4+_0x249098(0x1ab)+_0x4a4807);};}()),a0_0x377cd7=a0_0x1fd606(this,function(){const _0x15cb4c=a0_0x5729,_0x386605={};_0x386605[_0x15cb4c(0x324)]='(((.+)+)+)+$';const _0x4e7782=_0x386605;return a0_0x377cd7[_0x15cb4c(0x393)]()['search'](_0x4e7782[_0x15cb4c(0x324)])[_0x15cb4c(0x393)]()['constructor'](a0_0x377cd7)[_0x15cb4c(0x345)](_0x4e7782['EaRfz']);});a0_0x377cd7();const a0_0x2cacd7=(function(){const _0x3abf55=a0_0x5729,_0x8eeec8={};_0x8eeec8[_0x3abf55(0x1ce)]=function(_0x185006,_0x3e9e18){return _0x185006!==_0x3e9e18;},_0x8eeec8['MEuwH']='ZcaMA',_0x8eeec8[_0x3abf55(0x218)]=_0x3abf55(0x373),_0x8eeec8[_0x3abf55(0x1cc)]=function(_0x1ec618,_0x160765){return _0x1ec618===_0x160765;},_0x8eeec8[_0x3abf55(0x248)]=_0x3abf55(0x304),_0x8eeec8[_0x3abf55(0x18c)]=function(_0x5e4e30,_0x2d0fe2){return _0x5e4e30*_0x2d0fe2;};const _0x16b8e5=_0x8eeec8;let _0x3c0e13=!![];return function(_0x16002a,_0x5e5d23){const _0x3ba1a0={'znuNv':function(_0x38bceb,_0x142955){const _0x6fb2e4=a0_0x5729;return _0x16b8e5[_0x6fb2e4(0x18c)](_0x38bceb,_0x142955);}},_0x31a805=_0x3c0e13?function(){const _0x1b1b29=a0_0x5729;if(_0x16b8e5[_0x1b1b29(0x1ce)](_0x16b8e5['MEuwH'],_0x16b8e5[_0x1b1b29(0x218)])){if(_0x5e5d23){if(_0x16b8e5[_0x1b1b29(0x1cc)](_0x16b8e5['UVjBW'],_0x16b8e5['UVjBW'])){const _0x6a2003=_0x5e5d23[_0x1b1b29(0x294)](_0x16002a,arguments);return _0x5e5d23=null,_0x6a2003;}else{const _0x544852=this['config'][_0x1b1b29(0x36d)]?.[_0x1b1b29(0x23b)]||_0x159a3c['DEFAULT_RETRY_DELAY_MS'],_0x76a2a1=this[_0x1b1b29(0x33d)][_0x1b1b29(0x36d)]?.['delayMultiplier']||_0x41c319[_0x1b1b29(0x1db)];return _0x3ba1a0[_0x1b1b29(0x1f2)](_0x544852,_0x3ba0f7[_0x1b1b29(0x249)](_0x76a2a1,_0x16e1cb));}}}else throw new _0x3c59b3(_0x1b1b29(0x236)+_0x38a1f0+_0x1b1b29(0x280));}:function(){};return _0x3c0e13=![],_0x31a805;};}()),a0_0x6097c5=a0_0x2cacd7(this,function(){const _0xa77075=a0_0x5729,_0x39a38b={'IdykC':_0xa77075(0x384),'mHkau':function(_0xe564b0,_0x336490){return _0xe564b0!==_0x336490;},'wZBHu':_0xa77075(0x1f9),'YrYgj':'KuISA','OGdVO':function(_0x3dac39,_0x4b1f7b){return _0x3dac39+_0x4b1f7b;},'PBURi':function(_0x335b89,_0x768ffe){return _0x335b89+_0x768ffe;},'ZhOBC':_0xa77075(0x25c),'pvKXn':_0xa77075(0x2ba),'hCuGZ':_0xa77075(0x283),'PJpVi':function(_0x2f3f9e){return _0x2f3f9e();},'HvlKF':_0xa77075(0x319),'TVsBd':'info','pWCpk':_0xa77075(0x2fd),'hxVPY':'trace','FKjvJ':function(_0x1e1c9f,_0x36b294){return _0x1e1c9f<_0x36b294;}},_0x19be54=function(){const _0x2a2a16=_0xa77075,_0x33d189={};_0x33d189['bFwWc']=_0x39a38b[_0x2a2a16(0x354)],_0x33d189[_0x2a2a16(0x276)]=_0x2a2a16(0x375);const _0x4b6996=_0x33d189;if(_0x39a38b[_0x2a2a16(0x25a)](_0x39a38b[_0x2a2a16(0x267)],_0x39a38b[_0x2a2a16(0x336)])){let _0x56aca9;try{_0x56aca9=Function(_0x39a38b['OGdVO'](_0x39a38b[_0x2a2a16(0x30d)](_0x39a38b['ZhOBC'],_0x39a38b[_0x2a2a16(0x34e)]),');'))();}catch(_0x4cd5c8){if('AtAYE'!==_0x39a38b[_0x2a2a16(0x3a2)])_0x56aca9=window;else return null;}return _0x56aca9;}else{const _0x5b5928=_0x4b6996[_0x2a2a16(0x3c0)]['split']('|');let _0x199cef=0x0;while(!![]){switch(_0x5b5928[_0x199cef++]){case'0':this[_0x2a2a16(0x3b9)]=![];continue;case'1':this[_0x2a2a16(0x214)]['warn'](_0x2a2a16(0x3be));continue;case'2':this[_0x2a2a16(0x27c)]=null;continue;case'3':this['logger'][_0x2a2a16(0x359)](_0x4b6996[_0x2a2a16(0x276)],_0x1fd0c2);continue;case'4':this[_0x2a2a16(0x266)]=null;continue;}break;}}},_0x29a47c=_0x39a38b[_0xa77075(0x376)](_0x19be54),_0x15417b=_0x29a47c[_0xa77075(0x245)]=_0x29a47c[_0xa77075(0x245)]||{},_0x20db66=[_0xa77075(0x1a4),_0x39a38b[_0xa77075(0x314)],_0x39a38b[_0xa77075(0x330)],_0xa77075(0x359),'exception',_0x39a38b['pWCpk'],_0x39a38b[_0xa77075(0x1df)]];for(let _0x241d89=0x0;_0x39a38b[_0xa77075(0x3d5)](_0x241d89,_0x20db66['length']);_0x241d89++){const _0x37ec0b=a0_0x2cacd7['constructor'][_0xa77075(0x2c2)][_0xa77075(0x300)](a0_0x2cacd7),_0x2899c8=_0x20db66[_0x241d89],_0xb2ab6=_0x15417b[_0x2899c8]||_0x37ec0b;_0x37ec0b[_0xa77075(0x1d0)]=a0_0x2cacd7['bind'](a0_0x2cacd7),_0x37ec0b[_0xa77075(0x393)]=_0xb2ab6['toString'][_0xa77075(0x300)](_0xb2ab6),_0x15417b[_0x2899c8]=_0x37ec0b;}});function a0_0x5729(_0x328003,_0x311438){const _0x4667e4=a0_0x13d8();return a0_0x5729=function(_0x6097c5,_0x2cacd7){_0x6097c5=_0x6097c5-0x189;let _0x39900e=_0x4667e4[_0x6097c5];if(a0_0x5729['gfZRsr']===undefined){var _0x4c3a7a=function(_0x57294b){const _0xec2493='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4914a4='',_0x4c419e='',_0x1620b1=_0x4914a4+_0x4c3a7a;for(let _0x20ce64=0x0,_0x393cca,_0x12bed4,_0x1c0623=0x0;_0x12bed4=_0x57294b['charAt'](_0x1c0623++);~_0x12bed4&&(_0x393cca=_0x20ce64%0x4?_0x393cca*0x40+_0x12bed4:_0x12bed4,_0x20ce64++%0x4)?_0x4914a4+=_0x1620b1['charCodeAt'](_0x1c0623+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x393cca>>(-0x2*_0x20ce64&0x6)):_0x20ce64:0x0){_0x12bed4=_0xec2493['indexOf'](_0x12bed4);}for(let _0x1dd47e=0x0,_0x38128b=_0x4914a4['length'];_0x1dd47e<_0x38128b;_0x1dd47e++){_0x4c419e+='%'+('00'+_0x4914a4['charCodeAt'](_0x1dd47e)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4c419e);};a0_0x5729['cessET']=_0x4c3a7a,_0x328003=arguments,a0_0x5729['gfZRsr']=!![];}const _0x377cd7=_0x4667e4[0x0],_0x1fd606=_0x6097c5+_0x377cd7,_0x13d80b=_0x328003[_0x1fd606];if(!_0x13d80b){const _0x537d40=function(_0x17a270){this['OQUXDE']=_0x17a270,this['qRldLD']=[0x1,0x0,0x0],this['LQHPOQ']=function(){return'newState';},this['WRlrIa']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['gXNUJC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x537d40['prototype']['XkvxYQ']=function(){const _0x4e47bb=new RegExp(this['WRlrIa']+this['gXNUJC']),_0x177ad6=_0x4e47bb['test'](this['LQHPOQ']['toString']())?--this['qRldLD'][0x1]:--this['qRldLD'][0x0];return this['KYJNqP'](_0x177ad6);},_0x537d40['prototype']['KYJNqP']=function(_0x2574d1){if(!Boolean(~_0x2574d1))return _0x2574d1;return this['gDahXI'](this['OQUXDE']);},_0x537d40['prototype']['gDahXI']=function(_0x47d913){for(let _0x36229b=0x0,_0x275f5a=this['qRldLD']['length'];_0x36229b<_0x275f5a;_0x36229b++){this['qRldLD']['push'](Math['round'](Math['random']())),_0x275f5a=this['qRldLD']['length'];}return _0x47d913(this['qRldLD'][0x0]);},new _0x537d40(a0_0x5729)['XkvxYQ'](),_0x39900e=a0_0x5729['cessET'](_0x39900e),_0x328003[_0x1fd606]=_0x39900e;}else _0x39900e=_0x13d80b;return _0x39900e;},a0_0x5729(_0x328003,_0x311438);}a0_0x6097c5();import{ServerLLMService}from'./serverLLMService.js';import{BudgetService}from'./budgetService.js';import{RateLimitService}from'./rateLimitService.js';const a0_0x5440a4={};a0_0x5440a4[a0_0x23ba4a(0x3a8)]=0x19d,a0_0x5440a4['BAD_REQUEST']=0x190,a0_0x5440a4['UNAUTHORIZED']=0x191,a0_0x5440a4['FORBIDDEN']=0x193,a0_0x5440a4[a0_0x23ba4a(0x233)]=0x194,a0_0x5440a4[a0_0x23ba4a(0x19f)]=0x1ad,a0_0x5440a4[a0_0x23ba4a(0x198)]=0x1f4;const HTTP_STATUS_CODES=a0_0x5440a4,REQUEST_SIZE_ERROR_PATTERNS=['request\x20entity\x20too\x20large','payload\x20too\x20large',a0_0x23ba4a(0x277),'message\x20too\x20long','content\x20length\x20exceeds\x20limit'],a0_0x513603={};function a0_0x13d8(){const _0x2aeac5=['x2DLDerLzMf1BhrnB2rLBezVCLnLCNzPy2u','DMLwB0y','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','uhjVBxb0ihrVBYbSB25NigfUzcbUBYbJB21Wywn0AxPHDgLVBIbOyw5KBgvYigf2ywLSywjSzq','vgr2y1m','Dw5HDxrOB3jPEMvK','swXXExq','AgzdEuW','zxf1ueO','swf4su8','ChjVDg90ExbL','CMvXDwvZDcbLBNrPDhKGDg9VigXHCMDL','ihDPDgGGC2vYDMLJzsa','rMfPBgvKihrVigDLDcbZDw1Tyxj5ihvZAw5NihnHBwuGC2vYDMLJzsa','CMvMCMvZAfbYAwnPBMDeyxrH','r1zfEuG','BKHUAhC','C3LZDgvTuhjVBxb0','yNvKz2v0u2vYDMLJzq','x3nLBMrnzxnZywDLv2L0AfjLDhj5','rvjst1jFuefuvevstLm','DevOsM0','z2v0','vvDyzgm','y2DIwK8','uNHuzM4','y29UDMvYC2f0Aw9Uu2vYDMLJzxm','yxv0AgvUDgLJyxrPB24','s25RsLK','rvjst1jFvfLqrvm','CgnhDgW','qvbYsfy','Bw9KzwXZv2L0AfbYAwnPBMC','AKjICLm','u2vYDMvYlwjHC2vKieXmtsbZzxj2AwnLigLUAxrPywXPEMvKihn1y2nLC3nMDwXSEq','t2nbvxm','r095qMq','BKnuqLK','BgfZDfvWzgf0zq','qvfLt3m','x2LZu2vYDMvYrxjYB3i','yMfSyw5Jzwq','B25qCM9TChruB29mB25N','EhzVvwe','rMPzDLa','z2v0uhjPy2LUz0LUzM8','D2fPDeLMtMvLzgvK','C0DnrLG','u1bfruq','kcGOlISPkYKRksSK','rw1LCMDLBMn5ignVBxbHy3rPEMf0Aw9UigzHAwXLzdO','vw5RBM93BIbLCNjVCG','yKrzwM4','uxDTBvC','zxnRr1q','Exz1Egq','EuTIB1a','x3nLBgvJDeXHCMDLC3rdB250zxH0u2vYDMLJzq','sw5PDgLHBgL6Aw5NieXmtsbZzxj2AwnLCYaOu2vYDMvYig1Vzgu6ia','zNvUy3rPB24','mtC2nJHtwurruLa','sgHIEvy','Dg9mB3DLCKnHC2u','C3vJy2vZC2z1BfjLCxvLC3rZ','zMfqDvK','CKvcEvO','D1zQs2e','BxDPqwq','yxP1CMuTB3bLBMfPlwDWDdq','DgfIBgu','BxmGzgvSyxKGywz0zxiGzw1LCMDLBMn5ignVBxbHy3rPEMf0Aw9U','uvPeufO','yMLUza','rfnmDwK','y0TPv1K','ufbjwfy','tvf0whG','C29Tzq','CwjjBw4','tg1TsLm','B1jxsKG','BK5MB1K','yxP1CMuTB3bLBMfPlwDWDdm1','CxvVqM4','zMzdswy','uejvuMK','CvfyyLO','Dg90ywXmyxrLBMn5','zgvSyxLnDwX0AxbSAwvY','uNHVtge','u2nIrKq','B3zLCMfSBa','shzSs0y','zgflvMi','y29UBMvJDgLVBIbYzwz1C2vK','Ag5kEfO','z2v0u3vTBwfYEq','D2fYBG','u0vICxa','rvnlsNe','EwXArhu','v3vgrNe','uKzoAgq','qvHwB2q','EKrrDgK','ig5VDcbHDMfPBgfIBgu','z3HYEgG','qwXSihjLDhj5igf0DgvTChrZigzHAwXLzdOG','rwfszNO','BgrtzeS','AxnjBML0AwfSAxPLza','Ae5wrgK','z2r4C0O','r2v0DgLUzYbPBwfNzsbKzxnJCMLWDgLVBIb1C2LUzYb2AxnPB24Ty2fWywjSzsbTB2rLBa','yLjrwhC','ANzfq0i','vLzrEve','z2v0sgvHBhrOu3rHDhvZ','q09ovevyva','AgfUzgXLuMf0zuXPBwL0sgL0','vfzZqMq','weL3vue','x3nLBgvJDfnLCNzPy2vgB3jdB252zxjZyxrPB24','ndaZ','DefIq1u','C2H1DgrVD24','wxjzz2O','vMLZAw9UihjLCxvLC3qGzMfPBgvKicHHDhrLBxb0ia','zxn0Aw1HDgvuB2TLBKnVDw50','ndaW','Aw52ywXPzcbHCgKGA2v5','y0jNr0C','uMvNAxn0zxjLzcbJB252zxjZyxrPB24G','y29UzMLN','yNvKz2v0','yKfQuLi','qvrlCfi','Bufzu0m','C3rHDhvZ','A29qB2O','sg9SAhC','C2vHCMnO','rxP5ChK','AgLSwvu','z29Vz2XLlwDLBwLUAq','rhvoA0C','Cxrwq08','tuDUwKW','BfLirva','CvPiv0q','Chzlwg4','rKHbC0K','revgqvvmvf9nqvHFuKvuuKLfuW','quT4CM4','AgvHBhrOq2HLy2S','C2vYDMvYlwXSBq','swr5A0m','u0vsvKLdrv9tvefuvvm','Ee5sCu4','wNL6vxG','t1vgswm','zxjYB3i','Bw9KzwWGBM90igzVDw5K','sKPkENu','yxzLCMfNzuXHDgvUy3K','Eu51q0C','vu5bvKfjtefcteu','C3rYAw5NAwz5','z1Lczgm','ihDPDgGGzMfSBgjHy2SGC2vYDMLJzsa','x3nLBgvJDfnLCNzPy2vcEvbYzwzLCMvUy2vpCMrLCG','z01JAfa','qvvusevoveLdqvrjt04','tM8GC3vPDgfIBguGteXnihnLCNzPy2uGyxzHAwXHyMXLic0GrgvIDwCGAw5MBZO','zNjVBuvUDhjPzxm','y29UDgvUDcbWB2XPy3K','rMfPBgvKihrVigvZDgLTyxrLihrVA2vUignVDw50igzVCIbJB252zxjZyxrPB24G','ndaX','vxrPwgC','rxjYB3iGC2H1DhrPBMCGzg93BIbZzxj2AwnLia','DNDpzhK','CMv0CMLLCW','yw50AhjVCgLJlw9WDxm','Buzuwxe','rxfNAhO','qMP3s1y','zwr5D2y','BLj6sfq','x2nHBgn1Bgf0zvjLDhj5rgvSyxK','rMfPBgvKihrVigLUAxrPywXPEMuGC2vYDMvYieXmtsbZzxj2AwnLoG','uePWvMK','wwP6sLm','rLjtAKO','BNnKC2u','Cgnxuhi','ntaW','Dg9VigXVBMC','DwvxqLO','zLPRqwm','sxv6vK8','zKPksLe','y09dCxq','CMf0zv9SAw1PDa','Curvrw8','m3WWFdr8mNWX','zK1dB0S','zMLSDgvY','CMvJB3jKvxnHz2u','BeDpDvG','yLzru3y','ig5VDcbYzwDPC3rLCMvKihDPDgGGyw55ihnLCNzPy2u','C3bSAxq','uwPTCe0','u0vsvKvs','zxHJzwvKCYbJB250zxH0ihDPBMrVDW','C2vYDMLJzxm','u2H1DhrPBMCGzg93BIbmte0GC2vYDMLJzq','wfn5v2y','DwDgtuO','Dg9tDhjPBMC','ntyYmdG0mLnODfLuCq','Dg90ywXszxf1zxn0CW','x2LZuhjVBxb0vg9Vtg9Uz0vYCM9Y','z2v0qxzHAwXHyMXLtw9KzwXZ','CfDvyva','Aw9rwMq','BLPUC0u','t3rIEu8','su5uruXmsuDftKnf','zePtEMG','ve9SswS','A2jVz0K','sunkrhi','vw9frwO','Aen1r1O','BuPMzeC','mteYnZa4odHtEwrHDhm','uhjVBxb0ihrVBYbSB25NigHHBMrSzxiGCMvNAxn0zxjLza','Cun3Efu','y01jsfO','uKvrvuvtvf9ftLrjvfLFve9px0XbuKDf','y2f0y2G','ieXmtsbZzxj2AwnLCW','u2PctLi','x2HHBMrSzvjLCxvLC3ruB29myxjNzuvYCM9Y','yw50AhjVCgLJ','x3rYEuzHBgXIywnRu2vYDMLJzq','x3nLBgvJDezHBgXIywnRu2vYDMLJzq','zgvNCMfKzwq','z2v0tgfZDeLUChv0vg9Rzw5dB3vUDa','A1zNvMW','su1sBvi','x2rLBgf5','uKXzq2O','quLgEhi','D0DXDfm','Aw5QAxi','DxnLu2vYDMvYteXn','D2XXEK0','EK9VBNy','zMjfDui','tM8GC3vPDgfIBguGteXnihnLCNzPy2uGyxzHAwXHyMXLigzVCIb0AgLZignVBNzLCNnHDgLVBI4GrgvIDwC6ia','rMfSBgLUzYbIywnRihrVigXVy2fSieXmtsbZzxj2AwnLCW','x3jLy29YzfvZywDLqw5Ktwv0CMLJCW','yKz3v2m','C0vlveu','uKDhAva','C2vUze1LC3nHz2u','zMfPBgvKuMvXDwvZDhm','uKfurv9msu1jva','qvzbsuXbqKXf','vxjHrgy','BunmB08','C2vYDMLJzsb1BMf2ywLSywjSzq','rMfPBgvKihrVigDLDcbTB2rLBhmGzNjVBsbZzxj2zxiGC2vYDMLJztO','yunzEKO','sKDuy1C','BvrLCLG','teXnihnLCNzPy2uGAw5PDgLHBgL6zwq','ANvgqKG','q2Llzhi','AhrnCLy','yw9gC0O','wxztt0i','A1DrA2S','rKTQDKO','u01Jz1G','AKP6qLO','BuTpyMW','wwTfALO','q21lAMu','CNPpwfe','x2LZuMf0zuXPBwL0rxjYB3i','yxzHAwXHyMXL','Dw5HDMfPBgfIBgu','tM8GDMLZAw9UlwnHCgfIBguGC2vYDMLJzxmGyxzHAwXHyMXL','uNn1q1q','qNjmvMy','CeXIzM0','ic0GCgvYzM9YBwLUzYbLBwvYz2vUy3KGy29TCgfJDgL6yxrPB24','D1PpBK8','u1rsqvrfr1K','sMfPEuK','q09PvMK','uMvNAxn0zxjPBMCGy29UDMvYC2f0Aw9UoIa','vgLOsvy','tfHKEgK','tfjkuxy','CgXYwwq','DxHIsu0','tw9JzeS','Cgf5Bg9Hzcb0B28GBgfYz2u','qKDguvG','BMDmtKK','rMfPBgvKihrVihjLz2LZDgvYignVBNzLCNnHDgLVBIa','sw5PDgLHBgL6Aw5NihnLCNzLCI1IyxnLzcbmte0GC2vYDMLJzs4UlG','vhf2Dem','DvLyuwO','BgXTu3rYyxrLz3K','wvPACKe','sunsDwm','twfPEuK','su5urvjoquXFu0vsvKvsx0vsuK9s','uurXA24','BM93','ywH4Bfu','C2rLthq','v0Llt00','qKfmqu5druq','ve9px01btLLFuKvrvuvtvfm','q29TCgfJDgL6yxrPB24Gy29TCgXLDgvKlcbYzxrYEwLUzYbYzxf1zxn0','z29Vz2XL','ru5hB1e','AwnZEMG','Bg9N','sxLyrwK','z2v0sw1Hz2vezxnJCMLWDgLVBG','zfjYEMm','uK5iA2G','r3PNsuO','uKvrvuvtvf9ut09Ftefsr0u','ig5VDcbMB3vUzcbMB3iGy29UDMvYC2f0Aw9Uia','z2v0uhjPy2LUz0rHDge','sw5PDgLHBgL6zwqG','y0XMzxG','revhuKferuq','z2v0twf4q29UDgv4DfnPEMu','rxDVsfq','y2XLyxi','zKP6Dvi','z2v0qNvKz2v0vxnHz2u','ChjPy2LUzW','qK1SC2S','qNbKq2i','z0jmCui','z2v0tgfZDe91Dhb1DfrVA2vUq291BNq','zNjVBq','vKXZvM8','tM8GteXnihnLCNzPy2vZigfYzsbHDMfPBgfIBgu','z2v0u2vYDMvYsgvHBhrO','u2vUzcbTzxnZywDLigzHAwXLzcbMB3iGy29UDMvYC2f0Aw9Uia','Aw5WvKS','uhjVBxb0ihrVBYbSB25NigvYCM9YigrLDgvJDgvKic0GCMvXDwvZDgLUzYbJB21Wywn0AxPHDgLVBG','Dwj1sKq','C2vYDMvYigvYCM9Y','AhfpCfG','y29UDgv4Da','x2DLDfnLCNzPy2vnB2rLBeLK','sM9tC0W','rvbRvKG','teXnihnLCNzPy2uGAw5PDgLHBgL6yxrPB24GzMfPBgvKlcbIDxqGy29UDgLUDwLUzYb3AxrOigXPBwL0zwqGzNvUy3rPB25HBgL0Eq','sLncvLq','tK1xDuu','vwz4A0m','uMLLwg0','EvHRr0C','tMH5AK0','ouDku0zLCG','x19WCM90B19F','CMf0zuXPBwL0u2vYDMLJzq','Aw5JBhvKzxm','tMLRwKy','yw50AhjVCgLJlxnVBM5LDa','vxbKyxrPBMCGy29UDMvYC2f0Aw9UoIa','C2v0','teDgB2C','y29UC3rYDwn0B3i','ota2nJu2oeHkAhHgEa','ChjVBxb0x3rVB19SB25N','revgqvvmvf9srvrswv9nvuXusvbmsuvs','BeflshK','CMDwr3m','tNjewvC','AhHwufK','yw50AhjVCgLJlwHHAwT1','yxv0AgvUDgLJyxrPB24GzMfPBgvK','qu9PvNK','t21RC2G','C291CMnL','ndu3mtaXnM1ZAwDOwq','qwXSieXmtsbZzxj2AwnLCYbZAhv0igrVD24','C2v0qNvKz2v0tgLTAxq','B3bLBMfP','v0LsDfm','Aw5PDgLHBgL6zq','Aw52ywXPzcbYzxf1zxn0igzVCM1HDa','x3nLBgvJDejHBgfUy2vKu2vYDMLJzq','DxbKyxrLq29UDMvYC2f0Aw9U','yMf3quO','txrwBw8','q29UDMvYC2f0Aw9UihjLC3vTzwq','Auvbtu0','EM51tNy','BwvZC2fNzq','D1blthq','DgHYB3r0Bgu','q2fUBM90igDLDcbZDw1Tyxj5oIbZzxj2AwnLia','zwPwDgu','zMXosxa','ywL2y0O','q1njD0G','yLHuz3e','zfzMreS','zw5ZDxjLsw5PDgLHBgL6zwq','wvfduhm','Bg53uhC','C2vYDMLJzvn0yxr1CW','y29TCgfJDgL6yxrPB25ezwXHEu1Z','zhj3yMW','x2LUAxrPywXPEMvcDwrNzxrtzxj2AwnL','BgvUz3rO','vvv5sNm','rMPuEuG','ze9vy04','CuTnuvi','y2HLy2TcDwrNzxrgB3jpCgvYyxrPB24','DKjAv1y','CMvZzxrsyxrLtgLTAxriAxrZ','txnSEwm','y3nNCK0','qMXewgW','rNjeDLK','DwzVDfG','wg5xq28','ChvZAa','qvjfsNC','Bg9Nz2vY','tLvXy1K','Aw5MBW','t0DnBhC','ugn0Bgm','r2v0DgLUzYbZDw1Tyxj5igzVCIbJB252zxjZyxrPB246ia','DwvLru0','qNvKz2v0ihnLCNzPy2uGBM90igf2ywLSywjSzq','ALP2t0u','ren1s0G','vMP4teW','C2L6zq','rhzMz3i','BMv0D29YAW','x2LUAxrPywXPEMvtzxj2zxjtzxj2AwnL','AKPlEKu','vvPUvwq','mJe1otG0ohfSzLzqzW','uMXpEKC','wfr6zuK','AxznBw8','x3nLBgvJDfzPC2LVBLnLCNzPy2u','ntaZ','EvrdC0q','uMvXDwvZDcb0B28GBgfYz2uGyw5Kig5VignVBxbHy3rPEMf0Aw9UigHHBMrSzxiGyxzHAwXHyMXL','z1jiBNK','C2vYDMvYsgvHBhrO','u2H1DhrPBMCGzg93BIbZzxj2AwnLoIa','DMfSAwrHDgLVBG','x3nLBgvJDezHC3rLC3rtzxj2AwnL','teXNDwq','tK9ux0zpvu5e','A2v5CW','q29TCgfJDgL6yxrPB24GzMfPBgvKoG','q29UDMvYC2f0Aw9Uia','CxvVDgeGzxHJzwvKzwq','qwXSihzPC2LVBIbYzxrYEsbHDhrLBxb0CYbMywLSzwq6ia','qwrKAw5Nia','z1bLweS','yMfZzurLBgf5txm','t09evvO','ufjptvbux1rpt19mt05h','CNPKu1G','shvrzhK','D1L3yvG','CMD2qKu','CMvNAxn0zxjdB252zxjZyxrPB24','zffcvfa','tKvuv09ssW','y29UC29Szq','qM9Kwvi','whDtq1K','vvzQqLC','Cg93','uMf0zsbSAw1PDcbYzxrYEsb0AhjLC2HVBgqGzxHJzwvKzwqGka','uwjztuK','DNPpCuq','BwHqEwG','A1ndCgi','8j+AQcbszxf1zxn0ihrVBYbSyxjNzsbKzxrLy3rLzcbMB3iG','sfrUyvi','y29UDgv4DcbSzw5NDgGGzxHJzwvKzwq','sfruuf9tvefuvvm','A2XHvKK','thL4yvO','zePUB0m','rxPqC0i','rMfPBgvKihrVihvWzgf0zsbJB252zxjZyxrPB24G','wvb0C0O','ExzgEuO','BuHRyxu','u0LQteW','CMv0DxjUicHMDw5JDgLVBIGPia','qxDjwMK','mtC0nZmZmg5uvwrRsW','uwXxruG','Bwf4uMv0CMLLCW','x2LZuMvXDwvZDfrVB0XHCMDLrxjYB3i','CMf0zsbSAw1PDa','x2LZtM9UuMv0CNLHyMXLrxjYB3i','u2vYDMLJzsa','twT2rKm','ChjPBwfYEvnLCNzPy2u','D1Pcshu','q2fUBM90igDLDcbZDw1Tyxj5oIbJB252zxjZyxrPB24G','rwzZy2S','ywPUBNa','vgXSrNq','B3jPz2LUywXfCNjVCG','DLjsv3e','revgqvvmvf9tvu1nqvjzx1nfuLzjq0u','qw1nsfy','Aw50zwXSAwDLBMnL','rxjYB3iGC2H1DhrPBMCGzg93BIbIDwrNzxqGC2vYDMLJztO','q1ffyuq','AgfZ','AgvHBhrOEq','t2Tjrwy','zwryuLG','CMvXDwvZDcb0B28GBgfYz2u','DxbKyxrLuhjPy2LUz0zYB21tzxj2zxi','C2rSsw4','tu9eruXFufjfrKvsru5drq','DvDcvuu','C2vYDMvYteXnu2vYDMLJzq','zMrTAvC','qwTZvMi','ndzOq2PICwK','igLZig5VDcbYzwDPC3rLCMvKihDPDgGGyw55ihnLCNzPy2u','C2vYDMvY','ndi5','uxrVuKW','zw50CMLLCW','Dg90ywXnB2rLBhm','revgqvvmvf9srvrswv9eruXbwv9nuW','r2Lnz1a','Bwf4uMf0zuXPBwL0uMv0CMLLCW','z2v0u2vYDMLJzvn0yxr1CW','uw5xsvG','yK5Nrfe','u2vYDMvYihzPC2LVBIbZzxj2AwnLigzHAwXLzcWGDhj5Aw5NigzHBgXIywnRoG','AKP6rMC','Dg9Vig1HBNKGCMvXDwvZDhm','ufzzuKC','ANboreu','we92uuG','ohWXmhWXFdr8mtn8mtj8mNWXmxW3Fdb8mtr8oxW1Fdz8mW','wMjrq3K','yxbWBhK','yNrpv1G','ihDPDgGGyw55ihnLCNzPy2u','r1HXAha','EgHjAeW','C0z2BNm','vwnWwwK','tgTJtgi','Buj1y2m','rgf1sLO','x2HHBMrSzvbYB21WDfrVB0XVBMDfCNjVCG','CvzoAfi','uNr3yK0','z2v0ugvYzM9YBwfUy2vnzxrYAwnZ','x3nLBgvJDef2ywLSywjSzvnLCNzPy2u','yxP1CMuTywKTz3jVAZm','yvD4uuG','v2rUBNe','vxnPBMCGC2fTzsbZzxj2AwnLigzVCIbZDw1Tyxj5oIa','y2Dhrey','z2v0qwXSuhjPy2LUzW','tK9YC2G','r2fJq2G','CgvYzM9YBwfUy2vnzxrYAwnZ','t2vLCKW','x3nLBgvJDfnTyxj0zxn0u2vYDMLJzq','revVzLy','z2v0q29ZDevZDgLTyxrL','z2X5zeG','C2vYDMLJzuLUC3rHBMnLCW','t0PwsMy','rM9lshe','wvP0rhm','ruDysNK','C3jvBgG','zuDYueC'];a0_0x13d8=function(){return _0x2aeac5;};return a0_0x13d8();}a0_0x513603[a0_0x23ba4a(0x1aa)]=REQUEST_SIZE_ERROR_PATTERNS,a0_0x513603[a0_0x23ba4a(0x23d)]=[a0_0x23ba4a(0x37c),a0_0x23ba4a(0x38e),a0_0x23ba4a(0x251),'maximum\x20context\x20length'],a0_0x513603['RATE_LIMIT']=[a0_0x23ba4a(0x262),a0_0x23ba4a(0x28e),a0_0x23ba4a(0x237),a0_0x23ba4a(0x1f5)];const a0_0x55d408={};a0_0x55d408[a0_0x23ba4a(0x2e8)]='speed',a0_0x55d408[a0_0x23ba4a(0x39c)]=a0_0x23ba4a(0x270),a0_0x55d408[a0_0x23ba4a(0x32e)]=a0_0x23ba4a(0x1c4),a0_0x55d408[a0_0x23ba4a(0x19e)]=a0_0x23ba4a(0x2e1);const a0_0x34a2a9={};a0_0x34a2a9[a0_0x23ba4a(0x3c6)]=a0_0x23ba4a(0x3dd),a0_0x34a2a9[a0_0x23ba4a(0x1af)]='degraded',a0_0x34a2a9['UNAVAILABLE']=a0_0x23ba4a(0x3de);const a0_0xc8e770={};a0_0xc8e770[a0_0x23ba4a(0x2e8)]=['anthropic-haiku','azure-ai-phi4',a0_0x23ba4a(0x30a),'google-gemini',a0_0x23ba4a(0x1d4),'azure-openai-gpt4','anthropic-opus'],a0_0xc8e770[a0_0x23ba4a(0x39c)]=[a0_0x23ba4a(0x36e),a0_0x23ba4a(0x2fc),a0_0x23ba4a(0x2a3),'anthropic-sonnet',a0_0x23ba4a(0x348),a0_0x23ba4a(0x30a),a0_0x23ba4a(0x1e0)],a0_0xc8e770[a0_0x23ba4a(0x19e)]=[a0_0x23ba4a(0x1d4),a0_0x23ba4a(0x2fc),a0_0x23ba4a(0x2a3),'google-gemini','anthropic-opus',a0_0x23ba4a(0x30a),'anthropic-haiku'];const a0_0x5e5162={};a0_0x5e5162[a0_0x23ba4a(0x23d)]=a0_0x23ba4a(0x1da),a0_0x5e5162[a0_0x23ba4a(0x3c5)]=a0_0x23ba4a(0x382),a0_0x5e5162[a0_0x23ba4a(0x364)]='authentication',a0_0x5e5162[a0_0x23ba4a(0x244)]=a0_0x23ba4a(0x221),a0_0x5e5162[a0_0x23ba4a(0x38d)]=a0_0x23ba4a(0x281),a0_0x5e5162['VALIDATION']=a0_0x23ba4a(0x230);const a0_0x4ef4fe={};a0_0x4ef4fe[a0_0x23ba4a(0x252)]=HTTP_STATUS_CODES,a0_0x4ef4fe[a0_0x23ba4a(0x2cc)]=a0_0x513603,a0_0x4ef4fe[a0_0x23ba4a(0x3e5)]=a0_0x55d408,a0_0x4ef4fe[a0_0x23ba4a(0x350)]=0x3,a0_0x4ef4fe[a0_0x23ba4a(0x286)]=0x3e8,a0_0x4ef4fe[a0_0x23ba4a(0x1db)]=0x2,a0_0x4ef4fe[a0_0x23ba4a(0x26e)]='server',a0_0x4ef4fe[a0_0x23ba4a(0x355)]=a0_0x34a2a9,a0_0x4ef4fe[a0_0x23ba4a(0x27a)]=a0_0xc8e770,a0_0x4ef4fe[a0_0x23ba4a(0x2d5)]=a0_0x5e5162;const LLM_CONSTANTS=a0_0x4ef4fe;export class LLMService{constructor(_0x39ced0,_0x4aa30e){const _0xfa4a3b=a0_0x23ba4a,_0x56b19c={};_0x56b19c['nCTBY']='Failed\x20to\x20initialize\x20LLM\x20services\x20in\x20constructor:',_0x56b19c[_0xfa4a3b(0x240)]=function(_0x1f91d5,_0x16ad0e){return _0x1f91d5!==_0x16ad0e;},_0x56b19c[_0xfa4a3b(0x1e9)]=_0xfa4a3b(0x3ce);const _0x51a6e9=_0x56b19c;this[_0xfa4a3b(0x33d)]=_0x39ced0,this[_0xfa4a3b(0x214)]=_0x4aa30e,this['serviceInstances']=new Map(),this['conversationServices']=new Map(),this[_0xfa4a3b(0x200)]=new Map(),this[_0xfa4a3b(0x3b9)]=_0x51a6e9[_0xfa4a3b(0x240)](_0x39ced0[_0xfa4a3b(0x3b9)],![]),this[_0xfa4a3b(0x266)]=null,this[_0xfa4a3b(0x27c)]=null,this[_0xfa4a3b(0x326)]=![],this[_0xfa4a3b(0x1d1)]=new RateLimitService(_0x4aa30e),this[_0xfa4a3b(0x2ca)]=null,this[_0xfa4a3b(0x2e2)]=null;const _0x29ffc8={};_0x29ffc8['totalRequests']=0x0,_0x29ffc8['successfulRequests']=0x0,_0x29ffc8[_0xfa4a3b(0x3c4)]=0x0,_0x29ffc8['totalLatency']=0x0,_0x29ffc8[_0xfa4a3b(0x35c)]=0x0,this[_0xfa4a3b(0x2ab)]=_0x29ffc8,this['logger'][_0xfa4a3b(0x216)](_0x51a6e9[_0xfa4a3b(0x1e9)],{'useServerLLM':this[_0xfa4a3b(0x3b9)],'strategy':_0x39ced0[_0xfa4a3b(0x194)]||LLM_CONSTANTS['STRATEGY'][_0xfa4a3b(0x19e)]}),this[_0xfa4a3b(0x1ea)]()[_0xfa4a3b(0x3a9)](_0x49186d=>{const _0x12488a=_0xfa4a3b;this[_0x12488a(0x214)][_0x12488a(0x359)](_0x51a6e9[_0x12488a(0x2dd)],_0x49186d);});}async[a0_0x23ba4a(0x1ea)](){const _0x54c097=a0_0x23ba4a,_0x211cf7={};_0x211cf7[_0x54c097(0x1b8)]=_0x54c097(0x2c3),_0x211cf7[_0x54c097(0x298)]=_0x54c097(0x277),_0x211cf7[_0x54c097(0x1f4)]=_0x54c097(0x220),_0x211cf7[_0x54c097(0x381)]='Xqtbm',_0x211cf7[_0x54c097(0x2d6)]=function(_0x5df422,_0x48234c){return _0x5df422===_0x48234c;},_0x211cf7[_0x54c097(0x18f)]=_0x54c097(0x39d),_0x211cf7['gdNhP']=_0x54c097(0x32b),_0x211cf7[_0x54c097(0x21a)]=_0x54c097(0x291),_0x211cf7['tPCRv']='No\x20LLM\x20services\x20are\x20available',_0x211cf7['LyxaZ']=function(_0x193cbb,_0x3434bc){return _0x193cbb===_0x3434bc;},_0x211cf7[_0x54c097(0x195)]=_0x54c097(0x1c8);const _0x2a25e7=_0x211cf7;if(this[_0x54c097(0x326)]){if(_0x2a25e7[_0x54c097(0x1f4)]===_0x2a25e7[_0x54c097(0x381)]){const _0x23269d=_0x4e47bb?function(){const _0x1f2462=_0x54c097;if(_0x33b81e){const _0x4cefe4=_0x2f0946[_0x1f2462(0x294)](_0x25e8a8,arguments);return _0x3477a5=null,_0x4cefe4;}}:function(){};return _0x275f5a=![],_0x23269d;}else return;}this[_0x54c097(0x214)][_0x54c097(0x216)](_0x54c097(0x2f2)+this[_0x54c097(0x3b9)]+')');try{if(_0x2a25e7[_0x54c097(0x2d6)](_0x2a25e7[_0x54c097(0x18f)],'jqxSC')){const _0x4c804b=_0x5bb7f8[_0x54c097(0x1f3)]?.[_0x54c097(0x2f6)]()||'',_0xd0bbeb=_0x485e5a[_0x54c097(0x342)]||_0x460470[_0x54c097(0x26c)]?.[_0x54c097(0x342)];return _0xd0bbeb===0x19d||_0x4c804b['includes'](_0x2a25e7[_0x54c097(0x1b8)])||_0x4c804b[_0x54c097(0x1d2)]('payload\x20too\x20large')||_0x4c804b['includes'](_0x2a25e7[_0x54c097(0x298)]);}else{if(this['useServerLLM']){if(_0x2a25e7['gdNhP']!==_0x2a25e7[_0x54c097(0x21a)])await this['_initializeServerService']();else return _0x4106c3;}this[_0x54c097(0x203)]();if(_0x2a25e7[_0x54c097(0x2d6)](this[_0x54c097(0x2b1)][_0x54c097(0x21f)],0x0))throw new Error(_0x2a25e7['tPCRv']);this[_0x54c097(0x326)]=!![],this['logger']['info'](_0x54c097(0x1ad)+this[_0x54c097(0x2b1)]['size']+_0x54c097(0x3aa),{'primary':this[_0x54c097(0x266)],'services':Array[_0x54c097(0x1ba)](this[_0x54c097(0x2b1)][_0x54c097(0x234)]())});}}catch(_0x274976){if(_0x54c097(0x346)!=='Ezypy'){if(_0x56e2ac){const _0x1353f4=_0x5b6a04['apply'](_0x2a81c4,arguments);return _0x492447=null,_0x1353f4;}}else{this[_0x54c097(0x214)][_0x54c097(0x359)]('Failed\x20to\x20initialize\x20LLM\x20services:',_0x274976);if(_0x2a25e7[_0x54c097(0x254)](this[_0x54c097(0x326)],![]))this[_0x54c097(0x214)][_0x54c097(0x319)](_0x2a25e7[_0x54c097(0x195)]);else throw _0x274976;}}}async[a0_0x23ba4a(0x222)](){const _0x378cdc=a0_0x23ba4a,_0xd5ed69={};_0xd5ed69[_0x378cdc(0x3d3)]=_0x378cdc(0x281),_0xd5ed69['qCwxU']=_0x378cdc(0x191),_0xd5ed69[_0x378cdc(0x27e)]=_0x378cdc(0x2da),_0xd5ed69[_0x378cdc(0x2cf)]=function(_0x4a2f44,_0x23e42f){return _0x4a2f44!==_0x23e42f;},_0xd5ed69[_0x378cdc(0x21d)]=_0x378cdc(0x1f1),_0xd5ed69['inpVK']=_0x378cdc(0x1cb),_0xd5ed69[_0x378cdc(0x2f8)]='2|4|3|0|1';const _0x1b524c=_0xd5ed69;try{this[_0x378cdc(0x214)][_0x378cdc(0x216)](_0x1b524c[_0x378cdc(0x3a6)]),this[_0x378cdc(0x27c)]=new ServerLLMService(this[_0x378cdc(0x33d)],this[_0x378cdc(0x214)]),await this[_0x378cdc(0x27c)][_0x378cdc(0x1ea)](),this[_0x378cdc(0x2b1)][_0x378cdc(0x1d6)](_0x1b524c['YvSOB'],this[_0x378cdc(0x27c)]),this[_0x378cdc(0x200)][_0x378cdc(0x1d6)](_0x378cdc(0x281),LLM_CONSTANTS[_0x378cdc(0x355)][_0x378cdc(0x3c6)]),this[_0x378cdc(0x266)]=_0x1b524c[_0x378cdc(0x3d3)];const _0x141fa5=await this[_0x378cdc(0x27c)][_0x378cdc(0x397)]()||[];this[_0x378cdc(0x214)][_0x378cdc(0x216)](_0x1b524c[_0x378cdc(0x27e)],{'modelsAvailable':this[_0x378cdc(0x27c)][_0x378cdc(0x397)]()[_0x378cdc(0x204)]});}catch(_0x502505){if(_0x1b524c[_0x378cdc(0x2cf)](_0x1b524c[_0x378cdc(0x21d)],_0x1b524c[_0x378cdc(0x1bf)])){const _0x2476e5=_0x1b524c[_0x378cdc(0x2f8)][_0x378cdc(0x38b)]('|');let _0x1cb233=0x0;while(!![]){switch(_0x2476e5[_0x1cb233++]){case'0':this[_0x378cdc(0x27c)]=null;continue;case'1':this[_0x378cdc(0x214)][_0x378cdc(0x319)](_0x378cdc(0x3be));continue;case'2':this[_0x378cdc(0x214)]['error']('Failed\x20to\x20initialize\x20server\x20LLM\x20service:',_0x502505);continue;case'3':this[_0x378cdc(0x266)]=null;continue;case'4':this[_0x378cdc(0x3b9)]=![];continue;}break;}}else return _0x1b524c[_0x378cdc(0x3d3)];}}[a0_0x23ba4a(0x203)](){const _0x45c4d7=a0_0x23ba4a,_0x2a4ed0={};_0x2a4ed0[_0x45c4d7(0x31e)]='Budget\x20service\x20initialized\x20with\x20dynamic\x20pricing\x20support';const _0x4f8ae3=_0x2a4ed0;this['budgetService']=new BudgetService(this['config'],this[_0x45c4d7(0x214)],this[_0x45c4d7(0x27c)]),this[_0x45c4d7(0x214)][_0x45c4d7(0x216)](_0x4f8ae3[_0x45c4d7(0x31e)]);}async[a0_0x23ba4a(0x1fd)](){const _0x173fb3=a0_0x23ba4a,_0x201fec={};_0x201fec['fdmiW']='TwSOA';const _0x593a34=_0x201fec;!this[_0x173fb3(0x326)]&&(_0x593a34[_0x173fb3(0x27d)]!==_0x593a34[_0x173fb3(0x27d)]?this[_0x173fb3(0x214)][_0x173fb3(0x319)]('Failed\x20to\x20record\x20usage\x20for\x20budget\x20tracking:',_0x4bb3f7):await this['initialize']());}async[a0_0x23ba4a(0x397)](){const _0x2d2157=a0_0x23ba4a;await this['ensureInitialized']();const _0x4abe14=[];if(this[_0x2d2157(0x27c)]&&this[_0x2d2157(0x326)])try{let _0x191674=await this[_0x2d2157(0x27c)]['getAvailableModels']();_0x4abe14[_0x2d2157(0x212)](..._0x191674);}catch(_0x177e37){this[_0x2d2157(0x214)]['warn']('Failed\x20to\x20get\x20models\x20from\x20server\x20service:',_0x177e37);}return _0x4abe14;}async[a0_0x23ba4a(0x1ac)](){const _0x58ac11=a0_0x23ba4a;return this[_0x58ac11(0x2ca)]?await this[_0x58ac11(0x2ca)][_0x58ac11(0x2a8)]():new Map();}async[a0_0x23ba4a(0x242)](_0x29543c,_0x5ebfab,_0x1fa1fc){const _0x9dc077=a0_0x23ba4a,_0x1b8747={};_0x1b8747['drwbl']=function(_0x461f8b,_0x5ec1fb){return _0x461f8b===_0x5ec1fb;},_0x1b8747[_0x9dc077(0x2a4)]=_0x9dc077(0x2f3),_0x1b8747[_0x9dc077(0x232)]=_0x9dc077(0x1bc),_0x1b8747[_0x9dc077(0x3db)]=_0x9dc077(0x299),_0x1b8747[_0x9dc077(0x31f)]=_0x9dc077(0x2ae),_0x1b8747[_0x9dc077(0x1f7)]=_0x9dc077(0x365),_0x1b8747[_0x9dc077(0x2d7)]=function(_0x4a907d,_0x3c5b79){return _0x4a907d!==_0x3c5b79;},_0x1b8747[_0x9dc077(0x35b)]='SXWCc',_0x1b8747[_0x9dc077(0x3e9)]=_0x9dc077(0x2c7),_0x1b8747[_0x9dc077(0x23e)]=function(_0x2933cf,_0x65788e){return _0x2933cf===_0x65788e;},_0x1b8747[_0x9dc077(0x2c0)]=_0x9dc077(0x27b),_0x1b8747['mcano']=_0x9dc077(0x392);const _0x21ceb9=_0x1b8747;await this[_0x9dc077(0x1fd)](),this[_0x9dc077(0x214)][_0x9dc077(0x216)](_0x9dc077(0x3e8)+_0x29543c);const _0x5df5d6=this[_0x9dc077(0x332)](_0x29543c);if(!_0x5df5d6){if(_0x21ceb9[_0x9dc077(0x3db)]===_0x21ceb9[_0x9dc077(0x31f)])_0x21ceb9[_0x9dc077(0x202)](typeof _0x406377[_0x9dc077(0x335)],_0x21ceb9[_0x9dc077(0x2a4)])&&(this[_0x9dc077(0x214)][_0x9dc077(0x216)]('Shutting\x20down\x20service:\x20'+_0x52bb39),_0xf7a32d[_0x9dc077(0x212)](_0x4512e9['shutdown']()['catch'](_0x4f0f37=>{const _0x34c76b=_0x9dc077;this[_0x34c76b(0x214)]['error'](_0x34c76b(0x36b)+_0x15e421+':',_0x4f0f37);})));else{const _0x43be8b={'useServerLLM':this[_0x9dc077(0x3b9)],'serviceInstancesCount':this[_0x9dc077(0x2b1)]['size'],'serviceInstances':Array[_0x9dc077(0x1ba)](this['serviceInstances'][_0x9dc077(0x234)]()),'serviceStatusCount':this[_0x9dc077(0x200)][_0x9dc077(0x21f)],'serviceStatus':Object['fromEntries'](this[_0x9dc077(0x200)][_0x9dc077(0x284)]()),'isInitialized':this[_0x9dc077(0x326)]};this[_0x9dc077(0x214)]['error'](_0x21ceb9[_0x9dc077(0x1f7)],_0x43be8b);throw new Error('No\x20suitable\x20LLM\x20service\x20available\x20for\x20this\x20conversation.\x20Debug:\x20'+JSON[_0x9dc077(0x35f)](_0x43be8b));}}const _0x56f20d=this[_0x9dc077(0x2b1)]['get'](_0x5df5d6);try{await _0x56f20d['registerConversation'](_0x29543c,_0x5ebfab,_0x1fa1fc),this[_0x9dc077(0x2d2)]['set'](_0x29543c,_0x5df5d6),this[_0x9dc077(0x214)][_0x9dc077(0x216)](_0x9dc077(0x33c)+_0x29543c+_0x9dc077(0x2c4)+_0x5df5d6);}catch(_0x577290){this[_0x9dc077(0x214)][_0x9dc077(0x359)]('Failed\x20to\x20register\x20conversation\x20'+_0x29543c+':',_0x577290);const _0x19c22e=this['_selectFallbackService'](_0x5df5d6);if(_0x19c22e){if(_0x21ceb9[_0x9dc077(0x2d7)](_0x21ceb9[_0x9dc077(0x35b)],_0x21ceb9['TihIV'])){const _0x35cd7a=this['serviceInstances'][_0x9dc077(0x2ce)](_0x19c22e);await _0x35cd7a[_0x9dc077(0x242)](_0x29543c,_0x5ebfab,_0x1fa1fc),this[_0x9dc077(0x2d2)]['set'](_0x29543c,_0x19c22e),this[_0x9dc077(0x214)]['info'](_0x9dc077(0x33c)+_0x29543c+_0x9dc077(0x361)+_0x19c22e);}else{this[_0x9dc077(0x214)]['error'](_0x9dc077(0x2c5)+_0x181122+':',_0x5a8c52);throw _0x4e9b8c;}}else{if(_0x21ceb9[_0x9dc077(0x23e)](_0x21ceb9['equPJ'],_0x21ceb9['mcano']))throw new _0x30f8b7(_0x21ceb9['LLgud']);else throw new Error('Failed\x20to\x20register\x20conversation\x20'+_0x29543c+_0x9dc077(0x296));}}}async[a0_0x23ba4a(0x3c3)](_0x4b4e9d,_0x1207a9,_0x4a4d59){const _0xacf1d5=a0_0x23ba4a,_0x4021ba={};_0x4021ba[_0xacf1d5(0x325)]=function(_0x742432,_0x349ba4){return _0x742432===_0x349ba4;},_0x4021ba[_0xacf1d5(0x3a0)]=_0xacf1d5(0x39f);const _0x1dd9d7=_0x4021ba,_0x2d5052=Date['now']();this[_0xacf1d5(0x2ab)][_0xacf1d5(0x395)]++;try{const _0x36448f=this[_0xacf1d5(0x2d2)][_0xacf1d5(0x2ce)](_0x4b4e9d);if(!_0x36448f){if(_0x1dd9d7[_0xacf1d5(0x325)](_0x1dd9d7[_0xacf1d5(0x3a0)],_0xacf1d5(0x23c)))this[_0xacf1d5(0x214)][_0xacf1d5(0x319)](_0xacf1d5(0x28c),_0x2552ed);else throw new Error(_0xacf1d5(0x236)+_0x4b4e9d+'\x20is\x20not\x20registered\x20with\x20any\x20service');}const _0x50764e=this[_0xacf1d5(0x2b1)]['get'](_0x36448f);if(!_0x50764e)throw new Error('Service\x20'+_0x36448f+_0xacf1d5(0x1ab)+_0x4b4e9d);const _0x4ba5e6=this['_getServiceModelId'](_0x36448f);await this[_0xacf1d5(0x1d1)][_0xacf1d5(0x2e6)](_0x4ba5e6);const _0x7db377=await this[_0xacf1d5(0x2cb)](_0x50764e,_0x36448f,_0x4b4e9d,_0x1207a9,_0x4a4d59);return await this[_0xacf1d5(0x3bf)](_0x50764e,_0x36448f,_0x2d5052,!![]),_0x7db377;}catch(_0x23dfe0){this[_0xacf1d5(0x2ab)][_0xacf1d5(0x3c4)]++,this[_0xacf1d5(0x214)][_0xacf1d5(0x359)](_0xacf1d5(0x1be)+_0x4b4e9d+':',_0x23dfe0);throw _0x23dfe0;}}async[a0_0x23ba4a(0x2cb)](_0x220884,_0x325bac,_0x4c5de5,_0x217bbb,_0x1faa39){const _0x4a1f72=a0_0x23ba4a,_0x557a4b={};_0x557a4b[_0x4a1f72(0x31a)]='degraded',_0x557a4b[_0x4a1f72(0x207)]=function(_0x474431,_0x4240b9){return _0x474431!==_0x4240b9;},_0x557a4b[_0x4a1f72(0x259)]=function(_0x504030,_0xc383e4){return _0x504030===_0xc383e4;},_0x557a4b[_0x4a1f72(0x2ff)]=function(_0x29887e,_0x4a09c8){return _0x29887e!==_0x4a09c8;},_0x557a4b[_0x4a1f72(0x2e4)]=_0x4a1f72(0x281),_0x557a4b[_0x4a1f72(0x389)]=function(_0x4eed26,_0x4f0b64){return _0x4eed26===_0x4f0b64;},_0x557a4b[_0x4a1f72(0x3ab)]=_0x4a1f72(0x317),_0x557a4b[_0x4a1f72(0x18b)]=function(_0x1e438f,_0x29d2d8){return _0x1e438f===_0x29d2d8;},_0x557a4b[_0x4a1f72(0x1f8)]=function(_0x513822,_0x35a5a8){return _0x513822+_0x35a5a8;},_0x557a4b[_0x4a1f72(0x301)]=_0x4a1f72(0x31b),_0x557a4b[_0x4a1f72(0x1fa)]='hwKtd',_0x557a4b[_0x4a1f72(0x391)]=_0x4a1f72(0x24e),_0x557a4b[_0x4a1f72(0x1c1)]=_0x4a1f72(0x39a),_0x557a4b[_0x4a1f72(0x349)]=function(_0x1ba6b8,_0x361600){return _0x1ba6b8===_0x361600;},_0x557a4b['gPeXK']=_0x4a1f72(0x29d),_0x557a4b[_0x4a1f72(0x3e7)]='lmazF',_0x557a4b[_0x4a1f72(0x358)]=function(_0xb3ebfe,_0x2c1925){return _0xb3ebfe<_0x2c1925;},_0x557a4b[_0x4a1f72(0x26b)]=function(_0x22ca39,_0x63cb68){return _0x22ca39!==_0x63cb68;},_0x557a4b[_0x4a1f72(0x1e2)]=_0x4a1f72(0x2cd),_0x557a4b['wGqtS']=function(_0x38b852,_0xd39bfe){return _0x38b852===_0xd39bfe;},_0x557a4b[_0x4a1f72(0x1e3)]=_0x4a1f72(0x1ae),_0x557a4b[_0x4a1f72(0x37e)]=_0x4a1f72(0x3e2),_0x557a4b[_0x4a1f72(0x371)]=function(_0x3b76ca,_0x3f4c21){return _0x3b76ca>=_0x3f4c21;},_0x557a4b['GzgIJ']=_0x4a1f72(0x250),_0x557a4b[_0x4a1f72(0x2bf)]=_0x4a1f72(0x20e),_0x557a4b[_0x4a1f72(0x3a3)]=_0x4a1f72(0x2eb);const _0x38c6af=_0x557a4b,_0x4b7202=this[_0x4a1f72(0x33d)]['retries']?.[_0x4a1f72(0x260)]||LLM_CONSTANTS[_0x4a1f72(0x350)],_0x38e279=this[_0x4a1f72(0x33d)][_0x4a1f72(0x36d)]?.[_0x4a1f72(0x288)]||0x5,_0x4e7e06=this[_0x4a1f72(0x33d)][_0x4a1f72(0x36d)]?.[_0x4a1f72(0x201)]||0x7d0;let _0x173405=0x0,_0x2edf4b=0x0,_0x312dcf=null;while(_0x173405<=_0x4b7202){try{const _0x31af18=await _0x220884[_0x4a1f72(0x3c3)](_0x4c5de5,_0x217bbb,_0x1faa39);if(_0x38c6af['QZDPZ'](_0x325bac,_0x38c6af[_0x4a1f72(0x2e4)])){if(_0x38c6af[_0x4a1f72(0x389)](_0x38c6af[_0x4a1f72(0x3ab)],_0x38c6af['SjBNR'])){const _0x39cb17=this['_getServiceModelId'](_0x325bac);this[_0x4a1f72(0x1d1)][_0x4a1f72(0x20b)](_0x39cb17);}else _0x1ad91c[_0x4a1f72(0x313)]=_0x38c6af[_0x4a1f72(0x31a)];}return _0x38c6af[_0x4a1f72(0x18b)](this[_0x4a1f72(0x200)][_0x4a1f72(0x2ce)](_0x325bac),LLM_CONSTANTS[_0x4a1f72(0x355)][_0x4a1f72(0x1af)])&&this[_0x4a1f72(0x200)][_0x4a1f72(0x1d6)](_0x325bac,LLM_CONSTANTS[_0x4a1f72(0x355)][_0x4a1f72(0x3c6)]),_0x31af18;}catch(_0x18a6e8){_0x312dcf=_0x18a6e8,this[_0x4a1f72(0x214)][_0x4a1f72(0x359)]('Request\x20failed\x20(attempt\x20'+_0x38c6af[_0x4a1f72(0x1f8)](_0x173405,0x1)+'/'+_0x38c6af[_0x4a1f72(0x1f8)](_0x4b7202,0x1)+'):',_0x18a6e8);if(this[_0x4a1f72(0x396)](_0x18a6e8)){if(_0x38c6af[_0x4a1f72(0x2ff)](_0x38c6af['DSLui'],_0x38c6af[_0x4a1f72(0x1fa)])){await this[_0x4a1f72(0x29e)](_0x4c5de5);const _0x4288ff=this['_getServiceModelId'](_0x325bac);this[_0x4a1f72(0x214)][_0x4a1f72(0x216)](_0x4a1f72(0x239)+_0x4e7e06+'ms\x20delay\x20after\x20compactization'),await this[_0x4a1f72(0x3b4)](_0x4e7e06),await this[_0x4a1f72(0x1d1)][_0x4a1f72(0x2e6)](_0x4288ff);continue;}else throw new _0x38b863(_0x4a1f72(0x190)+_0x12827f+'\x20with\x20any\x20service');}if(this[_0x4a1f72(0x261)](_0x18a6e8)){if(_0x38c6af[_0x4a1f72(0x391)]!==_0x4a1f72(0x36c)){await this[_0x4a1f72(0x3ac)](_0x4c5de5);const _0x1c7348=this[_0x4a1f72(0x1c5)](_0x325bac);this[_0x4a1f72(0x214)][_0x4a1f72(0x216)](_0x4a1f72(0x239)+_0x4e7e06+_0x4a1f72(0x2fe)),await this[_0x4a1f72(0x3b4)](_0x4e7e06),await this[_0x4a1f72(0x1d1)][_0x4a1f72(0x2e6)](_0x1c7348);continue;}else return new _0x4454ed(_0x2bbd69=>_0x23f19c(_0x2bbd69,_0x2553b8));}if(_0x325bac!==_0x4a1f72(0x281)&&this[_0x4a1f72(0x3dc)](_0x18a6e8)){if(_0x38c6af[_0x4a1f72(0x207)](_0x38c6af[_0x4a1f72(0x1c1)],_0x4a1f72(0x1ff))){const _0x17bca7=this[_0x4a1f72(0x1c5)](_0x325bac);_0x2edf4b++;if(_0x2edf4b>_0x38e279){if(_0x38c6af[_0x4a1f72(0x349)](_0x38c6af[_0x4a1f72(0x23a)],_0x38c6af['COiVi']))this[_0x4a1f72(0x2ab)]['successfulRequests']++;else throw new Error(_0x4a1f72(0x24a)+_0x38e279+'):\x20'+_0x18a6e8[_0x4a1f72(0x1f3)]);}this[_0x4a1f72(0x1d1)][_0x4a1f72(0x32f)](_0x17bca7);if(_0x38c6af[_0x4a1f72(0x358)](_0x173405,_0x4b7202)){if(_0x38c6af['TllFt'](_0x38c6af[_0x4a1f72(0x1e2)],_0x38c6af[_0x4a1f72(0x1e2)]))return null;else{this[_0x4a1f72(0x214)][_0x4a1f72(0x216)]('Rate\x20limit\x20error\x20detected,\x20waiting\x20and\x20retrying...\x20(rate\x20limit\x20attempt\x20'+_0x2edf4b+'/'+_0x38e279+')'),await this[_0x4a1f72(0x1d1)]['waitIfNeeded'](_0x17bca7);continue;}}}else _0x9c17ec['services'][_0xeaeb95]={'status':_0x3aa172,'available':_0x38c6af[_0x4a1f72(0x207)](_0x42aae9,_0x29f369[_0x4a1f72(0x355)][_0x4a1f72(0x35e)])},_0x38c6af['yvFyJ'](_0x40fb25,_0x429ad8[_0x4a1f72(0x355)][_0x4a1f72(0x35e)])&&(_0x1daa69[_0x4a1f72(0x313)]=_0x38c6af[_0x4a1f72(0x31a)]);}if(_0x38c6af[_0x4a1f72(0x18b)](_0x325bac,_0x4a1f72(0x281))&&this[_0x4a1f72(0x2e0)](_0x18a6e8)){if(_0x38c6af[_0x4a1f72(0x3b7)](_0x4a1f72(0x1ae),_0x38c6af[_0x4a1f72(0x1e3)])){const _0x33d17e=await this['_tryFallbackService'](_0x4c5de5,_0x217bbb,_0x1faa39);if(_0x33d17e)return _0x33d17e;}else throw new _0x3b23ed(_0x4a1f72(0x1f6)+_0x4ed428+_0x4a1f72(0x321));}if(this[_0x4a1f72(0x263)](_0x18a6e8)){if(_0x38c6af['yvFyJ'](_0x4a1f72(0x3e2),_0x38c6af[_0x4a1f72(0x37e)]))break;else _0x1f8ce5=_0x2f863b,_0x15b7dd=_0x411076;}if(_0x38c6af[_0x4a1f72(0x371)](_0x173405,_0x4b7202)){if(_0x38c6af[_0x4a1f72(0x2ff)](_0x38c6af[_0x4a1f72(0x1a9)],_0x38c6af[_0x4a1f72(0x2bf)]))break;else{const _0x131356=_0x30c750?function(){const _0x443e80=_0x4a1f72;if(_0x1717d9){const _0x1c1f07=_0x25cada[_0x443e80(0x294)](_0x76558f,arguments);return _0xc5c075=null,_0x1c1f07;}}:function(){};return _0xb447fc=![],_0x131356;}}this[_0x4a1f72(0x200)][_0x4a1f72(0x1d6)](_0x325bac,LLM_CONSTANTS[_0x4a1f72(0x355)][_0x4a1f72(0x1af)]);const _0x718cb4=this[_0x4a1f72(0x374)](_0x173405);await this[_0x4a1f72(0x3b4)](_0x718cb4),_0x173405++;}}throw new Error(_0x4a1f72(0x323)+(_0x312dcf?.[_0x4a1f72(0x1f3)]||_0x38c6af[_0x4a1f72(0x3a3)]));}async[a0_0x23ba4a(0x3ae)](_0x2da37d,_0x387981,_0x7c62d6){const _0x2a7d0a=a0_0x23ba4a,_0x4503e0={};_0x4503e0[_0x2a7d0a(0x3b6)]='server',_0x4503e0['qDUEo']=function(_0x59077a,_0x312436){return _0x59077a!==_0x312436;},_0x4503e0[_0x2a7d0a(0x3b5)]=_0x2a7d0a(0x2b3),_0x4503e0[_0x2a7d0a(0x213)]=_0x2a7d0a(0x1f0);const _0x270786=_0x4503e0,_0x19b412=this[_0x2a7d0a(0x3af)](_0x270786[_0x2a7d0a(0x3b6)]);if(!_0x19b412)return null;try{if(_0x270786[_0x2a7d0a(0x383)](_0x270786[_0x2a7d0a(0x3b5)],_0x2a7d0a(0x1de))){this[_0x2a7d0a(0x214)][_0x2a7d0a(0x216)]('Switching\x20to\x20fallback\x20service:\x20'+_0x19b412);const _0x3b4565=this[_0x2a7d0a(0x2b1)][_0x2a7d0a(0x2ce)](_0x19b412);return await _0x3b4565['registerConversation'](_0x2da37d,_0x7c62d6[_0x2a7d0a(0x2c9)]||_0x270786[_0x2a7d0a(0x213)]),this[_0x2a7d0a(0x2d2)][_0x2a7d0a(0x1d6)](_0x2da37d,_0x19b412),await _0x3b4565[_0x2a7d0a(0x3c3)](_0x2da37d,_0x387981,_0x7c62d6);}else return _0x292d65;}catch(_0x1a0b7e){return this[_0x2a7d0a(0x214)][_0x2a7d0a(0x359)]('Fallback\x20service\x20also\x20failed:\x20'+_0x1a0b7e[_0x2a7d0a(0x1f3)]),null;}}async[a0_0x23ba4a(0x3bf)](_0xc83275,_0x56c378,_0x1709ff,_0x2950e9){const _0x179324=a0_0x23ba4a,_0x2ce94={};_0x2ce94[_0x179324(0x2fa)]=function(_0x5b30de,_0x4e8073){return _0x5b30de===_0x4e8073;},_0x2ce94[_0x179324(0x1b6)]='Failed\x20to\x20initialize\x20LLM\x20services\x20in\x20constructor:',_0x2ce94[_0x179324(0x370)]=_0x179324(0x292),_0x2ce94[_0x179324(0x197)]=_0x179324(0x3ce),_0x2ce94[_0x179324(0x356)]=function(_0x42c00e,_0x5a0f94){return _0x42c00e-_0x5a0f94;},_0x2ce94[_0x179324(0x2d4)]=function(_0x5a05ce,_0x9422ba){return _0x5a05ce/_0x9422ba;},_0x2ce94[_0x179324(0x265)]='server',_0x2ce94[_0x179324(0x205)]=function(_0x5a1656,_0xdbdfc5){return _0x5a1656===_0xdbdfc5;},_0x2ce94['mhPyh']='FHAsI',_0x2ce94[_0x179324(0x1ef)]=function(_0x4afd5d,_0x324bfa){return _0x4afd5d===_0x324bfa;},_0x2ce94[_0x179324(0x25d)]=_0x179324(0x32a),_0x2ce94[_0x179324(0x33f)]='Failed\x20to\x20record\x20usage\x20for\x20budget\x20tracking:';const _0x72f05c=_0x2ce94,_0x31c847=_0x72f05c[_0x179324(0x356)](Date[_0x179324(0x19a)](),_0x1709ff);this['performanceMetrics'][_0x179324(0x30f)]+=_0x31c847,this['performanceMetrics'][_0x179324(0x35c)]=_0x72f05c[_0x179324(0x2d4)](this['performanceMetrics'][_0x179324(0x30f)],this['performanceMetrics'][_0x179324(0x395)]);_0x2950e9&&this[_0x179324(0x2ab)]['successfulRequests']++;if(this[_0x179324(0x2ca)]&&_0x56c378!==_0x72f05c['MkvFC']){if(_0x72f05c[_0x179324(0x205)](_0x179324(0x34f),_0x72f05c[_0x179324(0x24d)]))try{if(_0x72f05c[_0x179324(0x1ef)](_0x72f05c['AwIZi'],_0x72f05c[_0x179324(0x25d)])){const _0x26d39c=_0xc83275[_0x179324(0x3b1)](),_0x5e50d2=_0xc83275[_0x179324(0x1b9)](),_0x16bcc5=this[_0x179324(0x2b8)](_0x56c378);await this[_0x179324(0x2ca)][_0x179324(0x387)](_0x56c378,_0x16bcc5,_0x26d39c,_0x5e50d2);}else{const _0x26b561=_0x12aa0f[_0x179324(0x1ba)](this[_0x179324(0x2b1)][_0x179324(0x234)]())[_0x179324(0x386)](_0x2af468=>!_0x20668c['includes'](_0x2af468)&&this['serviceStatus'][_0x179324(0x2ce)](_0x2af468)!==_0x2438d8[_0x179324(0x355)][_0x179324(0x35e)]);if(_0x72f05c['wVjKa'](_0x26b561[_0x179324(0x204)],0x0))return null;const _0x36fac2=this[_0x179324(0x33d)][_0x179324(0x194)]||_0x182b67[_0x179324(0x3e5)]['BALANCED'];switch(_0x36fac2){case _0xb4062['STRATEGY'][_0x179324(0x2e8)]:return this[_0x179324(0x231)](_0x26b561);case _0x520e42['STRATEGY'][_0x179324(0x39c)]:return this['_selectSmartestService'](_0x26b561);case _0x442d5f[_0x179324(0x3e5)][_0x179324(0x32e)]:return this[_0x179324(0x2f1)](_0x26b561);case _0x128256[_0x179324(0x3e5)][_0x179324(0x19e)]:default:return this[_0x179324(0x1ec)](_0x26b561);}}}catch(_0x327156){this[_0x179324(0x214)][_0x179324(0x319)](_0x72f05c[_0x179324(0x33f)],_0x327156);}else{const _0x9a734d=_0x72f05c[_0x179324(0x370)][_0x179324(0x38b)]('|');let _0x117b29=0x0;while(!![]){switch(_0x9a734d[_0x117b29++]){case'0':this['rateLimitService']=new _0x46c338(_0x1f7a43);continue;case'1':this[_0x179324(0x2b1)]=new _0x34dee6();continue;case'2':this[_0x179324(0x266)]=null;continue;case'3':this['initialize']()['catch'](_0x5ae4ce=>{const _0x4d0a36=_0x179324;this[_0x4d0a36(0x214)][_0x4d0a36(0x359)](_0x72f05c[_0x4d0a36(0x1b6)],_0x5ae4ce);});continue;case'4':this[_0x179324(0x2d2)]=new _0x2dd34a();continue;case'5':const _0x177b90={};_0x177b90[_0x179324(0x395)]=0x0,_0x177b90[_0x179324(0x2f7)]=0x0,_0x177b90['failedRequests']=0x0,_0x177b90[_0x179324(0x30f)]=0x0,_0x177b90[_0x179324(0x35c)]=0x0,this[_0x179324(0x2ab)]=_0x177b90;continue;case'6':this[_0x179324(0x214)]['info'](_0x72f05c[_0x179324(0x197)],{'useServerLLM':this['useServerLLM'],'strategy':_0x1756f5['llmStrategy']||_0x3e8d2a[_0x179324(0x3e5)][_0x179324(0x19e)]});continue;case'7':this[_0x179324(0x326)]=![];continue;case'8':this['config']=_0x9cb424;continue;case'9':this[_0x179324(0x2e2)]=null;continue;case'10':this[_0x179324(0x214)]=_0x4c590c;continue;case'11':this['serverLLMService']=null;continue;case'12':this[_0x179324(0x3b9)]=_0x29af81[_0x179324(0x3b9)]!==![];continue;case'13':this[_0x179324(0x200)]=new _0x258b50();continue;case'14':this[_0x179324(0x2ca)]=null;continue;}break;}}}}async[a0_0x23ba4a(0x29e)](_0x3ed02e){const _0x12a663=a0_0x23ba4a,_0x21a9de={};_0x21a9de[_0x12a663(0x2a5)]=_0x12a663(0x37c),_0x21a9de[_0x12a663(0x320)]=function(_0x5c0c34,_0x14642c){return _0x5c0c34===_0x14642c;},_0x21a9de['vBZWV']=_0x12a663(0x339),_0x21a9de[_0x12a663(0x2f0)]=_0x12a663(0x1c0),_0x21a9de[_0x12a663(0x327)]=_0x12a663(0x31c),_0x21a9de[_0x12a663(0x34c)]=function(_0x45054f,_0x4963d0){return _0x45054f!==_0x4963d0;},_0x21a9de[_0x12a663(0x1c3)]=_0x12a663(0x246),_0x21a9de['VjxLL']=_0x12a663(0x1a0),_0x21a9de['edywf']=_0x12a663(0x235),_0x21a9de[_0x12a663(0x2fb)]=_0x12a663(0x2bb);const _0x48666a=_0x21a9de;this[_0x12a663(0x214)][_0x12a663(0x319)](_0x48666a['yKboP']);if(this['onPromptTooLong']){if(_0x48666a[_0x12a663(0x320)](_0x12a663(0x31c),_0x48666a['hNVDi']))try{if(_0x48666a[_0x12a663(0x34c)](_0x48666a[_0x12a663(0x1c3)],_0x48666a[_0x12a663(0x1c3)]))return null;else await this[_0x12a663(0x2e2)](_0x3ed02e),this['logger'][_0x12a663(0x216)](_0x48666a[_0x12a663(0x21e)]);}catch(_0x57945b){this['logger'][_0x12a663(0x359)](_0x48666a[_0x12a663(0x372)],_0x57945b);throw _0x57945b;}else{const _0x5cd0c6=_0x37a4d5[_0x12a663(0x1f3)]?.[_0x12a663(0x2f6)]()||'',_0x3c95a9=_0x3c3943[_0x12a663(0x393)]?.()?.[_0x12a663(0x2f6)]()||'';return(_0x5cd0c6['includes'](_0x48666a[_0x12a663(0x2a5)])||_0x3c95a9[_0x12a663(0x1d2)](_0x48666a[_0x12a663(0x2a5)]))&&(_0x48666a[_0x12a663(0x320)](_0x471b18[_0x12a663(0x342)],0x190)||_0x5cd0c6[_0x12a663(0x1d2)](_0x48666a[_0x12a663(0x20a)])||_0x3c95a9[_0x12a663(0x1d2)](_0x48666a[_0x12a663(0x20a)]));}}else throw new Error(_0x48666a[_0x12a663(0x2fb)]);}async[a0_0x23ba4a(0x1ed)](_0x8615ea,_0x54329e){const _0x5d82e3=a0_0x23ba4a,_0x5ec928={};_0x5ec928['zOonv']=function(_0x4ac283,_0x628aa2){return _0x4ac283===_0x628aa2;},_0x5ec928[_0x5d82e3(0x2a9)]=_0x5d82e3(0x281),_0x5ec928[_0x5d82e3(0x20d)]=function(_0x4c425a,_0x425960){return _0x4c425a===_0x425960;},_0x5ec928[_0x5d82e3(0x1fc)]=_0x5d82e3(0x1c6);const _0x261ddd=_0x5ec928;this[_0x5d82e3(0x214)][_0x5d82e3(0x216)](_0x5d82e3(0x1d5)+_0x8615ea);const _0x4d7aba=this[_0x5d82e3(0x2d2)][_0x5d82e3(0x2ce)](_0x8615ea);if(!_0x4d7aba)throw new Error(_0x5d82e3(0x236)+_0x8615ea+'\x20is\x20not\x20registered\x20with\x20any\x20service');const _0x7f54e7=this[_0x5d82e3(0x2b1)][_0x5d82e3(0x2ce)](_0x4d7aba);if(!_0x7f54e7)throw new Error('Service\x20'+_0x4d7aba+_0x5d82e3(0x1ab)+_0x8615ea);try{await _0x7f54e7[_0x5d82e3(0x1ed)](_0x8615ea,_0x54329e);}catch(_0x48d6cf){if(_0x261ddd[_0x5d82e3(0x20d)](_0x261ddd[_0x5d82e3(0x1fc)],'EMLTT')){if(_0x261ddd[_0x5d82e3(0x3bb)](_0x3375f6,_0x261ddd[_0x5d82e3(0x2a9)]))return _0x392635;const _0x3caca6=_0x2f111a[_0x17ede6]||[];if(_0x3caca6[_0x5d82e3(0x1d2)](_0x283000))return _0x49f7e3;}else{this[_0x5d82e3(0x214)][_0x5d82e3(0x359)](_0x5d82e3(0x257)+_0x8615ea+':',_0x48d6cf);throw _0x48d6cf;}}}async['getSummary'](_0x5d9de6,_0x432edf){const _0xf4274d=a0_0x23ba4a,_0x34f6ed={};_0x34f6ed[_0xf4274d(0x3d7)]=function(_0x363756,_0x2b4688){return _0x363756===_0x2b4688;},_0x34f6ed[_0xf4274d(0x1a5)]=function(_0x14400c,_0x444f68){return _0x14400c!==_0x444f68;},_0x34f6ed[_0xf4274d(0x3da)]=_0xf4274d(0x3ad),_0x34f6ed[_0xf4274d(0x19d)]=_0xf4274d(0x2f9),_0x34f6ed[_0xf4274d(0x340)]=function(_0x17eb19,_0x48d189){return _0x17eb19===_0x48d189;},_0x34f6ed[_0xf4274d(0x208)]=_0xf4274d(0x37f),_0x34f6ed[_0xf4274d(0x33b)]=_0xf4274d(0x281),_0x34f6ed[_0xf4274d(0x3e4)]='rYfmG';const _0x48efb1=_0x34f6ed;this[_0xf4274d(0x214)][_0xf4274d(0x216)](_0xf4274d(0x219)+_0x5d9de6);const _0x2cd5aa=this[_0xf4274d(0x2d2)]['get'](_0x5d9de6);if(!_0x2cd5aa){if(_0xf4274d(0x334)!==_0x48efb1['WIKOM'])throw new Error(_0xf4274d(0x268)+_0x5d9de6+_0xf4274d(0x38a));else throw new _0x1be37a(_0xf4274d(0x24a)+_0x32e81f+'):\x20'+_0x2b44d8[_0xf4274d(0x1f3)]);}const _0x19e123=this[_0xf4274d(0x2b1)]['get'](_0x2cd5aa);if(!_0x19e123)throw new Error(_0xf4274d(0x1f6)+_0x2cd5aa+_0xf4274d(0x321));this['logger'][_0xf4274d(0x216)](_0xf4274d(0x2a6)+_0x2cd5aa);try{if(_0x48efb1[_0xf4274d(0x340)](_0x48efb1['qKMQR'],_0x48efb1[_0xf4274d(0x208)])){const _0x5c5970=await _0x19e123[_0xf4274d(0x318)](_0x432edf,_0x5d9de6);if(this[_0xf4274d(0x2ca)]&&_0x2cd5aa!==_0x48efb1[_0xf4274d(0x33b)]){if(_0x48efb1[_0xf4274d(0x3e4)]===_0x48efb1[_0xf4274d(0x3e4)]){const _0x5de09b=this[_0xf4274d(0x2b8)](_0x2cd5aa);await this[_0xf4274d(0x2ca)]['recordUsage'](_0x2cd5aa,_0x5de09b,_0x19e123[_0xf4274d(0x3b1)](),_0x19e123[_0xf4274d(0x1b9)]());}else return this['_selectServiceByPreferenceOrder'](_0x95d7fa,_0x54613f['MODEL_PREFERENCE'][_0xf4274d(0x39c)]);}return _0x5c5970;}else{const _0x501360=_0x3b6d4e['from'](this[_0xf4274d(0x2b1)][_0xf4274d(0x234)]())[_0xf4274d(0x386)](_0x16e69e=>_0x16e69e!==_0x13b99c&&this[_0xf4274d(0x200)]['get'](_0x16e69e)!==_0x157208['SERVICE_STATUS'][_0xf4274d(0x35e)]);if(_0x48efb1[_0xf4274d(0x3d7)](_0x501360[_0xf4274d(0x204)],0x0))return null;if(_0x48efb1[_0xf4274d(0x1a5)](_0x4f2c7b,_0x48efb1[_0xf4274d(0x3da)])&&_0x501360['includes'](_0xf4274d(0x3ad)))return _0xf4274d(0x3ad);return _0x501360[0x0];}}catch(_0x43927f){if(_0xf4274d(0x385)!==_0xf4274d(0x385)){const _0x2a18c8=this[_0xf4274d(0x1c5)](_0x2f6365);this[_0xf4274d(0x1d1)][_0xf4274d(0x20b)](_0x2a18c8);}else{this[_0xf4274d(0x214)][_0xf4274d(0x359)](_0xf4274d(0x2c5)+_0x2cd5aa+':',_0x43927f);throw _0x43927f;}}}async['getImageDescription'](_0x5c988b,_0xb9b37,_0x50d77d={}){const _0x1f9e55=a0_0x23ba4a,_0x50ec29={};_0x50ec29[_0x1f9e55(0x3ba)]=_0x1f9e55(0x365),_0x50ec29['LGFog']=_0x1f9e55(0x262),_0x50ec29[_0x1f9e55(0x215)]=_0x1f9e55(0x28e),_0x50ec29[_0x1f9e55(0x3c1)]='request\x20limit',_0x50ec29[_0x1f9e55(0x377)]=_0x1f9e55(0x282),_0x50ec29[_0x1f9e55(0x1dc)]='throttle',_0x50ec29[_0x1f9e55(0x3d8)]=_0x1f9e55(0x329),_0x50ec29[_0x1f9e55(0x311)]=_0x1f9e55(0x281),_0x50ec29[_0x1f9e55(0x290)]=function(_0x262b5c,_0x491c3b){return _0x262b5c!==_0x491c3b;},_0x50ec29[_0x1f9e55(0x2aa)]=_0x1f9e55(0x196),_0x50ec29[_0x1f9e55(0x24b)]=_0x1f9e55(0x3e6),_0x50ec29[_0x1f9e55(0x388)]='BAmaN',_0x50ec29['okJez']=_0x1f9e55(0x28c),_0x50ec29['YQCPs']=_0x1f9e55(0x3df),_0x50ec29['OafgH']='cLUVh',_0x50ec29[_0x1f9e55(0x2e3)]=_0x1f9e55(0x20f),_0x50ec29[_0x1f9e55(0x302)]=function(_0x3a2681,_0x502933){return _0x3a2681===_0x502933;},_0x50ec29[_0x1f9e55(0x228)]=_0x1f9e55(0x26f),_0x50ec29['WuFFq']=function(_0x48e5e1,_0x42db8f){return _0x48e5e1+_0x42db8f;},_0x50ec29[_0x1f9e55(0x30e)]=function(_0x3d95fb,_0x167e4f){return _0x3d95fb<_0x167e4f;},_0x50ec29[_0x1f9e55(0x26d)]=_0x1f9e55(0x295),_0x50ec29[_0x1f9e55(0x2df)]=_0x1f9e55(0x2ec),_0x50ec29[_0x1f9e55(0x1dd)]=_0x1f9e55(0x2eb);const _0x4cda23=_0x50ec29;this[_0x1f9e55(0x214)]['info'](_0x4cda23[_0x1f9e55(0x3d8)]);if(this['useServerLLM']&&this[_0x1f9e55(0x2b1)][_0x1f9e55(0x273)](_0x4cda23['RxoLa'])){if(_0x4cda23['jpNDE'](_0x4cda23[_0x1f9e55(0x2aa)],_0x4cda23[_0x1f9e55(0x24b)]))try{if(_0x4cda23['lGOuX']===_0x4cda23[_0x1f9e55(0x388)]){const _0x5a8512=this['serviceInstances'][_0x1f9e55(0x2ce)]('server');return await _0x5a8512[_0x1f9e55(0x1a6)](_0x5c988b,_0xb9b37,_0x50d77d);}else{if(!this[_0x1f9e55(0x2ca)])return null;return this[_0x1f9e55(0x2ca)][_0x1f9e55(0x209)](_0x3821cd,_0x5322bd,_0x5b2168);}}catch(_0x34664f){this[_0x1f9e55(0x214)][_0x1f9e55(0x319)](_0x4cda23['okJez'],_0x34664f);}else{const _0x17a630={'useServerLLM':this[_0x1f9e55(0x3b9)],'serviceInstancesCount':this[_0x1f9e55(0x2b1)]['size'],'serviceInstances':_0x2c859c[_0x1f9e55(0x1ba)](this['serviceInstances'][_0x1f9e55(0x234)]()),'serviceStatusCount':this['serviceStatus'][_0x1f9e55(0x21f)],'serviceStatus':_0x1f3d35[_0x1f9e55(0x366)](this[_0x1f9e55(0x200)][_0x1f9e55(0x284)]()),'isInitialized':this['isInitialized']};this[_0x1f9e55(0x214)][_0x1f9e55(0x359)](_0x4cda23[_0x1f9e55(0x3ba)],_0x17a630);throw new _0x1d5d78(_0x1f9e55(0x3bd)+_0x49854e[_0x1f9e55(0x35f)](_0x17a630));}}const _0x155e2e=this[_0x1f9e55(0x229)]();if(!_0x155e2e)throw new Error(_0x4cda23[_0x1f9e55(0x1fe)]);const _0x10aae3=this[_0x1f9e55(0x2b1)]['get'](_0x155e2e),_0x58dd28=this[_0x1f9e55(0x1c5)](_0x155e2e);await this[_0x1f9e55(0x1d1)][_0x1f9e55(0x2e6)](_0x58dd28);const _0x4b6bb7=this[_0x1f9e55(0x33d)]['retries']?.['maxRetries']||LLM_CONSTANTS[_0x1f9e55(0x350)];let _0x4155ea=0x0,_0x2ceb79=null;while(_0x4155ea<=_0x4b6bb7){if(_0x4cda23[_0x1f9e55(0x290)](_0x4cda23['OafgH'],_0x4cda23[_0x1f9e55(0x2e3)]))try{const _0x81898b=await _0x10aae3[_0x1f9e55(0x1a6)](_0x5c988b,_0xb9b37,_0x50d77d);this[_0x1f9e55(0x1d1)][_0x1f9e55(0x20b)](_0x58dd28);if(this[_0x1f9e55(0x2ca)]){if(_0x4cda23[_0x1f9e55(0x302)](_0x4cda23['ivMmo'],_0x1f9e55(0x26f))){const _0x47079c=this[_0x1f9e55(0x2b8)](_0x155e2e);await this['budgetService']['recordUsage'](_0x155e2e,_0x47079c,_0x10aae3[_0x1f9e55(0x3b1)](),_0x10aae3['getLastOutputTokenCount']());}else return this['_selectServiceByPreferenceOrder'](_0x4eb5a5,_0x70b4c7[_0x1f9e55(0x27a)][_0x1f9e55(0x2e8)]);}return _0x81898b;}catch(_0x239f09){_0x2ceb79=_0x239f09,this[_0x1f9e55(0x214)]['error'](_0x1f9e55(0x337)+_0x4cda23[_0x1f9e55(0x31d)](_0x4155ea,0x1)+'/'+_0x4cda23['WuFFq'](_0x4b6bb7,0x1)+'):',_0x239f09);if(this['_isRateLimitError'](_0x239f09)){this[_0x1f9e55(0x1d1)]['handleRateLimitHit'](_0x58dd28);if(_0x4cda23[_0x1f9e55(0x30e)](_0x4155ea,_0x4b6bb7)){await this['rateLimitService'][_0x1f9e55(0x2e6)](_0x58dd28);continue;}}if(this[_0x1f9e55(0x263)](_0x239f09)){if(_0x4cda23[_0x1f9e55(0x26d)]!==_0x4cda23[_0x1f9e55(0x2df)])throw _0x239f09;else{const _0x12c4d0=[_0x4cda23[_0x1f9e55(0x1d7)],_0x4cda23[_0x1f9e55(0x215)],'quota\x20exceeded',_0x4cda23[_0x1f9e55(0x3c1)],_0x4cda23[_0x1f9e55(0x377)],_0x4cda23[_0x1f9e55(0x1dc)]],_0x421287=_0x37b2f4[_0x1f9e55(0x1f3)]?.[_0x1f9e55(0x2f6)]()||'';return _0x12c4d0[_0x1f9e55(0x305)](_0x16e4fe=>_0x421287['includes'](_0x16e4fe));}}if(_0x4155ea>=_0x4b6bb7)break;const _0x418ee1=this[_0x1f9e55(0x374)](_0x4155ea);await this[_0x1f9e55(0x3b4)](_0x418ee1),_0x4155ea++;}else{const _0x21ba49={};_0x21ba49['dYcyb']=_0x1f9e55(0x271);const _0x4553eb=_0x21ba49;_0x3c873a[_0x1f9e55(0x212)](this[_0x1f9e55(0x2ca)][_0x1f9e55(0x335)]()['catch'](_0x27619d=>{this['logger']['error'](_0x4553eb['dYcyb'],_0x27619d);}));}}throw new Error(_0x1f9e55(0x238)+(_0x2ceb79?.[_0x1f9e55(0x1f3)]||_0x4cda23[_0x1f9e55(0x1dd)]));}async['estimateTokenCount'](_0x59e712){const _0xb5a4c=a0_0x23ba4a,_0x22be0d={};_0x22be0d['nsdse']=function(_0x124f0b,_0x372f60){return _0x124f0b===_0x372f60;},_0x22be0d['bNgDQ']='wWTDc',_0x22be0d['mNZsN']=_0xb5a4c(0x1fb),_0x22be0d[_0xb5a4c(0x2a0)]=_0xb5a4c(0x3d6);const _0x1f0e8e=_0x22be0d,_0x5b912b=this[_0xb5a4c(0x2d2)][_0xb5a4c(0x2ce)](_0x59e712);if(!_0x5b912b){if(_0x1f0e8e[_0xb5a4c(0x379)](_0x1f0e8e[_0xb5a4c(0x28b)],_0x1f0e8e['mNZsN']))throw _0x2c576b;else throw new Error('Conversation\x20'+_0x59e712+_0xb5a4c(0x280));}const _0xa1d1f7=this[_0xb5a4c(0x2b1)][_0xb5a4c(0x2ce)](_0x5b912b);if(!_0xa1d1f7)throw new Error(_0xb5a4c(0x264)+_0x5b912b+_0xb5a4c(0x1ab)+_0x59e712);try{return _0xb5a4c(0x30b)!==_0x1f0e8e['RtwbM']?await _0xa1d1f7[_0xb5a4c(0x338)](_0x59e712):_0x313388['toString']()[_0xb5a4c(0x345)](_0xb5a4c(0x2e9))[_0xb5a4c(0x393)]()[_0xb5a4c(0x1d8)](_0x5e5876)[_0xb5a4c(0x345)](_0xb5a4c(0x2e9));}catch(_0x153cc3){return this[_0xb5a4c(0x214)][_0xb5a4c(0x359)](_0xb5a4c(0x368)+_0x59e712+':',_0x153cc3),0x0;}}[a0_0x23ba4a(0x2af)](_0x10dada,_0x1bd8d9,_0x4a41c7){const _0x15597f=a0_0x23ba4a,_0x30a305={};_0x30a305[_0x15597f(0x272)]=function(_0x889bc4,_0xe5b15){return _0x889bc4!==_0xe5b15;},_0x30a305['glydH']=_0x15597f(0x2be),_0x30a305[_0x15597f(0x343)]=_0x15597f(0x293);const _0x483940=_0x30a305;if(!this[_0x15597f(0x2ca)]){if(_0x483940[_0x15597f(0x272)](_0x483940[_0x15597f(0x2b0)],_0x483940[_0x15597f(0x343)]))return null;else throw new _0x420698('Conversation\x20'+_0xc798e9+'\x20is\x20not\x20registered\x20with\x20any\x20service');}return this['budgetService'][_0x15597f(0x2af)](_0x10dada,_0x1bd8d9,_0x4a41c7);}[a0_0x23ba4a(0x209)](_0x146048,_0x3a2b8e,_0x43874b){const _0x38a4f8=a0_0x23ba4a,_0x53f4fb={};_0x53f4fb[_0x38a4f8(0x2d1)]=_0x38a4f8(0x359),_0x53f4fb[_0x38a4f8(0x357)]='degraded',_0x53f4fb[_0x38a4f8(0x347)]=function(_0x3cadad,_0x5115e5){return _0x3cadad!==_0x5115e5;},_0x53f4fb[_0x38a4f8(0x331)]=_0x38a4f8(0x328);const _0x2986ba=_0x53f4fb;if(!this[_0x38a4f8(0x2ca)]){if(_0x2986ba['hilYU'](_0x38a4f8(0x328),_0x2986ba[_0x38a4f8(0x331)])){const _0xaf8833={};_0xaf8833[_0x38a4f8(0x342)]=_0x2986ba[_0x38a4f8(0x2d1)],_0xaf8833[_0x38a4f8(0x359)]=_0x5e103d[_0x38a4f8(0x1f3)],_0x44c334[_0x38a4f8(0x33e)]=_0xaf8833,_0xc44d11[_0x38a4f8(0x313)]=_0x2986ba[_0x38a4f8(0x357)];}else return null;}return this[_0x38a4f8(0x2ca)][_0x38a4f8(0x209)](_0x146048,_0x3a2b8e,_0x43874b);}async[a0_0x23ba4a(0x1b4)](){const _0xfca783=a0_0x23ba4a,_0x47d578={};_0x47d578['fJJJQ']=_0xfca783(0x1c8),_0x47d578[_0xfca783(0x399)]=function(_0x2bd5d2,_0x2b14d1){return _0x2bd5d2!==_0x2b14d1;},_0x47d578['plrYd']=_0xfca783(0x210),_0x47d578[_0xfca783(0x192)]=_0xfca783(0x34d);const _0xfb5d3c=_0x47d578;if(!this['budgetService']){if(_0xfb5d3c[_0xfca783(0x399)](_0xfb5d3c[_0xfca783(0x18a)],_0xfb5d3c['TqvtC']))return null;else this[_0xfca783(0x214)][_0xfca783(0x319)](_0xfb5d3c[_0xfca783(0x380)]);}return await this[_0xfca783(0x2ca)][_0xfca783(0x1b4)]();}async['setBudgetLimit'](_0x332eb3){const _0x108d6d=a0_0x23ba4a,_0x32365f={};_0x32365f[_0x108d6d(0x3d4)]=_0x108d6d(0x3df),_0x32365f['jZvOE']=function(_0x5a495c,_0x52e223){return _0x5a495c!==_0x52e223;},_0x32365f[_0x108d6d(0x3b2)]=_0x108d6d(0x315),_0x32365f['ETqtJ']=_0x108d6d(0x21b);const _0x3d9ba3=_0x32365f;if(!this['budgetService']){if(_0x3d9ba3[_0x108d6d(0x21c)](_0x108d6d(0x29c),_0x3d9ba3[_0x108d6d(0x3b2)]))throw new Error(_0x3d9ba3['ETqtJ']);else throw new _0x197b4e(_0x3d9ba3[_0x108d6d(0x3d4)]);}await this['budgetService'][_0x108d6d(0x1e7)](_0x332eb3);}async[a0_0x23ba4a(0x2c6)](){const _0x1c178e=a0_0x23ba4a;if(!this['budgetService'])return![];return await this[_0x1c178e(0x2ca)][_0x1c178e(0x278)]();}[a0_0x23ba4a(0x289)](){const _0x387b45=a0_0x23ba4a,_0x3986d2={};_0x3986d2[_0x387b45(0x306)]='server',_0x3986d2['SIjLL']=function(_0x36b306,_0x55e9c0){return _0x36b306===_0x55e9c0;},_0x3986d2[_0x387b45(0x2b7)]=function(_0x2629a4,_0x40d1c4){return _0x2629a4!==_0x40d1c4;},_0x3986d2[_0x387b45(0x34b)]=_0x387b45(0x1a7),_0x3986d2[_0x387b45(0x22d)]=function(_0x1607b9,_0x41dfcc){return _0x1607b9===_0x41dfcc;};const _0x481ba3=_0x3986d2,_0x4ae2ec={};for(const [_0xde1d1,_0x26fe23]of this[_0x387b45(0x200)][_0x387b45(0x284)]()){if(_0x481ba3['eGrPG'](_0x387b45(0x3b3),_0x481ba3[_0x387b45(0x34b)]))_0x4ae2ec[_0xde1d1]={'status':_0x26fe23,'available':_0x26fe23!==LLM_CONSTANTS['SERVICE_STATUS'][_0x387b45(0x35e)],'isPrimary':_0x481ba3[_0x387b45(0x22d)](_0xde1d1,this[_0x387b45(0x266)])};else{if(this[_0x387b45(0x3b9)]&&this[_0x387b45(0x2b1)][_0x387b45(0x273)](_0x481ba3[_0x387b45(0x306)])&&!_0x5d9baf[_0x387b45(0x1d2)](_0x481ba3[_0x387b45(0x306)])&&_0x481ba3[_0x387b45(0x25b)](this[_0x387b45(0x200)][_0x387b45(0x2ce)](_0x481ba3[_0x387b45(0x306)]),_0x1ee6cb[_0x387b45(0x355)][_0x387b45(0x3c6)]))return _0x481ba3[_0x387b45(0x306)];return this[_0x387b45(0x2a2)](_0xf5b0f2);}}return _0x4ae2ec;}[a0_0x23ba4a(0x2a1)](){const _0x43dcca=a0_0x23ba4a,_0x25b770={};_0x25b770['YZtDs']=function(_0x587d11,_0x3649b1){return _0x587d11>_0x3649b1;},_0x25b770[_0x43dcca(0x30c)]=function(_0x1aa0a9,_0x128084){return _0x1aa0a9*_0x128084;},_0x25b770['VVQyQ']=function(_0x2c7dfa,_0x7a9335){return _0x2c7dfa/_0x7a9335;};const _0x31cd13=_0x25b770;return{...this[_0x43dcca(0x2ab)],'successRate':_0x31cd13[_0x43dcca(0x2b4)](this[_0x43dcca(0x2ab)][_0x43dcca(0x395)],0x0)?_0x31cd13[_0x43dcca(0x30c)](_0x31cd13[_0x43dcca(0x32c)](this[_0x43dcca(0x2ab)]['successfulRequests'],this[_0x43dcca(0x2ab)]['totalRequests']),0x64):0x0};}['getRateLimitingStatus'](){const _0x516a6d=a0_0x23ba4a;return this[_0x516a6d(0x1d1)]['getAllStatus']();}['registerPromptTooLongHandler'](_0x10b5d3){const _0x423fbf=a0_0x23ba4a;this[_0x423fbf(0x2e2)]=_0x10b5d3,this['logger'][_0x423fbf(0x216)](_0x423fbf(0x3a5));}async[a0_0x23ba4a(0x32d)](){const _0x3bd1e4=a0_0x23ba4a,_0x6f4778={};_0x6f4778['viVoF']=_0x3bd1e4(0x33a),_0x6f4778[_0x3bd1e4(0x2a7)]='authentication\x20failed',_0x6f4778[_0x3bd1e4(0x308)]=_0x3bd1e4(0x2bd),_0x6f4778[_0x3bd1e4(0x3cc)]=_0x3bd1e4(0x367),_0x6f4778[_0x3bd1e4(0x2b5)]=_0x3bd1e4(0x1d4),_0x6f4778['EPkVH']='azure-openai-gpt4',_0x6f4778['cgbZO']=_0x3bd1e4(0x353),_0x6f4778[_0x3bd1e4(0x287)]=_0x3bd1e4(0x235),_0x6f4778[_0x3bd1e4(0x3bc)]=function(_0x3bef52,_0x1c1915){return _0x3bef52>_0x1c1915;},_0x6f4778[_0x3bd1e4(0x1cd)]=function(_0x13a6de,_0x5385a6){return _0x13a6de*_0x5385a6;},_0x6f4778[_0x3bd1e4(0x19c)]=function(_0x113373,_0x4f67bc){return _0x113373/_0x4f67bc;},_0x6f4778['BrLVf']=_0x3bd1e4(0x274),_0x6f4778[_0x3bd1e4(0x1b1)]=function(_0x485937,_0x8f774b){return _0x485937!==_0x8f774b;},_0x6f4778[_0x3bd1e4(0x2ee)]=function(_0x4ff761,_0x340a6b){return _0x4ff761===_0x340a6b;},_0x6f4778[_0x3bd1e4(0x2ac)]=_0x3bd1e4(0x3d2),_0x6f4778[_0x3bd1e4(0x20c)]=_0x3bd1e4(0x3b0),_0x6f4778['pcWPr']=_0x3bd1e4(0x36f),_0x6f4778['PVYRG']=function(_0x6a5ac0,_0x242fd5){return _0x6a5ac0!==_0x242fd5;},_0x6f4778['jJzFg']=function(_0x39505f,_0x40eb95){return _0x39505f!==_0x40eb95;},_0x6f4778[_0x3bd1e4(0x29f)]='bmMBB',_0x6f4778[_0x3bd1e4(0x309)]=_0x3bd1e4(0x223),_0x6f4778['uPueB']=_0x3bd1e4(0x359),_0x6f4778[_0x3bd1e4(0x36a)]=_0x3bd1e4(0x3cb),_0x6f4778['mTerX']=function(_0x24c31d,_0x1aee42){return _0x24c31d!==_0x1aee42;},_0x6f4778[_0x3bd1e4(0x341)]='yGkQr',_0x6f4778[_0x3bd1e4(0x303)]=function(_0x4b9936,_0xf6bfff){return _0x4b9936!==_0xf6bfff;},_0x6f4778[_0x3bd1e4(0x3ea)]=_0x3bd1e4(0x38c);const _0x4a80ca=_0x6f4778,_0x14be98={};_0x14be98['available']=![],_0x14be98[_0x3bd1e4(0x2d8)]=0x0,_0x14be98['lastUpdate']=null;const _0x311ea1={'overall':_0x4a80ca[_0x3bd1e4(0x3e1)],'services':{},'budget':null,'performance':this[_0x3bd1e4(0x2a1)](),'pricing':_0x14be98};for(const [_0x1a63eb,_0x4565c0]of this[_0x3bd1e4(0x200)][_0x3bd1e4(0x284)]()){_0x311ea1[_0x3bd1e4(0x38f)][_0x1a63eb]={'status':_0x4565c0,'available':_0x4a80ca['EwoHT'](_0x4565c0,LLM_CONSTANTS['SERVICE_STATUS'][_0x3bd1e4(0x35e)])};if(_0x4565c0===LLM_CONSTANTS['SERVICE_STATUS'][_0x3bd1e4(0x35e)]){if(_0x4a80ca[_0x3bd1e4(0x2ee)](_0x4a80ca[_0x3bd1e4(0x2ac)],_0x4a80ca[_0x3bd1e4(0x2ac)]))_0x311ea1[_0x3bd1e4(0x313)]=_0x4a80ca[_0x3bd1e4(0x20c)];else{const _0x3284d0=[_0x4a80ca[_0x3bd1e4(0x2b9)],_0x4a80ca[_0x3bd1e4(0x2a7)],_0x4a80ca[_0x3bd1e4(0x308)],_0x3bd1e4(0x35a),_0x3bd1e4(0x1eb),_0x4a80ca['JGTcW']],_0x3714f9=_0x184ac7[_0x3bd1e4(0x1f3)]?.['toLowerCase']()||'';return _0x3284d0[_0x3bd1e4(0x305)](_0x1b3e7c=>_0x3714f9[_0x3bd1e4(0x1d2)](_0x1b3e7c));}}}if(this[_0x3bd1e4(0x27c)])try{if(_0x4a80ca[_0x3bd1e4(0x37a)]!=='pucXg'){const _0x272645=await this[_0x3bd1e4(0x27c)][_0x3bd1e4(0x1bd)]();_0x311ea1[_0x3bd1e4(0x38f)][_0x3bd1e4(0x281)][_0x3bd1e4(0x22e)]=_0x272645,_0x4a80ca[_0x3bd1e4(0x28f)](_0x272645['status'],_0x4a80ca[_0x3bd1e4(0x3e1)])&&(_0x311ea1['overall']=_0x3bd1e4(0x3b0));}else{const _0x31de9e={};_0x31de9e[_0x3bd1e4(0x3ad)]=_0x4a80ca[_0x3bd1e4(0x2b5)],_0x31de9e[_0x3bd1e4(0x1e8)]=_0x4a80ca[_0x3bd1e4(0x1c7)],_0x31de9e['google']=_0x3bd1e4(0x348),_0x31de9e[_0x3bd1e4(0x281)]=_0x4a80ca[_0x3bd1e4(0x2d0)];const _0x490812=_0x31de9e;return _0x490812[_0x2c7d27]||_0x31226b;}}catch(_0x412c9d){if(_0x4a80ca[_0x3bd1e4(0x28d)](_0x4a80ca[_0x3bd1e4(0x29f)],_0x4a80ca[_0x3bd1e4(0x309)])){const _0x52e257={};_0x52e257[_0x3bd1e4(0x342)]=_0x4a80ca['uPueB'],_0x52e257[_0x3bd1e4(0x359)]=_0x412c9d[_0x3bd1e4(0x1f3)],_0x311ea1['services'][_0x3bd1e4(0x281)][_0x3bd1e4(0x22e)]=_0x52e257,_0x311ea1['overall']=_0x3bd1e4(0x3b0);}else{this[_0x3bd1e4(0x214)][_0x3bd1e4(0x359)](_0x4a80ca[_0x3bd1e4(0x287)],_0x344d83);throw _0x51de9b;}}if(this[_0x3bd1e4(0x2ca)]){if(_0x4a80ca[_0x3bd1e4(0x36a)]!==_0x4a80ca[_0x3bd1e4(0x36a)])return{...this[_0x3bd1e4(0x2ab)],'successRate':_0x4a80ca[_0x3bd1e4(0x3bc)](this[_0x3bd1e4(0x2ab)][_0x3bd1e4(0x395)],0x0)?_0x4a80ca[_0x3bd1e4(0x1cd)](_0x4a80ca[_0x3bd1e4(0x19c)](this[_0x3bd1e4(0x2ab)][_0x3bd1e4(0x2f7)],this[_0x3bd1e4(0x2ab)][_0x3bd1e4(0x395)]),0x64):0x0};else try{if(_0x4a80ca[_0x3bd1e4(0x3cd)](_0x4a80ca[_0x3bd1e4(0x341)],_0x4a80ca[_0x3bd1e4(0x341)]))throw new _0x5ae2ff('Cannot\x20get\x20summary:\x20conversation\x20'+_0x1cfb9a+_0x3bd1e4(0x38a));else _0x311ea1[_0x3bd1e4(0x33e)]=await this[_0x3bd1e4(0x2ca)][_0x3bd1e4(0x352)](),_0x4a80ca[_0x3bd1e4(0x28d)](_0x311ea1['budget'][_0x3bd1e4(0x342)],_0x4a80ca['BrLVf'])&&(_0x311ea1[_0x3bd1e4(0x313)]=_0x3bd1e4(0x3b0));}catch(_0x5e6ce6){const _0x28f58b={};_0x28f58b[_0x3bd1e4(0x342)]=_0x3bd1e4(0x359),_0x28f58b[_0x3bd1e4(0x359)]=_0x5e6ce6[_0x3bd1e4(0x1f3)],_0x311ea1['budget']=_0x28f58b,_0x311ea1[_0x3bd1e4(0x313)]=_0x4a80ca[_0x3bd1e4(0x20c)];}}if(this['budgetService']){if(_0x4a80ca[_0x3bd1e4(0x303)](_0x4a80ca[_0x3bd1e4(0x3ea)],_0x4a80ca[_0x3bd1e4(0x3ea)]))return _0x52c808;else{const _0x30c31b=this['budgetService'][_0x3bd1e4(0x2e5)]();_0x311ea1[_0x3bd1e4(0x1b5)]={'available':_0x4a80ca['fbEuB'](_0x30c31b['totalModels'],0x0),'modelsWithPricing':_0x30c31b[_0x3bd1e4(0x285)],'lastUpdate':_0x30c31b[_0x3bd1e4(0x2de)],'source':_0x30c31b[_0x3bd1e4(0x1e4)]};}}return _0x311ea1;}async[a0_0x23ba4a(0x335)](){const _0x230891=a0_0x23ba4a,_0x23339b={};_0x23339b[_0x230891(0x23f)]='Error\x20shutting\x20down\x20budget\x20service:',_0x23339b['fJzuR']=_0x230891(0x2f3),_0x23339b[_0x230891(0x3d1)]=_0x230891(0x1e6);const _0x2413ae=_0x23339b;this['logger'][_0x230891(0x216)](_0x230891(0x390));const _0xf81bc9=[];for(const [_0x25b307,_0x37bc0b]of this[_0x230891(0x2b1)]['entries']()){typeof _0x37bc0b[_0x230891(0x335)]===_0x2413ae[_0x230891(0x1b3)]&&(this['logger']['info'](_0x230891(0x22f)+_0x25b307),_0xf81bc9['push'](_0x37bc0b[_0x230891(0x335)]()['catch'](_0x9768df=>{const _0x2b6b6d=_0x230891;this[_0x2b6b6d(0x214)][_0x2b6b6d(0x359)]('Error\x20shutting\x20down\x20service\x20'+_0x25b307+':',_0x9768df);})));}this[_0x230891(0x2ca)]&&typeof this[_0x230891(0x2ca)][_0x230891(0x335)]===_0x2413ae[_0x230891(0x1b3)]&&_0xf81bc9[_0x230891(0x212)](this[_0x230891(0x2ca)][_0x230891(0x335)]()[_0x230891(0x3a9)](_0x1102f3=>{const _0x30ec04=_0x230891;this[_0x30ec04(0x214)][_0x30ec04(0x359)](_0x2413ae[_0x30ec04(0x23f)],_0x1102f3);})),await Promise['allSettled'](_0xf81bc9),this['serviceInstances']['clear'](),this[_0x230891(0x2d2)][_0x230891(0x1b2)](),this[_0x230891(0x200)]['clear'](),this[_0x230891(0x214)]['info'](_0x2413ae['htMrV']);}[a0_0x23ba4a(0x332)](_0x2a6209,_0x34bea0=[]){const _0x2fefcd=a0_0x23ba4a,_0x41fe0b={};_0x41fe0b[_0x2fefcd(0x279)]=_0x2fefcd(0x255);const _0x6a5be5=_0x41fe0b;if(this['useServerLLM']&&this[_0x2fefcd(0x2b1)][_0x2fefcd(0x273)](_0x2fefcd(0x281))&&!_0x34bea0[_0x2fefcd(0x1d2)]('server')&&this[_0x2fefcd(0x200)][_0x2fefcd(0x2ce)]('server')===LLM_CONSTANTS[_0x2fefcd(0x355)]['AVAILABLE']){if(_0x6a5be5[_0x2fefcd(0x279)]===_0x2fefcd(0x3cf)){const _0x1c04bf=_0x4e6950[_0x2fefcd(0x294)](_0xe88a6a,arguments);return _0x3a54f5=null,_0x1c04bf;}else return _0x2fefcd(0x281);}return this[_0x2fefcd(0x2a2)](_0x34bea0);}[a0_0x23ba4a(0x2a2)](_0x489654=[]){const _0x45b279=a0_0x23ba4a,_0x57a9e9={};_0x57a9e9[_0x45b279(0x3d9)]=function(_0x3ea6f7,_0x41ce83){return _0x3ea6f7===_0x41ce83;},_0x57a9e9[_0x45b279(0x28a)]=_0x45b279(0x344);const _0x23c607=_0x57a9e9,_0x1e43a5=Array[_0x45b279(0x1ba)](this['serviceInstances'][_0x45b279(0x234)]())['filter'](_0x1a4ea2=>!_0x489654['includes'](_0x1a4ea2)&&this[_0x45b279(0x200)][_0x45b279(0x2ce)](_0x1a4ea2)!==LLM_CONSTANTS[_0x45b279(0x355)][_0x45b279(0x35e)]);if(_0x23c607[_0x45b279(0x3d9)](_0x1e43a5[_0x45b279(0x204)],0x0)){if('GNamQ'!==_0x23c607[_0x45b279(0x28a)])return null;else this[_0x45b279(0x214)][_0x45b279(0x359)](_0x45b279(0x36b)+_0xda421e+':',_0x3cae27);}const _0x4ee887=this['config'][_0x45b279(0x194)]||LLM_CONSTANTS[_0x45b279(0x3e5)][_0x45b279(0x19e)];switch(_0x4ee887){case LLM_CONSTANTS['STRATEGY']['SPEED']:return this['_selectFastestService'](_0x1e43a5);case LLM_CONSTANTS[_0x45b279(0x3e5)][_0x45b279(0x39c)]:return this['_selectSmartestService'](_0x1e43a5);case LLM_CONSTANTS['STRATEGY']['CONTEXT']:return this[_0x45b279(0x2f1)](_0x1e43a5);case LLM_CONSTANTS[_0x45b279(0x3e5)][_0x45b279(0x19e)]:default:return this[_0x45b279(0x1ec)](_0x1e43a5);}}[a0_0x23ba4a(0x3af)](_0x447431){const _0x33c46c=a0_0x23ba4a,_0x4378f7={};_0x4378f7[_0x33c46c(0x35d)]=function(_0xf4cd5e,_0x2609c1){return _0xf4cd5e===_0x2609c1;},_0x4378f7[_0x33c46c(0x363)]=function(_0x1e695d,_0x3f48ca){return _0x1e695d!==_0x3f48ca;},_0x4378f7[_0x33c46c(0x193)]=_0x33c46c(0x3ad);const _0x47f239=_0x4378f7,_0x3cede9=Array['from'](this[_0x33c46c(0x2b1)]['keys']())[_0x33c46c(0x386)](_0x3989d7=>_0x3989d7!==_0x447431&&this[_0x33c46c(0x200)]['get'](_0x3989d7)!==LLM_CONSTANTS[_0x33c46c(0x355)][_0x33c46c(0x35e)]);if(_0x47f239[_0x33c46c(0x35d)](_0x3cede9['length'],0x0))return null;if(_0x47f239[_0x33c46c(0x363)](_0x447431,'anthropic')&&_0x3cede9['includes'](_0x47f239[_0x33c46c(0x193)]))return _0x33c46c(0x3ad);return _0x3cede9[0x0];}[a0_0x23ba4a(0x229)](_0x39a22a=[]){const _0xdde3e4=a0_0x23ba4a,_0x4de1b4={};_0x4de1b4[_0xdde3e4(0x227)]=_0xdde3e4(0x1e8),_0x4de1b4['QlWEH']=_0xdde3e4(0x1a1),_0x4de1b4[_0xdde3e4(0x2e7)]=function(_0x1f17aa,_0x139db0){return _0x1f17aa===_0x139db0;},_0x4de1b4[_0xdde3e4(0x226)]=_0xdde3e4(0x3ad);const _0x1f6138=_0x4de1b4,_0x54a6f3=['anthropic',_0x1f6138['XTzeI'],_0x1f6138[_0xdde3e4(0x25f)]],_0x13c9c7=_0x54a6f3[_0xdde3e4(0x386)](_0x278c03=>!_0x39a22a[_0xdde3e4(0x1d2)](_0x278c03)&&this[_0xdde3e4(0x2b1)][_0xdde3e4(0x273)](_0x278c03)&&this[_0xdde3e4(0x200)]['get'](_0x278c03)!==LLM_CONSTANTS[_0xdde3e4(0x355)][_0xdde3e4(0x35e)]);if(_0x1f6138[_0xdde3e4(0x2e7)](_0x13c9c7['length'],0x0))return null;const _0x5d5708=[_0x1f6138[_0xdde3e4(0x226)],_0x1f6138[_0xdde3e4(0x227)],_0x1f6138[_0xdde3e4(0x25f)]];for(const _0x27c3cf of _0x5d5708){if(_0x13c9c7[_0xdde3e4(0x1d2)](_0x27c3cf))return _0x27c3cf;}return _0x13c9c7[0x0];}[a0_0x23ba4a(0x231)](_0x32c0e1){const _0x9dc782=a0_0x23ba4a;return this['_selectServiceByPreferenceOrder'](_0x32c0e1,LLM_CONSTANTS[_0x9dc782(0x27a)][_0x9dc782(0x2e8)]);}[a0_0x23ba4a(0x2ad)](_0x517324){const _0x215d67=a0_0x23ba4a;return this[_0x215d67(0x362)](_0x517324,LLM_CONSTANTS[_0x215d67(0x27a)][_0x215d67(0x39c)]);}[a0_0x23ba4a(0x2f1)](_0x40e718){const _0x4cea7a=a0_0x23ba4a,_0x2f98a5={};_0x2f98a5[_0x4cea7a(0x1c9)]=_0x4cea7a(0x2f3),_0x2f98a5[_0x4cea7a(0x243)]=function(_0x226cf1,_0x5412c6){return _0x226cf1>_0x5412c6;};const _0x4d193e=_0x2f98a5;let _0x5e118b=null,_0x1e610d=0x0;for(const _0x1f73ce of _0x40e718){const _0x23f777=this['serviceInstances']['get'](_0x1f73ce);if(!_0x23f777||typeof _0x23f777[_0x4cea7a(0x1b0)]!==_0x4d193e[_0x4cea7a(0x1c9)])continue;const _0x20a816=_0x23f777[_0x4cea7a(0x1b0)]();_0x4d193e['dQBTP'](_0x20a816,_0x1e610d)&&(_0x1e610d=_0x20a816,_0x5e118b=_0x1f73ce);}return _0x5e118b||_0x40e718[0x0];}[a0_0x23ba4a(0x1ec)](_0x213bf7){const _0x38b196=a0_0x23ba4a;return this['_selectServiceByPreferenceOrder'](_0x213bf7,LLM_CONSTANTS[_0x38b196(0x27a)][_0x38b196(0x19e)]);}[a0_0x23ba4a(0x362)](_0x188296,_0x25094c){const _0x4f5290=a0_0x23ba4a,_0x354eaf={};_0x354eaf[_0x4f5290(0x1a8)]=_0x4f5290(0x36e),_0x354eaf['jJGMZ']=_0x4f5290(0x1d4),_0x354eaf[_0x4f5290(0x34a)]='azure-openai-gpt4',_0x354eaf[_0x4f5290(0x275)]=_0x4f5290(0x30a),_0x354eaf[_0x4f5290(0x19b)]=_0x4f5290(0x348),_0x354eaf[_0x4f5290(0x206)]=function(_0x14e0dd,_0x424331){return _0x14e0dd!==_0x424331;},_0x354eaf[_0x4f5290(0x3c7)]=_0x4f5290(0x2b6),_0x354eaf[_0x4f5290(0x269)]=_0x4f5290(0x2dc),_0x354eaf[_0x4f5290(0x211)]=function(_0x5b8d44,_0x25f0cf){return _0x5b8d44===_0x25f0cf;},_0x354eaf[_0x4f5290(0x2ed)]=_0x4f5290(0x281);const _0x25628e=_0x354eaf,_0x88f99a={};_0x88f99a['anthropic']=[_0x25628e[_0x4f5290(0x1a8)],_0x25628e['jJGMZ'],_0x4f5290(0x1e0)],_0x88f99a[_0x4f5290(0x1e8)]=[_0x25628e[_0x4f5290(0x34a)],_0x25628e['OkIEf']],_0x88f99a[_0x4f5290(0x1a1)]=[_0x25628e['ahxlU']],_0x88f99a[_0x4f5290(0x281)]=[];const _0x2631cb=_0x88f99a;for(const _0x189c69 of _0x25094c){for(const _0x1e7044 of _0x188296){if(_0x25628e['FjTyH'](_0x25628e[_0x4f5290(0x3c7)],_0x25628e['Efsck'])){if(_0x25628e[_0x4f5290(0x211)](_0x1e7044,_0x25628e[_0x4f5290(0x2ed)]))return _0x1e7044;const _0x23d7a7=_0x2631cb[_0x1e7044]||[];if(_0x23d7a7[_0x4f5290(0x1d2)](_0x189c69))return _0x1e7044;}else return null;}}return _0x188296[0x0];}['_getServiceModelId'](_0x579901){const _0x27865b=a0_0x23ba4a,_0x43b32e={};_0x43b32e[_0x27865b(0x1ca)]=_0x27865b(0x2fc),_0x43b32e[_0x27865b(0x189)]='google-gemini',_0x43b32e[_0x27865b(0x2f5)]='server-llm';const _0x13fa80=_0x43b32e,_0x4d1e63={};_0x4d1e63['anthropic']='anthropic-sonnet',_0x4d1e63[_0x27865b(0x1e8)]=_0x13fa80[_0x27865b(0x1ca)],_0x4d1e63[_0x27865b(0x1a1)]=_0x13fa80[_0x27865b(0x189)],_0x4d1e63['server']=_0x13fa80[_0x27865b(0x2f5)];const _0x11c677=_0x4d1e63;return _0x11c677[_0x579901]||_0x579901;}['_getDefaultModelForService'](_0xda9623){return this['_getServiceModelId'](_0xda9623);}[a0_0x23ba4a(0x374)](_0x4cdbab){const _0x4950ff=a0_0x23ba4a,_0x2a5a4b={};_0x2a5a4b[_0x4950ff(0x224)]=function(_0x4c0e4b,_0x2601d0){return _0x4c0e4b*_0x2601d0;};const _0x4b6b27=_0x2a5a4b,_0x1bcd8f=this[_0x4950ff(0x33d)][_0x4950ff(0x36d)]?.[_0x4950ff(0x23b)]||LLM_CONSTANTS[_0x4950ff(0x286)],_0x44e07e=this[_0x4950ff(0x33d)][_0x4950ff(0x36d)]?.[_0x4950ff(0x310)]||LLM_CONSTANTS[_0x4950ff(0x1db)];return _0x4b6b27[_0x4950ff(0x224)](_0x1bcd8f,Math[_0x4950ff(0x249)](_0x44e07e,_0x4cdbab));}[a0_0x23ba4a(0x3b4)](_0x69dfc1){return new Promise(_0x496a48=>setTimeout(_0x496a48,_0x69dfc1));}[a0_0x23ba4a(0x3dc)](_0x16533f){const _0x5e1940=a0_0x23ba4a,_0x8db1b={};_0x8db1b[_0x5e1940(0x307)]=_0x5e1940(0x237),_0x8db1b[_0x5e1940(0x2b2)]='throttle';const _0x5b68f9=_0x8db1b,_0x2bc900=[_0x5e1940(0x262),'too\x20many\x20requests',_0x5b68f9[_0x5e1940(0x307)],'request\x20limit',_0x5e1940(0x282),_0x5b68f9['OJVJf']],_0x5461b3=_0x16533f[_0x5e1940(0x1f3)]?.[_0x5e1940(0x2f6)]()||'';return _0x2bc900[_0x5e1940(0x305)](_0x49a527=>_0x5461b3['includes'](_0x49a527));}[a0_0x23ba4a(0x263)](_0x312118){const _0x3e25f7=a0_0x23ba4a,_0x1a4712={};_0x1a4712['injir']=_0x3e25f7(0x33a),_0x1a4712['EzPsB']=_0x3e25f7(0x1e1),_0x1a4712[_0x3e25f7(0x378)]=_0x3e25f7(0x2bd),_0x1a4712[_0x3e25f7(0x1a3)]='model\x20not\x20found',_0x1a4712[_0x3e25f7(0x1a2)]=_0x3e25f7(0x1eb),_0x1a4712[_0x3e25f7(0x241)]=_0x3e25f7(0x367);const _0x50266e=_0x1a4712,_0x4ea872=[_0x50266e[_0x3e25f7(0x3b8)],_0x50266e[_0x3e25f7(0x256)],_0x50266e[_0x3e25f7(0x378)],_0x50266e[_0x3e25f7(0x1a3)],_0x50266e[_0x3e25f7(0x1a2)],_0x50266e[_0x3e25f7(0x241)]],_0x530e09=_0x312118['message']?.['toLowerCase']()||'';return _0x4ea872['some'](_0x3c8fe7=>_0x530e09['includes'](_0x3c8fe7));}[a0_0x23ba4a(0x396)](_0x16528e){const _0x2b0958=a0_0x23ba4a,_0x6e24c8={};_0x6e24c8[_0x2b0958(0x24c)]='too\x20long',_0x6e24c8[_0x2b0958(0x2c8)]=_0x2b0958(0x339);const _0x3c89db=_0x6e24c8,_0x44a9c8=_0x16528e[_0x2b0958(0x1f3)]?.[_0x2b0958(0x2f6)]()||'',_0x3fc4b5=_0x16528e[_0x2b0958(0x393)]?.()?.[_0x2b0958(0x2f6)]()||'';return(_0x44a9c8[_0x2b0958(0x1d2)](_0x3c89db[_0x2b0958(0x24c)])||_0x3fc4b5[_0x2b0958(0x1d2)](_0x3c89db[_0x2b0958(0x24c)]))&&(_0x16528e[_0x2b0958(0x342)]===0x190||_0x44a9c8['includes'](_0x3c89db[_0x2b0958(0x2c8)])||_0x3fc4b5[_0x2b0958(0x1d2)](_0x2b0958(0x339)));}['_isRequestTooLargeError'](_0x607b5f){const _0x47d515=a0_0x23ba4a,_0x14a7ed={};_0x14a7ed[_0x47d515(0x217)]=function(_0x341897,_0x41bc28){return _0x341897===_0x41bc28;},_0x14a7ed[_0x47d515(0x1ee)]=_0x47d515(0x2c3),_0x14a7ed[_0x47d515(0x247)]=_0x47d515(0x18d);const _0x57b34e=_0x14a7ed,_0x30e7b1=_0x607b5f['message']?.[_0x47d515(0x2f6)]()||'',_0x1f1f42=_0x607b5f[_0x47d515(0x342)]||_0x607b5f[_0x47d515(0x26c)]?.[_0x47d515(0x342)];return _0x57b34e[_0x47d515(0x217)](_0x1f1f42,0x19d)||_0x30e7b1[_0x47d515(0x1d2)](_0x57b34e[_0x47d515(0x1ee)])||_0x30e7b1[_0x47d515(0x1d2)](_0x57b34e['XwSCY'])||_0x30e7b1[_0x47d515(0x1d2)]('request\x20too\x20large');}async[a0_0x23ba4a(0x3ac)](_0x4f965f){const _0x453844=a0_0x23ba4a,_0x551203={};_0x551203[_0x453844(0x3a7)]=function(_0x542162,_0x3d8877){return _0x542162===_0x3d8877;},_0x551203['gxrxh']='iayqA',_0x551203[_0x453844(0x29b)]=_0x453844(0x398),_0x551203['BGFQX']=function(_0x52db35,_0xf6f647){return _0x52db35===_0xf6f647;},_0x551203[_0x453844(0x3c2)]=_0x453844(0x258),_0x551203[_0x453844(0x3c8)]=_0x453844(0x2ea),_0x551203[_0x453844(0x3e0)]=_0x453844(0x22c);const _0x53e24d=_0x551203;this[_0x453844(0x214)][_0x453844(0x319)](_0x453844(0x24f)+_0x4f965f+_0x453844(0x3e3));if(this[_0x453844(0x2e2)])try{if(_0x53e24d[_0x453844(0x3a7)](_0x53e24d[_0x453844(0x322)],_0x53e24d[_0x453844(0x29b)])){const _0x2d49a0=_0x5f3c44['constructor']['prototype'][_0x453844(0x300)](_0x5a75f6),_0x4ba062=_0x578c62[_0x53ccdc],_0x527368=_0x260df8[_0x4ba062]||_0x2d49a0;_0x2d49a0[_0x453844(0x1d0)]=_0x4832b4[_0x453844(0x300)](_0x1ad5c7),_0x2d49a0[_0x453844(0x393)]=_0x527368[_0x453844(0x393)][_0x453844(0x300)](_0x527368),_0x52f9c6[_0x4ba062]=_0x2d49a0;}else await this[_0x453844(0x2e2)](_0x4f965f),this['logger']['info']('\x20Emergency\x20compactization\x20completed\x20for\x20'+_0x4f965f);}catch(_0x4975f9){if(_0x53e24d[_0x453844(0x18e)](_0x453844(0x2c1),_0x53e24d[_0x453844(0x3c2)]))return null;else{this['logger'][_0x453844(0x359)](_0x53e24d[_0x453844(0x3c8)],_0x4975f9);throw _0x4975f9;}}else throw new Error(_0x53e24d['RsuCT']);}[a0_0x23ba4a(0x2e0)](_0x4010c3){const _0x1950e3=a0_0x23ba4a,_0x3b5495={};_0x3b5495[_0x1950e3(0x29a)]=_0x1950e3(0x369),_0x3b5495[_0x1950e3(0x1d3)]=_0x1950e3(0x333),_0x3b5495[_0x1950e3(0x253)]='502',_0x3b5495['PYaaR']=_0x1950e3(0x22a),_0x3b5495[_0x1950e3(0x3a1)]=_0x1950e3(0x2d3),_0x3b5495['BpdCb']=_0x1950e3(0x316),_0x3b5495[_0x1950e3(0x360)]='network',_0x3b5495[_0x1950e3(0x199)]=_0x1950e3(0x1c2),_0x3b5495[_0x1950e3(0x3d0)]=_0x1950e3(0x3c9);const _0x38d907=_0x3b5495,_0xa28c10=[_0x38d907['UcpYi'],_0x38d907['NikZF'],_0x1950e3(0x37b),_0x38d907[_0x1950e3(0x253)],_0x38d907['PYaaR'],'504',_0x38d907[_0x1950e3(0x3a1)],_0x38d907[_0x1950e3(0x1b7)],_0x38d907['gYBdc'],_0x38d907[_0x1950e3(0x199)],_0x38d907[_0x1950e3(0x3d0)]],_0x1b2b52=_0x4010c3[_0x1950e3(0x1f3)]?.[_0x1950e3(0x2f6)]()||'';return _0xa28c10[_0x1950e3(0x305)](_0x2d8084=>_0x1b2b52['includes'](_0x2d8084));}}export{LLM_CONSTANTS};