const a0_0x3952ca=a0_0x441e;(function(_0xacc8df,_0x2748d7){const _0xb2c97b=a0_0x441e,_0x38e06b=_0xacc8df();while(!![]){try{const _0x2fc99e=-parseInt(_0xb2c97b(0x341))/0x1+parseInt(_0xb2c97b(0x312))/0x2*(parseInt(_0xb2c97b(0x29f))/0x3)+parseInt(_0xb2c97b(0x2b5))/0x4+parseInt(_0xb2c97b(0x2a9))/0x5+parseInt(_0xb2c97b(0x15f))/0x6*(parseInt(_0xb2c97b(0x327))/0x7)+parseInt(_0xb2c97b(0x1ab))/0x8*(parseInt(_0xb2c97b(0x1be))/0x9)+-parseInt(_0xb2c97b(0x301))/0xa*(parseInt(_0xb2c97b(0x18c))/0xb);if(_0x2fc99e===_0x2748d7)break;else _0x38e06b['push'](_0x38e06b['shift']());}catch(_0x402719){_0x38e06b['push'](_0x38e06b['shift']());}}}(a0_0x4d38,0xbd76c));const a0_0x480bea=(function(){const _0x4210b1=a0_0x441e,_0x11489b={};_0x11489b[_0x4210b1(0x222)]=function(_0x58b077,_0x18e378){return _0x58b077!==_0x18e378;},_0x11489b['NEyrG']='YmHml',_0x11489b[_0x4210b1(0x2ea)]=function(_0x148de9,_0x58bc5f){return _0x148de9===_0x58bc5f;},_0x11489b[_0x4210b1(0x1c5)]=_0x4210b1(0x2ad),_0x11489b[_0x4210b1(0x2f2)]=_0x4210b1(0x2a5);const _0x5e8219=_0x11489b;let _0x40530e=!![];return function(_0x2708dd,_0x3ff939){const _0x3b9fa5=_0x4210b1,_0x3ce0c2={'xNwNK':function(_0x43ce15,_0x5d5812){const _0x478bac=a0_0x441e;return _0x5e8219[_0x478bac(0x222)](_0x43ce15,_0x5d5812);},'uzrCH':_0x5e8219['NEyrG'],'veqQB':'QSAod'};if(_0x5e8219[_0x3b9fa5(0x2ea)](_0x5e8219[_0x3b9fa5(0x1c5)],_0x5e8219[_0x3b9fa5(0x2f2)]))throw new _0x8928a7(_0x3b9fa5(0x148)+_0x18e5b3+'):\x20'+_0x66aa20['message']);else{const _0x514553=_0x40530e?function(){const _0x97258b=_0x3b9fa5;if(_0x3ce0c2[_0x97258b(0x177)](_0x3ce0c2[_0x97258b(0x33d)],_0x3ce0c2[_0x97258b(0x2d5)])){if(_0x3ff939){const _0x1fefb4=_0x3ff939['apply'](_0x2708dd,arguments);return _0x3ff939=null,_0x1fefb4;}}else return this[_0x97258b(0x248)](_0x1b8259,_0x18116d[_0x97258b(0x302)][_0x97258b(0x238)]);}:function(){};return _0x40530e=![],_0x514553;}};}()),a0_0x15fd32=a0_0x480bea(this,function(){const _0x5553cb=a0_0x441e,_0x3d1812={};_0x3d1812[_0x5553cb(0x1d6)]='(((.+)+)+)+$';const _0x122c9d=_0x3d1812;return a0_0x15fd32[_0x5553cb(0x168)]()['search'](_0x5553cb(0x2a0))[_0x5553cb(0x168)]()[_0x5553cb(0x2d0)](a0_0x15fd32)[_0x5553cb(0x243)](_0x122c9d[_0x5553cb(0x1d6)]);});a0_0x15fd32();const a0_0x4df7ed=(function(){const _0x4b04d1=a0_0x441e,_0x285611={};_0x285611[_0x4b04d1(0x205)]=function(_0x23372a,_0x4fc91b){return _0x23372a===_0x4fc91b;},_0x285611[_0x4b04d1(0x1a5)]=_0x4b04d1(0x213);const _0x3d09db=_0x285611;let _0x4b9236=!![];return function(_0x60ee9d,_0xf7dbfe){const _0x3dc2f1=_0x4b04d1,_0x313196={'irsLJ':function(_0x538ba6,_0x1f1704){const _0x2bfb6b=a0_0x441e;return _0x3d09db[_0x2bfb6b(0x205)](_0x538ba6,_0x1f1704);},'bcGDQ':_0x3d09db[_0x3dc2f1(0x1a5)]},_0x4627b5=_0x4b9236?function(){const _0x3da449=_0x3dc2f1;if(_0x313196[_0x3da449(0x189)](_0x313196[_0x3da449(0x33c)],_0x3da449(0x213))){if(_0xf7dbfe){const _0x55633d=_0xf7dbfe[_0x3da449(0x170)](_0x60ee9d,arguments);return _0xf7dbfe=null,_0x55633d;}}else return null;}:function(){};return _0x4b9236=![],_0x4627b5;};}()),a0_0x2362d1=a0_0x4df7ed(this,function(){const _0x4d4347=a0_0x441e,_0x12fe49={'WKeRp':function(_0x40a713,_0x27bf6e){return _0x40a713===_0x27bf6e;},'yxswY':function(_0x5d6763,_0x203c10){return _0x5d6763(_0x203c10);},'gxaPQ':function(_0x5cb5ef,_0x20336d){return _0x5cb5ef+_0x20336d;},'MKhPI':_0x4d4347(0x172),'KByse':_0x4d4347(0x1a6),'ngwxe':_0x4d4347(0x150),'CXuaq':_0x4d4347(0x2fc),'JcPFZ':'warn','ZTdHB':_0x4d4347(0x340),'eRBGa':_0x4d4347(0x2a6),'lnbSg':_0x4d4347(0x26f),'loadE':function(_0x91806f,_0x4c18bc){return _0x91806f<_0x4c18bc;},'VopSr':function(_0x216b49,_0x4e8dce){return _0x216b49!==_0x4e8dce;},'dGcOU':_0x4d4347(0x26b)};let _0x58fb13;try{const _0x466f52=_0x12fe49[_0x4d4347(0x21f)](Function,_0x12fe49[_0x4d4347(0x1ea)](_0x12fe49[_0x4d4347(0x1d5)],_0x12fe49['KByse'])+');');_0x58fb13=_0x466f52();}catch(_0x53ff02){if(_0x12fe49['WKeRp'](_0x4d4347(0x150),_0x12fe49[_0x4d4347(0x333)]))_0x58fb13=window;else{if(_0x12fe49[_0x4d4347(0x2ba)](_0x17a1f8,_0x4d4347(0x1e0)))return _0x3c8189;const _0x29cd62=_0x28635e[_0x2e200e]||[];if(_0x29cd62[_0x4d4347(0x244)](_0x485711))return _0x23881d;}}const _0x58bddc=_0x58fb13['console']=_0x58fb13[_0x4d4347(0x181)]||{},_0x45f413=[_0x12fe49[_0x4d4347(0x16c)],_0x12fe49[_0x4d4347(0x331)],_0x4d4347(0x2ae),_0x12fe49[_0x4d4347(0x161)],_0x4d4347(0x32f),_0x12fe49[_0x4d4347(0x1d2)],_0x12fe49[_0x4d4347(0x2a7)]];for(let _0x389aef=0x0;_0x12fe49['loadE'](_0x389aef,_0x45f413[_0x4d4347(0x22b)]);_0x389aef++){if(_0x12fe49[_0x4d4347(0x18e)](_0x12fe49[_0x4d4347(0x2a8)],_0x12fe49['dGcOU']))return this[_0x4d4347(0x16d)][_0x4d4347(0x340)](_0x4d4347(0x1c0)+_0x3b6850+':',_0x5e5d15),0x0;else{const _0x465f11=a0_0x4df7ed[_0x4d4347(0x2d0)][_0x4d4347(0x31f)][_0x4d4347(0x240)](a0_0x4df7ed),_0x14fc4e=_0x45f413[_0x389aef],_0x305b09=_0x58bddc[_0x14fc4e]||_0x465f11;_0x465f11[_0x4d4347(0x2eb)]=a0_0x4df7ed[_0x4d4347(0x240)](a0_0x4df7ed),_0x465f11['toString']=_0x305b09[_0x4d4347(0x168)][_0x4d4347(0x240)](_0x305b09),_0x58bddc[_0x14fc4e]=_0x465f11;}}});a0_0x2362d1();import{ServerLLMService}from'./serverLLMService.js';import{BudgetService}from'./budgetService.js';import{RateLimitService}from'./rateLimitService.js';const a0_0x3b23a1={};a0_0x3b23a1[a0_0x3952ca(0x14d)]=0x19d,a0_0x3b23a1[a0_0x3952ca(0x2b7)]=0x190,a0_0x3b23a1['UNAUTHORIZED']=0x191,a0_0x3b23a1[a0_0x3952ca(0x311)]=0x193,a0_0x3b23a1[a0_0x3952ca(0x292)]=0x194,a0_0x3b23a1[a0_0x3952ca(0x210)]=0x1ad,a0_0x3b23a1[a0_0x3952ca(0x336)]=0x1f4;const HTTP_STATUS_CODES=a0_0x3b23a1,REQUEST_SIZE_ERROR_PATTERNS=[a0_0x3952ca(0x158),a0_0x3952ca(0x1e6),a0_0x3952ca(0x14f),a0_0x3952ca(0x14e),'content\x20length\x20exceeds\x20limit'],a0_0x471eb9={};a0_0x471eb9[a0_0x3952ca(0x343)]=REQUEST_SIZE_ERROR_PATTERNS,a0_0x471eb9['PROMPT_TOO_LONG']=[a0_0x3952ca(0x15b),a0_0x3952ca(0x1e5),a0_0x3952ca(0x182),a0_0x3952ca(0x304)],a0_0x471eb9[a0_0x3952ca(0x326)]=[a0_0x3952ca(0x204),'too\x20many\x20requests',a0_0x3952ca(0x315),a0_0x3952ca(0x2f9)];const a0_0x29ed25={};a0_0x29ed25[a0_0x3952ca(0x1c1)]='speed',a0_0x29ed25[a0_0x3952ca(0x2fe)]=a0_0x3952ca(0x2fa),a0_0x29ed25[a0_0x3952ca(0x270)]=a0_0x3952ca(0x1d1),a0_0x29ed25[a0_0x3952ca(0x238)]=a0_0x3952ca(0x2d4);const a0_0x3c46a5={};a0_0x3c46a5[a0_0x3952ca(0x2af)]=a0_0x3952ca(0x2ab),a0_0x3c46a5[a0_0x3952ca(0x1a0)]='degraded',a0_0x3c46a5[a0_0x3952ca(0x1d0)]=a0_0x3952ca(0x18a);function a0_0x441e(_0x40077b,_0x5e289f){const _0x3382eb=a0_0x4d38();return a0_0x441e=function(_0x2362d1,_0x4df7ed){_0x2362d1=_0x2362d1-0x147;let _0x139eba=_0x3382eb[_0x2362d1];if(a0_0x441e['DPUezX']===undefined){var _0x2f472b=function(_0x441e61){const _0x3dff96='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1e8804='',_0x39285d='',_0x4903f6=_0x1e8804+_0x2f472b;for(let _0x47ea11=0x0,_0x331106,_0x2580e1,_0x14b0c8=0x0;_0x2580e1=_0x441e61['charAt'](_0x14b0c8++);~_0x2580e1&&(_0x331106=_0x47ea11%0x4?_0x331106*0x40+_0x2580e1:_0x2580e1,_0x47ea11++%0x4)?_0x1e8804+=_0x4903f6['charCodeAt'](_0x14b0c8+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x331106>>(-0x2*_0x47ea11&0x6)):_0x47ea11:0x0){_0x2580e1=_0x3dff96['indexOf'](_0x2580e1);}for(let _0xac4f53=0x0,_0x172639=_0x1e8804['length'];_0xac4f53<_0x172639;_0xac4f53++){_0x39285d+='%'+('00'+_0x1e8804['charCodeAt'](_0xac4f53)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x39285d);};a0_0x441e['ijLCqa']=_0x2f472b,_0x40077b=arguments,a0_0x441e['DPUezX']=!![];}const _0x15fd32=_0x3382eb[0x0],_0x480bea=_0x2362d1+_0x15fd32,_0x4d38c1=_0x40077b[_0x480bea];if(!_0x4d38c1){const _0x4f5c3e=function(_0x13893c){this['pUOnJs']=_0x13893c,this['zfRFvK']=[0x1,0x0,0x0],this['HQjfSr']=function(){return'newState';},this['TvBMQx']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['mIqLrW']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4f5c3e['prototype']['QiDTmx']=function(){const _0x17f454=new RegExp(this['TvBMQx']+this['mIqLrW']),_0x70897e=_0x17f454['test'](this['HQjfSr']['toString']())?--this['zfRFvK'][0x1]:--this['zfRFvK'][0x0];return this['OZweXC'](_0x70897e);},_0x4f5c3e['prototype']['OZweXC']=function(_0xc22fec){if(!Boolean(~_0xc22fec))return _0xc22fec;return this['KiUleE'](this['pUOnJs']);},_0x4f5c3e['prototype']['KiUleE']=function(_0x7292ce){for(let _0x31cc6b=0x0,_0x1409b9=this['zfRFvK']['length'];_0x31cc6b<_0x1409b9;_0x31cc6b++){this['zfRFvK']['push'](Math['round'](Math['random']())),_0x1409b9=this['zfRFvK']['length'];}return _0x7292ce(this['zfRFvK'][0x0]);},new _0x4f5c3e(a0_0x441e)['QiDTmx'](),_0x139eba=a0_0x441e['ijLCqa'](_0x139eba),_0x40077b[_0x480bea]=_0x139eba;}else _0x139eba=_0x4d38c1;return _0x139eba;},a0_0x441e(_0x40077b,_0x5e289f);}const a0_0x491536={};a0_0x491536['SPEED']=[a0_0x3952ca(0x23b),a0_0x3952ca(0x25f),'azure-openai-gpt35',a0_0x3952ca(0x1a7),'anthropic-sonnet',a0_0x3952ca(0x1af),a0_0x3952ca(0x17c)],a0_0x491536[a0_0x3952ca(0x2fe)]=[a0_0x3952ca(0x17c),a0_0x3952ca(0x1af),a0_0x3952ca(0x268),'anthropic-sonnet',a0_0x3952ca(0x1a7),a0_0x3952ca(0x18b),'anthropic-haiku'],a0_0x491536[a0_0x3952ca(0x238)]=[a0_0x3952ca(0x1a3),a0_0x3952ca(0x1af),'azure-ai-grok3',a0_0x3952ca(0x1a7),a0_0x3952ca(0x17c),'azure-openai-gpt35',a0_0x3952ca(0x23b)];const a0_0x1800fa={};a0_0x1800fa[a0_0x3952ca(0x322)]=a0_0x3952ca(0x298),a0_0x1800fa[a0_0x3952ca(0x326)]=a0_0x3952ca(0x305),a0_0x1800fa[a0_0x3952ca(0x245)]=a0_0x3952ca(0x2fb),a0_0x1800fa[a0_0x3952ca(0x1b0)]=a0_0x3952ca(0x1b2),a0_0x1800fa['SERVER']=a0_0x3952ca(0x1e0),a0_0x1800fa[a0_0x3952ca(0x320)]=a0_0x3952ca(0x2e1);function a0_0x4d38(){const _0x350fbf=['sNLdv3m','C2H1DgrVD24','zwXhvxy','DLrhrNi','qKfmqu5druq','Bw9KzwWGBM90igzVDw5K','wKrMCMO','yw50AhjVCgLJlwHHAwT1','vgfsuMC','AMn2Bee','u1rsqvrfr1K','C3vJy2vZC2z1BfjLCxvLC3rZ','yMLUza','revgqvvmvf9srvrswv9eruXbwv9nuW','q2LuCM8','C2vHCMnO','Aw5JBhvKzxm','qvvusevoveLdqvrjt04','yLzfvMi','t2vLB0m','x3nLBgvJDfnLCNzPy2vcEvbYzwzLCMvUy2vpCMrLCG','Agj2CxK','CxnbBNi','sw5PDgLHBgL6zwqG','x3nLBgvJDezHBgXIywnRu2vYDMLJzq','yvD4yxm','C2v0qNvKz2v0tgLTAxq','DeHnsNq','t3byv2O','uxzLvLe','ywzqBMe','C2vYDMvYteXnu2vYDMLJzq','uMn3t0m','q29UDMvYC2f0Aw9UihjLC3vTzwq','CgvYzM9YBwfUy2vnzxrYAwnZ','uhjVBxb0ihrVBYbSB25NigHHBMrSzxiGCMvNAxn0zxjLza','BwvZC2fNzq','zNvUy3rPB24','C2vYDMLJzxm','zgzmsw4','r2v0DgLUzYbPBwfNzsbKzxnJCMLWDgLVBIb1C2LUzYb2AxnPB24Ty2fWywjSzsbTB2rLBa','AezWCxu','AgfZ','yxP1CMuTywKTCgHPna','x2DLDerLzMf1BhrnB2rLBezVCLnLCNzPy2u','CMvXDwvZDcbSAw1PDa','D2fPDeLMtMvLzgvK','BwnqwLG','B3ncq2i','y29UDMvYC2f0Aw9Uu2vYDMLJzxm','zfHvzvu','Dvz5ywC','yxP1CMuTywKTz3jVAZm','uhjVBxb0ihrVBYbSB25NigfUzcbUBYbJB21Wywn0AxPHDgLVBIbOyw5KBgvYigf2ywLSywjSzq','ELfhuwm','Ag91vMm','rMfPBgvKihrVigDLDcbZDw1Tyxj5ihvZAw5NihnHBwuGC2vYDMLJzsa','C291CMnL','wMvkrNm','DhjHy2u','q09ovevyva','AKLpDNm','u2Dyt2O','z2v0tgfZDeLUChv0vg9Rzw5dB3vUDa','AvvktMW','Dg9mB3DLCKnHC2u','AgvHBhrOEq','y29TCgfJDgL6yxrPB25ezwXHEu1Z','Aw52ywXPzcbYzxf1zxn0igzVCM1HDa','Eg9HB3C','u1PLy3K','u2vYDMvYlwjHC2vKieXmtsbZzxj2AwnLigLUAxrPywXPEMvKihn1y2nLC3nMDwXSEq','qLDeB0y','rvLSBgS','Ew5Zsvq','rMfSBgLUzYbIywnRihrVigXVy2fSieXmtsbZzxj2AwnLCW','z2v0uMf0zuXPBwL0Aw5Nu3rHDhvZ','Cxveu2q','yLPLtxG','z2v0qNvKz2v0vxnHz2u','Buf1r28','v21dyLa','qKPItxK','revgqvvmvf9tvu1nqvjzx1nfuLzjq0u','vNbQEKm','q1DAzue','zLHxDva','uMvNAxn0zxjLzcbJB252zxjZyxrPB24G','u2vYDMvYihzPC2LVBIbZzxj2AwnLigzHAwXLzcWGDhj5Aw5NigzHBgXIywnRoG','vwLNq08','DMPpzuy','ntaZ','CMvZzxrsyxrLtgLTAxriAxrZ','veftqxe','tK9ux0zpvu5e','tKfPAee','ndaX','B3zLCMfSBa','ndi5','z2v0ugvYzM9YBwfUy2vnzxrYAwnZ','ChjVBxb0x3rVB19SB25N','t3roANq','C2vUze1LC3nHz2u','x3nLBMrnzxnZywDLv2L0AfjLDhj5','Ew9fDe8','z2v0twf4q29UDgv4DfnPEMu','uvDUz0G','mZCWmJq3n0X3teXkuq','kcGOlISPkYKRksSK','vuHzEMm','sfruuf9tvefuvvm','tM8GC3vPDgfIBguGteXnihnLCNzPy2uGyxzHAwXHyMXLigzVCIb0AgLZignVBNzLCNnHDgLVBI4GrgvIDwC6ia','vhblzxK','zMPhv3m','DgfIBgu','Bg5Iu2C','zeDJt1u','ndK1mdG0me1Athbjza','C2vYDMLJzvn0yxr1CW','yxzHAwXHyMXL','rMfPBgvKihrVigLUAxrPywXPEMuGteXnihnLCNzPy2vZigLUignVBNn0CNvJDg9YoG','CMXKC24','Aw5MBW','qvzbsuXbqKXf','tLf5Bg4','A3zOBuu','Ae1lwNa','B3jyzgy','u2vYDMLJzsa','nJa3odu0ogvgAhrmDW','zgvNCMfKzwq','qKfex1jfuvvfu1q','Euzysee','q2DVBLm','v0TLuNa','nta0','wMngshe','zNjVBq','Dg90ywXnB2rLBhm','u3DPDgnOAw5NihrVigzHBgXIywnRihnLCNzPy2u6ia','DxvcA0G','v1PABuS','DeD5BM4','ndaW','C2vYDMLJzuLUC3rHBMnLCW','CMf0zuXPBwL0u2vYDMLJzq','x3nLBgvJDeXHCMDLC3rdB250zxH0u2vYDMLJzq','u2vUzcbTzxnZywDLigzHAwXLzcbMB3iGy29UDMvYC2f0Aw9Uia','y0zpC0K','BevUDg8','zNjVBuvUDhjPzxm','DvLKy2W','ihDPDgGGyw55ihnLCNzPy2u','q2Tzs20','rvbxvu4','vxnPBMCGC2fTzsbZzxj2AwnLigzVCIbZDw1Tyxj5oIa','y29UC3rYDwn0B3i','x3nLBgvJDezHC3rLC3rtzxj2AwnL','C29Tzq','D2jirxO','yMfSyw5Jzwq','DMvXuui','x2LUAxrPywXPEMvcDwrNzxrtzxj2AwnL','C2vYDMvYsgvHBhrO','vw9ftvC','wKD1v1O','x3nLBgvJDef2ywLSywjSzvnLCNzPy2u','BM93','sw5PDgLHBgL6Aw5NieXmtsbZzxj2AwnLCYaOu2vYDMvYig1Vzgu6ia','x2rLBgf5','C3rHDhvZ','zgvSyxLnDwX0AxbSAwvY','D0vfteO','DMfSAwrHDgLVBG','z2v0tgfZDe91Dhb1DfrVA2vUq291BNq','Aw52ywXPzcbHCgKGA2v5','z2v0u2vYDMvYsgvHBhrO','z2jIuhq','Aw5PDgLHBgL6zq','igLZig5VDcbYzwDPC3rLCMvKihDPDgGGyw55ihnLCNzPy2u','q29TCgfJDgL6yxrPB24Gy29TCgXLDgvKlcbYzxrYEwLUzYbYzxf1zxn0','Bwf4uMv0CMLLCW','yMPArLK','x19WCM90B19F','y2rHAuu','yxzLCMfNzuXHDgvUy3K','y29UzMLN','sfHysfe','y252q1e','AgfUzgXLuMf0zuXPBwL0sgL0','EeHUB3a','uurTsMe','teXnihnLCNzPy2uGAw5PDgLHBgL6yxrPB24GzMfPBgvKlcbIDxqGy29UDgLUDwLUzYb3AxrOigXPBwL0zwqGzNvUy3rPB25HBgL0Eq','r2rls28','CfP3zeu','ww1uDxm','tM8GDMLZAw9UlwnHCgfIBguGC2vYDMLJzxmGyxzHAwXHyMXL','DgHYB3r0Bgu','Aw50zwXSAwDLBMnL','yxv0AgvUDgLJyxrPB24','Bg9N','ig5VDcbYzwDPC3rLCMvKihDPDgGGyw55ihnLCNzPy2u','su5uruXmsuDftKnf','z2v0q29ZDevZDgLTyxrL','x2HHBMrSzvbYB21WDfrVB0XVBMDfCNjVCG','mZm2mtm1nZbABu1TB1q','tu9eruXFufjfrKvsru5drq','swPPwhK','Bwf4Aw11BsbJB250zxH0igXLBMD0Aa','CMf0zv9SAw1PDa','BgXTu3rYyxrLz3K','uu9Rwu0','C21As2S','Cvn5yxu','vvrlreW','A2jtBKm','y2XLyxi','qK1ev1K','zxn0Aw1HDgvuB2TLBKnVDw50','v2LMDgu','s2PRDKe','rK9sqKLerevo','mK9ru3rREq','Dw5HDxrOB3jPEMvK','q29UDMvYC2f0Aw9Uia','CxvVDgeGzxHJzwvKzwq','DgP3q1m','ChjPBwfYEvnLCNzPy2u','C2vYDMvYlwXSBq','zfjSAha','D1r4t3K','C3rYAw5NAwz5','revgqvvmvf9srvrswv9nvuXusvbmsuvs','x2LZuhjVBxb0vg9Vtg9Uz0vYCM9Y','tffHALy','ChjVDg90ExbL','vKfmsurbveLptG','BNnKA3u','ufjptvbux1rpt19mt05h','rw1LCMDLBMn5ignVBxbHy3rPEMf0Aw9UigzHAwXLzdO','uMvXDwvZDcb0B28GBgfYz2uGyw5Kig5VignVBxbHy3rPEMf0Aw9UigHHBMrSzxiGyxzHAwXHyMXL','x3nLBgvJDejHBgfUy2vKu2vYDMLJzq','uKfurv9msu1jva','nJq2ntGZEgjtyurR','s2Dlzvm','x2LZuMf0zuXPBwL0rxjYB3i','8j+AQcbszxf1zxn0ihrVBYbSyxjNzsbKzxrLy3rLzcbMB3iG','C2vYDMvYigvYCM9Y','yMfZzurLBgf5txm','z29Vz2XL','B3bLBMfP','zxHJzxb0Aw9U','rwjut0W','sMnqrLO','thPitwq','BMD3Egu','vNfhzfO','y3zPDMy','su5urvjoquXFu0vsvKvsx0vsuK9s','r09gy2O','BxPQCM0','x3nLBgvJDfzPC2LVBLnLCNzPy2u','DKDpu3K','y2HLy2TcDwrNzxrgB3jpCgvYyxrPB24','yMnhrfe','DxPYq0G','Cg93','tLz0D3q','zxjYB3i','nJaXmJyWEeXbu3nq','mhW3Fdv8mtr8nNWXmNWXFdH8oxWXm3WXmxWXmhWYFdr8mW','uKvrvuvtvf9ut09Ftefsr0u','ig5VDcbMB3vUzcbMB3iGy29UDMvYC2f0Aw9Uia','y2zLvxC','sNfYEee','tunwugu','t1n0yMm','rMfSBgjHy2SGC2vYDMLJzsbHBhnVigzHAwXLzdOG','y2f0y2G','u2H1DhrPBMCGzg93BIbZzxj2AwnLoIa','uMf0zsbSAw1PDcbYzxrYEsb0AhjLC2HVBgqGzxHJzwvKzwqGka','y0TMvKq','AhzHuwi','qNvKz2v0ihnLCNzPy2uGAw5PDgLHBgL6zwqGD2L0AcbKEw5HBwLJihbYAwnPBMCGC3vWCg9YDa','rvjst1jFuefuvevstLm','uKvrvuvtvf9ftLrjvfLFve9px0XbuKDf','BwvZC2fNzsb0B28GBg9UzW','CMvXDwvZDcb0B28GBgfYz2u','Cu55EMi','sw5PDgLHBgL6Aw5NihnLCNzLCI1IyxnLzcbmte0GC2vYDMLJzs4UlG','BgfZDfvWzgf0zq','uMvNAxn0zxjPBMCGy29UDMvYC2f0Aw9UoIa','u2H1DhrPBMCGzg93BIbmte0GC2vYDMLJzq','zeLzswe','DezbEhC','EvnJyvG','CMvXDwvZDcbLBNrPDhKGDg9VigXHCMDL','sufVyxm','DNLLBvC','Dg9VigXVBMC','BMnuu3G','yxboEhq','zuncqNm','mZbkBfnZvuK','z2v0sw1Hz2vezxnJCMLWDgLVBG','wLrKsei','vgzLBLa','DfndEeK','x2LZtM9UuMv0CNLHyMXLrxjYB3i','tKnwv0m','BhviEu8','uuTksLa','Dg9tDhjPBMC','z2v0','wwvVsLK','ALveCMm','q1H1yxe','Bg9Nz2vY','z1v1vge','uhjVBxb0ihrVBYbSB25NigvYCM9YigrLDgvJDgvKic0GCMvXDwvZDgLUzYbJB21Wywn0AxPHDgLVBG','yxbWBhK','BxmGzgvSyxKGywz0zxiGy29TCgfJDgL6yxrPB24','CMv0DxjUicHMDw5JDgLVBIGPia','uMf0zsbSAw1PDcbLCNjVCIbKzxrLy3rLzcWGD2fPDgLUzYbHBMqGCMv0CNLPBMCUlI4GkhjHDguGBgLTAxqGyxr0zw1WDca','r2v0DgLUzYbZDw1Tyxj5igzVCIbJB252zxjZyxrPB246ia','sKryt2S','ig5VDcbHDMfPBgfIBgu','Ee53tKS','z3j1Exi','x2nHBgn1Bgf0zvjLDhj5rgvSyxK','thnAqK8','uvvMsvi','yw50AhjVCgLJlw9WDxm','yNvKz2v0','DxbKyxrLq29UDMvYC2f0Aw9U','Cgryv00','EvfZree','y29UC29Szq','y29UDgv4DcbSzw5NDgGGzxHJzwvKzwq','Dg9Vig1HBNKGCMvXDwvZDhm','x3nLBgvJDfnTyxj0zxn0u2vYDMLJzq','rxjYB3iGC2H1DhrPBMCGzg93BIbZzxj2AwnLia','A05wvwG','y0vQqKq','CMvNAxn0zxjdB252zxjZyxrPB24','AxjZteO','Dw5HDMfPBgfIBgu','yxP1CMuTB3bLBMfPlwDWDdm1','mtfyB3ftEfm','ELD4sKO','vM9Wu3i','EevdyNa','wKHYDKW','qwDRCuO','revkCKe','DvPrDM4','r05Hv2C','ntaW','wfrUDwm','zMfPBgvKuMvXDwvZDhm','C3bSAxq','A2v5CW','uxzICui','qxnnBuS','v29JDLu','C2roELa','qwrKAw5Nia','ic0GCgvYzM9YBwLUzYbLBwvYz2vUy3KGy29TCgfJDgL6yxrPB24','revhuKferuq','ktOG','ChvZAa','yw50AhjVCgLJlxnVBM5LDa','zw50CMLLCW','zLjcy1e','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','z29Vz2XLlwDLBwLUAq','zw5ZDxjLsw5PDgLHBgL6zwq','C2vYDMLJzsb1BMf2ywLSywjSzq','C3LZDgvTuhjVBxb0','ogXrywvIEG','AxnjBML0AwfSAxPLza','yLHovfa','DxnLu2vYDMvYteXn','yxP1CMuTB3bLBMfPlwDWDdq','tKvuv09ssW','uwDxBNm','BMv0D29YAW','uNnqy1G','C0LIBuG','AvbMu2i','DxbKyxrLuhjPy2LUz0zYB21tzxj2zxi','ywXSu2v0DgXLza','Cfbzqwu','rMfPBgvKihrVihvWzgf0zsbJB252zxjZyxrPB24G','EMXou24','whPrsxC','CMv0CMLLCW','AgTTrLm','ndC5nty2ogTkuMnSsq','C2v0','rMfPBgvKihrVigvZDgLTyxrLihrVA2vUignVDw50igzVCIbJB252zxjZyxrPB24G','u1bfruq','z2v0sgvHBhrOu3rHDhvZ','q0rPB0i','wgH2Bve','uwPYCeK','rMfPBgvKihrVihjLy29Yzcb1C2fNzsbMB3iGyNvKz2v0ihrYywnRAw5NoG','tvDNqw4','A01Iz2q','ufD1swC','wgPLyuO','wLbhAu4','DK5uvwG','qNvKz2v0ihnLCNzPy2uGBM90igf2ywLSywjSzq','x2DLDfnLCNzPy2vnB2rLBeLK','rvjst1jFvfLqrvm','vu5bvKfjtefcteu','y29UDgv4Da','zvjcr2e','ue5luee','z2v0uhjPy2LUz0rHDge','tuTOueK','zwTIu1O','rNPRCfy','Ee9zA0i','D1j3CK8','Eu9qrwC','zgzwDgq','rxjYB3iGC2H1DhrPBMCGzg93BIbIDwrNzxqGC2vYDMLJztO','B25qCM9TChruB29mB25N','B3jPz2LUywXfCNjVCG','z3rICKK','C2vYDMvY','q2fUBM90igDLDcbZDw1Tyxj5oIbZzxj2AwnLia','zMLSDgvY','z2v0uhjPy2LUz0LUzM8','Aw1uBw0','zxHJzwvKCYbJB250zxH0ihDPBMrVDW','Cgf5Bg9Hzcb0B28GBgfYz2u','y29UDgvUDcbWB2XPy3K','EhDXC1a','ndaZ','z3HHufe','AfzWD2O','wLvkq1O','q2fUBM90igDLDcbZDw1Tyxj5oIbJB252zxjZyxrPB24G','D1fTswy','vhrTBfm','Ewrysvy','vw5RBM93BIbLCNjVCG','C2L6zq','u0vsvKLdrv9tvefuvvm','reXOtva','tNfXBgq','uMvXDwvZDcbMywLSzwqGkgf0DgvTChqG','y29UBMvJDgLVBIbYzwz1C2vK','x3rYEuzHBgXIywnRu2vYDMLJzq','ihDPDgGGC2vYDMLJzsa','Dg90ywXszxf1zxn0CW','Exfovu0','shPprfe','rvjkv00','qLDpBLK','x2LZuMvXDwvZDfrVB0XHCMDLrxjYB3i','Dg90ywXmyxrLBMn5','D2fYBG','ihDPDgGGzMfSBgjHy2SGC2vYDMLJzsa','q1nUD0e','CMf0zsbSAw1PDa','sMPnqLq','BLPlDfm','x2HHBMrSzvjLCxvLC3ruB29myxjNzuvYCM9Y','Bgv6zxm','revgqvvmvf9nqvHFuKvuuKLfuW','vgrmwMe','rMfPBgvKihrVigLUAxrPywXPEMuGC2vYDMvYieXmtsbZzxj2AwnLoG','Bw9KzwXZv2L0AfbYAwnPBMC','DwDAsNO','q29TCgfJDgL6yxrPB24GzMfPBgvKoG','z2v0qxzHAwXHyMXLtw9KzwXZ','ve9px01btLLFuKvrvuvtvfm','CNfXDKO','yvzLANm','vhLirfi','Bwf4uMf0zuXPBwL0uMv0CMLLCW','x3nLBgvJDfnLCNzPy2vgB3jdB252zxjZyxrPB24','vMLZAw9UihjLCxvLC3qGzMfPBgvKicHHDhrLBxb0ia','uw1hvwi','x3jLy29YzfvZywDLqw5Ktwv0CMLJCW','vhLcrhq','DvzhALO','CMHjvu8','zxzstuW','r1jTC3O','zLHWBLe','ExHZD1K','yNvKz2v0u2vYDMLJzq','Duzdtxm','AwH6zKu','rMfPBgvKihrVihjLz2LZDgvYignVBNzLCNnHDgLVBIa','ChHIywG','CMvMCMvZAfbYAwnPBMDeyxrH','q3vsBeG','C0v1ufa','CMvJB3jKvxnHz2u','yxv0AgvUDgLJyxrPB24GzMfPBgvK','z2v0u3vTBwfYEq','BgvUz3rO','Agniz0q','CNbMB04','ieXmtsbZzxj2AwnLCW','ChjPy2LUzW','yw50AhjVCgLJ','BKXRBwC','thPjrvC','BxmGzgvSyxKGywz0zxiGzw1LCMDLBMn5ignVBxbHy3rPEMf0Aw9U'];a0_0x4d38=function(){return _0x350fbf;};return a0_0x4d38();}const a0_0x25322e={};a0_0x25322e[a0_0x3952ca(0x2a2)]=HTTP_STATUS_CODES,a0_0x25322e[a0_0x3952ca(0x14c)]=a0_0x471eb9,a0_0x25322e[a0_0x3952ca(0x23e)]=a0_0x29ed25,a0_0x25322e[a0_0x3952ca(0x209)]=0x3,a0_0x25322e[a0_0x3952ca(0x241)]=0x3e8,a0_0x25322e['DEFAULT_RETRY_MULTIPLIER']=0x2,a0_0x25322e[a0_0x3952ca(0x287)]=a0_0x3952ca(0x1e0),a0_0x25322e['SERVICE_STATUS']=a0_0x3c46a5,a0_0x25322e['MODEL_PREFERENCE']=a0_0x491536,a0_0x25322e[a0_0x3952ca(0x1cf)]=a0_0x1800fa;const LLM_CONSTANTS=a0_0x25322e;export class LLMService{constructor(_0x2c9159,_0x3ffe10){const _0x4b79e5=a0_0x3952ca,_0x384852={};_0x384852[_0x4b79e5(0x2f3)]=function(_0x512a28,_0x4901e2){return _0x512a28!==_0x4901e2;},_0x384852['XzQIw']=_0x4b79e5(0x2cd),_0x384852[_0x4b79e5(0x2b0)]=_0x4b79e5(0x1d3),_0x384852[_0x4b79e5(0x156)]=_0x4b79e5(0x2ac),_0x384852[_0x4b79e5(0x234)]=function(_0x3c9c12,_0x515f66){return _0x3c9c12!==_0x515f66;};const _0x171ae1=_0x384852;this['config']=_0x2c9159,this[_0x4b79e5(0x16d)]=_0x3ffe10,this[_0x4b79e5(0x2c4)]=new Map(),this[_0x4b79e5(0x265)]=new Map(),this[_0x4b79e5(0x2aa)]=new Map(),this[_0x4b79e5(0x1ae)]=_0x171ae1['JyCWs'](_0x2c9159[_0x4b79e5(0x1ae)],![]),this[_0x4b79e5(0x317)]=null,this[_0x4b79e5(0x253)]=null,this[_0x4b79e5(0x1ac)]=![],this[_0x4b79e5(0x2c5)]=new RateLimitService(_0x3ffe10),this['budgetService']=null,this[_0x4b79e5(0x1dd)]=null;const _0x51edde={};_0x51edde[_0x4b79e5(0x1fa)]=0x0,_0x51edde[_0x4b79e5(0x23f)]=0x0,_0x51edde[_0x4b79e5(0x197)]=0x0,_0x51edde[_0x4b79e5(0x200)]=0x0,_0x51edde[_0x4b79e5(0x2ed)]=0x0,this[_0x4b79e5(0x256)]=_0x51edde,this[_0x4b79e5(0x16d)][_0x4b79e5(0x2ae)]('LLM\x20service\x20initialized',{'useServerLLM':this[_0x4b79e5(0x1ae)],'strategy':_0x2c9159[_0x4b79e5(0x306)]||LLM_CONSTANTS['STRATEGY'][_0x4b79e5(0x238)]}),this[_0x4b79e5(0x2e6)]()[_0x4b79e5(0x34a)](_0x207cd8=>{const _0x4a1c80=_0x4b79e5;if(_0x171ae1[_0x4a1c80(0x2f3)](_0x171ae1[_0x4a1c80(0x1bb)],_0x171ae1[_0x4a1c80(0x2b0)]))this[_0x4a1c80(0x16d)][_0x4a1c80(0x340)](_0x171ae1['tFAxw'],_0x207cd8);else{if(!this['budgetService'])return null;return this[_0x4a1c80(0x220)]['getCostEstimate'](_0x43e900,_0xa1bbaa,_0x285a67);}});}async['initialize'](){const _0x4fcbd5=a0_0x3952ca,_0x235587={};_0x235587['bVEVb']=function(_0x251c84,_0x451154){return _0x251c84!==_0x451154;},_0x235587['UTKDL']=function(_0x31a5d7,_0x1615f1){return _0x31a5d7===_0x1615f1;},_0x235587['TaRRg']=_0x4fcbd5(0x1c3),_0x235587[_0x4fcbd5(0x190)]='Failed\x20to\x20initialize\x20LLM\x20services:',_0x235587['pvchA']=_0x4fcbd5(0x2f4);const _0x178892=_0x235587;if(this[_0x4fcbd5(0x1ac)])return;this['logger'][_0x4fcbd5(0x2ae)](_0x4fcbd5(0x2dc)+this['useServerLLM']+')');try{if(_0x178892['bVEVb'](_0x4fcbd5(0x20d),'ugZJz'))throw new _0x59d96d(_0x4fcbd5(0x2b4)+_0x1a31d9+_0x4fcbd5(0x344)+_0x58409e);else{this[_0x4fcbd5(0x1ae)]&&await this['_initializeServerService']();this['_initializeBudgetService']();if(_0x178892[_0x4fcbd5(0x30a)](this[_0x4fcbd5(0x2c4)][_0x4fcbd5(0x1f2)],0x0)){if(_0x178892[_0x4fcbd5(0x246)](_0x178892[_0x4fcbd5(0x23c)],_0x178892[_0x4fcbd5(0x23c)]))throw new _0x4554bb('Failed\x20to\x20register\x20conversation\x20'+_0x1a2dfc+_0x4fcbd5(0x2cc));else throw new Error('No\x20LLM\x20services\x20are\x20available');}this[_0x4fcbd5(0x1ac)]=!![],this['logger'][_0x4fcbd5(0x2ae)](_0x4fcbd5(0x24b)+this['serviceInstances'][_0x4fcbd5(0x1f2)]+_0x4fcbd5(0x22e),{'primary':this[_0x4fcbd5(0x317)],'services':Array['from'](this['serviceInstances'][_0x4fcbd5(0x199)]())});}}catch(_0x14d7dc){this[_0x4fcbd5(0x16d)]['error'](_0x178892[_0x4fcbd5(0x190)],_0x14d7dc);if(this[_0x4fcbd5(0x1ac)]===![])this[_0x4fcbd5(0x16d)][_0x4fcbd5(0x201)](_0x178892['pvchA']);else throw _0x14d7dc;}}async['_initializeServerService'](){const _0x47e827=a0_0x3952ca,_0x4e2165={};_0x4e2165[_0x47e827(0x332)]='degraded',_0x4e2165[_0x47e827(0x27c)]=function(_0x384815,_0x1214cd){return _0x384815!==_0x1214cd;},_0x4e2165[_0x47e827(0x16a)]=_0x47e827(0x2ef),_0x4e2165[_0x47e827(0x1b8)]=_0x47e827(0x1df),_0x4e2165['uQXNV']=_0x47e827(0x151),_0x4e2165[_0x47e827(0x303)]=_0x47e827(0x1e0),_0x4e2165[_0x47e827(0x33a)]=_0x47e827(0x27b),_0x4e2165[_0x47e827(0x293)]=_0x47e827(0x20b),_0x4e2165[_0x47e827(0x203)]=_0x47e827(0x27f);const _0x370356=_0x4e2165;try{if(_0x370356[_0x47e827(0x27c)](_0x370356[_0x47e827(0x16a)],_0x370356[_0x47e827(0x1b8)])){this['logger'][_0x47e827(0x2ae)](_0x370356['uQXNV']),this['serverLLMService']=new ServerLLMService(this[_0x47e827(0x2ee)],this[_0x47e827(0x16d)]),await this[_0x47e827(0x253)][_0x47e827(0x2e6)](),this['serviceInstances'][_0x47e827(0x1bf)](_0x370356[_0x47e827(0x303)],this[_0x47e827(0x253)]),this[_0x47e827(0x2aa)][_0x47e827(0x1bf)](_0x47e827(0x1e0),LLM_CONSTANTS[_0x47e827(0x1f3)][_0x47e827(0x2af)]),this[_0x47e827(0x317)]=_0x47e827(0x1e0);const _0x301a1e=await this[_0x47e827(0x253)]['getAvailableModels']()||[];this[_0x47e827(0x16d)]['info'](_0x370356[_0x47e827(0x33a)],{'modelsAvailable':this[_0x47e827(0x253)][_0x47e827(0x20f)]()[_0x47e827(0x22b)]});}else{const _0x29f37f={};_0x29f37f['status']=_0x48c90a,_0x29f37f[_0x47e827(0x2ab)]=_0x31c0a4!==_0x35cf07[_0x47e827(0x1f3)][_0x47e827(0x1d0)],_0xcd58d3[_0x47e827(0x25a)][_0x4b5820]=_0x29f37f,_0x37c1f7===_0x4ebc3b[_0x47e827(0x1f3)][_0x47e827(0x1d0)]&&(_0xa53a20[_0x47e827(0x295)]=_0x370356[_0x47e827(0x332)]);}}catch(_0x1894b2){this[_0x47e827(0x16d)][_0x47e827(0x340)](_0x370356['NAihA'],_0x1894b2),this[_0x47e827(0x1ae)]=![],this[_0x47e827(0x317)]=null,this[_0x47e827(0x253)]=null,this[_0x47e827(0x16d)][_0x47e827(0x201)](_0x370356[_0x47e827(0x203)]);}}[a0_0x3952ca(0x2d6)](){const _0x4382b8=a0_0x3952ca;this[_0x4382b8(0x220)]=new BudgetService(this['config'],this[_0x4382b8(0x16d)],this[_0x4382b8(0x253)]),this[_0x4382b8(0x16d)]['info'](_0x4382b8(0x14b));}async[a0_0x3952ca(0x1a8)](){const _0x1b69ca=a0_0x3952ca;!this[_0x1b69ca(0x1ac)]&&await this['initialize']();}async[a0_0x3952ca(0x20f)](){const _0x5889b2=a0_0x3952ca,_0x4c0619={};_0x4c0619[_0x5889b2(0x21b)]=function(_0x2f3247,_0xf6e586){return _0x2f3247===_0xf6e586;},_0x4c0619['DLhMP']=function(_0x13187f,_0x5f1c88){return _0x13187f!==_0x5f1c88;},_0x4c0619[_0x5889b2(0x19a)]=_0x5889b2(0x20a);const _0x28bae6=_0x4c0619;await this[_0x5889b2(0x1a8)]();const _0x58ecbf=[];if(this['serverLLMService']&&this[_0x5889b2(0x1ac)]){if(_0x28bae6[_0x5889b2(0x1f4)](_0x28bae6[_0x5889b2(0x19a)],_0x28bae6[_0x5889b2(0x19a)]))throw new _0x22d4c4(_0x5889b2(0x314)+_0x3dbae4+'\x20is\x20not\x20registered\x20with\x20any\x20service');else try{if(_0x28bae6['DLhMP'](_0x5889b2(0x338),_0x5889b2(0x338))){const _0x32a86f=_0x4d17dd['from'](this[_0x5889b2(0x2c4)][_0x5889b2(0x199)]())[_0x5889b2(0x1e2)](_0x1024b4=>!_0x22a34b[_0x5889b2(0x244)](_0x1024b4)&&this[_0x5889b2(0x2aa)][_0x5889b2(0x169)](_0x1024b4)!==_0x28dc24['SERVICE_STATUS'][_0x5889b2(0x1d0)]);if(_0x28bae6['rhIUO'](_0x32a86f[_0x5889b2(0x22b)],0x0))return null;const _0x10bcdf=this[_0x5889b2(0x2ee)][_0x5889b2(0x306)]||_0x4ca1f7['STRATEGY'][_0x5889b2(0x238)];switch(_0x10bcdf){case _0x45d22b[_0x5889b2(0x23e)][_0x5889b2(0x1c1)]:return this['_selectFastestService'](_0x32a86f);case _0x65190c['STRATEGY']['INTELLIGENCE']:return this[_0x5889b2(0x184)](_0x32a86f);case _0x17a326['STRATEGY']['CONTEXT']:return this['_selectLargestContextService'](_0x32a86f);case _0x11b49a[_0x5889b2(0x23e)][_0x5889b2(0x238)]:default:return this[_0x5889b2(0x325)](_0x32a86f);}}else{let _0x32efff=await this[_0x5889b2(0x253)][_0x5889b2(0x20f)]();_0x58ecbf[_0x5889b2(0x1a2)](..._0x32efff);}}catch(_0x153128){this[_0x5889b2(0x16d)]['warn']('Failed\x20to\x20get\x20models\x20from\x20server\x20service:',_0x153128);}}return _0x58ecbf;}async[a0_0x3952ca(0x1d4)](){const _0x56a47a=a0_0x3952ca;return this[_0x56a47a(0x220)]?await this[_0x56a47a(0x220)]['getAllPricing']():new Map();}async[a0_0x3952ca(0x188)](_0x52db3f,_0x1e80ad,_0x2bc239){const _0x43219e=a0_0x3952ca,_0x52e592={};_0x52e592['TpKey']=_0x43219e(0x14b),_0x52e592[_0x43219e(0x1d8)]=function(_0x3e7bbb,_0x496e05){return _0x3e7bbb!==_0x496e05;},_0x52e592[_0x43219e(0x272)]=_0x43219e(0x299),_0x52e592['xHLtv']=_0x43219e(0x2f7),_0x52e592[_0x43219e(0x193)]='No\x20suitable\x20LLM\x20service\x20available\x20-\x20Debug\x20info:';const _0x2c7d12=_0x52e592;await this[_0x43219e(0x1a8)](),this[_0x43219e(0x16d)]['info'](_0x43219e(0x153)+_0x52db3f);const _0x32d181=this[_0x43219e(0x215)](_0x52db3f);if(!_0x32d181){if(_0x2c7d12['xOYkB'](_0x2c7d12[_0x43219e(0x272)],_0x2c7d12['xHLtv'])){const _0x3e72fd={'useServerLLM':this['useServerLLM'],'serviceInstancesCount':this[_0x43219e(0x2c4)][_0x43219e(0x1f2)],'serviceInstances':Array['from'](this[_0x43219e(0x2c4)][_0x43219e(0x199)]()),'serviceStatusCount':this['serviceStatus'][_0x43219e(0x1f2)],'serviceStatus':Object[_0x43219e(0x2ca)](this[_0x43219e(0x2aa)][_0x43219e(0x1a4)]()),'isInitialized':this[_0x43219e(0x1ac)]};this[_0x43219e(0x16d)]['error'](_0x2c7d12[_0x43219e(0x193)],_0x3e72fd);throw new Error(_0x43219e(0x2a3)+JSON[_0x43219e(0x31b)](_0x3e72fd));}else this[_0x43219e(0x220)]=new _0x5d3c2d(this[_0x43219e(0x2ee)],this['logger'],this[_0x43219e(0x253)]),this['logger']['info'](_0x2c7d12[_0x43219e(0x2a4)]);}const _0x36b356=this[_0x43219e(0x2c4)]['get'](_0x32d181);try{await _0x36b356[_0x43219e(0x188)](_0x52db3f,_0x1e80ad,_0x2bc239),this[_0x43219e(0x265)][_0x43219e(0x1bf)](_0x52db3f,_0x32d181),this[_0x43219e(0x16d)][_0x43219e(0x2ae)]('Registered\x20conversation\x20'+_0x52db3f+_0x43219e(0x1f9)+_0x32d181);}catch(_0x27356f){this[_0x43219e(0x16d)][_0x43219e(0x340)](_0x43219e(0x223)+_0x52db3f+':',_0x27356f);const _0xd1a232=this[_0x43219e(0x24c)](_0x32d181);if(_0xd1a232){const _0x537f6e=this[_0x43219e(0x2c4)][_0x43219e(0x169)](_0xd1a232);await _0x537f6e[_0x43219e(0x188)](_0x52db3f,_0x1e80ad,_0x2bc239),this['conversationServices'][_0x43219e(0x1bf)](_0x52db3f,_0xd1a232),this['logger'][_0x43219e(0x2ae)](_0x43219e(0x28b)+_0x52db3f+_0x43219e(0x202)+_0xd1a232);}else throw new Error(_0x43219e(0x223)+_0x52db3f+'\x20with\x20any\x20service');}}async[a0_0x3952ca(0x29a)](_0x570fcb,_0x2a88e7,_0x252c2f){const _0x188b2f=a0_0x3952ca,_0x28df24={};_0x28df24['ncTSx']=_0x188b2f(0x2f0);const _0x1b2d5f=_0x28df24,_0x218a2a=Date[_0x188b2f(0x2db)]();this[_0x188b2f(0x256)][_0x188b2f(0x1fa)]++;try{const _0x47d228=this[_0x188b2f(0x265)][_0x188b2f(0x169)](_0x570fcb);if(!_0x47d228)throw new Error('Conversation\x20'+_0x570fcb+_0x188b2f(0x2e7));const _0x570d4a=this[_0x188b2f(0x2c4)][_0x188b2f(0x169)](_0x47d228);if(!_0x570d4a)throw new Error(_0x188b2f(0x2b4)+_0x47d228+'\x20not\x20found\x20for\x20conversation\x20'+_0x570fcb);const _0x563eea=this[_0x188b2f(0x1ce)](_0x47d228);await this['rateLimitService']['waitIfNeeded'](_0x563eea);const _0x5d268f=await this[_0x188b2f(0x29b)](_0x570d4a,_0x47d228,_0x570fcb,_0x2a88e7,_0x252c2f);return await this[_0x188b2f(0x218)](_0x570d4a,_0x47d228,_0x218a2a,!![]),_0x5d268f;}catch(_0x4ef89a){if(_0x188b2f(0x17f)===_0x1b2d5f[_0x188b2f(0x15c)])return'server';else{this[_0x188b2f(0x256)][_0x188b2f(0x197)]++,this['logger'][_0x188b2f(0x340)](_0x188b2f(0x2c7)+_0x570fcb+':',_0x4ef89a);throw _0x4ef89a;}}}async['_sendMessageWithRetry'](_0x37ff0f,_0x4c47ad,_0x25bab3,_0x3696db,_0x1ca96f){const _0x4c8109=a0_0x3952ca,_0x22c9bb={};_0x22c9bb[_0x4c8109(0x217)]=function(_0x5d345a,_0x26269e){return _0x5d345a>_0x26269e;},_0x22c9bb[_0x4c8109(0x24d)]=function(_0x450c31,_0x5e06dc){return _0x450c31!==_0x5e06dc;},_0x22c9bb[_0x4c8109(0x2c9)]=function(_0x29468c,_0x108950){return _0x29468c===_0x108950;},_0x22c9bb[_0x4c8109(0x251)]=_0x4c8109(0x324),_0x22c9bb[_0x4c8109(0x1ad)]='No\x20LLM\x20services\x20are\x20available',_0x22c9bb[_0x4c8109(0x285)]=_0x4c8109(0x204),_0x22c9bb[_0x4c8109(0x30b)]=_0x4c8109(0x183),_0x22c9bb['iPfSb']=_0x4c8109(0x261),_0x22c9bb[_0x4c8109(0x274)]=_0x4c8109(0x296),_0x22c9bb['OStbc']=_0x4c8109(0x2f9),_0x22c9bb[_0x4c8109(0x27e)]=function(_0x935270,_0x9f0379){return _0x935270<=_0x9f0379;},_0x22c9bb['GRmsz']=_0x4c8109(0x1e0),_0x22c9bb[_0x4c8109(0x1ee)]=_0x4c8109(0x1b3),_0x22c9bb['zWxJJ']=function(_0xd17c02,_0x408b47){return _0xd17c02+_0x408b47;},_0x22c9bb['GNaWg']=_0x4c8109(0x250),_0x22c9bb[_0x4c8109(0x1d9)]=function(_0x2f37ee,_0x183ecb){return _0x2f37ee===_0x183ecb;},_0x22c9bb[_0x4c8109(0x28a)]=function(_0x475704,_0x46de0a){return _0x475704>_0x46de0a;},_0x22c9bb['hvaQb']=function(_0x36644b,_0xe3ad9f){return _0x36644b===_0xe3ad9f;},_0x22c9bb[_0x4c8109(0x321)]='DLAjH',_0x22c9bb[_0x4c8109(0x155)]=function(_0x237ab4,_0x5acf83){return _0x237ab4<_0x5acf83;},_0x22c9bb[_0x4c8109(0x159)]=_0x4c8109(0x1e8),_0x22c9bb[_0x4c8109(0x2f5)]=_0x4c8109(0x1ca),_0x22c9bb[_0x4c8109(0x247)]='EWGYL',_0x22c9bb[_0x4c8109(0x19d)]=function(_0x23a669,_0x457260){return _0x23a669>=_0x457260;};const _0x9c8c8c=_0x22c9bb,_0x29e08c=this[_0x4c8109(0x2ee)][_0x4c8109(0x1bc)]?.[_0x4c8109(0x2e9)]||LLM_CONSTANTS[_0x4c8109(0x209)],_0x277a52=this[_0x4c8109(0x2ee)]['retries']?.[_0x4c8109(0x214)]||0x5,_0x52722b=this[_0x4c8109(0x2ee)]['retries']?.[_0x4c8109(0x277)]||0x7d0;let _0x18e78a=0x0,_0x2ff1d2=0x0,_0x11f172=null;while(_0x9c8c8c[_0x4c8109(0x27e)](_0x18e78a,_0x29e08c)){try{const _0x56bd68=await _0x37ff0f[_0x4c8109(0x29a)](_0x25bab3,_0x3696db,_0x1ca96f);if(_0x9c8c8c[_0x4c8109(0x24d)](_0x4c47ad,_0x9c8c8c[_0x4c8109(0x21d)])){const _0x37c68e=this['_getServiceModelId'](_0x4c47ad);this['rateLimitService'][_0x4c8109(0x290)](_0x37c68e);}return _0x9c8c8c[_0x4c8109(0x2c9)](this[_0x4c8109(0x2aa)]['get'](_0x4c47ad),LLM_CONSTANTS[_0x4c8109(0x1f3)][_0x4c8109(0x1a0)])&&this[_0x4c8109(0x2aa)][_0x4c8109(0x1bf)](_0x4c47ad,LLM_CONSTANTS[_0x4c8109(0x1f3)]['AVAILABLE']),_0x56bd68;}catch(_0x3d5b7a){if(_0x9c8c8c[_0x4c8109(0x1ee)]!==_0x4c8109(0x2d9)){_0x11f172=_0x3d5b7a,this[_0x4c8109(0x16d)][_0x4c8109(0x340)](_0x4c8109(0x1f6)+_0x9c8c8c[_0x4c8109(0x18d)](_0x18e78a,0x1)+'/'+_0x9c8c8c[_0x4c8109(0x18d)](_0x29e08c,0x1)+'):',_0x3d5b7a);if(this[_0x4c8109(0x31d)](_0x3d5b7a)){if(_0x9c8c8c[_0x4c8109(0x2c9)](_0x4c8109(0x250),_0x9c8c8c[_0x4c8109(0x194)])){await this['_handlePromptTooLongError'](_0x25bab3);const _0x3bcbac=this[_0x4c8109(0x1ce)](_0x4c47ad);this[_0x4c8109(0x16d)]['info'](_0x4c8109(0x19e)+_0x52722b+_0x4c8109(0x171)),await this['_delay'](_0x52722b),await this[_0x4c8109(0x2c5)][_0x4c8109(0x262)](_0x3bcbac);continue;}else{const _0x22fa26=this[_0x4c8109(0x220)]['getPricingInfo']();_0x588152[_0x4c8109(0x22f)]={'available':_0x9c8c8c[_0x4c8109(0x217)](_0x22fa26['totalModels'],0x0),'modelsWithPricing':_0x22fa26[_0x4c8109(0x2be)],'lastUpdate':_0x22fa26['lastUpdate'],'source':_0x22fa26[_0x4c8109(0x26d)]};}}if(this[_0x4c8109(0x1ff)](_0x3d5b7a)){await this[_0x4c8109(0x207)](_0x25bab3);const _0x1888e8=this[_0x4c8109(0x1ce)](_0x4c47ad);this['logger']['info'](_0x4c8109(0x19e)+_0x52722b+_0x4c8109(0x233)),await this[_0x4c8109(0x2dd)](_0x52722b),await this[_0x4c8109(0x2c5)]['waitIfNeeded'](_0x1888e8);continue;}if(_0x4c47ad!==_0x9c8c8c[_0x4c8109(0x21d)]&&this[_0x4c8109(0x329)](_0x3d5b7a)){if(_0x9c8c8c[_0x4c8109(0x1d9)]('CuRlH',_0x4c8109(0x226))){const _0x748850=this[_0x4c8109(0x1ce)](_0x4c47ad);_0x2ff1d2++;if(_0x9c8c8c[_0x4c8109(0x28a)](_0x2ff1d2,_0x277a52)){if(_0x9c8c8c[_0x4c8109(0x14a)](_0x9c8c8c['nsdku'],'JyXTU'))_0xb4173[_0x41800a]={'status':_0x30be97,'available':_0x9c8c8c[_0x4c8109(0x24d)](_0x142b72,_0x4a32de['SERVICE_STATUS'][_0x4c8109(0x1d0)]),'isPrimary':_0x9c8c8c[_0x4c8109(0x2c9)](_0x56b9c4,this[_0x4c8109(0x317)])};else throw new Error('Rate\x20limit\x20retry\x20threshold\x20exceeded\x20('+_0x277a52+_0x4c8109(0x1a1)+_0x3d5b7a[_0x4c8109(0x258)]);}this[_0x4c8109(0x2c5)][_0x4c8109(0x2f1)](_0x748850);if(_0x9c8c8c['dIYIa'](_0x18e78a,_0x29e08c)){if(_0x9c8c8c[_0x4c8109(0x24d)](_0x9c8c8c[_0x4c8109(0x159)],_0x4c8109(0x1e8)))throw new _0x3fcab7(_0x9c8c8c[_0x4c8109(0x251)]);else{this[_0x4c8109(0x16d)]['info'](_0x4c8109(0x173)+_0x2ff1d2+'/'+_0x277a52+')'),await this['rateLimitService'][_0x4c8109(0x262)](_0x748850);continue;}}}else return _0x52119c;}if(_0x4c47ad===_0x4c8109(0x1e0)&&this['_isServerError'](_0x3d5b7a)){const _0x44951f=await this[_0x4c8109(0x1f8)](_0x25bab3,_0x3696db,_0x1ca96f);if(_0x44951f){if(_0x9c8c8c['hvaQb'](_0x9c8c8c[_0x4c8109(0x2f5)],_0x9c8c8c[_0x4c8109(0x247)]))throw new _0x2614a7(_0x9c8c8c['bXNTP']);else return _0x44951f;}}if(this[_0x4c8109(0x164)](_0x3d5b7a))break;if(_0x9c8c8c[_0x4c8109(0x19d)](_0x18e78a,_0x29e08c))break;this[_0x4c8109(0x2aa)][_0x4c8109(0x1bf)](_0x4c47ad,LLM_CONSTANTS['SERVICE_STATUS'][_0x4c8109(0x1a0)]);const _0x172e22=this[_0x4c8109(0x179)](_0x18e78a);await this[_0x4c8109(0x2dd)](_0x172e22),_0x18e78a++;}else{const _0x354de5=[_0x9c8c8c['WmCbP'],_0x9c8c8c['kbSnC'],_0x4c8109(0x315),_0x9c8c8c[_0x4c8109(0x1b5)],_0x9c8c8c[_0x4c8109(0x274)],_0x9c8c8c[_0x4c8109(0x348)]],_0x547654=_0x5e21c9['message']?.[_0x4c8109(0x275)]()||'';return _0x354de5[_0x4c8109(0x2d2)](_0x3998ec=>_0x547654[_0x4c8109(0x244)](_0x3998ec));}}}throw new Error('All\x20retry\x20attempts\x20failed:\x20'+(_0x11f172?.[_0x4c8109(0x258)]||_0x4c8109(0x1f1)));}async[a0_0x3952ca(0x1f8)](_0x30a6f2,_0x34324,_0x332fe0){const _0x2ae788=a0_0x3952ca,_0x471c1e={};_0x471c1e[_0x2ae788(0x1c7)]=_0x2ae788(0x255);const _0x446add=_0x471c1e,_0x4bd8cf=this[_0x2ae788(0x24c)](_0x2ae788(0x1e0));if(!_0x4bd8cf)return null;try{this[_0x2ae788(0x16d)][_0x2ae788(0x2ae)](_0x2ae788(0x2bf)+_0x4bd8cf);const _0x348d3e=this[_0x2ae788(0x2c4)][_0x2ae788(0x169)](_0x4bd8cf);return await _0x348d3e[_0x2ae788(0x188)](_0x30a6f2,_0x332fe0[_0x2ae788(0x1aa)]||_0x446add[_0x2ae788(0x1c7)]),this[_0x2ae788(0x265)]['set'](_0x30a6f2,_0x4bd8cf),await _0x348d3e[_0x2ae788(0x29a)](_0x30a6f2,_0x34324,_0x332fe0);}catch(_0x5259bb){return this[_0x2ae788(0x16d)][_0x2ae788(0x340)](_0x2ae788(0x349)+_0x5259bb[_0x2ae788(0x258)]),null;}}async[a0_0x3952ca(0x218)](_0x415102,_0x5cd28b,_0x5d2feb,_0x405a97){const _0x40890f=a0_0x3952ca,_0x48f2be={};_0x48f2be[_0x40890f(0x2b9)]=function(_0x24299b,_0x282b62){return _0x24299b!==_0x282b62;},_0x48f2be[_0x40890f(0x264)]=function(_0x57f786,_0x4702dc){return _0x57f786!==_0x4702dc;},_0x48f2be[_0x40890f(0x252)]=_0x40890f(0x1e0),_0x48f2be[_0x40890f(0x236)]=function(_0x42c7f0,_0x5b49aa){return _0x42c7f0===_0x5b49aa;},_0x48f2be[_0x40890f(0x22d)]=_0x40890f(0x1c9),_0x48f2be[_0x40890f(0x2ec)]=_0x40890f(0x227);const _0x30a40d=_0x48f2be,_0x416e54=Date[_0x40890f(0x2db)]()-_0x5d2feb;this[_0x40890f(0x256)]['totalLatency']+=_0x416e54,this[_0x40890f(0x256)]['averageLatency']=this[_0x40890f(0x256)]['totalLatency']/this['performanceMetrics'][_0x40890f(0x1fa)];if(_0x405a97){if(_0x30a40d[_0x40890f(0x2b9)](_0x40890f(0x212),_0x40890f(0x212)))throw _0xa3d27b;else this[_0x40890f(0x256)][_0x40890f(0x23f)]++;}if(this['budgetService']&&_0x30a40d['osBCb'](_0x5cd28b,_0x30a40d[_0x40890f(0x252)])){if(_0x30a40d[_0x40890f(0x236)](_0x30a40d['rpfoN'],_0x40890f(0x237)))return null;else try{if(_0x30a40d[_0x40890f(0x236)](_0x40890f(0x337),_0x30a40d[_0x40890f(0x2ec)])){this['performanceMetrics']['failedRequests']++,this[_0x40890f(0x16d)][_0x40890f(0x340)](_0x40890f(0x2c7)+_0x3828ff+':',_0x37746a);throw _0x2112a4;}else{const _0x513262=_0x415102['getLastInputTokenCount'](),_0x396164=_0x415102[_0x40890f(0x2e2)](),_0x1f31e9=this['_getDefaultModelForService'](_0x5cd28b);await this[_0x40890f(0x220)][_0x40890f(0x228)](_0x5cd28b,_0x1f31e9,_0x513262,_0x396164);}}catch(_0x412704){this[_0x40890f(0x16d)][_0x40890f(0x201)](_0x40890f(0x1c6),_0x412704);}}}async[a0_0x3952ca(0x300)](_0x1bdd3c){const _0x268ec6=a0_0x3952ca,_0x404751={};_0x404751[_0x268ec6(0x263)]=_0x268ec6(0x16f),_0x404751[_0x268ec6(0x1fb)]=function(_0x150c68,_0x372df3){return _0x150c68!==_0x372df3;},_0x404751['dfLIn']=_0x268ec6(0x1c4),_0x404751[_0x268ec6(0x1b4)]=_0x268ec6(0x20e),_0x404751[_0x268ec6(0x271)]=_0x268ec6(0x269);const _0x2e54af=_0x404751;this[_0x268ec6(0x16d)][_0x268ec6(0x201)](_0x2e54af[_0x268ec6(0x263)]);if(this['onPromptTooLong'])try{if(_0x2e54af[_0x268ec6(0x1fb)](_0x2e54af[_0x268ec6(0x25b)],_0x2e54af[_0x268ec6(0x25b)]))return this[_0x268ec6(0x16d)][_0x268ec6(0x340)](_0x268ec6(0x349)+_0x56ea1e['message']),null;else await this[_0x268ec6(0x1dd)](_0x1bdd3c),this[_0x268ec6(0x16d)]['info'](_0x268ec6(0x2e8));}catch(_0x39ecee){this[_0x268ec6(0x16d)]['error'](_0x2e54af[_0x268ec6(0x1b4)],_0x39ecee);throw _0x39ecee;}else throw new Error(_0x2e54af['jIOvs']);}async[a0_0x3952ca(0x17e)](_0x355bfc,_0x3f5fe9){const _0x138a11=a0_0x3952ca,_0x1af627={};_0x1af627['cfeUw']=_0x138a11(0x1dc),_0x1af627[_0x138a11(0x249)]=_0x138a11(0x335),_0x1af627['Ukvjb']=function(_0x536bcd,_0xcfd656){return _0x536bcd===_0xcfd656;},_0x1af627['vjOeF']='SaQXx';const _0x50e027=_0x1af627;this[_0x138a11(0x16d)][_0x138a11(0x2ae)]('Updating\x20conversation:\x20'+_0x355bfc);const _0x75ebf3=this[_0x138a11(0x265)][_0x138a11(0x169)](_0x355bfc);if(!_0x75ebf3){if(_0x50e027[_0x138a11(0x249)]!==_0x138a11(0x335)){const _0x32482a=_0x42234e['constructor'][_0x138a11(0x31f)][_0x138a11(0x240)](_0x3c5706),_0x5c8839=_0x5deb8a[_0x61ae0f],_0x444fc0=_0x1f3476[_0x5c8839]||_0x32482a;_0x32482a['__proto__']=_0x221080['bind'](_0x4452f5),_0x32482a[_0x138a11(0x168)]=_0x444fc0[_0x138a11(0x168)][_0x138a11(0x240)](_0x444fc0),_0x19e04a[_0x5c8839]=_0x32482a;}else throw new Error(_0x138a11(0x314)+_0x355bfc+'\x20is\x20not\x20registered\x20with\x20any\x20service');}const _0x72e65c=this[_0x138a11(0x2c4)]['get'](_0x75ebf3);if(!_0x72e65c)throw new Error(_0x138a11(0x2b4)+_0x75ebf3+_0x138a11(0x344)+_0x355bfc);try{await _0x72e65c[_0x138a11(0x17e)](_0x355bfc,_0x3f5fe9);}catch(_0x237661){if(_0x50e027['Ukvjb'](_0x50e027['vjOeF'],_0x50e027[_0x138a11(0x28e)])){this[_0x138a11(0x16d)][_0x138a11(0x340)](_0x138a11(0x1b9)+_0x355bfc+':',_0x237661);throw _0x237661;}else this[_0x138a11(0x16d)][_0x138a11(0x340)](_0x50e027[_0x138a11(0x345)],_0x5159fb);}}async[a0_0x3952ca(0x22a)](_0x194436,_0x7878e){const _0x1aa123=a0_0x3952ca,_0x50674c={};_0x50674c[_0x1aa123(0x21e)]=_0x1aa123(0x1dc),_0x50674c[_0x1aa123(0x31e)]=function(_0x36404b,_0x59d00f){return _0x36404b===_0x59d00f;},_0x50674c[_0x1aa123(0x1c8)]=_0x1aa123(0x15d),_0x50674c['eCBBs']=function(_0x538585,_0x5d2f0c){return _0x538585===_0x5d2f0c;},_0x50674c[_0x1aa123(0x310)]=_0x1aa123(0x175),_0x50674c[_0x1aa123(0x178)]=_0x1aa123(0x1e0);const _0x26dbb1=_0x50674c;this[_0x1aa123(0x16d)][_0x1aa123(0x2ae)](_0x1aa123(0x174)+_0x194436);const _0x11d96a=this[_0x1aa123(0x265)]['get'](_0x194436);if(!_0x11d96a){if(_0x26dbb1[_0x1aa123(0x31e)](_0x26dbb1[_0x1aa123(0x1c8)],_0x1aa123(0x15d)))throw new Error('Cannot\x20get\x20summary:\x20conversation\x20'+_0x194436+_0x1aa123(0x2fd));else _0x2c08ca=_0x46eb6d;}const _0x2258fb=this[_0x1aa123(0x2c4)][_0x1aa123(0x169)](_0x11d96a);if(!_0x2258fb)throw new Error(_0x1aa123(0x1e1)+_0x11d96a+_0x1aa123(0x176));this[_0x1aa123(0x16d)]['info'](_0x1aa123(0x2cf)+_0x11d96a);try{if(_0x26dbb1[_0x1aa123(0x15e)]('YXlHA',_0x26dbb1['KjkvA'])){const _0x355adc={};_0x355adc[_0x1aa123(0x191)]=_0x26dbb1[_0x1aa123(0x21e)];const _0x96cfb1=_0x355adc;_0x5f364b[_0x1aa123(0x1a2)](this['budgetService'][_0x1aa123(0x235)]()['catch'](_0xcea6ad=>{const _0x16d858=_0x1aa123;this[_0x16d858(0x16d)][_0x16d858(0x340)](_0x96cfb1[_0x16d858(0x191)],_0xcea6ad);}));}else{const _0x3f2546=await _0x2258fb[_0x1aa123(0x22a)](_0x7878e,_0x194436);if(this[_0x1aa123(0x220)]&&_0x11d96a!==_0x26dbb1['gruyr']){const _0x33571e=this[_0x1aa123(0x260)](_0x11d96a);await this[_0x1aa123(0x220)][_0x1aa123(0x228)](_0x11d96a,_0x33571e,_0x2258fb['getLastInputTokenCount'](),_0x2258fb[_0x1aa123(0x2e2)]());}return _0x3f2546;}}catch(_0x320753){this[_0x1aa123(0x16d)][_0x1aa123(0x340)](_0x1aa123(0x26c)+_0x11d96a+':',_0x320753);throw _0x320753;}}async[a0_0x3952ca(0x160)](_0x1613f7,_0xef2cc2,_0x3cd3ed={}){const _0x2c9aa1=a0_0x3952ca,_0x2eb69e={};_0x2eb69e[_0x2c9aa1(0x1ef)]='Failed\x20to\x20initialize\x20LLM\x20services\x20in\x20constructor:',_0x2eb69e[_0x2c9aa1(0x1eb)]='No\x20suitable\x20LLM\x20service\x20available\x20-\x20Debug\x20info:',_0x2eb69e[_0x2c9aa1(0x286)]='LLM\x20service\x20initialized',_0x2eb69e['XTnuc']=function(_0x385025,_0x494145){return _0x385025!==_0x494145;},_0x2eb69e[_0x2c9aa1(0x22c)]=function(_0x4a9dbc,_0x134d80){return _0x4a9dbc===_0x134d80;},_0x2eb69e[_0x2c9aa1(0x1cb)]=function(_0xd2cac0,_0x4bab3c){return _0xd2cac0!==_0x4bab3c;},_0x2eb69e[_0x2c9aa1(0x2e5)]='anthropic',_0x2eb69e[_0x2c9aa1(0x19c)]=_0x2c9aa1(0x25c),_0x2eb69e[_0x2c9aa1(0x1db)]=_0x2c9aa1(0x1e0),_0x2eb69e[_0x2c9aa1(0x29c)]=function(_0xd2e3fa,_0x3d96cf){return _0xd2e3fa===_0x3d96cf;},_0x2eb69e['gmQTb']='mlOMc',_0x2eb69e['tjwCS']=_0x2c9aa1(0x28c),_0x2eb69e['kgmWA']=function(_0x369c6e,_0x7c6160){return _0x369c6e<=_0x7c6160;},_0x2eb69e[_0x2c9aa1(0x187)]=function(_0x4a0e25,_0x17898a){return _0x4a0e25+_0x17898a;},_0x2eb69e[_0x2c9aa1(0x157)]=function(_0x27a498,_0x364dc4){return _0x27a498!==_0x364dc4;},_0x2eb69e[_0x2c9aa1(0x17a)]=_0x2c9aa1(0x1da),_0x2eb69e['hkmFS']='vzqqt',_0x2eb69e[_0x2c9aa1(0x2d8)]=function(_0x31fe2a,_0x3e87b6){return _0x31fe2a<_0x3e87b6;},_0x2eb69e[_0x2c9aa1(0x232)]=function(_0x197bf8,_0x4e724e){return _0x197bf8===_0x4e724e;},_0x2eb69e[_0x2c9aa1(0x219)]=_0x2c9aa1(0x21c),_0x2eb69e[_0x2c9aa1(0x17b)]=_0x2c9aa1(0x1d7),_0x2eb69e[_0x2c9aa1(0x2bc)]=function(_0x4ca127,_0x5c275b){return _0x4ca127>=_0x5c275b;},_0x2eb69e[_0x2c9aa1(0x289)]=function(_0x1457a9,_0x4acb08){return _0x1457a9===_0x4acb08;};const _0x45f65e=_0x2eb69e;this[_0x2c9aa1(0x16d)]['info'](_0x45f65e['WocvU']);if(this[_0x2c9aa1(0x1ae)]&&this['serviceInstances'][_0x2c9aa1(0x25e)](_0x45f65e['dfVtd']))try{if(_0x45f65e[_0x2c9aa1(0x29c)]('OagTc',_0x45f65e['gmQTb']))this[_0x2c9aa1(0x16d)][_0x2c9aa1(0x340)](_0x45f65e[_0x2c9aa1(0x1ef)],_0x544272);else{const _0x3073a9=this[_0x2c9aa1(0x2c4)][_0x2c9aa1(0x169)](_0x45f65e['dfVtd']);return await _0x3073a9[_0x2c9aa1(0x160)](_0x1613f7,_0xef2cc2,_0x3cd3ed);}}catch(_0x4db411){this[_0x2c9aa1(0x16d)]['warn'](_0x45f65e[_0x2c9aa1(0x316)],_0x4db411);}const _0x4cb333=this[_0x2c9aa1(0x339)]();if(!_0x4cb333)throw new Error(_0x2c9aa1(0x2f8));const _0x944766=this['serviceInstances'][_0x2c9aa1(0x169)](_0x4cb333),_0x21b049=this[_0x2c9aa1(0x1ce)](_0x4cb333);await this[_0x2c9aa1(0x2c5)][_0x2c9aa1(0x262)](_0x21b049);const _0x544507=this[_0x2c9aa1(0x2ee)][_0x2c9aa1(0x1bc)]?.[_0x2c9aa1(0x2e9)]||LLM_CONSTANTS['DEFAULT_MAX_RETRIES'];let _0x162fa9=0x0,_0x5e4d34=null;while(_0x45f65e['kgmWA'](_0x162fa9,_0x544507)){if(_0x45f65e[_0x2c9aa1(0x196)](_0x2c9aa1(0x25d),_0x2c9aa1(0x25d))){const _0x3ad220={'useServerLLM':this['useServerLLM'],'serviceInstancesCount':this[_0x2c9aa1(0x2c4)]['size'],'serviceInstances':_0x5f1740[_0x2c9aa1(0x2bd)](this[_0x2c9aa1(0x2c4)][_0x2c9aa1(0x199)]()),'serviceStatusCount':this[_0x2c9aa1(0x2aa)][_0x2c9aa1(0x1f2)],'serviceStatus':_0x2e436c[_0x2c9aa1(0x2ca)](this[_0x2c9aa1(0x2aa)][_0x2c9aa1(0x1a4)]()),'isInitialized':this[_0x2c9aa1(0x1ac)]};this[_0x2c9aa1(0x16d)][_0x2c9aa1(0x340)](_0x45f65e[_0x2c9aa1(0x1eb)],_0x3ad220);throw new _0x479a9a(_0x2c9aa1(0x2a3)+_0x180826['stringify'](_0x3ad220));}else try{const _0x22b526=await _0x944766[_0x2c9aa1(0x160)](_0x1613f7,_0xef2cc2,_0x3cd3ed);this[_0x2c9aa1(0x2c5)]['resetRateLimitHits'](_0x21b049);if(this[_0x2c9aa1(0x220)]){const _0x3d4776=this[_0x2c9aa1(0x260)](_0x4cb333);await this['budgetService'][_0x2c9aa1(0x228)](_0x4cb333,_0x3d4776,_0x944766[_0x2c9aa1(0x273)](),_0x944766[_0x2c9aa1(0x2e2)]());}return _0x22b526;}catch(_0x282a08){_0x5e4d34=_0x282a08,this['logger']['error'](_0x2c9aa1(0x216)+_0x45f65e[_0x2c9aa1(0x187)](_0x162fa9,0x1)+'/'+(_0x544507+0x1)+'):',_0x282a08);if(this[_0x2c9aa1(0x329)](_0x282a08)){if(_0x45f65e['yScaX'](_0x45f65e[_0x2c9aa1(0x17a)],_0x45f65e[_0x2c9aa1(0x1bd)])){this['rateLimitService']['handleRateLimitHit'](_0x21b049);if(_0x45f65e[_0x2c9aa1(0x2d8)](_0x162fa9,_0x544507)){if(_0x45f65e[_0x2c9aa1(0x232)](_0x45f65e[_0x2c9aa1(0x219)],_0x45f65e[_0x2c9aa1(0x17b)])){const _0x43cc05=_0x2c9aa1(0x342)[_0x2c9aa1(0x198)]('|');let _0x219bc3=0x0;while(!![]){switch(_0x43cc05[_0x219bc3++]){case'0':this[_0x2c9aa1(0x2ee)]=_0x307427;continue;case'1':this[_0x2c9aa1(0x317)]=null;continue;case'2':const _0x4bc37c={};_0x4bc37c[_0x2c9aa1(0x1fa)]=0x0,_0x4bc37c[_0x2c9aa1(0x23f)]=0x0,_0x4bc37c[_0x2c9aa1(0x197)]=0x0,_0x4bc37c[_0x2c9aa1(0x200)]=0x0,_0x4bc37c[_0x2c9aa1(0x2ed)]=0x0,this[_0x2c9aa1(0x256)]=_0x4bc37c;continue;case'3':this[_0x2c9aa1(0x2e6)]()['catch'](_0x460331=>{const _0x23e03f=_0x2c9aa1;this['logger'][_0x23e03f(0x340)](_0x45f65e['TtmlS'],_0x460331);});continue;case'4':this[_0x2c9aa1(0x16d)][_0x2c9aa1(0x2ae)](_0x45f65e['BJbMy'],{'useServerLLM':this['useServerLLM'],'strategy':_0x58b19a[_0x2c9aa1(0x306)]||_0x74fb98[_0x2c9aa1(0x23e)][_0x2c9aa1(0x238)]});continue;case'5':this[_0x2c9aa1(0x2c4)]=new _0x3a1c00();continue;case'6':this['serviceStatus']=new _0x3adba7();continue;case'7':this[_0x2c9aa1(0x16d)]=_0x38e9e7;continue;case'8':this[_0x2c9aa1(0x253)]=null;continue;case'9':this[_0x2c9aa1(0x1ac)]=![];continue;case'10':this[_0x2c9aa1(0x1dd)]=null;continue;case'11':this[_0x2c9aa1(0x220)]=null;continue;case'12':this[_0x2c9aa1(0x1ae)]=_0x45f65e[_0x2c9aa1(0x196)](_0x15f9ff[_0x2c9aa1(0x1ae)],![]);continue;case'13':this[_0x2c9aa1(0x2c5)]=new _0x315a28(_0x4e59fe);continue;case'14':this['conversationServices']=new _0x5946e9();continue;}break;}}else{await this[_0x2c9aa1(0x2c5)][_0x2c9aa1(0x262)](_0x21b049);continue;}}}else{const _0x2cc300=_0x17f454?function(){const _0x3c14ba=_0x2c9aa1;if(_0x30f1ae){const _0x4d8172=_0x146c75[_0x3c14ba(0x170)](_0x38d0ba,arguments);return _0x4e3ff6=null,_0x4d8172;}}:function(){};return _0x1409b9=![],_0x2cc300;}}if(this['_isNonRetryableError'](_0x282a08))throw _0x282a08;if(_0x45f65e['ZcFHq'](_0x162fa9,_0x544507)){if(_0x45f65e['CWZeA']('wngQX','wngQX'))break;else{const _0x4cfa5e=_0x344922[_0x2c9aa1(0x2bd)](this[_0x2c9aa1(0x2c4)][_0x2c9aa1(0x199)]())[_0x2c9aa1(0x1e2)](_0x136fe7=>_0x136fe7!==_0x52d745&&this['serviceStatus']['get'](_0x136fe7)!==_0x27ae89[_0x2c9aa1(0x1f3)][_0x2c9aa1(0x1d0)]);if(_0x45f65e[_0x2c9aa1(0x22c)](_0x4cfa5e[_0x2c9aa1(0x22b)],0x0))return null;if(_0x45f65e['ZPGiN'](_0x96835b,_0x2c9aa1(0x230))&&_0x4cfa5e[_0x2c9aa1(0x244)](_0x45f65e[_0x2c9aa1(0x2e5)]))return _0x45f65e[_0x2c9aa1(0x2e5)];return _0x4cfa5e[0x0];}}const _0x3b3227=this[_0x2c9aa1(0x179)](_0x162fa9);await this['_delay'](_0x3b3227),_0x162fa9++;}}throw new Error('All\x20vision\x20retry\x20attempts\x20failed:\x20'+(_0x5e4d34?.[_0x2c9aa1(0x258)]||'Unknown\x20error'));}async[a0_0x3952ca(0x30e)](_0x51088d){const _0x2f7e86=a0_0x3952ca,_0x40461f={};_0x40461f[_0x2f7e86(0x2b1)]='rqQWD';const _0x3abb83=_0x40461f,_0x4fa2f1=this[_0x2f7e86(0x265)][_0x2f7e86(0x169)](_0x51088d);if(!_0x4fa2f1)throw new Error('Conversation\x20'+_0x51088d+_0x2f7e86(0x2e7));const _0x565b21=this[_0x2f7e86(0x2c4)]['get'](_0x4fa2f1);if(!_0x565b21)throw new Error(_0x2f7e86(0x2b4)+_0x4fa2f1+_0x2f7e86(0x344)+_0x51088d);try{return await _0x565b21[_0x2f7e86(0x30e)](_0x51088d);}catch(_0x4be1df){if(_0x3abb83[_0x2f7e86(0x2b1)]!==_0x3abb83[_0x2f7e86(0x2b1)])throw new _0x1096af(_0x2f7e86(0x314)+_0x485d3f+_0x2f7e86(0x2e7));else return this['logger'][_0x2f7e86(0x340)](_0x2f7e86(0x1c0)+_0x51088d+':',_0x4be1df),0x0;}}[a0_0x3952ca(0x2ff)](_0x2fa412,_0x401017,_0x263bc5){const _0x492fb4=a0_0x3952ca;if(!this['budgetService'])return null;return this[_0x492fb4(0x220)][_0x492fb4(0x2ff)](_0x2fa412,_0x401017,_0x263bc5);}[a0_0x3952ca(0x33b)](_0x4bfb80,_0x31a7a2,_0x1b40de){const _0x2ecc37=a0_0x3952ca,_0x8b34a4={};_0x8b34a4['HzODQ']=_0x2ecc37(0x1e0),_0x8b34a4['WZZmK']=function(_0x464239,_0x30c9a4){return _0x464239===_0x30c9a4;},_0x8b34a4[_0x2ecc37(0x2f6)]=_0x2ecc37(0x319);const _0x91e720=_0x8b34a4;if(!this['budgetService']){if(_0x91e720[_0x2ecc37(0x2c1)](_0x91e720[_0x2ecc37(0x2f6)],_0x91e720[_0x2ecc37(0x2f6)]))return null;else for(const _0x15657e of _0x26bfad){if(_0x15657e===_0x91e720[_0x2ecc37(0x1fc)])return _0x15657e;const _0x367888=_0xdf09f5[_0x15657e]||[];if(_0x367888['includes'](_0x57afed))return _0x15657e;}}return this[_0x2ecc37(0x220)][_0x2ecc37(0x33b)](_0x4bfb80,_0x31a7a2,_0x1b40de);}async[a0_0x3952ca(0x283)](){const _0x13178c=a0_0x3952ca;if(!this[_0x13178c(0x220)])return null;return await this[_0x13178c(0x220)][_0x13178c(0x283)]();}async[a0_0x3952ca(0x24e)](_0x4d71b7){const _0x43b3cc=a0_0x3952ca,_0x4b1569={};_0x4b1569[_0x43b3cc(0x27d)]=_0x43b3cc(0x1cd);const _0x34d1c4=_0x4b1569;if(!this['budgetService'])throw new Error(_0x34d1c4[_0x43b3cc(0x27d)]);await this[_0x43b3cc(0x220)][_0x43b3cc(0x24e)](_0x4d71b7);}async[a0_0x3952ca(0x225)](){const _0x2e0a70=a0_0x3952ca;if(!this['budgetService'])return![];return await this[_0x2e0a70(0x220)][_0x2e0a70(0x1b6)]();}['getServiceStatus'](){const _0x3bc068=a0_0x3952ca,_0x28f90d={};_0x28f90d[_0x3bc068(0x208)]=function(_0x137670,_0x52fd25){return _0x137670!==_0x52fd25;};const _0x1baad7=_0x28f90d,_0x140421={};for(const [_0x3f96a6,_0xfc2a71]of this['serviceStatus'][_0x3bc068(0x1a4)]()){_0x140421[_0x3f96a6]={'status':_0xfc2a71,'available':_0x1baad7[_0x3bc068(0x208)](_0xfc2a71,LLM_CONSTANTS['SERVICE_STATUS'][_0x3bc068(0x1d0)]),'isPrimary':_0x3f96a6===this['primaryService']};}return _0x140421;}[a0_0x3952ca(0x297)](){const _0x56ff66=a0_0x3952ca,_0x4d2d65={};_0x4d2d65[_0x56ff66(0x307)]=function(_0x4cef2c,_0x5f297a){return _0x4cef2c/_0x5f297a;};const _0x3783fb=_0x4d2d65;return{...this[_0x56ff66(0x256)],'successRate':this[_0x56ff66(0x256)][_0x56ff66(0x1fa)]>0x0?_0x3783fb[_0x56ff66(0x307)](this[_0x56ff66(0x256)]['successfulRequests'],this[_0x56ff66(0x256)][_0x56ff66(0x1fa)])*0x64:0x0};}[a0_0x3952ca(0x280)](){const _0x8f01ac=a0_0x3952ca;return this[_0x8f01ac(0x2c5)]['getAllStatus']();}['registerPromptTooLongHandler'](_0x3cbb8f){const _0x1f4dd4=a0_0x3952ca,_0x40d771={};_0x40d771[_0x1f4dd4(0x31a)]=_0x1f4dd4(0x257);const _0x5003c7=_0x40d771;this[_0x1f4dd4(0x1dd)]=_0x3cbb8f,this[_0x1f4dd4(0x16d)]['info'](_0x5003c7[_0x1f4dd4(0x31a)]);}async[a0_0x3952ca(0x1c2)](){const _0x8982f4=a0_0x3952ca,_0x1ed08d={};_0x1ed08d[_0x8982f4(0x24a)]=function(_0x3bf433,_0x4d24d5){return _0x3bf433!==_0x4d24d5;},_0x1ed08d[_0x8982f4(0x308)]=function(_0x4df4f3,_0x9cca97){return _0x4df4f3===_0x9cca97;},_0x1ed08d[_0x8982f4(0x19b)]=_0x8982f4(0x2b6),_0x1ed08d[_0x8982f4(0x192)]='error',_0x1ed08d[_0x8982f4(0x149)]=_0x8982f4(0x276),_0x1ed08d['tSCxI']=_0x8982f4(0x2ce),_0x1ed08d['QWngH']=function(_0x7a5aa8,_0x5b401a){return _0x7a5aa8>_0x5b401a;};const _0x265b9d=_0x1ed08d,_0x2135ef={};_0x2135ef[_0x8982f4(0x2ab)]=![],_0x2135ef[_0x8982f4(0x20c)]=0x0,_0x2135ef[_0x8982f4(0x152)]=null;const _0x451372={'overall':_0x8982f4(0x276),'services':{},'budget':null,'performance':this[_0x8982f4(0x297)](),'pricing':_0x2135ef};for(const [_0x35372a,_0x4171a2]of this[_0x8982f4(0x2aa)][_0x8982f4(0x1a4)]()){_0x451372['services'][_0x35372a]={'status':_0x4171a2,'available':_0x265b9d['qsAnr'](_0x4171a2,LLM_CONSTANTS[_0x8982f4(0x1f3)][_0x8982f4(0x1d0)])},_0x265b9d[_0x8982f4(0x308)](_0x4171a2,LLM_CONSTANTS[_0x8982f4(0x1f3)][_0x8982f4(0x1d0)])&&(_0x451372[_0x8982f4(0x295)]=_0x8982f4(0x2b6));}if(this['serverLLMService'])try{const _0x4d0e2d=await this[_0x8982f4(0x253)][_0x8982f4(0x2e4)]();_0x451372[_0x8982f4(0x25a)][_0x8982f4(0x1e0)][_0x8982f4(0x2d7)]=_0x4d0e2d,_0x4d0e2d[_0x8982f4(0x2de)]!=='healthy'&&(_0x451372[_0x8982f4(0x295)]=_0x265b9d[_0x8982f4(0x19b)]);}catch(_0x3ef216){const _0x4e9bb8={};_0x4e9bb8['status']=_0x265b9d['DEJrA'],_0x4e9bb8[_0x8982f4(0x340)]=_0x3ef216[_0x8982f4(0x258)],_0x451372[_0x8982f4(0x25a)][_0x8982f4(0x1e0)][_0x8982f4(0x2d7)]=_0x4e9bb8,_0x451372[_0x8982f4(0x295)]=_0x8982f4(0x2b6);}if(this[_0x8982f4(0x220)])try{_0x451372[_0x8982f4(0x17d)]=await this[_0x8982f4(0x220)]['healthCheck'](),_0x265b9d[_0x8982f4(0x24a)](_0x451372[_0x8982f4(0x17d)][_0x8982f4(0x2de)],_0x265b9d[_0x8982f4(0x149)])&&(_0x451372[_0x8982f4(0x295)]=_0x265b9d[_0x8982f4(0x19b)]);}catch(_0xa75bfc){if(_0x265b9d[_0x8982f4(0x24a)](_0x8982f4(0x26e),_0x265b9d[_0x8982f4(0x163)])){const _0x3b9276={};_0x3b9276['status']=_0x265b9d[_0x8982f4(0x192)],_0x3b9276[_0x8982f4(0x340)]=_0xa75bfc[_0x8982f4(0x258)],_0x451372['budget']=_0x3b9276,_0x451372['overall']=_0x8982f4(0x2b6);}else return this[_0x8982f4(0x248)](_0x4bd795,_0x244079[_0x8982f4(0x302)]['INTELLIGENCE']);}if(this[_0x8982f4(0x220)]){const _0x187f69=this[_0x8982f4(0x220)][_0x8982f4(0x1e3)]();_0x451372[_0x8982f4(0x22f)]={'available':_0x265b9d[_0x8982f4(0x29e)](_0x187f69['totalModels'],0x0),'modelsWithPricing':_0x187f69[_0x8982f4(0x2be)],'lastUpdate':_0x187f69[_0x8982f4(0x152)],'source':_0x187f69['source']};}return _0x451372;}async[a0_0x3952ca(0x235)](){const _0x17b0a2=a0_0x3952ca,_0xa3aff3={};_0xa3aff3[_0x17b0a2(0x330)]=function(_0x3aaab9,_0x4ccfb7){return _0x3aaab9!==_0x4ccfb7;},_0xa3aff3[_0x17b0a2(0x266)]=_0x17b0a2(0x1dc),_0xa3aff3[_0x17b0a2(0x23d)]=_0x17b0a2(0x154),_0xa3aff3[_0x17b0a2(0x1cc)]=function(_0x358da8,_0x3ea280){return _0x358da8===_0x3ea280;},_0xa3aff3[_0x17b0a2(0x1ec)]=function(_0x2989ee,_0x1385b4){return _0x2989ee===_0x1385b4;},_0xa3aff3[_0x17b0a2(0x309)]=_0x17b0a2(0x259),_0xa3aff3['VpjzC']='IATih',_0xa3aff3[_0x17b0a2(0x186)]='All\x20LLM\x20services\x20shut\x20down';const _0x10e71a=_0xa3aff3;this[_0x17b0a2(0x16d)][_0x17b0a2(0x2ae)](_0x10e71a[_0x17b0a2(0x23d)]);const _0x22dc01=[];for(const [_0x412d5e,_0x44491b]of this[_0x17b0a2(0x2c4)][_0x17b0a2(0x1a4)]()){_0x10e71a['vNTUh'](typeof _0x44491b[_0x17b0a2(0x235)],_0x17b0a2(0x259))&&(this[_0x17b0a2(0x16d)][_0x17b0a2(0x2ae)](_0x17b0a2(0x147)+_0x412d5e),_0x22dc01['push'](_0x44491b[_0x17b0a2(0x235)]()[_0x17b0a2(0x34a)](_0x3c1a39=>{const _0x5eeb0a=_0x17b0a2;this['logger'][_0x5eeb0a(0x340)](_0x5eeb0a(0x185)+_0x412d5e+':',_0x3c1a39);})));}if(this[_0x17b0a2(0x220)]&&_0x10e71a['ZUJCZ'](typeof this['budgetService'][_0x17b0a2(0x235)],_0x10e71a[_0x17b0a2(0x309)])){if(_0x10e71a[_0x17b0a2(0x288)]!==_0x10e71a[_0x17b0a2(0x288)]){this[_0x17b0a2(0x16d)][_0x17b0a2(0x340)]('Failed\x20to\x20get\x20summary\x20using\x20same\x20service\x20'+_0x3cd08f+':',_0x231e68);throw _0x2ef3e7;}else _0x22dc01[_0x17b0a2(0x1a2)](this['budgetService']['shutdown']()[_0x17b0a2(0x34a)](_0x14d40=>{const _0x23bb44=_0x17b0a2;if(_0x10e71a[_0x23bb44(0x330)](_0x23bb44(0x33f),_0x23bb44(0x2b2)))this['logger'][_0x23bb44(0x340)](_0x10e71a[_0x23bb44(0x266)],_0x14d40);else return;}));}await Promise[_0x17b0a2(0x1b7)](_0x22dc01),this[_0x17b0a2(0x2c4)][_0x17b0a2(0x30c)](),this[_0x17b0a2(0x265)][_0x17b0a2(0x30c)](),this[_0x17b0a2(0x2aa)][_0x17b0a2(0x30c)](),this[_0x17b0a2(0x16d)][_0x17b0a2(0x2ae)](_0x10e71a[_0x17b0a2(0x186)]);}[a0_0x3952ca(0x215)](_0x433a18,_0x1010fd=[]){const _0x2fff95=a0_0x3952ca,_0x37892e={};_0x37892e[_0x2fff95(0x224)]='server',_0x37892e[_0x2fff95(0x2c8)]=function(_0x282c22,_0x249041){return _0x282c22===_0x249041;};const _0x4a09c0=_0x37892e;if(this['useServerLLM']&&this[_0x2fff95(0x2c4)][_0x2fff95(0x25e)](_0x4a09c0[_0x2fff95(0x224)])&&!_0x1010fd[_0x2fff95(0x244)](_0x4a09c0[_0x2fff95(0x224)])&&_0x4a09c0[_0x2fff95(0x2c8)](this['serviceStatus'][_0x2fff95(0x169)](_0x4a09c0['pxbah']),LLM_CONSTANTS[_0x2fff95(0x1f3)][_0x2fff95(0x2af)]))return _0x2fff95(0x1e0);return this[_0x2fff95(0x2da)](_0x1010fd);}[a0_0x3952ca(0x2da)](_0x3aabfb=[]){const _0x27b230=a0_0x3952ca,_0x3f688b=Array[_0x27b230(0x2bd)](this[_0x27b230(0x2c4)]['keys']())[_0x27b230(0x1e2)](_0x1a8d1c=>!_0x3aabfb[_0x27b230(0x244)](_0x1a8d1c)&&this[_0x27b230(0x2aa)][_0x27b230(0x169)](_0x1a8d1c)!==LLM_CONSTANTS['SERVICE_STATUS'][_0x27b230(0x1d0)]);if(_0x3f688b[_0x27b230(0x22b)]===0x0)return null;const _0x2877e0=this[_0x27b230(0x2ee)][_0x27b230(0x306)]||LLM_CONSTANTS[_0x27b230(0x23e)][_0x27b230(0x238)];switch(_0x2877e0){case LLM_CONSTANTS[_0x27b230(0x23e)][_0x27b230(0x1c1)]:return this['_selectFastestService'](_0x3f688b);case LLM_CONSTANTS['STRATEGY'][_0x27b230(0x2fe)]:return this[_0x27b230(0x184)](_0x3f688b);case LLM_CONSTANTS[_0x27b230(0x23e)][_0x27b230(0x270)]:return this['_selectLargestContextService'](_0x3f688b);case LLM_CONSTANTS[_0x27b230(0x23e)][_0x27b230(0x238)]:default:return this[_0x27b230(0x325)](_0x3f688b);}}[a0_0x3952ca(0x24c)](_0x309740){const _0x3c070f=a0_0x3952ca,_0x217e62={};_0x217e62[_0x3c070f(0x279)]=_0x3c070f(0x230);const _0x3baac5=_0x217e62,_0x10661c=Array['from'](this[_0x3c070f(0x2c4)][_0x3c070f(0x199)]())['filter'](_0x3cc4ea=>_0x3cc4ea!==_0x309740&&this[_0x3c070f(0x2aa)][_0x3c070f(0x169)](_0x3cc4ea)!==LLM_CONSTANTS[_0x3c070f(0x1f3)][_0x3c070f(0x1d0)]);if(_0x10661c['length']===0x0)return null;if(_0x309740!==_0x3c070f(0x230)&&_0x10661c[_0x3c070f(0x244)](_0x3baac5[_0x3c070f(0x279)]))return _0x3baac5['xoaow'];return _0x10661c[0x0];}[a0_0x3952ca(0x339)](_0x28b67c=[]){const _0x555524=a0_0x3952ca,_0x4b8a05={};_0x4b8a05[_0x555524(0x2e0)]='too\x20long',_0x4b8a05[_0x555524(0x23a)]=_0x555524(0x2c3),_0x4b8a05[_0x555524(0x2cb)]='anthropic',_0x4b8a05['RcwOC']=_0x555524(0x32e),_0x4b8a05['zQGQc']='google',_0x4b8a05['luHyO']=function(_0x4467b2,_0x5907cb){return _0x4467b2===_0x5907cb;},_0x4b8a05[_0x555524(0x162)]=_0x555524(0x284),_0x4b8a05[_0x555524(0x242)]='sGqIv';const _0x4b3025=_0x4b8a05,_0x313143=[_0x4b3025[_0x555524(0x2cb)],_0x4b3025['RcwOC'],_0x4b3025[_0x555524(0x26a)]],_0x595348=_0x313143[_0x555524(0x1e2)](_0x34a735=>!_0x28b67c[_0x555524(0x244)](_0x34a735)&&this[_0x555524(0x2c4)][_0x555524(0x25e)](_0x34a735)&&this[_0x555524(0x2aa)][_0x555524(0x169)](_0x34a735)!==LLM_CONSTANTS[_0x555524(0x1f3)][_0x555524(0x1d0)]);if(_0x4b3025[_0x555524(0x166)](_0x595348[_0x555524(0x22b)],0x0)){if(_0x4b3025[_0x555524(0x162)]!==_0x4b3025[_0x555524(0x242)])return null;else{const _0xf50356=_0x56e993[_0x555524(0x258)]?.[_0x555524(0x275)]()||'',_0x3ae67a=_0x325eb7[_0x555524(0x168)]?.()?.[_0x555524(0x275)]()||'';return(_0xf50356['includes'](_0x4b3025['wEELJ'])||_0x3ae67a[_0x555524(0x244)](_0x4b3025['wEELJ']))&&(_0x5b6c1c['status']===0x190||_0xf50356[_0x555524(0x244)](_0x4b3025[_0x555524(0x23a)])||_0x3ae67a[_0x555524(0x244)](_0x4b3025[_0x555524(0x23a)]));}}const _0x39c414=[_0x555524(0x230),_0x4b3025[_0x555524(0x254)],_0x4b3025['zQGQc']];for(const _0x1cf164 of _0x39c414){if(_0x595348[_0x555524(0x244)](_0x1cf164))return _0x1cf164;}return _0x595348[0x0];}[a0_0x3952ca(0x2d1)](_0x1890db){const _0x4dac82=a0_0x3952ca;return this[_0x4dac82(0x248)](_0x1890db,LLM_CONSTANTS['MODEL_PREFERENCE'][_0x4dac82(0x1c1)]);}[a0_0x3952ca(0x184)](_0x5978a8){const _0x13d2b9=a0_0x3952ca;return this[_0x13d2b9(0x248)](_0x5978a8,LLM_CONSTANTS[_0x13d2b9(0x302)][_0x13d2b9(0x2fe)]);}[a0_0x3952ca(0x2c6)](_0x3a1fb3){const _0xfc7982=a0_0x3952ca,_0x26b485={};_0x26b485[_0xfc7982(0x28d)]='FYuPS',_0x26b485[_0xfc7982(0x2b8)]=function(_0x528e27,_0x37e821){return _0x528e27!==_0x37e821;},_0x26b485[_0xfc7982(0x30d)]=_0xfc7982(0x259),_0x26b485[_0xfc7982(0x1b1)]=function(_0x4d9ab0,_0x4a16cd){return _0x4d9ab0>_0x4a16cd;};const _0x413352=_0x26b485;let _0x378c9a=null,_0x14b0ba=0x0;for(const _0x3b0d98 of _0x3a1fb3){if(_0x413352['UigCO']===_0x413352[_0xfc7982(0x28d)]){const _0x3d6e06=this[_0xfc7982(0x2c4)]['get'](_0x3b0d98);if(!_0x3d6e06||_0x413352['yFXHA'](typeof _0x3d6e06[_0xfc7982(0x29d)],_0x413352[_0xfc7982(0x30d)]))continue;const _0x14c298=_0x3d6e06[_0xfc7982(0x29d)]();_0x413352['QgWns'](_0x14c298,_0x14b0ba)&&(_0x14b0ba=_0x14c298,_0x378c9a=_0x3b0d98);}else throw new _0x361a1e(_0xfc7982(0x1ed)+_0x1e9dd3+'\x20not\x20registered\x20with\x20any\x20service');}return _0x378c9a||_0x3a1fb3[0x0];}[a0_0x3952ca(0x325)](_0x2d5e77){const _0x298c13=a0_0x3952ca;return this['_selectServiceByPreferenceOrder'](_0x2d5e77,LLM_CONSTANTS[_0x298c13(0x302)][_0x298c13(0x238)]);}['_selectServiceByPreferenceOrder'](_0x596ecf,_0x3f568c){const _0x5c3bb4=a0_0x3952ca,_0x55dbf9={};_0x55dbf9[_0x5c3bb4(0x231)]=_0x5c3bb4(0x17c),_0x55dbf9[_0x5c3bb4(0x1e4)]=_0x5c3bb4(0x1a3),_0x55dbf9[_0x5c3bb4(0x334)]='anthropic-haiku',_0x55dbf9[_0x5c3bb4(0x1ba)]=_0x5c3bb4(0x18b),_0x55dbf9[_0x5c3bb4(0x291)]=_0x5c3bb4(0x1a7),_0x55dbf9[_0x5c3bb4(0x167)]=function(_0x1bde5f,_0x405a5f){return _0x1bde5f!==_0x405a5f;},_0x55dbf9[_0x5c3bb4(0x211)]='hpMeL',_0x55dbf9['NCVWC']=function(_0x4ebcb3,_0xc610e1){return _0x4ebcb3===_0xc610e1;},_0x55dbf9['UHYzc']='server';const _0x54afea=_0x55dbf9,_0x5e3a4b={};_0x5e3a4b[_0x5c3bb4(0x230)]=[_0x54afea[_0x5c3bb4(0x231)],_0x54afea['imTmm'],_0x54afea[_0x5c3bb4(0x334)]],_0x5e3a4b[_0x5c3bb4(0x32e)]=['azure-openai-gpt4',_0x54afea[_0x5c3bb4(0x1ba)]],_0x5e3a4b['google']=[_0x54afea[_0x5c3bb4(0x291)]],_0x5e3a4b['server']=[];const _0x4302ee=_0x5e3a4b;for(const _0x26eb0c of _0x3f568c){for(const _0x4b67e5 of _0x596ecf){if(_0x54afea[_0x5c3bb4(0x167)](_0x54afea[_0x5c3bb4(0x211)],_0x54afea[_0x5c3bb4(0x211)]))throw new _0x173a02(_0x5c3bb4(0x2f8));else{if(_0x54afea[_0x5c3bb4(0x165)](_0x4b67e5,_0x54afea[_0x5c3bb4(0x2a1)]))return _0x4b67e5;const _0x496180=_0x4302ee[_0x4b67e5]||[];if(_0x496180[_0x5c3bb4(0x244)](_0x26eb0c))return _0x4b67e5;}}}return _0x596ecf[0x0];}[a0_0x3952ca(0x1ce)](_0x369135){const _0x4ab14c=a0_0x3952ca,_0xcf24f5={};_0xcf24f5['dMWOK']=_0x4ab14c(0x1a3),_0xcf24f5[_0x4ab14c(0x2b3)]=_0x4ab14c(0x1af),_0xcf24f5[_0x4ab14c(0x30f)]=_0x4ab14c(0x1a7);const _0x144500=_0xcf24f5,_0x3cd3ae={};_0x3cd3ae[_0x4ab14c(0x230)]=_0x144500['dMWOK'],_0x3cd3ae[_0x4ab14c(0x32e)]=_0x144500[_0x4ab14c(0x2b3)],_0x3cd3ae[_0x4ab14c(0x32d)]=_0x144500['Wifte'],_0x3cd3ae[_0x4ab14c(0x1e0)]=_0x4ab14c(0x318);const _0x332977=_0x3cd3ae;return _0x332977[_0x369135]||_0x369135;}[a0_0x3952ca(0x260)](_0x5aa75d){const _0x236f72=a0_0x3952ca;return this[_0x236f72(0x1ce)](_0x5aa75d);}[a0_0x3952ca(0x179)](_0x3c4843){const _0x29e9c0=a0_0x3952ca,_0x2521c4={};_0x2521c4[_0x29e9c0(0x24f)]=function(_0x1604f3,_0x49e435){return _0x1604f3*_0x49e435;};const _0x5d2954=_0x2521c4,_0x3f60c8=this[_0x29e9c0(0x2ee)][_0x29e9c0(0x1bc)]?.[_0x29e9c0(0x32c)]||LLM_CONSTANTS['DEFAULT_RETRY_DELAY_MS'],_0x5cddb1=this[_0x29e9c0(0x2ee)]['retries']?.[_0x29e9c0(0x2df)]||LLM_CONSTANTS[_0x29e9c0(0x31c)];return _0x5d2954[_0x29e9c0(0x24f)](_0x3f60c8,Math[_0x29e9c0(0x33e)](_0x5cddb1,_0x3c4843));}[a0_0x3952ca(0x2dd)](_0x34e7ac){return new Promise(_0xc4cd31=>setTimeout(_0xc4cd31,_0x34e7ac));}['_isRateLimitError'](_0x3ac67d){const _0x31358b=a0_0x3952ca,_0x5f5c9f={};_0x5f5c9f[_0x31358b(0x347)]=_0x31358b(0x183),_0x5f5c9f[_0x31358b(0x15a)]=_0x31358b(0x315),_0x5f5c9f[_0x31358b(0x1fe)]=_0x31358b(0x261);const _0x423af3=_0x5f5c9f,_0x18b7f3=['rate\x20limit',_0x423af3['MCVPe'],_0x423af3['vyemW'],_0x423af3[_0x31358b(0x1fe)],'429',_0x31358b(0x2f9)],_0x52e76e=_0x3ac67d[_0x31358b(0x258)]?.['toLowerCase']()||'';return _0x18b7f3[_0x31358b(0x2d2)](_0x24f40a=>_0x52e76e[_0x31358b(0x244)](_0x24f40a));}[a0_0x3952ca(0x164)](_0x4c8f04){const _0x3e200f=a0_0x3952ca,_0x27754a={};_0x27754a['yQsDA']=_0x3e200f(0x2e3),_0x27754a['xECbp']=_0x3e200f(0x229),_0x27754a[_0x3e200f(0x2d3)]=_0x3e200f(0x313),_0x27754a[_0x3e200f(0x2c0)]=_0x3e200f(0x239),_0x27754a[_0x3e200f(0x16e)]=_0x3e200f(0x1e7);const _0x5a6129=_0x27754a,_0x10431d=[_0x5a6129[_0x3e200f(0x180)],_0x5a6129[_0x3e200f(0x18f)],_0x5a6129['wbHEz'],_0x5a6129[_0x3e200f(0x2c0)],_0x3e200f(0x278),_0x5a6129[_0x3e200f(0x16e)]],_0x31fe56=_0x4c8f04[_0x3e200f(0x258)]?.[_0x3e200f(0x275)]()||'';return _0x10431d[_0x3e200f(0x2d2)](_0x2c9cc3=>_0x31fe56[_0x3e200f(0x244)](_0x2c9cc3));}['_isPromptTooLongError'](_0x21bd1c){const _0x7420da=a0_0x3952ca,_0x270a4c={};_0x270a4c['ZtyIz']=_0x7420da(0x15b),_0x270a4c[_0x7420da(0x206)]=_0x7420da(0x2c3);const _0x581efd=_0x270a4c,_0x228a57=_0x21bd1c[_0x7420da(0x258)]?.[_0x7420da(0x275)]()||'',_0x67aa5f=_0x21bd1c[_0x7420da(0x168)]?.()?.[_0x7420da(0x275)]()||'';return(_0x228a57['includes'](_0x7420da(0x15b))||_0x67aa5f[_0x7420da(0x244)](_0x581efd['ZtyIz']))&&(_0x21bd1c['status']===0x190||_0x228a57[_0x7420da(0x244)](_0x7420da(0x2c3))||_0x67aa5f[_0x7420da(0x244)](_0x581efd[_0x7420da(0x206)]));}[a0_0x3952ca(0x1ff)](_0x37e839){const _0x46844c=a0_0x3952ca,_0x3f1c2d={};_0x3f1c2d['YqXyN']=function(_0x55cd2a,_0x11211b){return _0x55cd2a===_0x11211b;},_0x3f1c2d[_0x46844c(0x281)]=_0x46844c(0x1e6);const _0x58be44=_0x3f1c2d,_0x1a1670=_0x37e839[_0x46844c(0x258)]?.[_0x46844c(0x275)]()||'',_0x20189a=_0x37e839['status']||_0x37e839[_0x46844c(0x1de)]?.[_0x46844c(0x2de)];return _0x58be44['YqXyN'](_0x20189a,0x19d)||_0x1a1670[_0x46844c(0x244)](_0x46844c(0x158))||_0x1a1670['includes'](_0x58be44[_0x46844c(0x281)])||_0x1a1670['includes']('request\x20too\x20large');}async[a0_0x3952ca(0x207)](_0x3a4dc4){const _0x25af21=a0_0x3952ca,_0x1db15b={};_0x1db15b[_0x25af21(0x27a)]=function(_0x56171a,_0x39670f){return _0x56171a!==_0x39670f;},_0x1db15b[_0x25af21(0x267)]=_0x25af21(0x1f0),_0x1db15b[_0x25af21(0x16b)]=_0x25af21(0x324);const _0x5c3547=_0x1db15b;this[_0x25af21(0x16d)][_0x25af21(0x201)](_0x25af21(0x32a)+_0x3a4dc4+_0x25af21(0x19f));if(this['onPromptTooLong'])try{if(_0x5c3547[_0x25af21(0x27a)](_0x25af21(0x1f0),_0x5c3547[_0x25af21(0x267)])){if(!this['budgetService'])return null;return this[_0x25af21(0x220)][_0x25af21(0x33b)](_0x535f89,_0x99f793,_0x1359d2);}else await this[_0x25af21(0x1dd)](_0x3a4dc4),this[_0x25af21(0x16d)][_0x25af21(0x2ae)]('\x20Emergency\x20compactization\x20completed\x20for\x20'+_0x3a4dc4);}catch(_0x5c6807){this[_0x25af21(0x16d)][_0x25af21(0x340)](_0x25af21(0x323),_0x5c6807);throw _0x5c6807;}else throw new Error(_0x5c3547[_0x25af21(0x16b)]);}['_isServerError'](_0x1f2bd5){const _0x290aa1=a0_0x3952ca,_0x338d26={};_0x338d26[_0x290aa1(0x282)]=_0x290aa1(0x294),_0x338d26[_0x290aa1(0x346)]=_0x290aa1(0x195),_0x338d26['GQWxH']='502',_0x338d26[_0x290aa1(0x21a)]=_0x290aa1(0x28f),_0x338d26[_0x290aa1(0x1fd)]=_0x290aa1(0x2bb),_0x338d26[_0x290aa1(0x2c2)]='authentication',_0x338d26[_0x290aa1(0x328)]=_0x290aa1(0x1f7),_0x338d26[_0x290aa1(0x221)]=_0x290aa1(0x32b),_0x338d26[_0x290aa1(0x1f5)]=_0x290aa1(0x1a9);const _0x9eac54=_0x338d26,_0x2c1ad9=[_0x9eac54[_0x290aa1(0x282)],_0x290aa1(0x1e9),_0x9eac54[_0x290aa1(0x346)],_0x9eac54['GQWxH'],_0x9eac54[_0x290aa1(0x21a)],_0x9eac54[_0x290aa1(0x1fd)],_0x9eac54[_0x290aa1(0x2c2)],_0x9eac54[_0x290aa1(0x328)],_0x290aa1(0x1b2),_0x9eac54[_0x290aa1(0x221)],_0x9eac54[_0x290aa1(0x1f5)]],_0x371993=_0x1f2bd5[_0x290aa1(0x258)]?.[_0x290aa1(0x275)]()||'';return _0x2c1ad9[_0x290aa1(0x2d2)](_0x1d18bd=>_0x371993[_0x290aa1(0x244)](_0x1d18bd));}}export{LLM_CONSTANTS};