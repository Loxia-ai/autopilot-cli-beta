const a0_0x4b143e=a0_0x4f7a;function a0_0x4f7a(_0x20b8b3,_0x4c89d2){const _0x16b8ec=a0_0x16b8();return a0_0x4f7a=function(_0x4f7a76,_0x79bda6){_0x4f7a76=_0x4f7a76-0x11c;let _0x2ae3cc=_0x16b8ec[_0x4f7a76];if(a0_0x4f7a['GAcPHo']===undefined){var _0x51865f=function(_0x200843){const _0x555f83='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x31dc27='',_0xc320f0='';for(let _0x38d366=0x0,_0x251bc4,_0x46bfb2,_0x51fda5=0x0;_0x46bfb2=_0x200843['charAt'](_0x51fda5++);~_0x46bfb2&&(_0x251bc4=_0x38d366%0x4?_0x251bc4*0x40+_0x46bfb2:_0x46bfb2,_0x38d366++%0x4)?_0x31dc27+=String['fromCharCode'](0xff&_0x251bc4>>(-0x2*_0x38d366&0x6)):0x0){_0x46bfb2=_0x555f83['indexOf'](_0x46bfb2);}for(let _0x31b447=0x0,_0x77256d=_0x31dc27['length'];_0x31b447<_0x77256d;_0x31b447++){_0xc320f0+='%'+('00'+_0x31dc27['charCodeAt'](_0x31b447)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xc320f0);};a0_0x4f7a['iKldUS']=_0x51865f,_0x20b8b3=arguments,a0_0x4f7a['GAcPHo']=!![];}const _0x3cb11b=_0x16b8ec[0x0],_0x1dc15e=_0x4f7a76+_0x3cb11b,_0x1a573a=_0x20b8b3[_0x1dc15e];return!_0x1a573a?(_0x2ae3cc=a0_0x4f7a['iKldUS'](_0x2ae3cc),_0x20b8b3[_0x1dc15e]=_0x2ae3cc):_0x2ae3cc=_0x1a573a,_0x2ae3cc;},a0_0x4f7a(_0x20b8b3,_0x4c89d2);}(function(_0x26213a,_0x4bb8db){const _0x972d92=a0_0x4f7a,_0x28c7d8=_0x26213a();while(!![]){try{const _0x5bf502=-parseInt(_0x972d92(0x19d))/0x1*(-parseInt(_0x972d92(0x1d6))/0x2)+-parseInt(_0x972d92(0x134))/0x3+-parseInt(_0x972d92(0x1b9))/0x4*(-parseInt(_0x972d92(0x18b))/0x5)+parseInt(_0x972d92(0x169))/0x6+-parseInt(_0x972d92(0x1a7))/0x7*(parseInt(_0x972d92(0x1c5))/0x8)+-parseInt(_0x972d92(0x1c0))/0x9*(-parseInt(_0x972d92(0x14f))/0xa)+parseInt(_0x972d92(0x12c))/0xb*(parseInt(_0x972d92(0x189))/0xc);if(_0x5bf502===_0x4bb8db)break;else _0x28c7d8['push'](_0x28c7d8['shift']());}catch(_0x72bdb3){_0x28c7d8['push'](_0x28c7d8['shift']());}}}(a0_0x16b8,0xea6e4));function a0_0x16b8(){const _0x54bcf3=['BM93','sw52ywXPzcbTzxnZywDLignVBNrLBNq','sfruuca','ve9px01btLLFuKvrvuvtvfm','x3zHBgLKyxrLtw9KzwXeyxrH','DgLTzw91Da','u2vYDMvYieXmtsbZzxj2AwnLigLUAxrPywXPEMvK','tg9HzgvKihbYAwnPBMCGzM9Yia','y3vYCMvUy3K','D2fYBG','Dw5PDa','z2v0u3vTBwfYEq','C2vYDMLJzxm','x3zHBgLKyxrLuhjPy2LUz0rHDge','y2vPBa','mZeWnJi1nenNDuftCG','ue9tva','y2f0zwDVCNK','ANnVBG','tK9ux0zpvu5e','x2XVywrbDMfPBgfIBgvnB2rLBhm','l2XSBs9Nzw5LCMf0zs1PBwfNzq','qwjVCNrfCNjVCG','BwvZC2fNzsb0B28GBg9UzW','qvvusevoveLdqvrjt04','ig1VzgvSCW','l2XSBs9JAgf0','z2v0','Aw5PDgLHBgL6zq','C3rYAw5NAwz5','zNjVBunOyxjdB2rL','l2XSBs92AxnPB24','DMfSAwrHDgLVBG','BgvUz3rO','Aw5MBW','uKfurv9msu1jva','yxzHAwXHyMXLtw9KzwXZ','yxP1CMuTDMLZAw9UlwzSDxGTms0X','AgfZ','tMv0D29YAYbYzxf1zxn0igzHAwXLzdOG','C2XPy2u','C2vYDMvYvxjS','z2vUzxjHDgvjBwfNzq','tg9HzgvKia','Aw5WDxq','C3rHBMrHCMq','yw50AhjVCgLJlxnVBM5LDa','mtC2nZzSyK9Msvu','x2XVywrqCMLJAw5Nrgf0yq','mZK1mez0AxzYsa','C3LZDgvTuhjVBxb0','rvrjtuvet1vu','B3v0Chv0','BwvZC2fNzxm','x2DLDerLzMf1BhrnB2rLBa','CxvHBgL0Eq','Bg9HzgvKu2vYDMvYrgf0yq','sw52ywXPzcbXDwfSAxr5ihbHCMfTzxrLCIaOBxvZDcbIzsaIC3rHBMrHCMqIig9YicjOzciP','y29UDMvYC2f0Aw9UCW','sw52ywXPzcbYzxnWB25ZztOGBwLZC2LUzYbVCIbPBNzHBgLKignVBNrLBNq','BwvZC2fNzq','l2HLywX0Aa','y2XLyxi','CMvWBgfJzq','Dg9ju09tDhjPBMC','zxjYB3i','zNmVChjVBwLZzxm','mtHlrKfQAgO','B3v0Chv0x3rVA2vUCW','z2vUzxjHDgvFAw1Hz2u','Dg9tDhjPBMC','C2H1DgrVD24','qKfex1jfuvvfu1q','vxbKyxrPBMCGC2vYDMvYignVBNzLCNnHDgLVBJOG','BgfZDeLUChv0vg9Rzw5dB3vUDa','Dg9Rzw5vC2fNzq','DxjS','mtr3AgDSy0m','x3nHzMvkC29UugfYC2u','DxbKyxrLq29UDMvYC2f0Aw9U','u0vsvKLdrv9vtKfwquLmqujmrq','BgfZDe91Dhb1DfrVA2vUq291BNq','u2H1DhrPBMCGzg93BIbZzxj2zxiGteXnihnLCNzPy2u','B3jPz2LUywXfCNjVCG','CMvXDwvZDcbLBNrPDhKGDg9VigXHCMDL','Aw5WDxrFDg9Rzw5Z','x2nSyxnZAwz5shr0CevYCM9Y','zgvIDwC','C3vWCg9YDhnnB2rLBa','BMfTzq','AxnjBML0AwfSAxPLza','x2LZvMfSAwrdB252zxjZyxrPB25jza','muSGDg9Rzw5Z','DxnLCG','su5urvjoquXFu0vsvKvsx0vsuK9s','mtuZmLbqvxLPsa','Bwf4vg9Rzw5Z','sw5PDgLHBgL6Aw5NihnLCNzLCIbmte0GC2vYDMLJzq','Bwv0Ag9K','l2XSBs9ZDw1Tyxj5','x2vZDgLTyxrLvg9Rzw5Z','x3bYB2nLC3ndAgf0uMvZCg9UC2u','nJqXnJfgs1vOtNK','Bw9KzwXZ','Ag9TzwrPCG','CMvXxW','DhLWzq','nZuZmdi5nKP2D21wrq','Cgf0Aa','sw1Hz2uGzgf0ysb0B28GBgfYz2u','C2L6zq','Bw9KzwW','y29UDMvYC2f0Aw9Ulq','y29Kzq','yxbPs2v5','sw52ywXPzcbZAxPLihbHCMfTzxrLCG','lMXVEgLH','u0vsvKvs','ig1VzgvSCYbMCM9TihnLCNzLCG','x3zHBgLKyxrLu2vUze1LC3nHz2vjBNb1Dhm','u2vYDMvYifvstcbTDxn0ihvZzsbivfrqig9YieHuvfbtihbYB3rVy29S','x3zHBgLKyxrLu2vYDMvYvxjS','zxjYB3juExbL','vvne','nty1mtrNC1jtqMm','sw52ywXPzcbYzxnWB25ZztOGAw52ywXPzcb1C2fNzsbKyxrH','x2XVywrtzxj2zxjeyxrH','u2fUAxrPEMvKignVBNzLCNnHDgLVBIbjrcbMCM9Tici','DMfSDwvZ','zw50CMLLCW','rMfPBgvKihrVigXVywqGyxzHAwXHyMXLig1VzgvSCZO','tw9KzwWGBMfTzsbJyw5UB3qGyMuGzw1WDhK','vu5bvvrit1jjwKve','x3nHBML0AxPLq29UDMvYC2f0Aw9Uswq','yxP1CMuTB3bLBMfPlwDWDdq','ChjVDg9JB2W','qKfex0DbvevxqvK','x3zHBgLKyxrLsw1Hz2vhzw5LCMf0Aw9Usw5WDxrZ','x2vUAgfUy2vfCNjVCG','z2v0qxzHAwXHyMXLtw9KzwXZ','z2v0sw1Hz2vezxnJCMLWDgLVBG','tKvuv09ssW','BgfZDfbYAwnPBMDvCgrHDgu','x2nYzwf0zu5LDhDVCMTfCNjVCG','DxnHz2u','C3vIC3rYAw5N','x2nYzwf0zuH0DhbfCNjVCG','ntm1n3rOy2rbEG','rMfPBgvKihrVigXVywqGChjPy2LUzYbKyxrHoG','ig5VDcbMB3vUza','Aw5JBhvKzxm','ChjPy2LUz0rHDge','DhjPBq','vu5ltK9xtG','Ahr0CdO','mteZotiXn01stKvMrq','x2rLy3j5ChrlzxK','yJy0x2PZB24','uMvNAxn0zxjPBMCGy29UDMvYC2f0Aw9UihDPDgGGC2vYDMvYoIa','C2v0','BNvTyMvY','AgvHBhrOEq','x21HA2vszxf1zxn0','tM8GqvbjigTLEsbHDMfPBgfIBguUifbSzwfZzsbZzxqGEw91CIbbueKGA2v5igzPCNn0lG','ru5pvezpvu5e','u2vYDMLJzsbUB3qGAw5PDgLHBgL6zwqUienHBgWGAw5PDgLHBgL6zsGPigzPCNn0lG','C3rHDhvZvgv4Da','y29UDgvUDcbSzw5NDgGGzxHJzwvKCYbSAw1PDa','vKfmsurbveLptG','C2vYDMvY','zNjVBq','sw52ywXPzcbPBwfNzsbKzxnJCMLWDgLVBIbWCM9TChq','x2DLBMvYyxrLuMvXDwvZDeLK','y29UDgvUDa','C3rHDhvZ','rMfPBgvKihrVigXVywqGChjPy2LUzZOG','Dg9mB3DLCKnHC2u','Dw5RBM93BG','qxv0Ag9YAxPHDgLVBG','yxnZAxn0yw50','CMvXDwvZDeLK','x3vWzgf0zunVBNzLCNnHDgLVBLn0yxrL','mty1mhj3uLfXEq','Bg9Nz2vY','ChjPy2LUzW','z2v0vg9Rzw5vC2fNzq','runptK5sruzvu0ve','B3bLCMf0Aw9U','x2j1AwXKq2HHDfjLCxvLC3rqyxLSB2fK','uMvXDwvZDcb0Aw1LB3v0lIbtzxj2zxiGBwf5igjLig92zxjSB2fKzwqU','x2XVywrbCgLlzxK','C3rYAw5N','AgvHzgvYCW'];a0_0x16b8=function(){return _0x54bcf3;};return a0_0x16b8();}import a0_0x200843 from'node-fetch';const DEFAULT_TIMEOUT_MS=0xea60,DEFAULT_MAX_RETRIES=0x3,DEFAULT_RETRY_DELAY_MS=0x7530,RETRY_DELAY_MULTIPLIER=0x2,API_VERSION='v1',HTTP_STATUS={'OK':0xc8,'CREATED':0xc9,'BAD_REQUEST':0x190,'UNAUTHORIZED':0x191,'FORBIDDEN':0x193,'NOT_FOUND':0x194,'TOO_MANY_REQUESTS':0x1ad,'INTERNAL_SERVER_ERROR':0x1f4,'BAD_GATEWAY':0x1f6,'SERVICE_UNAVAILABLE':0x1f7,'GATEWAY_TIMEOUT':0x1f8},ERROR_TYPES={'AUTHENTICATION':'authentication','NETWORK':'network','TIMEOUT':'timeout','RATE_LIMIT':'rate_limit','SERVER':a0_0x4b143e(0x142),'VALIDATION':a0_0x4b143e(0x17a),'UNKNOWN':a0_0x4b143e(0x14a)},HTTP_STATUS_CODES={'REQUEST_ENTITY_TOO_LARGE':0x19d,'BAD_REQUEST':0x190,'UNAUTHORIZED':0x191,'FORBIDDEN':0x193,'NOT_FOUND':0x194,'TOO_MANY_REQUESTS':0x1ad,'INTERNAL_SERVER_ERROR':0x1f4},REQUEST_SIZE_ERROR_PATTERNS=[a0_0x4b143e(0x1ae),'payload\x20too\x20large','request\x20too\x20large',a0_0x4b143e(0x171),a0_0x4b143e(0x140)];export class ServerLLMService{constructor(_0x555f83,_0x31dc27){const _0x53cd52=a0_0x4b143e;this['config']=_0x555f83,this['logger']=_0x31dc27,this['serverUrl']=this[_0x53cd52(0x1d3)](_0x555f83[_0x53cd52(0x183)]),this[_0x53cd52(0x1cc)]=null,this['isInitialized']=![],this['timeout']=_0x555f83[_0x53cd52(0x166)]?.[_0x53cd52(0x142)]?.['timeout']||DEFAULT_TIMEOUT_MS,this['maxRetries']=_0x555f83[_0x53cd52(0x166)]?.[_0x53cd52(0x142)]?.['retries']||DEFAULT_MAX_RETRIES,this[_0x53cd52(0x14d)]=0x0,this['availableModels']=new Map(),this[_0x53cd52(0x130)]=new Map(),this['lastPricingUpdate']=null,this[_0x53cd52(0x194)]=new Map(),this[_0x53cd52(0x1a4)]=0x0,this['lastOutputTokenCount']=0x0,this['tokenUsage']={'input':0x0,'output':0x0},this[_0x53cd52(0x150)][_0x53cd52(0x17c)](_0x53cd52(0x160),{'serverUrl':this['serverUrl'],'timeout':this[_0x53cd52(0x15f)],'maxRetries':this['maxRetries']});}['_validateServerUrl'](_0xc320f0){const _0x14d862=a0_0x4b143e;if(!_0xc320f0)throw new Error('Server\x20URL\x20is\x20required');try{const _0x38d366=new URL(_0xc320f0);if(![_0x14d862(0x133),'https:']['includes'](_0x38d366[_0x14d862(0x120)]))throw new Error(_0x14d862(0x1d2));return _0x38d366[_0x14d862(0x1a0)]()['replace'](/\/$/,'');}catch(_0x251bc4){throw new Error('Invalid\x20server\x20URL:\x20'+_0x251bc4[_0x14d862(0x196)]);}}['_sanitizeConversationId'](_0x46bfb2){const _0x4e0b0c=a0_0x4b143e;if(!_0x46bfb2||typeof _0x46bfb2!==_0x4e0b0c(0x158))return'conversation-'+Date['now']();let _0x51fda5=_0x46bfb2['replace'](/\s+/g,'-')[_0x4e0b0c(0x199)](/[^a-zA-Z0-9_-]/g,'')[_0x4e0b0c(0x199)](/-+/g,'-')['replace'](/^-+|-+$/g,'')[_0x4e0b0c(0x149)]();if(!_0x51fda5)_0x51fda5=_0x4e0b0c(0x1ca)+Date[_0x4e0b0c(0x15a)]();else _0x51fda5[_0x4e0b0c(0x17b)]>0x32&&(_0x51fda5=_0x51fda5[_0x4e0b0c(0x12a)](0x0,0x28)+'-'+Date['now']()['toString']()[_0x4e0b0c(0x182)](-0x8));return _0x51fda5;}async[a0_0x4b143e(0x176)](){const _0x32debc=a0_0x4b143e;if(this[_0x32debc(0x1b4)])return;try{this['logger'][_0x32debc(0x17c)](_0x32debc(0x1bb)),this['apiKey']=await this[_0x32debc(0x157)]();if(!this[_0x32debc(0x1cc)])throw new Error('No\x20API\x20key\x20found.\x20Please\x20run\x20\x22loxia\x20key\x20--set\x20<your-api-key>\x22\x20first.');await this[_0x32debc(0x1d8)](),this['isInitialized']=!![],this[_0x32debc(0x150)][_0x32debc(0x17c)]('Server\x20LLM\x20service\x20initialized\x20successfully',{'modelsLoaded':this['availableModels'][_0x32debc(0x1c8)],'pricingModels':this['pricingData']['size']});}catch(_0x31b447){this[_0x32debc(0x150)][_0x32debc(0x19b)]('Failed\x20to\x20initialize\x20server\x20LLM\x20service:',_0x31b447);throw _0x31b447;}}async['_loadServerData'](){const _0x370bfc=a0_0x4b143e;await Promise['all']([this[_0x370bfc(0x16e)](),this[_0x370bfc(0x18a)]()]),this[_0x370bfc(0x192)]=!![];}async['_loadApiKey'](){const _0x4cba00=a0_0x4b143e;try{const _0x77256d=await import('os'),_0x27bb16=await import(_0x4cba00(0x1c6)),_0xd6ec1b=await import(_0x4cba00(0x19c)),_0x256a64=_0x27bb16['join'](_0x77256d[_0x4cba00(0x1c2)](),_0x4cba00(0x1ce),'credentials'),_0x492e19=await _0xd6ec1b['readFile'](_0x256a64,'utf8'),_0x55c671=JSON['parse'](_0x492e19);return this[_0x4cba00(0x135)](_0x55c671['apiKey']);}catch(_0x32684a){return this['logger'][_0x4cba00(0x1b1)]('Failed to load API key from credentials file:',_0x32684a),null;}}async['_validateApiKey'](){const _0xda489a=a0_0x4b143e;try{const _0x5e10b6=await this[_0xda489a(0x13b)]('/auth/verify',{'method':_0xda489a(0x16a)});return _0x5e10b6['ok'];}catch(_0x1b6454){return this['logger'][_0xda489a(0x163)]('API\x20key\x20validation\x20failed:',_0x1b6454),![];}}async[a0_0x4b143e(0x16e)](){const _0x2159e1=a0_0x4b143e;try{this['logger']['info']('Loading available models from server');const _0x31a0e4=await this[_0x2159e1(0x13b)]('/llm/models'),_0x3bee7c=await _0x31a0e4['json']();if(!_0x3bee7c['models']||!Array['isArray'](_0x3bee7c[_0x2159e1(0x1c1)]))throw new Error('Invalid models response from server');this['availableModels']['clear']();for(const _0xd34c65 of _0x3bee7c['models']){this['_validateModelData'](_0xd34c65),this['availableModels'][_0x2159e1(0x138)](_0xd34c65[_0x2159e1(0x1b3)],{'name':_0xd34c65['name'],'category':_0xd34c65['category'],'type':_0xd34c65[_0x2159e1(0x1c4)],'maxTokens':_0xd34c65['maxTokens'],'supportsVision':_0xd34c65['supportsVision']||![],'supportsSystem':_0xd34c65['supportsSystem']!==![],'pricing':_0xd34c65['pricing']||{}});}this[_0x2159e1(0x150)]['info'](_0x2159e1(0x185)+this['availableModels']['size']+_0x2159e1(0x1d0));}catch(_0x4bc2bc){this[_0x2159e1(0x150)]['error'](_0x2159e1(0x1dc),_0x4bc2bc);throw new Error('Failed\x20to\x20load\x20models:\x20'+_0x4bc2bc[_0x2159e1(0x196)]);}}[a0_0x4b143e(0x15e)](_0x35243c){const _0x490032=a0_0x4b143e,requiredFields=[_0x490032(0x1b3),_0x490032(0x16b),'type'];for(const _0x70d076 of requiredFields){if(!_0x35243c[_0x70d076])throw new Error('Model\x20missing\x20required\x20field:\x20'+_0x70d076);}if(_0x35243c[_0x490032(0x1c4)]!=='image-generation'){if(typeof _0x35243c[_0x490032(0x1ba)]!==_0x490032(0x139)||_0x35243c['maxTokens']<=0x0)throw new Error('Invalid\x20maxTokens\x20for\x20model\x20'+_0x35243c[_0x490032(0x1b3)]);}}async['_loadPricingData'](){const _0x36547a=a0_0x4b143e;try{this['logger'][_0x36547a(0x17c)]('Loading pricing data from server');const _0x494363=await this[_0x36547a(0x13b)]('/usage/pricing'),_0x28a8e4=await _0x494363['json']();if(!_0x28a8e4[_0x36547a(0x151)])throw new Error('Invalid pricing response from server');this[_0x36547a(0x130)]['clear']();for(const [_0x3ae88a,_0x2edc10]of Object[_0x36547a(0x1db)](_0x28a8e4['pricing'])){this[_0x36547a(0x167)](_0x3ae88a,_0x2edc10),this[_0x36547a(0x130)]['set'](_0x3ae88a,{'input':_0x2edc10['input'],'output':_0x2edc10[_0x36547a(0x18e)],'unit':_0x2edc10[_0x36547a(0x164)]||_0x36547a(0x1b6),'currency':_0x2edc10[_0x36547a(0x162)]||_0x36547a(0x1d5)});}this[_0x36547a(0x127)]=new Date()['toISOString'](),this['logger'][_0x36547a(0x17c)](_0x36547a(0x161)+this['pricingData'][_0x36547a(0x1c8)]+_0x36547a(0x173));}catch(_0x4c840c){this[_0x36547a(0x150)]['error'](_0x36547a(0x12d),_0x4c840c);throw new Error(_0x36547a(0x148)+_0x4c840c['message']);}}['_validatePricingData'](_0x20a544,_0x172be8){const _0x3ee7bd=a0_0x4b143e;if(typeof _0x172be8['input']!==_0x3ee7bd(0x139)||_0x172be8[_0x3ee7bd(0x186)]<0x0)throw new Error('Invalid\x20input\x20pricing\x20for\x20model\x20'+_0x20a544);if(typeof _0x172be8['output']!==_0x3ee7bd(0x139)||_0x172be8['output']<0x0)throw new Error('Invalid\x20output\x20pricing\x20for\x20model\x20'+_0x20a544);}async[a0_0x4b143e(0x124)](){const _0x503ab8=a0_0x4b143e;!this[_0x503ab8(0x192)]&&await this[_0x503ab8(0x1d8)]();let _0xeb08b6=Array[_0x503ab8(0x143)](this['availableModels'][_0x503ab8(0x1da)]());return _0xeb08b6;}async['getPricingData'](){const _0x35e038=a0_0x4b143e;return!this[_0x35e038(0x192)]&&await this[_0x35e038(0x1d8)](),new Map(this['pricingData']);}['getModelPricing'](_0x2ac035){return this['pricingData']['get'](_0x2ac035)||null;}['_isValidConversationId'](_0x30e076){const _0x30bc07=a0_0x4b143e;return typeof _0x30e076===_0x30bc07(0x158)&&_0x30e076['length']>0x0&&_0x30e076[_0x30bc07(0x17b)]<=0x64&&/^[a-zA-Z0-9_-]+$/['test'](_0x30e076);}async['registerConversation'](_0x4a6cc5,_0x198455,_0x1f010b=null){const _0x789a1e=a0_0x4b143e,_0x493895=_0x1f010b||this[_0x789a1e(0x190)]();this[_0x789a1e(0x150)]['info'](_0x789a1e(0x137)+_0x4a6cc5);const _0x3ebb91=this[_0x789a1e(0x11e)](_0x4a6cc5);_0x3ebb91!==_0x4a6cc5&&this[_0x789a1e(0x150)]['info'](_0x789a1e(0x1d9)+_0x4a6cc5+'\x22\x20to\x20\x22'+_0x3ebb91+'\x22');if(!this[_0x789a1e(0x1b5)](_0x3ebb91))throw new Error('Failed\x20to\x20create\x20valid\x20conversation\x20ID\x20from:\x20'+_0x4a6cc5);this['conversations']['set'](_0x3ebb91,{'originalId':_0x4a6cc5,'systemPrompt':_0x198455||'','messages':[],'model':_0x493895,'createdAt':new Date()[_0x789a1e(0x19a)](),'lastActivity':new Date()[_0x789a1e(0x19a)]()}),_0x3ebb91!==_0x4a6cc5&&this[_0x789a1e(0x194)]['set'](_0x4a6cc5,this[_0x789a1e(0x194)]['get'](_0x3ebb91));}['_getDefaultModel'](){const _0x44f29b=a0_0x4b143e,_0x36ebf7=[_0x44f29b(0x11f),_0x44f29b(0x188),'azure-openai-gpt35'];for(const _0xaedbc3 of _0x36ebf7){if(this['availableModels'][_0x44f29b(0x180)](_0xaedbc3))return _0xaedbc3;}const _0x1ae2fa=this[_0x44f29b(0x17e)]['values']()['next']()['value'];return _0x1ae2fa?_0x1ae2fa[_0x44f29b(0x1b3)]:_0x44f29b(0x11f);}async['sendMessage'](_0x32690a,_0x54dd58,_0x5e365e){const _0x23e5b7=a0_0x4b143e;this['logger']['info']('Sending\x20message\x20to\x20server\x20for\x20conversation:\x20'+_0x32690a);if(!this[_0x23e5b7(0x1b4)])throw new Error(_0x23e5b7(0x13e));if(!this[_0x23e5b7(0x1cc)])throw new Error('No\x20API\x20key\x20available.\x20Please\x20set\x20your\x20API\x20key\x20first.');this[_0x23e5b7(0x1d1)](_0x32690a,_0x54dd58);const _0x27b2d1=this['_sanitizeConversationId'](_0x32690a),_0x37658e=this[_0x23e5b7(0x194)][_0x23e5b7(0x180)](_0x32690a)?_0x32690a:_0x27b2d1;if(!this[_0x23e5b7(0x194)]['has'](_0x37658e))throw new Error('Conversation\x20'+_0x32690a+_0x23e5b7(0x12e));const _0x403c85=this[_0x23e5b7(0x194)][_0x23e5b7(0x175)](_0x37658e);_0x5e365e&&(!_0x403c85[_0x23e5b7(0x18f)]||_0x403c85[_0x23e5b7(0x18f)][_0x23e5b7(0x17b)]===0x0)&&this['_updateConversationState'](_0x403c85,_0x5e365e);const _0x40fa00=this[_0x23e5b7(0x155)](_0x27b2d1,_0x54dd58,_0x403c85);try{const _0x29f9a8=await this['_sendChatRequest'](_0x40fa00);return this[_0x23e5b7(0x1bf)](_0x403c85,_0x54dd58,_0x29f9a8),_0x29f9a8['content'];}catch(_0xd6f7a9){this['logger']['error']('Error\x20sending\x20message\x20to\x20server:',_0xd6f7a9);throw this['_enhanceError'](_0xd6f7a9,'send_message');}}['_validateSendMessageInputs'](_0x140213,_0x5459db){const _0x5c8913=a0_0x4b143e;if(!_0x140213||typeof _0x140213!=='string')throw new Error('Invalid\x20conversation\x20ID');if(!_0x5459db||typeof _0x5459db!=='string')throw new Error(_0x5c8913(0x15b));}[a0_0x4b143e(0x14e)](_0x106356,_0x46a68a){const _0x693481=a0_0x4b143e;_0x46a68a[_0x693481(0x18f)]&&Array['isArray'](_0x46a68a['messages'])&&(_0x106356['messages']=_0x46a68a['messages']),_0x46a68a['systemPrompt']&&typeof _0x46a68a['systemPrompt']===_0x693481(0x158)&&(_0x106356[_0x693481(0x18c)]=_0x46a68a['systemPrompt']),_0x46a68a['model']&&this[_0x693481(0x17e)][_0x693481(0x180)](_0x46a68a['model'])&&(_0x106356['model']=_0x46a68a['model']),_0x106356['lastActivity']=new Date()[_0x693481(0x19a)]();}[a0_0x4b143e(0x155)](_0x2d35ea,_0x57b32f,_0x1808a5){const _0x5b61cc=a0_0x4b143e;return{'conversationId':_0x2d35ea,'message':_0x57b32f[_0x5b61cc(0x131)](),'systemPrompt':_0x1808a5[_0x5b61cc(0x18c)],'messages':_0x1808a5[_0x5b61cc(0x18f)]||[],'model':_0x1808a5[_0x5b61cc(0x1c9)],'requestId':this['_generateRequestId'](),'options':{'temperature':0.7,'maxTokens':this['_getModelMaxTokens'](_0x1808a5[_0x5b61cc(0x1c9)])}};}['_generateRequestId'](){const _0x2ff37a=a0_0x4b143e;return _0x2ff37a(0x1c3)+Date['now']()+'_'+ ++this['requestId'];}['_getModelMaxTokens'](_0x5a1959){const _0x29ab9b=a0_0x4b143e,_0x5f0ef6=this['availableModels']['get'](_0x5a1959);return _0x5f0ef6?_0x5f0ef6[_0x29ab9b(0x1ba)]:0xfa0;}async['_sendChatRequest'](_0x2d4492){const _0x2038a8=a0_0x4b143e;try{const _0x148a90=await this['_makeRequest'](_0x2038a8(0x174),{'method':'POST','body':JSON[_0x2038a8(0x177)](_0x2d4492)});if(!_0x148a90['ok']){const _0x4f5077=await this['_safeJsonParse'](_0x148a90),_0x20e369=this['_createHttpError'](_0x148a90[_0x2038a8(0x147)],_0x4f5077[_0x2038a8(0x19b)]||_0x148a90['statusText']);throw _0x20e369;}const _0xfaed57=await _0x148a90[_0x2038a8(0x16c)]();return this['_validateChatResponse'](_0xfaed57),_0xfaed57;}catch(_0x449e1e){throw _0x449e1e;}}['_validateChatResponse'](_0x4642ab){const _0x2a6a5c=a0_0x4b143e;if(!_0x4642ab[_0x2a6a5c(0x146)]||typeof _0x4642ab[_0x2a6a5c(0x146)]!==_0x2a6a5c(0x158))throw new Error(_0x2a6a5c(0x195));if(_0x4642ab[_0x2a6a5c(0x129)]&&typeof _0x4642ab[_0x2a6a5c(0x129)]!=='object')throw new Error(_0x2a6a5c(0x1d7));}[a0_0x4b143e(0x1bf)](_0x116124,_0x4405cc,_0xcafe31){const _0x24de51=a0_0x4b143e;_0xcafe31['usage']&&(this[_0x24de51(0x1a4)]=_0xcafe31[_0x24de51(0x129)][_0x24de51(0x1af)]||0x0,this['lastOutputTokenCount']=_0xcafe31[_0x24de51(0x129)]['output_tokens']||0x0,this[_0x24de51(0x1a5)][_0x24de51(0x186)]+=this['lastInputTokenCount'],this[_0x24de51(0x1a5)]['output']+=this[_0x24de51(0x1ab)]),_0x116124['messages']['push']({'role':_0x24de51(0x1b7),'content':_0x4405cc},{'role':_0x24de51(0x14c),'content':_0xcafe31['content']}),_0x116124['lastActivity']=new Date()['toISOString']();}async[a0_0x4b143e(0x1a9)](_0x2838a0,_0x36a369){const _0x1c7de7=a0_0x4b143e;this['logger'][_0x1c7de7(0x17c)](_0x1c7de7(0x1a3)+_0x2838a0);const _0x384c51=this['_sanitizeConversationId'](_0x2838a0),_0x3837ef=this['conversations']['has'](_0x2838a0)?_0x2838a0:_0x384c51;if(!this[_0x1c7de7(0x194)][_0x1c7de7(0x180)](_0x3837ef))throw new Error('Conversation\x20'+_0x2838a0+'\x20not\x20found');const _0x1ecb9a=this['conversations'][_0x1c7de7(0x175)](_0x3837ef);this[_0x1c7de7(0x14e)](_0x1ecb9a,_0x36a369);}async[a0_0x4b143e(0x165)](_0x2d42c3,_0x5983cd=null){const _0x171d03=a0_0x4b143e;this[_0x171d03(0x150)][_0x171d03(0x17c)]('Getting summary from server');if(!this['isInitialized'])throw new Error(_0x171d03(0x13e));if(!this['apiKey'])throw new Error(_0x171d03(0x13c));if(!_0x2d42c3||typeof _0x2d42c3!==_0x171d03(0x158))throw new Error('Invalid\x20summary\x20prompt');let _0x4b3a34='azure-ai-phi4';if(_0x5983cd&&this[_0x171d03(0x194)][_0x171d03(0x180)](_0x5983cd)){const _0x56f924=this['conversations'][_0x171d03(0x175)](_0x5983cd);_0x4b3a34=_0x56f924[_0x171d03(0x1c9)],this['logger']['info']('Using\x20conversation\x20model\x20for\x20summary:\x20'+_0x4b3a34);}else this[_0x171d03(0x150)]['warn']('No conversation ID provided or conversation not found, using default model for summary');try{const _0x8e8245=await this['_makeRequest'](_0x171d03(0x1bd),{'method':_0x171d03(0x16a),'body':JSON[_0x171d03(0x177)]({'prompt':_0x2d42c3[_0x171d03(0x131)](),'model':_0x4b3a34})});if(!_0x8e8245['ok']){const _0x5d4920=await this['_safeJsonParse'](_0x8e8245);throw this['_createHttpError'](_0x8e8245[_0x171d03(0x147)],_0x5d4920[_0x171d03(0x19b)]||_0x8e8245[_0x171d03(0x13f)]);}const _0x4f40cb=await _0x8e8245['json']();return _0x4f40cb[_0x171d03(0x129)]&&(this['lastInputTokenCount']=_0x4f40cb['usage']['input_tokens']||0x0,this['lastOutputTokenCount']=_0x4f40cb['usage'][_0x171d03(0x19e)]||0x0,this['tokenUsage']['input']+=this['lastInputTokenCount'],this[_0x171d03(0x1a5)]['output']+=this[_0x171d03(0x1ab)]),_0x4f40cb['content'];}catch(_0xc6f86){this[_0x171d03(0x150)]['error']('Error getting summary from server:',_0xc6f86);throw this['_enhanceError'](_0xc6f86,'get_summary');}}async[a0_0x4b143e(0x125)](_0x1107a7,_0xcb9adf,_0x596629={}){const _0x4d871f=a0_0x4b143e;this[_0x4d871f(0x150)][_0x4d871f(0x17c)]('Getting image description from server');if(!this['isInitialized'])throw new Error(_0x4d871f(0x13e));if(!this[_0x4d871f(0x1cc)])throw new Error('No\x20API\x20key\x20available.\x20Please\x20set\x20your\x20API\x20key\x20first.');this['_validateImageDescriptionInputs'](_0x1107a7,_0xcb9adf);try{const _0x29a1e8=await this[_0x4d871f(0x13b)](_0x4d871f(0x179),{'method':'POST','body':JSON['stringify']({'image':_0x1107a7,'prompt':_0xcb9adf['trim'](),'metadata':_0x596629||{}})}),_0x4f50f9=await this[_0x4d871f(0x1a8)](_0x29a1e8);if(!_0x29a1e8['ok'])throw this['_createHttpError'](_0x29a1e8['status'],_0x4f50f9[_0x4d871f(0x19b)]||_0x29a1e8[_0x4d871f(0x13f)]);return _0x4f50f9['usage']&&(this[_0x4d871f(0x1a4)]=_0x4f50f9[_0x4d871f(0x129)]['input_tokens']||0x0,this[_0x4d871f(0x1ab)]=_0x4f50f9['usage']['output_tokens']||0x0,this[_0x4d871f(0x1a5)]['input']+=this['lastInputTokenCount'],this['tokenUsage']['output']+=this['lastOutputTokenCount']),_0x4f50f9[_0x4d871f(0x146)];}catch(_0x28c2ca){this[_0x4d871f(0x150)][_0x4d871f(0x19b)]('Error getting image description from server:',_0x28c2ca);throw this[_0x4d871f(0x123)](_0x28c2ca,'get_image_description');}}async[a0_0x4b143e(0x184)](_0x5dbf6e,_0x1d61fd={}){const _0x3e2ad3=a0_0x4b143e;this['logger']['info']('Generating image from server');if(!this['isInitialized'])throw new Error('Service\x20not\x20initialized.\x20Call\x20initialize()\x20first.');if(!this[_0x3e2ad3(0x1cc)])throw new Error(_0x3e2ad3(0x13c));this[_0x3e2ad3(0x122)](_0x5dbf6e,_0x1d61fd);try{const _0x3f4eca=_0x1d61fd['model']||_0x3e2ad3(0x17f);if(!_0x3f4eca||_0x3f4eca['trim']()==='')throw new Error(_0x3e2ad3(0x11c));const _0xf299fb={'prompt':_0x5dbf6e['trim'](),'model':_0x3f4eca,'size':_0x1d61fd[_0x3e2ad3(0x1c8)]||'1024x1024','quality':_0x1d61fd['quality']||_0x3e2ad3(0x187),'response_format':_0x1d61fd['responseFormat']||_0x3e2ad3(0x136),'requestId':this[_0x3e2ad3(0x145)]()};this['logger']['debug']('Sending\x20image\x20generation\x20request:',_0xf299fb);const _0x4d777f=await this[_0x3e2ad3(0x13b)](_0x3e2ad3(0x16f),{'method':_0x3e2ad3(0x16a),'body':JSON[_0x3e2ad3(0x177)](_0xf299fb)}),_0x55594=await this['_safeJsonParse'](_0x4d777f);if(!_0x4d777f['ok'])throw this[_0x3e2ad3(0x12b)](_0x4d777f[_0x3e2ad3(0x147)],_0x55594['error']||_0x4d777f[_0x3e2ad3(0x13f)]);_0x55594[_0x3e2ad3(0x129)]&&(this[_0x3e2ad3(0x1a4)]=_0x55594[_0x3e2ad3(0x129)][_0x3e2ad3(0x1af)]||0x0,this[_0x3e2ad3(0x1ab)]=_0x55594['usage'][_0x3e2ad3(0x19e)]||0x0,this['tokenUsage'][_0x3e2ad3(0x186)]+=this['lastInputTokenCount'],this[_0x3e2ad3(0x1a5)]['output']+=this['lastOutputTokenCount']);const _0x406b00=_0x55594?.['images'][0x0];return{'imageUrl':_0x406b00?.['url'],'model':_0x55594['model'],'size':_0x55594['size']||_0xf299fb['size'],'prompt':_0x406b00?.['revised_prompt']||_0x5dbf6e,'usage':_0x55594[_0x3e2ad3(0x129)]};}catch(_0x56ac32){this[_0x3e2ad3(0x150)]['error']('Error generating image from server:',_0x56ac32);throw this['_enhanceError'](_0x56ac32,_0x3e2ad3(0x19f));}}['_validateImageGenerationInputs'](_0x472437,_0xbc0778){const _0x5245fc=a0_0x4b143e;if(!_0x472437||typeof _0x472437!=='string')throw new Error('Invalid\x20image\x20generation\x20prompt');if(_0x472437[_0x5245fc(0x17b)]>0xfa0)throw new Error('Image\x20generation\x20prompt\x20too\x20long\x20(max\x204000\x20characters)');if(_0xbc0778[_0x5245fc(0x1c9)]&&(typeof _0xbc0778[_0x5245fc(0x1c9)]!==_0x5245fc(0x158)||_0xbc0778[_0x5245fc(0x1c9)][_0x5245fc(0x131)]()===''))throw new Error('Invalid\x20model\x20parameter\x20-\x20must\x20be\x20a\x20non-empty\x20string');if(_0xbc0778[_0x5245fc(0x1c8)]&&typeof _0xbc0778['size']!=='string')throw new Error(_0x5245fc(0x1cd));if(_0xbc0778['quality']&&!['standard','hd'][_0x5245fc(0x12f)](_0xbc0778[_0x5245fc(0x191)]))throw new Error(_0x5245fc(0x193));}['_validateImageDescriptionInputs'](_0x4bc829,_0x32fcc5){const _0x5f0f3e=a0_0x4b143e;if(!_0x4bc829||typeof _0x4bc829!=='string')throw new Error('Invalid\x20base64\x20image\x20data');if(!_0x32fcc5||typeof _0x32fcc5!=='string')throw new Error(_0x5f0f3e(0x144));if(_0x4bc829[_0x5f0f3e(0x17b)]>0x32*0x400*0x400)throw new Error(_0x5f0f3e(0x1c7));}async['estimateTokenCount'](_0x34ac7e){const _0x4bb4b5=a0_0x4b143e,_0x2af7d8=this['_sanitizeConversationId'](_0x34ac7e),_0x32a840=this[_0x4bb4b5(0x194)]['has'](_0x34ac7e)?_0x34ac7e:_0x2af7d8;if(!this[_0x4bb4b5(0x194)][_0x4bb4b5(0x180)](_0x32a840))throw new Error('Conversation\x20'+_0x34ac7e+_0x4bb4b5(0x12e));const _0x505786=this['conversations'][_0x4bb4b5(0x175)](_0x32a840);let _0x575590=this[_0x4bb4b5(0x1be)](_0x505786[_0x4bb4b5(0x18c)]);for(const _0x3ff1e2 of _0x505786['messages']){_0x575590+=this['_estimateTokens'](_0x3ff1e2['content']);}return _0x575590;}[a0_0x4b143e(0x1be)](_0x1ac04d){const _0xbca583=a0_0x4b143e;if(!_0x1ac04d||typeof _0x1ac04d!=='string')return 0x0;return Math[_0xbca583(0x168)](_0x1ac04d[_0xbca583(0x17b)]/0x4);}[a0_0x4b143e(0x1b2)](_0x28639f){const _0x4827f4=a0_0x4b143e;return this[_0x4827f4(0x17e)][_0x4827f4(0x180)](_0x28639f);}['getMaxContextSize'](){const _0x46ad17=a0_0x4b143e;let _0x447025=0x0;for(const _0x3c9e35 of this['availableModels']['values']()){_0x3c9e35[_0x46ad17(0x1ba)]>_0x447025&&(_0x447025=_0x3c9e35[_0x46ad17(0x1ba)]);}return _0x447025||0x186a0;}['getLastInputTokenCount'](){const _0x24eec5=a0_0x4b143e;return this[_0x24eec5(0x1a4)];}['getLastOutputTokenCount'](){return this['lastOutputTokenCount'];}[a0_0x4b143e(0x152)](){const _0xaf42d0=a0_0x4b143e;return{...this[_0xaf42d0(0x1a5)]};}async['refreshPricingData'](){const _0x2ce564=a0_0x4b143e;this[_0x2ce564(0x150)]['info']('Refreshing pricing data from server'),await this[_0x2ce564(0x18a)]();}async['getServerHealth'](){const _0x1bbed2=a0_0x4b143e;try{const _0x4e5e06=await this['_makeRequest'](_0x1bbed2(0x197));if(!_0x4e5e06['ok'])return{'status':'unhealthy','error':_0x1bbed2(0x15c)+_0x4e5e06[_0x1bbed2(0x147)]+':\x20'+_0x4e5e06[_0x1bbed2(0x13f)]};const _0x1f4a77=await _0x4e5e06[_0x1bbed2(0x16c)]();return{'status':_0x1bbed2(0x13a),..._0x1f4a77};}catch(_0x5776fc){return{'status':'unhealthy','error':_0x5776fc[_0x1bbed2(0x196)]};}}async[a0_0x4b143e(0x1a1)](){const _0x4386e7=a0_0x4b143e;this['logger'][_0x4386e7(0x17c)](_0x4386e7(0x1ac)),this[_0x4386e7(0x194)][_0x4386e7(0x198)](),this['availableModels']['clear'](),this[_0x4386e7(0x130)][_0x4386e7(0x198)](),this['isInitialized']=![],this['apiKey']=null,this[_0x4386e7(0x150)][_0x4386e7(0x17c)]('Server\x20LLM\x20service\x20shut\x20down\x20successfully');}async[a0_0x4b143e(0x13b)](_0x27a723,_0x16b79f={}){const _0x296003=a0_0x4b143e,_0x4ce87b=''+this['serverUrl']+_0x27a723,_0x43eb19={'method':_0x16b79f[_0x296003(0x1bc)]||'GET','headers':{'Content-Type':'application/json','User-Agent':'Loxia-CLI/1.0.0',..._0x16b79f[_0x296003(0x159)]},'timeout':this['timeout'],..._0x16b79f};this[_0x296003(0x1cc)]&&(_0x43eb19['headers'][_0x296003(0x14b)]='Bearer\x20'+this[_0x296003(0x1cc)]);try{const _0x54b920=await a0_0x200843(_0x4ce87b,_0x43eb19);return _0x54b920;}catch(_0x296c09){throw this[_0x296003(0x128)](_0x296c09,_0x4ce87b);}}async['_safeJsonParse'](_0x5a4ae3){try{return await _0x5a4ae3['json']();}catch(_0x522122){return{};}}[a0_0x4b143e(0x123)](_0x412f98,_0x42a886){const _0x3df8e7=a0_0x4b143e,_0x41c2a5=new Error(_0x42a886+'\x20failed:\x20'+_0x412f98['message']);return _0x41c2a5[_0x3df8e7(0x154)]=_0x42a886,_0x41c2a5[_0x3df8e7(0x1ad)]=_0x412f98,_0x41c2a5['errorType']=this['_classifyError'](_0x412f98),_0x41c2a5;}[a0_0x4b143e(0x12b)](_0x3d003f,_0x17c7f3){const _0x397da4=a0_0x4b143e,_0x4c4867=new Error(_0x397da4(0x15c)+_0x3d003f+':\x20'+_0x17c7f3);return _0x4c4867['status']=_0x3d003f,_0x4c4867[_0x397da4(0x1d4)]=this[_0x397da4(0x1b0)](_0x3d003f),_0x4c4867;}[a0_0x4b143e(0x128)](_0x36a19e,_0x12f9fe){const _0x463ef4=a0_0x4b143e,_0x5170fb=new Error(_0x463ef4(0x181)+_0x36a19e[_0x463ef4(0x196)]);_0x5170fb[_0x463ef4(0x1a6)]=_0x12f9fe,_0x5170fb[_0x463ef4(0x1ad)]=_0x36a19e,_0x5170fb[_0x463ef4(0x1d4)]=ERROR_TYPES['NETWORK'];if(_0x36a19e[_0x463ef4(0x1cb)]===_0x463ef4(0x153))_0x5170fb['message']='Connection\x20refused.\x20Server\x20may\x20be\x20down.';else{if(_0x36a19e[_0x463ef4(0x1cb)]===_0x463ef4(0x13d))_0x5170fb[_0x463ef4(0x196)]='DNS\x20lookup\x20failed.\x20Check\x20server\x20URL.';else(_0x36a19e['code']===_0x463ef4(0x18d)||_0x36a19e[_0x463ef4(0x1b3)]===_0x463ef4(0x170))&&(_0x5170fb['message']=_0x463ef4(0x156),_0x5170fb['errorType']=ERROR_TYPES['TIMEOUT']);}return _0x5170fb;}['_classifyError'](_0x5548f8){const _0x15b60b=a0_0x4b143e;if(_0x5548f8['status'])return this['_classifyHttpError'](_0x5548f8[_0x15b60b(0x147)]);if(_0x5548f8['code']===_0x15b60b(0x153)||_0x5548f8['code']===_0x15b60b(0x13d))return ERROR_TYPES[_0x15b60b(0x126)];if(_0x5548f8['code']==='ETIMEDOUT'||_0x5548f8['name']==='AbortError')return ERROR_TYPES['TIMEOUT'];return ERROR_TYPES[_0x15b60b(0x132)];}[a0_0x4b143e(0x1b0)](_0x2e973f){const _0x1955cb=a0_0x4b143e;switch(_0x2e973f){case HTTP_STATUS[_0x1955cb(0x11d)]:case HTTP_STATUS['FORBIDDEN']:return ERROR_TYPES[_0x1955cb(0x172)];case HTTP_STATUS[_0x1955cb(0x1a2)]:return ERROR_TYPES['VALIDATION'];case HTTP_STATUS[_0x1955cb(0x15d)]:return ERROR_TYPES[_0x1955cb(0x17d)];case HTTP_STATUS[_0x1955cb(0x1b8)]:case HTTP_STATUS[_0x1955cb(0x121)]:case HTTP_STATUS[_0x1955cb(0x1aa)]:case HTTP_STATUS['GATEWAY_TIMEOUT']:return ERROR_TYPES[_0x1955cb(0x1cf)];default:return ERROR_TYPES['UNKNOWN'];}}['_isNonRetryableError'](_0x375a3c){const _0x301a78=a0_0x4b143e,_0x22e6c7=[ERROR_TYPES[_0x301a78(0x172)],ERROR_TYPES[_0x301a78(0x141)]],_0x5913ae=[HTTP_STATUS[_0x301a78(0x1a2)],HTTP_STATUS['UNAUTHORIZED'],HTTP_STATUS['FORBIDDEN'],HTTP_STATUS[_0x301a78(0x16d)]];return _0x22e6c7[_0x301a78(0x12f)](_0x375a3c[_0x301a78(0x1d4)])||_0x5913ae['includes'](_0x375a3c[_0x301a78(0x147)]);}['_delay'](_0xf900c7){return new Promise(_0x14a89c=>setTimeout(_0x14a89c,_0xf900c7));}[a0_0x4b143e(0x135)](_0x5df442){const _0x1d5db4=a0_0x4b143e,_0x5c7a7a='loxia-local-key',_0xf904d=Buffer['from'](_0x5df442,'base64')['toString']();let _0x365449='';for(let _0x17688a=0x0;_0x17688a<_0xf904d[_0x1d5db4(0x17b)];_0x17688a++){_0x365449+=String[_0x1d5db4(0x178)](_0xf904d['charCodeAt'](_0x17688a)^_0x5c7a7a['charCodeAt'](_0x17688a%_0x5c7a7a[_0x1d5db4(0x17b)]));}return _0x365449;}}