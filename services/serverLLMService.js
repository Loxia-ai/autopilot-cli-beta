function a0_0x366f(_0x1aabb1,_0x399f31){const _0x5e977f=a0_0x5e97();return a0_0x366f=function(_0x366f3f,_0x177bb6){_0x366f3f=_0x366f3f-0x1c0;let _0x42f387=_0x5e977f[_0x366f3f];if(a0_0x366f['tUriNx']===undefined){var _0x24a55a=function(_0x499e6f){const _0x10a5ae='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1e2486='',_0x23333e='';for(let _0x3177b4=0x0,_0x18ae98,_0x306637,_0x10af04=0x0;_0x306637=_0x499e6f['charAt'](_0x10af04++);~_0x306637&&(_0x18ae98=_0x3177b4%0x4?_0x18ae98*0x40+_0x306637:_0x306637,_0x3177b4++%0x4)?_0x1e2486+=String['fromCharCode'](0xff&_0x18ae98>>(-0x2*_0x3177b4&0x6)):0x0){_0x306637=_0x10a5ae['indexOf'](_0x306637);}for(let _0x5bac99=0x0,_0x46a8df=_0x1e2486['length'];_0x5bac99<_0x46a8df;_0x5bac99++){_0x23333e+='%'+('00'+_0x1e2486['charCodeAt'](_0x5bac99)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x23333e);};a0_0x366f['DAifrR']=_0x24a55a,_0x1aabb1=arguments,a0_0x366f['tUriNx']=!![];}const _0x20ee25=_0x5e977f[0x0],_0x4b46d0=_0x366f3f+_0x20ee25,_0x58a413=_0x1aabb1[_0x4b46d0];return!_0x58a413?(_0x42f387=a0_0x366f['DAifrR'](_0x42f387),_0x1aabb1[_0x4b46d0]=_0x42f387):_0x42f387=_0x58a413,_0x42f387;},a0_0x366f(_0x1aabb1,_0x399f31);}const a0_0x416964=a0_0x366f;(function(_0x2c5f01,_0xd302b1){const _0x10ce59=a0_0x366f,_0x2807d9=_0x2c5f01();while(!![]){try{const _0x2bc3b5=parseInt(_0x10ce59(0x1f4))/0x1*(-parseInt(_0x10ce59(0x1d4))/0x2)+parseInt(_0x10ce59(0x22f))/0x3*(parseInt(_0x10ce59(0x1e6))/0x4)+parseInt(_0x10ce59(0x203))/0x5*(parseInt(_0x10ce59(0x1c9))/0x6)+-parseInt(_0x10ce59(0x1ff))/0x7+parseInt(_0x10ce59(0x1ca))/0x8*(-parseInt(_0x10ce59(0x24f))/0x9)+parseInt(_0x10ce59(0x271))/0xa+parseInt(_0x10ce59(0x1f1))/0xb;if(_0x2bc3b5===_0xd302b1)break;else _0x2807d9['push'](_0x2807d9['shift']());}catch(_0x123ab1){_0x2807d9['push'](_0x2807d9['shift']());}}}(a0_0x5e97,0x4a057));function a0_0x5e97(){const _0x1616bc=['u2vYDMvYieXmtsbZzxj2AwnLigLUAxrPywXPEMvKihn1y2nLC3nMDwXSEq','BgfZDefJDgL2Axr5','Aw1Hz2vZ','zxjYB3i','DhLWzq','DxjS','DhjPBq','Bw9KzwXZ','C3vWCg9YDhnwAxnPB24','sw52ywXPzcbTyxHuB2TLBNmGzM9Yig1VzgvSia','y29Kzq','x2j1AwXKq2HHDfjLCxvLC3rqyxLSB2fK','x2vUAgfUy2vfCNjVCG','uMvXDwvZDcb0Aw1LB3v0lIbtzxj2zxiGBwf5igjLig92zxjSB2fKzwqU','C3vWCg9YDhntExn0zw0','x3vWzgf0zunVBNzLCNnHDgLVBLn0yxrL','AxnbCNjHEq','x3nHBML0AxPLq29UDMvYC2f0Aw9Uswq','r0vu','z2v0x2LTywDLx2rLC2nYAxb0Aw9U','Dw5RBM93BG','Bg9HzgvKu2vYDMvYrgf0yq','Aw5WDxq','C3rHDhvZvgv4Da','y2f0zwDVCNK','CMvXDwvZDeLK','B3v0Chv0x3rVA2vUCW','BNvTyMvY','m2r4yNv0yW','x3zHBgLKyxrLtw9KzwXeyxrH','z2v0vg9Rzw5vC2fNzq','uKfurv9msu1jva','BgfZDfbYAwnPBMDvCgrHDgu','B3v0Chv0','qxv0Ag9YAxPHDgLVBG','zNjVBunOyxjdB2rL','q29UDMvYC2f0Aw9Uia','Aw5MBW','y29UDMvYC2f0Aw9UCW','x3nLBMrdAgf0uMvXDwvZDa','B3bLCMf0Aw9U','Dg9tDhjPBMC','muSGDg9Rzw5Z','x2nSyxnZAwz5shr0CevYCM9Y','C2vYDMvY','y29UDgvUDa','x3zHBgLKyxrLuhjPy2LUz0rHDge','sw52ywXPzcbYzxnWB25ZztOGAw52ywXPzcb1C2fNzsbKyxrH','DMfSDwvZ','y2vPBa','z2v0','l2XSBs9JAgf0','Dg9Rzw5vC2fNzq','DgLTzw91Da','re5tigXVB2T1CcbMywLSzwqUienOzwnRihnLCNzLCIbvuKWU','ue9tva','r0furvDbwv9usu1ft1vu','ve9px01btLLFuKvrvuvtvfm','y2HHCKnVzgvbDa','C2XPy2u','mJKYmty3t0PqvxPh','yJy0x2PZB24','qwjVCNrfCNjVCG','AxnjBML0AwfSAxPLza','z2v0u2vYDMvYsgvHBhrO','C3rYAw5N','x3zHBgLKyxrLu2vYDMvYvxjS','Bw9KzwW','sw52ywXPzcbPBwfNzsbNzw5LCMf0Aw9UihbYB21WDa','rMfPBgvKihrVigXVywqGChjPy2LUzZOG','ig5VDcbMB3vUza','D2fYBG','BM93','x2XVywrbDMfPBgfIBgvnB2rLBhm','iIb0BYaI','DxrMoa','BgfZDeLUChv0vg9Rzw5dB3vUDa','y3vYCMvUy3K','y29UzMLN','yxv0AgvUDgLJyxrPB24','BgvUz3rO','CMvWBgfJzq','x3zHBgLKyxrLu2vUze1LC3nHz2vjBNb1Dhm','x2XVywrbCgLlzxK','ywXS','z2vUzxjHDgvFAw1Hz2u','zxn0Aw1HDgvuB2TLBKnVDw50','zNjVBq','DgvZDa','BwvZC2fNzxm','Bwf4vg9Rzw5Z','yxbPs2v5','q29UBMvJDgLVBIbYzwz1C2vKlIbtzxj2zxiGBwf5igjLigrVD24U','Bg94AweTBg9JywWTA2v5','mtiXntq3mhrTAKf3wq','x3bYB2nLC3ndAgf0uMvZCg9UC2u','rMfPBgvKihrVigXVywqGChjPy2LUzYbKyxrHoG','runptK5sruzvu0ve','C2vUzf9TzxnZywDL','C2vYDMvYvxjS','zNmVChjVBwLZzxm','l2f1DgGVDMvYAwz5','Cgf5Bg9Hzcb0B28GBgfYz2u','uMvNAxn0zxjPBMCGy29UDMvYC2f0Aw9UihDPDgGGC2vYDMvYoIa','z2v0uhjPy2LUz0rHDge','Aw5WDxrFDg9Rzw5Z','C3rHDhvZ','yMfZzty0','AgfZ','x21HA2vszxf1zxn0','x2DLBMvYyxrLuMvXDwvZDeLK','qvvusevoveLdqvrjt04','zxjYB3juExbL','ChjPy2LUzW','Aw5JBhvKzxm','tK9ux0zpvu5e','C3LZDgvTuhjVBxb0','y2XLyxi','sw52ywXPzcbTB2rLBcbWyxjHBwv0zxiGlsbTDxn0igjLigeGBM9UlwvTChr5ihn0CMLUzW','BMfTzq','mtKYmdeZmNb4ufHZvG','mta0CeXjzwvR','tMv0D29YAYbYzxf1zxn0igzHAwXLzdOG','B2jQzwn0','yxzHAwXHyMXLtw9KzwXZ','z2v0twf4q29UDgv4DfnPEMu','u2H1DhrPBMCGzg93BIbZzxj2zxiGteXnihnLCNzPy2u','mtaYnhGXmdi0','yw50AhjVCgLJlxnVBM5LDa','CMv0CMLLCW','y3jLzgvUDgLHBhm','mZqXmeL2D1PVtW','tKvuv09ssW','DxnHz2u','CMvXDwvZDcb0B28GBgfYz2u','x3zHBgLKyxrLsw1Hz2vezxnJCMLWDgLVBKLUChv0CW','sw52ywXPzcbPBNb1DcbWCMLJAw5NigzVCIbTB2rLBca','vKfmsurbveLptG','z2v0qxzHAwXHyMXLtw9KzwXZ','Dw5OzwfSDgH5','C2vYDMLJzxm','qKfex1jfuvvfu1q','ru5pvezpvu5e','y29UDMvYC2f0Aw9Ulq','ANnVBG','qMvHCMvYia','yxP1CMuTywKTCgHPna','CMvHzezPBgu','DxbKyxrLq29UDMvYC2f0Aw9U','nZa4nJGWywzwsgPY','tw9KzwWGBwLZC2LUzYbYzxf1AxjLzcbMAwvSzdOG','C3rHBMrHCMq','rMfPBgvKihrVigXVywqGyxzHAwXHyMXLig1VzgvSCZO','z2vUzxjHDgvjBwfNzq','DMfSAwrHDgLVBG','z2v0tw9KzwXqCMLJAw5N','BwvZC2fNzsb0B28GBg9UzW','lMXVEgLH','C2H1DgrVD24','C2L6zq','oty1ota4ouzTzvHxzG','Ahr0CdO','x2vZDgLTyxrLvg9Rzw5Z','mJGZBNrRzuL4','BwvZC2fNzq','x2XVywrtzxj2zxjeyxrH','x3nHzMvkC29UugfYC2u','l2HLywX0Aa','ChvZAa','z2v0x3n1Bw1HCNK','ChjPy2LUz0rHDge','zgvIDwC','x2DLDe1VzgvStwf4vg9Rzw5Z','Dg9ju09tDhjPBMC','mJaYmZC5mxnvEvLvwG','u2vYDMvYieXmtsbZzxj2AwnLigLUAxrPywXPEMvK','rMfPBgvKihrVignYzwf0zsb2ywXPzcbJB252zxjZyxrPB24GsuqGzNjVBtOG','sw52ywXPzcbXDwfSAxr5ihbHCMfTzxrLCIaOBxvZDcbIzsaIC3rHBMrHCMqIig9YicjOzciP','nvrKrKnPrG','x2DLDerLzMf1BhrnB2rLBa','Bg9Nz2vY','C3rYAw5NAwz5','Aw1Hz2uTz2vUzxjHDgLVBG','u2vYDMLJzsbUB3qGAw5PDgLHBgL6zwqUienHBgWGAw5PDgLHBgL6zsGPigzPCNn0lG','ig1VzgvSCW','Dg9mB3DLCKnHC2u','rvrjtuvet1vu','x2XVywrqCMLJAw5Nrgf0yq','vu5bvvrit1jjwKve','sw52ywXPzcbIyxnLnJqGAw1Hz2uGzgf0yq','CxvHBgL0Eq','sw1Hz2uGzgf0ysb0B28GBgfYz2u','z2v0u3vTBwfYEq','BgfZDe91Dhb1DfrVA2vUq291BNq'];a0_0x5e97=function(){return _0x1616bc;};return a0_0x5e97();}import a0_0x499e6f from'node-fetch';const DEFAULT_TIMEOUT_MS=0xea60,DEFAULT_MAX_RETRIES=0x3,DEFAULT_RETRY_DELAY_MS=0x7530,RETRY_DELAY_MULTIPLIER=0x2,API_VERSION='v1',HTTP_STATUS={'OK':0xc8,'CREATED':0xc9,'BAD_REQUEST':0x190,'UNAUTHORIZED':0x191,'FORBIDDEN':0x193,'NOT_FOUND':0x194,'TOO_MANY_REQUESTS':0x1ad,'INTERNAL_SERVER_ERROR':0x1f4,'BAD_GATEWAY':0x1f6,'SERVICE_UNAVAILABLE':0x1f7,'GATEWAY_TIMEOUT':0x1f8},ERROR_TYPES={'AUTHENTICATION':a0_0x416964(0x262),'NETWORK':'network','TIMEOUT':'timeout','RATE_LIMIT':'rate_limit','SERVER':a0_0x416964(0x23f),'VALIDATION':a0_0x416964(0x1eb),'UNKNOWN':a0_0x416964(0x227)},HTTP_STATUS_CODES={'REQUEST_ENTITY_TOO_LARGE':0x19d,'BAD_REQUEST':0x190,'UNAUTHORIZED':0x191,'FORBIDDEN':0x193,'NOT_FOUND':0x194,'TOO_MANY_REQUESTS':0x1ad,'INTERNAL_SERVER_ERROR':0x1f4},REQUEST_SIZE_ERROR_PATTERNS=['request\x20entity\x20too\x20large',a0_0x416964(0x279),a0_0x416964(0x1d7),a0_0x416964(0x1ed),'content\x20length\x20exceeds\x20limit'];export class ServerLLMService{constructor(_0x10a5ae,_0x1e2486){const _0x1a2b6d=a0_0x416964;this[_0x1a2b6d(0x261)]=_0x10a5ae,this['logger']=_0x1e2486,this[_0x1a2b6d(0x276)]=this[_0x1a2b6d(0x255)](_0x10a5ae['serverUrl']),this[_0x1a2b6d(0x26e)]=null,this['isInitialized']=![],this['timeout']=_0x10a5ae[_0x1a2b6d(0x1dd)]?.[_0x1a2b6d(0x23f)]?.['timeout']||DEFAULT_TIMEOUT_MS,this['maxRetries']=_0x10a5ae[_0x1a2b6d(0x1dd)]?.['server']?.[_0x1a2b6d(0x1d2)]||DEFAULT_MAX_RETRIES,this[_0x1a2b6d(0x22c)]=0x0,this['availableModels']=new Map(),this[_0x1a2b6d(0x1fb)]=new Map(),this['lastPricingUpdate']=null,this['conversations']=new Map(),this[_0x1a2b6d(0x25f)]=0x0,this[_0x1a2b6d(0x212)]=0x0,this[_0x1a2b6d(0x247)]={'input':0x0,'output':0x0},this[_0x1a2b6d(0x205)][_0x1a2b6d(0x238)](_0x1a2b6d(0x200),{'serverUrl':this['serverUrl'],'timeout':this[_0x1a2b6d(0x248)],'maxRetries':this['maxRetries']});}['_validateServerUrl'](_0x23333e){const _0x151cd1=a0_0x416964;if(!_0x23333e)throw new Error('Server\x20URL\x20is\x20required');try{const _0x3177b4=new URL(_0x23333e);if(![_0x151cd1(0x1f2),'https:'][_0x151cd1(0x1c3)](_0x3177b4['protocol']))throw new Error('Server\x20URL\x20must\x20use\x20HTTP\x20or\x20HTTPS\x20protocol');return _0x3177b4['toString']()[_0x151cd1(0x264)](/\/$/,'');}catch(_0x18ae98){throw new Error('Invalid\x20server\x20URL:\x20'+_0x18ae98['message']);}}[a0_0x416964(0x224)](_0x306637){const _0x5144eb=a0_0x416964;if(!_0x306637||typeof _0x306637!==_0x5144eb(0x254))return'conversation-'+Date[_0x5144eb(0x25b)]();let _0x10af04=_0x306637['replace'](/\s+/g,'-')[_0x5144eb(0x264)](/[^a-zA-Z0-9_-]/g,'')[_0x5144eb(0x264)](/-+/g,'-')[_0x5144eb(0x264)](/^-+|-+$/g,'')[_0x5144eb(0x20a)]();if(!_0x10af04)_0x10af04=_0x5144eb(0x1e0)+Date[_0x5144eb(0x25b)]();else _0x10af04[_0x5144eb(0x263)]>0x32&&(_0x10af04=_0x10af04['substring'](0x0,0x28)+'-'+Date[_0x5144eb(0x25b)]()['toString']()[_0x5144eb(0x24e)](-0x8));return _0x10af04;}async['initialize'](){const _0x57a9ab=a0_0x416964;if(this['isInitialized'])return;try{this['logger']['info']('Initializing\x20server\x20LLM\x20service'),this['apiKey']=await this[_0x57a9ab(0x266)]();if(!this['apiKey'])throw new Error('No\x20API\x20key\x20found.\x20Please\x20run\x20\x22loxia\x20key\x20--set\x20<your-api-key>\x22\x20first.');await this[_0x57a9ab(0x1f6)](),this[_0x57a9ab(0x252)]=!![],this[_0x57a9ab(0x205)][_0x57a9ab(0x238)](_0x57a9ab(0x213),{'modelsLoaded':this[_0x57a9ab(0x1cd)]['size'],'pricingModels':this[_0x57a9ab(0x1fb)][_0x57a9ab(0x1f0)]});}catch(_0x5bac99){this[_0x57a9ab(0x205)][_0x57a9ab(0x216)]('Failed\x20to\x20initialize\x20server\x20LLM\x20service:',_0x5bac99);throw _0x5bac99;}}async[a0_0x416964(0x1f6)](){const _0x4e17c3=a0_0x416964;await Promise[_0x4e17c3(0x267)]([this[_0x4e17c3(0x25c)](),this['_loadPricingData']()]),this['loadedServerData']=!![];}async['_loadApiKey'](){const _0x19107b=a0_0x416964;try{const _0x46a8df=await import('os'),_0x5b90a9=await import('path'),_0x393ae0=await import(_0x19107b(0x277)),_0x257329=_0x5b90a9['join'](_0x46a8df['homedir'](),_0x19107b(0x1ee),_0x19107b(0x1d3)),_0x1fae00=await _0x393ae0[_0x19107b(0x1e4)](_0x257329,_0x19107b(0x25e)),_0x565b42=JSON['parse'](_0x1fae00);return this['_decryptKey'](_0x565b42['apiKey']);}catch(_0x48589b){return this[_0x19107b(0x205)][_0x19107b(0x1fc)]('Failed to load API key from credentials file:',_0x48589b),null;}}async['_validateApiKey'](){const _0x4297cf=a0_0x416964;try{const _0xb9642c=await this[_0x4297cf(0x280)](_0x4297cf(0x278),{'method':'POST'});return _0xb9642c['ok'];}catch(_0x53ad8a){return this['logger'][_0x4297cf(0x25a)]('API\x20key\x20validation\x20failed:',_0x53ad8a),![];}}async['_loadAvailableModels'](){const _0x396359=a0_0x416964;try{this['logger'][_0x396359(0x238)]('Loading available models from server');const _0x415233=await this[_0x396359(0x280)]('/llm/models'),_0x5e7cda=await _0x415233['json']();if(!_0x5e7cda['models']||!Array['isArray'](_0x5e7cda['models']))throw new Error('Invalid models response from server');this['availableModels']['clear']();for(const _0x2ed1a6 of _0x5e7cda[_0x396359(0x21a)]){this[_0x396359(0x230)](_0x2ed1a6),this['availableModels']['set'](_0x2ed1a6['name'],{'name':_0x2ed1a6['name'],'category':_0x2ed1a6[_0x396359(0x22b)],'type':_0x2ed1a6[_0x396359(0x217)],'maxTokens':_0x2ed1a6[_0x396359(0x26d)],'supportsVision':_0x2ed1a6[_0x396359(0x21b)]||![],'supportsSystem':_0x2ed1a6[_0x396359(0x221)]!==![],'pricing':_0x2ed1a6['pricing']||{}});}this[_0x396359(0x205)]['info']('Loaded\x20'+this['availableModels']['size']+'\x20models\x20from\x20server');}catch(_0x2be15a){this[_0x396359(0x205)]['error'](_0x396359(0x1e9),_0x2be15a);throw new Error('Failed\x20to\x20load\x20models:\x20'+_0x2be15a['message']);}}['_validateModelData'](_0x5707c3){const _0x477687=a0_0x416964,requiredFields=[_0x477687(0x1c8),_0x477687(0x22b),'type'];for(const _0x444065 of requiredFields){if(!_0x5707c3[_0x444065])throw new Error(_0x477687(0x1e7)+_0x444065);}if(_0x5707c3['type']!==_0x477687(0x207)){if(typeof _0x5707c3[_0x477687(0x26d)]!==_0x477687(0x22e)||_0x5707c3[_0x477687(0x26d)]<=0x0)throw new Error(_0x477687(0x21c)+_0x5707c3[_0x477687(0x1c8)]);}}async['_loadPricingData'](){const _0x16ddbf=a0_0x416964;try{this['logger'][_0x16ddbf(0x238)]('Loading pricing data from server');const _0x1c80af=await this['_makeRequest']('/usage/pricing'),_0x150fc7=await _0x1c80af[_0x16ddbf(0x1e1)]();if(!_0x150fc7[_0x16ddbf(0x1c2)])throw new Error('Invalid pricing response from server');this['pricingData']['clear']();for(const [_0xfd35aa,_0x31cc10]of Object['entries'](_0x150fc7[_0x16ddbf(0x1c2)])){this[_0x16ddbf(0x241)](_0xfd35aa,_0x31cc10),this[_0x16ddbf(0x1fb)]['set'](_0xfd35aa,{'input':_0x31cc10[_0x16ddbf(0x229)],'output':_0x31cc10[_0x16ddbf(0x234)],'unit':_0x31cc10['unit']||_0x16ddbf(0x23d),'currency':_0x31cc10[_0x16ddbf(0x260)]||'USD'});}this[_0x16ddbf(0x233)]=new Date()['toISOString'](),this[_0x16ddbf(0x205)][_0x16ddbf(0x238)]('Loaded\x20pricing\x20for\x20'+this[_0x16ddbf(0x1fb)][_0x16ddbf(0x1f0)]+_0x16ddbf(0x209));}catch(_0x1c3216){this['logger']['error'](_0x16ddbf(0x273),_0x1c3216);throw new Error(_0x16ddbf(0x258)+_0x1c3216['message']);}}[a0_0x416964(0x241)](_0x3a578b,_0x74792d){const _0x5d60ed=a0_0x416964;if(typeof _0x74792d[_0x5d60ed(0x229)]!=='number'||_0x74792d[_0x5d60ed(0x229)]<0x0)throw new Error(_0x5d60ed(0x1d9)+_0x3a578b);if(typeof _0x74792d[_0x5d60ed(0x234)]!=='number'||_0x74792d['output']<0x0)throw new Error('Invalid\x20output\x20pricing\x20for\x20model\x20'+_0x3a578b);}async[a0_0x416964(0x1db)](){const _0x246fea=a0_0x416964;!this[_0x246fea(0x228)]&&await this[_0x246fea(0x1f6)]();let _0x117203=Array[_0x246fea(0x26a)](this[_0x246fea(0x1cd)]['values']());return _0x117203;}async[a0_0x416964(0x27b)](){const _0xa5a27e=a0_0x416964;return!this[_0xa5a27e(0x228)]&&await this[_0xa5a27e(0x1f6)](),new Map(this['pricingData']);}[a0_0x416964(0x1ec)](_0x34acff){const _0x56472e=a0_0x416964;return this[_0x56472e(0x1fb)]['get'](_0x34acff)||null;}['_isValidConversationId'](_0x2a6153){const _0x30cc2b=a0_0x416964;return typeof _0x2a6153==='string'&&_0x2a6153['length']>0x0&&_0x2a6153['length']<=0x64&&/^[a-zA-Z0-9_-]+$/[_0x30cc2b(0x26b)](_0x2a6153);}async['registerConversation'](_0x115f06,_0x4465bd,_0x3c218f=null){const _0x69e42c=a0_0x416964,_0x1b7b19=_0x3c218f||this[_0x69e42c(0x204)]();this[_0x69e42c(0x205)]['info'](_0x69e42c(0x27a)+_0x115f06);const _0x5849de=this[_0x69e42c(0x224)](_0x115f06);_0x5849de!==_0x115f06&&this[_0x69e42c(0x205)]['info']('Sanitized\x20conversation\x20ID\x20from\x20\x22'+_0x115f06+_0x69e42c(0x25d)+_0x5849de+'\x22');if(!this['_isValidConversationId'](_0x5849de))throw new Error(_0x69e42c(0x201)+_0x115f06);this[_0x69e42c(0x239)]['set'](_0x5849de,{'originalId':_0x115f06,'systemPrompt':_0x4465bd||'','messages':[],'model':_0x1b7b19,'createdAt':new Date()['toISOString'](),'lastActivity':new Date()[_0x69e42c(0x1fe)]()}),_0x5849de!==_0x115f06&&this[_0x69e42c(0x239)]['set'](_0x115f06,this[_0x69e42c(0x239)]['get'](_0x5849de));}['_getDefaultModel'](){const _0x547133=a0_0x416964,_0x11f972=['azure-openai-gpt4',_0x547133(0x1d1),'azure-openai-gpt35'];for(const _0x124ebc of _0x11f972){if(this[_0x547133(0x1cd)]['has'](_0x124ebc))return _0x124ebc;}const _0x592748=this['availableModels'][_0x547133(0x243)]()['next']()['value'];return _0x592748?_0x592748['name']:'azure-openai-gpt4';}async['sendMessage'](_0x592642,_0x24011e,_0x423e92){const _0x3f84a5=a0_0x416964;this['logger'][_0x3f84a5(0x238)]('Sending\x20message\x20to\x20server\x20for\x20conversation:\x20'+_0x592642);if(!this[_0x3f84a5(0x252)])throw new Error(_0x3f84a5(0x208));if(!this['apiKey'])throw new Error('No\x20API\x20key\x20available.\x20Please\x20set\x20your\x20API\x20key\x20first.');this[_0x3f84a5(0x265)](_0x592642,_0x24011e);const _0x5eef5e=this['_sanitizeConversationId'](_0x592642),_0x54473d=this[_0x3f84a5(0x239)][_0x3f84a5(0x27f)](_0x592642)?_0x592642:_0x5eef5e;if(!this[_0x3f84a5(0x239)][_0x3f84a5(0x27f)](_0x54473d))throw new Error(_0x3f84a5(0x237)+_0x592642+_0x3f84a5(0x259));const _0x226854=this[_0x3f84a5(0x239)][_0x3f84a5(0x245)](_0x54473d);_0x423e92&&(!_0x226854[_0x3f84a5(0x26c)]||_0x226854[_0x3f84a5(0x26c)]['length']===0x0)&&this[_0x3f84a5(0x222)](_0x226854,_0x423e92);const _0x40cdf7=this[_0x3f84a5(0x21e)](_0x5eef5e,_0x24011e,_0x226854);try{const _0x50deb9=await this[_0x3f84a5(0x23a)](_0x40cdf7);return this[_0x3f84a5(0x272)](_0x226854,_0x24011e,_0x50deb9),_0x50deb9[_0x3f84a5(0x240)];}catch(_0x2762a3){this[_0x3f84a5(0x205)][_0x3f84a5(0x216)]('Error\x20sending\x20message\x20to\x20server:',_0x2762a3);throw this[_0x3f84a5(0x21f)](_0x2762a3,_0x3f84a5(0x275));}}['_validateSendMessageInputs'](_0x41dd30,_0x137d15){if(!_0x41dd30||typeof _0x41dd30!=='string')throw new Error('Invalid\x20conversation\x20ID');if(!_0x137d15||typeof _0x137d15!=='string')throw new Error('Invalid\x20message\x20content');}[a0_0x416964(0x222)](_0x4ecc38,_0xfd3a72){const _0x3a0c97=a0_0x416964;_0xfd3a72[_0x3a0c97(0x26c)]&&Array[_0x3a0c97(0x223)](_0xfd3a72[_0x3a0c97(0x26c)])&&(_0x4ecc38[_0x3a0c97(0x26c)]=_0xfd3a72['messages']),_0xfd3a72['systemPrompt']&&typeof _0xfd3a72['systemPrompt']===_0x3a0c97(0x254)&&(_0x4ecc38['systemPrompt']=_0xfd3a72['systemPrompt']),_0xfd3a72[_0x3a0c97(0x256)]&&this['availableModels'][_0x3a0c97(0x27f)](_0xfd3a72[_0x3a0c97(0x256)])&&(_0x4ecc38['model']=_0xfd3a72['model']),_0x4ecc38[_0x3a0c97(0x214)]=new Date()['toISOString']();}['_buildChatRequestPayload'](_0x2682c3,_0x14517c,_0x4d9447){const _0x1feaa5=a0_0x416964;return{'conversationId':_0x2682c3,'message':_0x14517c['trim'](),'systemPrompt':_0x4d9447[_0x1feaa5(0x1c5)],'messages':_0x4d9447['messages']||[],'model':_0x4d9447[_0x1feaa5(0x256)],'requestId':this['_generateRequestId'](),'options':{'temperature':0.7,'maxTokens':this['_getModelMaxTokens'](_0x4d9447['model'])}};}[a0_0x416964(0x281)](){const _0x335795=a0_0x416964;return'req_'+Date[_0x335795(0x25b)]()+'_'+ ++this[_0x335795(0x22c)];}[a0_0x416964(0x1fd)](_0x19f51b){const _0x43a3f5=a0_0x416964,_0x578c20=this['availableModels']['get'](_0x19f51b);return _0x578c20?_0x578c20[_0x43a3f5(0x26d)]:0xfa0;}async['_sendChatRequest'](_0x4dc3f0){const _0x556c2e=a0_0x416964;try{const _0x1238dc=await this['_makeRequest'](_0x556c2e(0x246),{'method':'POST','body':JSON[_0x556c2e(0x206)](_0x4dc3f0)});if(!_0x1238dc['ok']){const _0x41433a=await this['_safeJsonParse'](_0x1238dc),_0x38c7a5=this['_createHttpError'](_0x1238dc['status'],_0x41433a['error']||_0x1238dc[_0x556c2e(0x22a)]);throw _0x38c7a5;}const _0x2df972=await _0x1238dc['json']();return this['_validateChatResponse'](_0x2df972),_0x2df972;}catch(_0x1d255a){throw _0x1d255a;}}['_validateChatResponse'](_0x127e9a){const _0x451854=a0_0x416964;if(!_0x127e9a['content']||typeof _0x127e9a[_0x451854(0x240)]!=='string')throw new Error('Invalid\x20response:\x20missing\x20or\x20invalid\x20content');if(_0x127e9a[_0x451854(0x1d6)]&&typeof _0x127e9a['usage']!==_0x451854(0x1cc))throw new Error(_0x451854(0x242));}[a0_0x416964(0x272)](_0x1dfa23,_0x2fb8e2,_0xd252c5){const _0x3ea1c4=a0_0x416964;_0xd252c5[_0x3ea1c4(0x1d6)]&&(this['lastInputTokenCount']=_0xd252c5[_0x3ea1c4(0x1d6)][_0x3ea1c4(0x27c)]||0x0,this[_0x3ea1c4(0x212)]=_0xd252c5[_0x3ea1c4(0x1d6)]['output_tokens']||0x0,this[_0x3ea1c4(0x247)][_0x3ea1c4(0x229)]+=this[_0x3ea1c4(0x25f)],this['tokenUsage']['output']+=this['lastOutputTokenCount']),_0x1dfa23['messages'][_0x3ea1c4(0x1f9)]({'role':'user','content':_0x2fb8e2},{'role':'assistant','content':_0xd252c5[_0x3ea1c4(0x240)]}),_0x1dfa23[_0x3ea1c4(0x214)]=new Date()['toISOString']();}async[a0_0x416964(0x1e5)](_0x16fc7f,_0x137c82){const _0x3e8b58=a0_0x416964;this['logger'][_0x3e8b58(0x238)]('Updating\x20server\x20conversation:\x20'+_0x16fc7f);const _0x14a121=this['_sanitizeConversationId'](_0x16fc7f),_0x26d2e2=this['conversations'][_0x3e8b58(0x27f)](_0x16fc7f)?_0x16fc7f:_0x14a121;if(!this['conversations']['has'](_0x26d2e2))throw new Error(_0x3e8b58(0x237)+_0x16fc7f+'\x20not\x20found');const _0x3872b5=this['conversations']['get'](_0x26d2e2);this['_updateConversationState'](_0x3872b5,_0x137c82);}async[a0_0x416964(0x211)](_0x2c7600,_0x4a00ac=null){const _0x56a20f=a0_0x416964;this[_0x56a20f(0x205)][_0x56a20f(0x238)]('Getting summary from server');if(!this[_0x56a20f(0x252)])throw new Error('Service\x20not\x20initialized.\x20Call\x20initialize()\x20first.');if(!this['apiKey'])throw new Error('No\x20API\x20key\x20available.\x20Please\x20set\x20your\x20API\x20key\x20first.');if(!_0x2c7600||typeof _0x2c7600!==_0x56a20f(0x254))throw new Error('Invalid\x20summary\x20prompt');let _0x46252e=_0x56a20f(0x1e3);if(_0x4a00ac&&this[_0x56a20f(0x239)][_0x56a20f(0x27f)](_0x4a00ac)){const _0x3c2d64=this[_0x56a20f(0x239)]['get'](_0x4a00ac);_0x46252e=_0x3c2d64[_0x56a20f(0x256)],this[_0x56a20f(0x205)][_0x56a20f(0x238)]('Using\x20conversation\x20model\x20for\x20summary:\x20'+_0x46252e);}else this[_0x56a20f(0x205)][_0x56a20f(0x25a)]('No conversation ID provided or conversation not found, using default model for summary');try{const _0x4666c7=await this['_makeRequest']('/llm/summary',{'method':'POST','body':JSON['stringify']({'prompt':_0x2c7600['trim'](),'model':_0x46252e})});if(!_0x4666c7['ok']){const _0x5d7d50=await this[_0x56a20f(0x1f7)](_0x4666c7);throw this['_createHttpError'](_0x4666c7['status'],_0x5d7d50[_0x56a20f(0x216)]||_0x4666c7[_0x56a20f(0x22a)]);}const _0x296646=await _0x4666c7['json']();return _0x296646[_0x56a20f(0x1d6)]&&(this['lastInputTokenCount']=_0x296646['usage'][_0x56a20f(0x27c)]||0x0,this['lastOutputTokenCount']=_0x296646['usage'][_0x56a20f(0x22d)]||0x0,this['tokenUsage']['input']+=this['lastInputTokenCount'],this['tokenUsage'][_0x56a20f(0x234)]+=this[_0x56a20f(0x212)]),_0x296646['content'];}catch(_0x579cb6){this[_0x56a20f(0x205)]['error']('Error getting summary from server:',_0x579cb6);throw this[_0x56a20f(0x21f)](_0x579cb6,_0x56a20f(0x1fa));}}async['getImageDescription'](_0x5b7409,_0x581df1,_0x1e1063={}){const _0x2510fc=a0_0x416964;this[_0x2510fc(0x205)][_0x2510fc(0x238)]('Getting image description from server');if(!this['isInitialized'])throw new Error(_0x2510fc(0x208));if(!this['apiKey'])throw new Error('No\x20API\x20key\x20available.\x20Please\x20set\x20your\x20API\x20key\x20first.');this[_0x2510fc(0x1d8)](_0x5b7409,_0x581df1);try{const _0x508da0=await this[_0x2510fc(0x280)]('/llm/vision',{'method':'POST','body':JSON[_0x2510fc(0x206)]({'image':_0x5b7409,'prompt':_0x581df1[_0x2510fc(0x219)](),'metadata':_0x1e1063||{}})}),_0x3c7b59=await this[_0x2510fc(0x1f7)](_0x508da0);if(!_0x508da0['ok'])throw this['_createHttpError'](_0x508da0['status'],_0x3c7b59['error']||_0x508da0[_0x2510fc(0x22a)]);return _0x3c7b59[_0x2510fc(0x1d6)]&&(this[_0x2510fc(0x25f)]=_0x3c7b59[_0x2510fc(0x1d6)][_0x2510fc(0x27c)]||0x0,this[_0x2510fc(0x212)]=_0x3c7b59[_0x2510fc(0x1d6)][_0x2510fc(0x22d)]||0x0,this[_0x2510fc(0x247)]['input']+=this[_0x2510fc(0x25f)],this[_0x2510fc(0x247)][_0x2510fc(0x234)]+=this[_0x2510fc(0x212)]),_0x3c7b59['content'];}catch(_0x21f1ae){this['logger'][_0x2510fc(0x216)]('Error getting image description from server:',_0x21f1ae);throw this['_enhanceError'](_0x21f1ae,_0x2510fc(0x226));}}async[a0_0x416964(0x1ea)](_0x1c43b4,_0x4383b8={}){const _0x5edcef=a0_0x416964;this['logger']['info']('Generating image from server');if(!this['isInitialized'])throw new Error('Service\x20not\x20initialized.\x20Call\x20initialize()\x20first.');if(!this['apiKey'])throw new Error('No\x20API\x20key\x20available.\x20Please\x20set\x20your\x20API\x20key\x20first.');this['_validateImageGenerationInputs'](_0x1c43b4,_0x4383b8);try{const _0x90162b=_0x4383b8[_0x5edcef(0x256)]||'azure-vision-flux-1-1';if(!_0x90162b||_0x90162b['trim']()==='')throw new Error('Model\x20name\x20cannot\x20be\x20empty');const _0x568c5a={'prompt':_0x1c43b4['trim'](),'model':_0x90162b,'size':_0x4383b8[_0x5edcef(0x1f0)]||_0x5edcef(0x1d0),'quality':_0x4383b8[_0x5edcef(0x20f)]||_0x5edcef(0x1e8),'response_format':_0x4383b8['responseFormat']||_0x5edcef(0x250),'requestId':this['_generateRequestId']()};this[_0x5edcef(0x205)][_0x5edcef(0x1fc)]('Sending\x20image\x20generation\x20request:',_0x568c5a);const _0x1cc923=await this[_0x5edcef(0x280)]('/llm/generate-image',{'method':_0x5edcef(0x24a),'body':JSON[_0x5edcef(0x206)](_0x568c5a)}),_0x452fd3=await this['_safeJsonParse'](_0x1cc923);if(!_0x1cc923['ok'])throw this['_createHttpError'](_0x1cc923[_0x5edcef(0x27d)],_0x452fd3['error']||_0x1cc923['statusText']);_0x452fd3[_0x5edcef(0x1d6)]&&(this['lastInputTokenCount']=_0x452fd3[_0x5edcef(0x1d6)][_0x5edcef(0x27c)]||0x0,this['lastOutputTokenCount']=_0x452fd3['usage'][_0x5edcef(0x22d)]||0x0,this['tokenUsage'][_0x5edcef(0x229)]+=this[_0x5edcef(0x25f)],this['tokenUsage']['output']+=this[_0x5edcef(0x212)]);const _0x2a4d1f=_0x452fd3?.[_0x5edcef(0x215)][0x0];return{'imageUrl':_0x2a4d1f?.['url'],'model':_0x452fd3[_0x5edcef(0x256)],'size':_0x452fd3['size']||_0x568c5a[_0x5edcef(0x1f0)],'prompt':_0x2a4d1f?.['revised_prompt']||_0x1c43b4,'usage':_0x452fd3[_0x5edcef(0x1d6)]};}catch(_0x2bd603){this['logger'][_0x5edcef(0x216)]('Error generating image from server:',_0x2bd603);throw this[_0x5edcef(0x21f)](_0x2bd603,_0x5edcef(0x268));}}['_validateImageGenerationInputs'](_0x8020e0,_0x2ab369){const _0x2fcd4b=a0_0x416964;if(!_0x8020e0||typeof _0x8020e0!==_0x2fcd4b(0x254))throw new Error(_0x2fcd4b(0x257));if(_0x8020e0[_0x2fcd4b(0x263)]>0xfa0)throw new Error('Image\x20generation\x20prompt\x20too\x20long\x20(max\x204000\x20characters)');if(_0x2ab369[_0x2fcd4b(0x256)]&&(typeof _0x2ab369[_0x2fcd4b(0x256)]!==_0x2fcd4b(0x254)||_0x2ab369[_0x2fcd4b(0x256)]['trim']()===''))throw new Error(_0x2fcd4b(0x1c7));if(_0x2ab369[_0x2fcd4b(0x1f0)]&&typeof _0x2ab369[_0x2fcd4b(0x1f0)]!==_0x2fcd4b(0x254))throw new Error('Invalid\x20size\x20parameter');if(_0x2ab369['quality']&&![_0x2fcd4b(0x1e8),'hd'][_0x2fcd4b(0x1c3)](_0x2ab369['quality']))throw new Error(_0x2fcd4b(0x202));}['_validateImageDescriptionInputs'](_0x29e242,_0x87ecc2){const _0x451380=a0_0x416964;if(!_0x29e242||typeof _0x29e242!=='string')throw new Error(_0x451380(0x20e));if(!_0x87ecc2||typeof _0x87ecc2!==_0x451380(0x254))throw new Error('Invalid\x20image\x20description\x20prompt');if(_0x29e242[_0x451380(0x263)]>0x32*0x400*0x400)throw new Error(_0x451380(0x210));}async[a0_0x416964(0x269)](_0x461de7){const _0x11b702=a0_0x416964,_0x3372b0=this[_0x11b702(0x224)](_0x461de7),_0x361095=this[_0x11b702(0x239)][_0x11b702(0x27f)](_0x461de7)?_0x461de7:_0x3372b0;if(!this['conversations'][_0x11b702(0x27f)](_0x361095))throw new Error('Conversation\x20'+_0x461de7+'\x20not\x20found');const _0x6bc839=this[_0x11b702(0x239)]['get'](_0x361095);let _0x1a3e53=this[_0x11b702(0x1f3)](_0x6bc839['systemPrompt']);for(const _0x29d85c of _0x6bc839[_0x11b702(0x26c)]){_0x1a3e53+=this['_estimateTokens'](_0x29d85c[_0x11b702(0x240)]);}return _0x1a3e53;}['_estimateTokens'](_0x2cba2b){const _0x27f4f5=a0_0x416964;if(!_0x2cba2b||typeof _0x2cba2b!==_0x27f4f5(0x254))return 0x0;return Math[_0x27f4f5(0x244)](_0x2cba2b['length']/0x4);}['supportsModel'](_0x1cfcc8){const _0x4c9a2e=a0_0x416964;return this['availableModels'][_0x4c9a2e(0x27f)](_0x1cfcc8);}[a0_0x416964(0x1ce)](){const _0xa669e3=a0_0x416964;let _0x13a650=0x0;for(const _0x3f6805 of this[_0xa669e3(0x1cd)][_0xa669e3(0x243)]()){_0x3f6805['maxTokens']>_0x13a650&&(_0x13a650=_0x3f6805['maxTokens']);}return _0x13a650||0x186a0;}['getLastInputTokenCount'](){const _0x98f051=a0_0x416964;return this[_0x98f051(0x25f)];}['getLastOutputTokenCount'](){return this['lastOutputTokenCount'];}[a0_0x416964(0x231)](){const _0x57005d=a0_0x416964;return{...this[_0x57005d(0x247)]};}async['refreshPricingData'](){const _0x5a7351=a0_0x416964;this['logger'][_0x5a7351(0x238)]('Refreshing pricing data from server'),await this[_0x5a7351(0x20c)]();}async[a0_0x416964(0x253)](){const _0x1497ff=a0_0x416964;try{const _0x13b2c0=await this['_makeRequest'](_0x1497ff(0x1f8));if(!_0x13b2c0['ok'])return{'status':_0x1497ff(0x1dc),'error':'HTTP\x20'+_0x13b2c0[_0x1497ff(0x27d)]+':\x20'+_0x13b2c0['statusText']};const _0x580291=await _0x13b2c0[_0x1497ff(0x1e1)]();return{'status':'healthy',..._0x580291};}catch(_0xe96c8c){return{'status':_0x1497ff(0x1dc),'error':_0xe96c8c[_0x1497ff(0x1f5)]};}}async[a0_0x416964(0x1ef)](){const _0x48c9ff=a0_0x416964;this[_0x48c9ff(0x205)]['info'](_0x48c9ff(0x1cf)),this[_0x48c9ff(0x239)]['clear'](),this[_0x48c9ff(0x1cd)][_0x48c9ff(0x1c6)](),this['pricingData']['clear'](),this['isInitialized']=![],this[_0x48c9ff(0x26e)]=null,this['logger']['info']('Server\x20LLM\x20service\x20shut\x20down\x20successfully');}async['_makeRequest'](_0x12a689,_0x58e318={}){const _0x52902d=a0_0x416964,_0x18ae19=''+this[_0x52902d(0x276)]+_0x12a689,_0x23c354={'method':_0x58e318['method']||_0x52902d(0x225),'headers':{'Content-Type':'application/json','User-Agent':'Loxia-CLI/1.0.0',..._0x58e318['headers']},'timeout':this['timeout'],..._0x58e318};this[_0x52902d(0x26e)]&&(_0x23c354['headers'][_0x52902d(0x235)]=_0x52902d(0x1e2)+this[_0x52902d(0x26e)]);try{const _0x13025e=await a0_0x499e6f(_0x18ae19,_0x23c354);return _0x13025e;}catch(_0x390e37){throw this['_createNetworkError'](_0x390e37,_0x18ae19);}}async['_safeJsonParse'](_0x165246){try{return await _0x165246['json']();}catch(_0x4435c3){return{};}}['_enhanceError'](_0x3b96c6,_0x34a910){const _0x458783=a0_0x416964,_0x29f56b=new Error(_0x34a910+'\x20failed:\x20'+_0x3b96c6['message']);return _0x29f56b[_0x458783(0x23b)]=_0x34a910,_0x29f56b['originalError']=_0x3b96c6,_0x29f56b['errorType']=this['_classifyError'](_0x3b96c6),_0x29f56b;}['_createHttpError'](_0x59e292,_0x7b88bc){const _0x3559ec=a0_0x416964,_0x5b9439=new Error('HTTP\x20'+_0x59e292+':\x20'+_0x7b88bc);return _0x5b9439[_0x3559ec(0x27d)]=_0x59e292,_0x5b9439[_0x3559ec(0x1c1)]=this[_0x3559ec(0x23e)](_0x59e292),_0x5b9439;}['_createNetworkError'](_0x2aaeac,_0x26f34c){const _0x427412=a0_0x416964,_0x4d682a=new Error(_0x427412(0x1cb)+_0x2aaeac['message']);_0x4d682a[_0x427412(0x218)]=_0x26f34c,_0x4d682a['originalError']=_0x2aaeac,_0x4d682a['errorType']=ERROR_TYPES[_0x427412(0x1d5)];if(_0x2aaeac['code']===_0x427412(0x274))_0x4d682a[_0x427412(0x1f5)]=_0x427412(0x26f);else{if(_0x2aaeac[_0x427412(0x21d)]==='ENOTFOUND')_0x4d682a[_0x427412(0x1f5)]=_0x427412(0x249);else(_0x2aaeac[_0x427412(0x21d)]==='ETIMEDOUT'||_0x2aaeac['name']===_0x427412(0x251))&&(_0x4d682a[_0x427412(0x1f5)]=_0x427412(0x220),_0x4d682a['errorType']=ERROR_TYPES['TIMEOUT']);}return _0x4d682a;}['_classifyError'](_0x16d5c7){const _0x54a007=a0_0x416964;if(_0x16d5c7[_0x54a007(0x27d)])return this[_0x54a007(0x23e)](_0x16d5c7['status']);if(_0x16d5c7[_0x54a007(0x21d)]==='ECONNREFUSED'||_0x16d5c7['code']===_0x54a007(0x1df))return ERROR_TYPES[_0x54a007(0x1d5)];if(_0x16d5c7[_0x54a007(0x21d)]===_0x54a007(0x20b)||_0x16d5c7['name']===_0x54a007(0x251))return ERROR_TYPES['TIMEOUT'];return ERROR_TYPES['UNKNOWN'];}[a0_0x416964(0x23e)](_0xff36d6){const _0x1c8b96=a0_0x416964;switch(_0xff36d6){case HTTP_STATUS[_0x1c8b96(0x20d)]:case HTTP_STATUS['FORBIDDEN']:return ERROR_TYPES[_0x1c8b96(0x1c0)];case HTTP_STATUS[_0x1c8b96(0x1de)]:return ERROR_TYPES['VALIDATION'];case HTTP_STATUS[_0x1c8b96(0x24c)]:return ERROR_TYPES[_0x1c8b96(0x232)];case HTTP_STATUS['INTERNAL_SERVER_ERROR']:case HTTP_STATUS['BAD_GATEWAY']:case HTTP_STATUS['SERVICE_UNAVAILABLE']:case HTTP_STATUS[_0x1c8b96(0x24b)]:return ERROR_TYPES['SERVER'];default:return ERROR_TYPES['UNKNOWN'];}}['_isNonRetryableError'](_0xe6862c){const _0x403d88=a0_0x416964,_0x5af35a=[ERROR_TYPES[_0x403d88(0x1c0)],ERROR_TYPES[_0x403d88(0x1da)]],_0x3b0c0e=[HTTP_STATUS[_0x403d88(0x1de)],HTTP_STATUS['UNAUTHORIZED'],HTTP_STATUS['FORBIDDEN'],HTTP_STATUS[_0x403d88(0x1c4)]];return _0x5af35a['includes'](_0xe6862c[_0x403d88(0x1c1)])||_0x3b0c0e['includes'](_0xe6862c['status']);}['_delay'](_0x24f359){return new Promise(_0x2385ae=>setTimeout(_0x2385ae,_0x24f359));}['_decryptKey'](_0x214bd0){const _0xacfda1=a0_0x416964,_0x351be8=_0xacfda1(0x270),_0x274c92=Buffer['from'](_0x214bd0,_0xacfda1(0x27e))[_0xacfda1(0x23c)]();let _0x38a307='';for(let _0x8d776d=0x0;_0x8d776d<_0x274c92[_0xacfda1(0x263)];_0x8d776d++){_0x38a307+=String[_0xacfda1(0x236)](_0x274c92[_0xacfda1(0x24d)](_0x8d776d)^_0x351be8[_0xacfda1(0x24d)](_0x8d776d%_0x351be8[_0xacfda1(0x263)]));}return _0x38a307;}}