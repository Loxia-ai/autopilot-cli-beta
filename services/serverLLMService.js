function a0_0x4b3e(){const _0x1172f5=['ru5pvezpvu5e','B3jPz2LUywXfCNjVCG','y2XLyxi','ywXS','x3zHBgLKyxrLtw9KzwXeyxrH','yxv0AgvUDgLJyxrPB24','re5tigXVB2T1CcbMywLSzwqUienOzwnRihnLCNzLCIbvuKWU','mJq0odjkC0zHuMW','z2v0','Aw1Hz2uTz2vUzxjHDgLVBG','Ahr0Chm6','Aw5WDxq','AgvHzgvYCW','z2v0u2vYDMvYsgvHBhrO','sw52ywXPzcbYzxnWB25ZztOGAw52ywXPzcb1C2fNzsbKyxrH','l2XSBs9JAgf0','z2v0qxzHAwXHyMXLtw9KzwXZ','y3vYCMvUy3K','tw9KzwWGBMfTzsbJyw5UB3qGyMuGzw1WDhK','sw52ywXPzcbYzxnWB25ZztOGBwLZC2LUzYbVCIbPBNzHBgLKignVBNrLBNq','u2vUzgLUzYbTzxnZywDLihrVihnLCNzLCIbMB3iGy29UDMvYC2f0Aw9UoIa','zNjVBq','CxvHBgL0Eq','yxP1CMuTB3bLBMfPlwDWDdq','mtaYnhGXmdi0','Bwf4vg9Rzw5Z','C2vYDMvYvxjS','ChjPy2LUzW','B3v0Chv0x3rVA2vUCW','mJm5nJyXEfPeyujy','sw5PDgLHBgL6Aw5NihnLCNzLCIbmte0GC2vYDMLJzq','y2f0zwDVCNK','x2nSyxnZAwz5shr0CevYCM9Y','BwvZC2fNzq','x3bYB2nLC3ndAgf0uMvZCg9UC2u','ChjPy2LUz0rHDge','sw52ywXPzcbVDxrWDxqGChjPy2LUzYbMB3iGBw9KzwWG','C2v0','uMvNAxn0zxjPBMCGy29UDMvYC2f0Aw9UihDPDgGGC2vYDMvYoIa','z2v0tgfZDe91Dhb1DfrVA2vUq291BNq','rMfPBgvKihrVigXVywqGBw9KzwXZoIa','zxn0Aw1HDgvuB2TLBKnVDw50','ig5VDcbMB3vUza','x3zHBgLKyxrLq2HHDfjLC3bVBNnL','u2vYDMvYifvstcbTDxn0ihvZzsbivfrqig9YieHuvfbtihbYB3rVy29S','rMfPBgvKihrVigXVywqGyxzHAwXHyMXLig1VzgvSCZO','mte2mtC1nMfJtvDhCq','x3vWzgf0zunVBNzLCNnHDgLVBLn0yxrL','ig1VzgvSCYbMCM9TihnLCNzLCG','qxv0Ag9YAxPHDgLVBG','C2vYDMvY','B3v0Chv0','x2XVywrbDMfPBgfIBgvnB2rLBhm','tKvuv09ssW','odq3mtKWzw1vCwTc','y29Kzq','DxjS','yxP1CMuTDMLZAw9UlwzSDxGTms0X','zxjYB3i','C3LZDgvTuhjVBxb0','x2nYzwf0zuH0DhbfCNjVCG','C2vUzf9TzxnZywDL','z2v0u3vTBwfYEq','rK9sqKLerevo','z2v0tw9KzwXqCMLJAw5N','x2LZtM9UuMv0CNLHyMXLrxjYB3i','Bg9HzgvKu2vYDMvYrgf0yq','q29UDMvYC2f0Aw9Uia','CMv2AxnLzf9WCM9TChq','Dg9Rzw5vC2fNzq','x3zHBgLKyxrLu2vYDMvYvxjS','qKfex1jfuvvfu1q','C3rYAw5NAwz5','qvvusevoveLdqvrjt04','Bw9KzwXZ','x3zHBgLKyxrLu2vUze1LC3nHz2vjBNb1Dhm','tK9ux0zpvu5e','ndGXndu0ngztz1n1Cq','yxbWBgLJyxrPB24VANnVBG','yxbPs2v5','ue9tva','u2vYDMLJzsbUB3qGAw5PDgLHBgL6zwqUienHBgWGAw5PDgLHBgL6zsGPigzPCNn0lG','z2v0tgfZDeLUChv0vg9Rzw5dB3vUDa','x2XVywrqCMLJAw5Nrgf0yq','sw52ywXPzcbZzxj2zxiGvvjmoIa','BgfZDe91Dhb1DfrVA2vUq291BNq','sw52ywXPzcbTyxHuB2TLBNmGzM9Yig1VzgvSia','yJy0x2PZB24','BM93','sw1Hz2uGzgf0ysb0B28GBgfYz2u','BMv4Da','C3rHDhvZ','x3nHzMvkC29UugfYC2u','u0vsvKvs','CMvHzezPBgu','ChjVDg9JB2W','sw52ywXPzcbPBwfNzsbKzxnJCMLWDgLVBIbWCM9TChq','DhLWzq','Bg94AweTBg9JywWTA2v5','tM8GqvbjigTLEsbHDMfPBgfIBguUifbSzwfZzsbZzxqGEw91CIbbueKGA2v5igzPCNn0lG','CMvXDwvZDeLK','neTZyw9HyW','x2vZDgLTyxrLvg9Rzw5Z','sw52ywXPzcbXDwfSAxr5ihbHCMfTzxrLCIaOBxvZDcbIzsaIC3rHBMrHCMqIig9YicjOzciP','x2rLBgf5','DgLTzw91Da','odbHyKP6y3G','y2HHCKnVzgvbDa','z2vUzxjHDgvFAw1Hz2u','AxnjBML0AwfSAxPLza','x2vUAgfUy2vfCNjVCG','x2LZvMfSAwrdB252zxjZyxrPB25jza','x3nHBML0AxPLq29UDMvYC2f0Aw9Uswq','B3bLCMf0Aw9U','zNmVChjVBwLZzxm','r0furvDbwv9usu1ft1vu','Aw5JBhvKzxm','x3zHBgLKyxrLsw1Hz2vezxnJCMLWDgLVBKLUChv0CW','yxP1CMuTywKTCgHPna','C3vWCg9YDhnwAxnPB24','x2XVywrbCgLlzxK','Aw5WDxrFDg9Rzw5Z','yxP1CMuTB3bLBMfPlwDWDdm1','z2v0x3n1Bw1HCNK','DxrMoa','DhjPBq','l2XSBs9TB2rLBhm','C2L6zq','vu5ltK9xtG','zxjYB3juExbL','DxnHz2u','Bwv0Ag9K','C3vWCg9YDhntExn0zw0','Aw5MBW','Bwf4uMv0CMLLCW','z2v0sw1Hz2vezxnJCMLWDgLVBG','sw52ywXPzcbTzxnZywDLignVBNrLBNq','Dg9mB3DLCKnHC2u','x21HA2vszxf1zxn0','C3rHDhvZvgv4Da','yw50AhjVCgLJlxnVBM5LDa','veLnru9vva','Bg9Nz2vY','Aw1Hz2vZ','y29UDMvYC2f0Aw9UCW','CMvWBgfJzq','DMfSDwvZ','x2XVywrtzxj2zxjeyxrH','rMfPBgvKihrVigXVywqGChjPy2LUzZOG','x3zHBgLKyxrLsw1Hz2vhzw5LCMf0Aw9Usw5WDxrZ','C3rYAw5N','CMvXDwvZDcbLBNrPDhKGDg9VigXHCMDL','BNvTyMvY','Ahr0CdO','mJu4mdi3m2HQCerUsG','y29UDgvUDcbSzw5NDgGGzxHJzwvKCYbSAw1PDa','BgvUz3rO','BMfTzq','AgfZ','runptK5sruzvu0ve','q29UBMvJDgLVBIbYzwz1C2vKlIbtzxj2zxiGBwf5igjLigrVD24U','u2vYDMvYieXmtsbZzxj2AwnLigLUAxrPywXPEMvKihn1y2nLC3nMDwXSEq','vKfmsurbveLptG','y29UDgvUDa','x2DLBMvYyxrLuMvXDwvZDeLK','C2H1DgrVD24','Cgf0Aa','sw52ywXPzcbZDw1Tyxj5ihbYB21WDa','x2j1AwXKq2HHDfjLCxvLC3rqyxLSB2fK','ANnVBG','yxzHAwXHyMXLtw9KzwXZ','CMvNAxn0zxjdB252zxjZyxrPB24','BgfZDeLUChv0vg9Rzw5dB3vUDa','Cgf5Bg9Hzcb0B28GBgfYz2u','z2v0vg9Rzw5vC2fNzq','sw1Hz2uGz2vUzxjHDgLVBIbWCM9TChqGDg9VigXVBMCGkg1HEca0mdaWignOyxjHy3rLCNmP','rvrjtuvet1vu','DxbKyxrLq29UDMvYC2f0Aw9U','x2rLy3j5ChrlzxK','ntD6s0HyDgK','x2nYzwf0zu5LDhDVCMTfCNjVCG','l2XSBs9ZDw1Tyxj5','rMfPBgvKihrVignYzwf0zsb2ywXPzcbJB252zxjZyxrPB24GsuqGzNjVBtOG','BgfZDfbYAwnPBMDvCgrHDgu','C3vIC3rYAw5N','Dg9ju09tDhjPBMC','y29UDMvYC2f0Aw9Ulq','Bw9KzwW','zw50CMLLCW','ndG0mdi4mhfetufIzG','BwvZC2fNzxm','Dg9tDhjPBMC','yxnZAxn0yw50'];a0_0x4b3e=function(){return _0x1172f5;};return a0_0x4b3e();}const a0_0x8c5fd6=a0_0x3a37;(function(_0x44a332,_0x27791c){const _0x57049c=a0_0x3a37,_0x355ebf=_0x44a332();while(!![]){try{const _0x44ab97=parseInt(_0x57049c(0x28d))/0x1*(-parseInt(_0x57049c(0x1e1))/0x2)+parseInt(_0x57049c(0x1f7))/0x3+parseInt(_0x57049c(0x23f))/0x4*(-parseInt(_0x57049c(0x210))/0x5)+parseInt(_0x57049c(0x208))/0x6+-parseInt(_0x57049c(0x227))/0x7+-parseInt(_0x57049c(0x297))/0x8+parseInt(_0x57049c(0x274))/0x9*(parseInt(_0x57049c(0x244))/0xa);if(_0x44ab97===_0x27791c)break;else _0x355ebf['push'](_0x355ebf['shift']());}catch(_0x1d1754){_0x355ebf['push'](_0x355ebf['shift']());}}}(a0_0x4b3e,0x6362f));function a0_0x3a37(_0x58e4b2,_0x196542){const _0x4b3e55=a0_0x4b3e();return a0_0x3a37=function(_0x3a37c8,_0x18270b){_0x3a37c8=_0x3a37c8-0x1d9;let _0x2b44aa=_0x4b3e55[_0x3a37c8];if(a0_0x3a37['isjFCg']===undefined){var _0x5581c2=function(_0x26408d){const _0x1547b5='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xd21fe6='',_0x2771bb='';for(let _0x4a2c47=0x0,_0x57a605,_0x39cbc0,_0x1d1acb=0x0;_0x39cbc0=_0x26408d['charAt'](_0x1d1acb++);~_0x39cbc0&&(_0x57a605=_0x4a2c47%0x4?_0x57a605*0x40+_0x39cbc0:_0x39cbc0,_0x4a2c47++%0x4)?_0xd21fe6+=String['fromCharCode'](0xff&_0x57a605>>(-0x2*_0x4a2c47&0x6)):0x0){_0x39cbc0=_0x1547b5['indexOf'](_0x39cbc0);}for(let _0x2c1bc2=0x0,_0x4d7728=_0xd21fe6['length'];_0x2c1bc2<_0x4d7728;_0x2c1bc2++){_0x2771bb+='%'+('00'+_0xd21fe6['charCodeAt'](_0x2c1bc2)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2771bb);};a0_0x3a37['vHmOnv']=_0x5581c2,_0x58e4b2=arguments,a0_0x3a37['isjFCg']=!![];}const _0xc2b9a3=_0x4b3e55[0x0],_0xe75ae4=_0x3a37c8+_0xc2b9a3,_0x3acd5e=_0x58e4b2[_0xe75ae4];return!_0x3acd5e?(_0x2b44aa=a0_0x3a37['vHmOnv'](_0x2b44aa),_0x58e4b2[_0xe75ae4]=_0x2b44aa):_0x2b44aa=_0x3acd5e,_0x2b44aa;},a0_0x3a37(_0x58e4b2,_0x196542);}import a0_0x26408d from'node-fetch';const DEFAULT_TIMEOUT_MS=0xea60,DEFAULT_MAX_RETRIES=0x3,DEFAULT_RETRY_DELAY_MS=0x7530,RETRY_DELAY_MULTIPLIER=0x2,API_VERSION='v1',HTTP_STATUS={'OK':0xc8,'CREATED':0xc9,'BAD_REQUEST':0x190,'UNAUTHORIZED':0x191,'FORBIDDEN':0x193,'NOT_FOUND':0x194,'TOO_MANY_REQUESTS':0x1ad,'INTERNAL_SERVER_ERROR':0x1f4,'BAD_GATEWAY':0x1f6,'SERVICE_UNAVAILABLE':0x1f7,'GATEWAY_TIMEOUT':0x1f8},ERROR_TYPES={'AUTHENTICATION':a0_0x8c5fd6(0x1df),'NETWORK':'network','TIMEOUT':a0_0x8c5fd6(0x243),'RATE_LIMIT':'rate_limit','SERVER':'server','VALIDATION':'validation','UNKNOWN':'unknown'},HTTP_STATUS_CODES={'REQUEST_ENTITY_TOO_LARGE':0x19d,'BAD_REQUEST':0x190,'UNAUTHORIZED':0x191,'FORBIDDEN':0x193,'NOT_FOUND':0x194,'TOO_MANY_REQUESTS':0x1ad,'INTERNAL_SERVER_ERROR':0x1f4},REQUEST_SIZE_ERROR_PATTERNS=[a0_0x8c5fd6(0x271),a0_0x8c5fd6(0x287),'request\x20too\x20large','message\x20too\x20long',a0_0x8c5fd6(0x275)];export class ServerLLMService{constructor(_0x1547b5,_0xd21fe6){const _0x58937c=a0_0x8c5fd6;this['config']=_0x1547b5,this[_0x58937c(0x268)]=_0xd21fe6,this[_0x58937c(0x1f4)]=this['_validateServerUrl'](_0x1547b5['serverUrl']),this[_0x58937c(0x229)]=null,this['isInitialized']=![],this['timeout']=_0x1547b5['services']?.[_0x58937c(0x20c)]?.['timeout']||DEFAULT_TIMEOUT_MS,this[_0x58937c(0x260)]=_0x1547b5['services']?.[_0x58937c(0x20c)]?.['retries']||DEFAULT_MAX_RETRIES,this['requestId']=0x0,this[_0x58937c(0x284)]=new Map(),this[_0x58937c(0x1fd)]=new Map(),this['lastPricingUpdate']=null,this['conversations']=new Map(),this['lastInputTokenCount']=0x0,this[_0x58937c(0x22f)]=0x0,this['tokenUsage']={'input':0x0,'output':0x0},this[_0x58937c(0x268)][_0x58937c(0x25f)]('Server\x20LLM\x20service\x20initialized',{'serverUrl':this[_0x58937c(0x1f4)],'timeout':this[_0x58937c(0x243)],'maxRetries':this['maxRetries']});}[a0_0x8c5fd6(0x220)](_0x2771bb){const _0x54bc69=a0_0x8c5fd6;if(!_0x2771bb)throw new Error('Server\x20URL\x20is\x20required');try{const _0x4a2c47=new URL(_0x2771bb);if(![_0x54bc69(0x273),_0x54bc69(0x1e4)][_0x54bc69(0x24e)](_0x4a2c47[_0x54bc69(0x239)]))throw new Error(_0x54bc69(0x206));return _0x4a2c47[_0x54bc69(0x299)]()[_0x54bc69(0x26b)](/\/$/,'');}catch(_0x57a605){throw new Error(_0x54bc69(0x22e)+_0x57a605[_0x54bc69(0x1fb)]);}}['_sanitizeConversationId'](_0x39cbc0){const _0xe0c0eb=a0_0x8c5fd6;if(!_0x39cbc0||typeof _0x39cbc0!=='string')return _0xe0c0eb(0x294)+Date[_0xe0c0eb(0x232)]();let _0x1d1acb=_0x39cbc0[_0xe0c0eb(0x26b)](/\s+/g,'-')[_0xe0c0eb(0x26b)](/[^a-zA-Z0-9_-]/g,'')[_0xe0c0eb(0x26b)](/-+/g,'-')['replace'](/^-+|-+$/g,'')[_0xe0c0eb(0x263)]();if(!_0x1d1acb)_0x1d1acb='conversation-'+Date[_0xe0c0eb(0x232)]();else _0x1d1acb[_0xe0c0eb(0x276)]>0x32&&(_0x1d1acb=_0x1d1acb[_0xe0c0eb(0x292)](0x0,0x28)+'-'+Date['now']()[_0xe0c0eb(0x299)]()['slice'](-0x8));return _0x1d1acb;}async['initialize'](){const _0x2ba0a4=a0_0x8c5fd6;if(this[_0x2ba0a4(0x247)])return;try{this['logger'][_0x2ba0a4(0x25f)](_0x2ba0a4(0x1f8)),this[_0x2ba0a4(0x229)]=await this[_0x2ba0a4(0x252)]();if(!this[_0x2ba0a4(0x229)])throw new Error('No\x20API\x20key\x20found.\x20Please\x20run\x20\x22loxia\x20key\x20--set\x20<your-api-key>\x22\x20first.');await this['_loadServerData'](),this['isInitialized']=!![],this['logger']['info'](_0x2ba0a4(0x27b),{'modelsLoaded':this['availableModels']['size'],'pricingModels':this[_0x2ba0a4(0x1fd)][_0x2ba0a4(0x259)]});}catch(_0x2c1bc2){this[_0x2ba0a4(0x268)]['error']('Failed\x20to\x20initialize\x20server\x20LLM\x20service:',_0x2c1bc2);throw _0x2c1bc2;}}async['_loadServerData'](){const _0x17e886=a0_0x8c5fd6;await Promise[_0x17e886(0x1dd)]([this[_0x17e886(0x20e)](),this['_loadPricingData']()]),this[_0x17e886(0x21c)]=!![];}async['_loadApiKey'](){const _0x2593ee=a0_0x8c5fd6;try{const _0x4d7728=await import('os'),_0x296196=await import(_0x2593ee(0x280)),_0xb07802=await import(_0x2593ee(0x24c)),_0x589622=_0x296196['join'](_0x4d7728['homedir'](),'.loxia','credentials'),_0x24be43=await _0xb07802[_0x2593ee(0x238)](_0x589622,_0x2593ee(0x256)),_0x160239=JSON['parse'](_0x24be43);return this[_0x2593ee(0x28c)](_0x160239[_0x2593ee(0x229)]);}catch(_0x14f9a6){return this['logger']['debug']('Failed to load API key from credentials file:',_0x14f9a6),null;}}async['_validateApiKey'](){const _0x3a71a2=a0_0x8c5fd6;try{const _0x70d75=await this['_makeRequest']('/auth/verify',{'method':_0x3a71a2(0x22a)});return _0x70d75['ok'];}catch(_0x347481){return this[_0x3a71a2(0x268)]['warn']('API\x20key\x20validation\x20failed:',_0x347481),![];}}async[a0_0x8c5fd6(0x20e)](){const _0x3d5fd7=a0_0x8c5fd6;try{this[_0x3d5fd7(0x268)][_0x3d5fd7(0x25f)]('Loading available models from server');const _0x281fe3=await this['_makeRequest'](_0x3d5fd7(0x258)),_0x92f194=await _0x281fe3[_0x3d5fd7(0x283)]();if(!_0x92f194[_0x3d5fd7(0x224)]||!Array['isArray'](_0x92f194['models']))throw new Error('Invalid models response from server');this['availableModels']['clear']();for(const _0x93c1b6 of _0x92f194[_0x3d5fd7(0x224)]){this[_0x3d5fd7(0x1de)](_0x93c1b6),this[_0x3d5fd7(0x284)][_0x3d5fd7(0x1ff)](_0x93c1b6[_0x3d5fd7(0x277)],{'name':_0x93c1b6[_0x3d5fd7(0x277)],'category':_0x93c1b6['category'],'type':_0x93c1b6[_0x3d5fd7(0x23b)],'maxTokens':_0x93c1b6[_0x3d5fd7(0x1f3)],'supportsVision':_0x93c1b6[_0x3d5fd7(0x251)]||![],'supportsSystem':_0x93c1b6[_0x3d5fd7(0x25e)]!==![],'pricing':_0x93c1b6[_0x3d5fd7(0x1f5)]||{}});}this[_0x3d5fd7(0x268)][_0x3d5fd7(0x25f)]('Loaded\x20'+this['availableModels'][_0x3d5fd7(0x259)]+_0x3d5fd7(0x20a));}catch(_0x327eb1){this['logger']['error'](_0x3d5fd7(0x207),_0x327eb1);throw new Error(_0x3d5fd7(0x202)+_0x327eb1[_0x3d5fd7(0x1fb)]);}}[a0_0x8c5fd6(0x1de)](_0x21f971){const _0x38466e=a0_0x8c5fd6,requiredFields=[_0x38466e(0x277),_0x38466e(0x1f9),'type'];for(const _0x28a2fe of requiredFields){if(!_0x21f971[_0x28a2fe])throw new Error('Model\x20missing\x20required\x20field:\x20'+_0x28a2fe);}if(_0x21f971['type']!==_0x38466e(0x1e3)){if(typeof _0x21f971[_0x38466e(0x1f3)]!==_0x38466e(0x272)||_0x21f971['maxTokens']<=0x0)throw new Error(_0x38466e(0x230)+_0x21f971['name']);}}async[a0_0x8c5fd6(0x22d)](){const _0x50b5ae=a0_0x8c5fd6;try{this[_0x50b5ae(0x268)][_0x50b5ae(0x25f)]('Loading pricing data from server');const _0x36f153=await this[_0x50b5ae(0x264)]('/usage/pricing'),_0x19c685=await _0x36f153['json']();if(!_0x19c685['pricing'])throw new Error('Invalid pricing response from server');this['pricingData'][_0x50b5ae(0x1dc)]();for(const [_0x3de6a7,_0x22a17b]of Object[_0x50b5ae(0x296)](_0x19c685['pricing'])){this['_validatePricingData'](_0x3de6a7,_0x22a17b),this[_0x50b5ae(0x1fd)]['set'](_0x3de6a7,{'input':_0x22a17b['input'],'output':_0x22a17b['output'],'unit':_0x22a17b['unit']||'1K\x20tokens','currency':_0x22a17b[_0x50b5ae(0x1eb)]||'USD'});}this[_0x50b5ae(0x291)]=new Date()['toISOString'](),this['logger'][_0x50b5ae(0x25f)]('Loaded\x20pricing\x20for\x20'+this[_0x50b5ae(0x1fd)][_0x50b5ae(0x259)]+'\x20models');}catch(_0x4038e1){this['logger']['error']('Failed\x20to\x20load\x20pricing\x20data:',_0x4038e1);throw new Error(_0x50b5ae(0x26e)+_0x4038e1[_0x50b5ae(0x1fb)]);}}['_validatePricingData'](_0x1dc280,_0xae4e04){const _0x23e443=a0_0x8c5fd6;if(typeof _0xae4e04['input']!=='number'||_0xae4e04[_0x23e443(0x1e5)]<0x0)throw new Error('Invalid\x20input\x20pricing\x20for\x20model\x20'+_0x1dc280);if(typeof _0xae4e04[_0x23e443(0x20d)]!=='number'||_0xae4e04['output']<0x0)throw new Error(_0x23e443(0x1fe)+_0x1dc280);}async[a0_0x8c5fd6(0x1ea)](){const _0x4b25eb=a0_0x8c5fd6;!this['loadedServerData']&&await this[_0x4b25eb(0x26d)]();let _0x4dad48=Array['from'](this['availableModels'][_0x4b25eb(0x26c)]());return _0x4dad48;}async['getPricingData'](){const _0x3be2d3=a0_0x8c5fd6;return!this[_0x3be2d3(0x21c)]&&await this[_0x3be2d3(0x26d)](),new Map(this['pricingData']);}[a0_0x8c5fd6(0x21a)](_0x28782a){const _0x5ef801=a0_0x8c5fd6;return this[_0x5ef801(0x1fd)][_0x5ef801(0x1e2)](_0x28782a)||null;}[a0_0x8c5fd6(0x249)](_0x39e17f){const _0x1ba235=a0_0x8c5fd6;return typeof _0x39e17f==='string'&&_0x39e17f[_0x1ba235(0x276)]>0x0&&_0x39e17f['length']<=0x64&&/^[a-zA-Z0-9_-]+$/['test'](_0x39e17f);}async[a0_0x8c5fd6(0x285)](_0x55f2e9,_0x2c2660,_0x354ba3=null){const _0x1c5ad6=a0_0x8c5fd6,_0x6b7812=_0x354ba3||this['_getDefaultModel']();this[_0x1c5ad6(0x268)]['info'](_0x1c5ad6(0x200)+_0x55f2e9);const _0x58dfa2=this[_0x1c5ad6(0x24a)](_0x55f2e9);_0x58dfa2!==_0x55f2e9&&this[_0x1c5ad6(0x268)][_0x1c5ad6(0x25f)]('Sanitized\x20conversation\x20ID\x20from\x20\x22'+_0x55f2e9+'\x22\x20to\x20\x22'+_0x58dfa2+'\x22');if(!this[_0x1c5ad6(0x249)](_0x58dfa2))throw new Error(_0x1c5ad6(0x290)+_0x55f2e9);this[_0x1c5ad6(0x26a)][_0x1c5ad6(0x1ff)](_0x58dfa2,{'originalId':_0x55f2e9,'systemPrompt':_0x2c2660||'','messages':[],'model':_0x6b7812,'createdAt':new Date()[_0x1c5ad6(0x293)](),'lastActivity':new Date()[_0x1c5ad6(0x293)]()}),_0x58dfa2!==_0x55f2e9&&this[_0x1c5ad6(0x26a)]['set'](_0x55f2e9,this['conversations']['get'](_0x58dfa2));}['_getDefaultModel'](){const _0x16f939=a0_0x8c5fd6,_0x1b848b=[_0x16f939(0x1f1),_0x16f939(0x266),_0x16f939(0x254)];for(const _0x4f4fe5 of _0x1b848b){if(this[_0x16f939(0x284)][_0x16f939(0x278)](_0x4f4fe5))return _0x4f4fe5;}const _0x2f2cf0=this['availableModels'][_0x16f939(0x26c)]()[_0x16f939(0x234)]()['value'];return _0x2f2cf0?_0x2f2cf0[_0x16f939(0x277)]:'azure-openai-gpt4';}async['sendMessage'](_0x3cf0f0,_0x164263,_0x50b4a7){const _0x57f658=a0_0x8c5fd6;this[_0x57f658(0x268)][_0x57f658(0x25f)](_0x57f658(0x1ee)+_0x3cf0f0);if(!this['isInitialized'])throw new Error(_0x57f658(0x22b));if(!this[_0x57f658(0x229)])throw new Error(_0x57f658(0x23d));this['_validateSendMessageInputs'](_0x3cf0f0,_0x164263);const _0x40cd19=this['_sanitizeConversationId'](_0x3cf0f0),_0x3f78d4=this[_0x57f658(0x26a)][_0x57f658(0x278)](_0x3cf0f0)?_0x3cf0f0:_0x40cd19;if(!this['conversations']['has'](_0x3f78d4))throw new Error(_0x57f658(0x21d)+_0x3cf0f0+_0x57f658(0x204));const _0x483ae2=this['conversations']['get'](_0x3f78d4);_0x50b4a7&&(!_0x483ae2[_0x57f658(0x298)]||_0x483ae2['messages']['length']===0x0)&&this[_0x57f658(0x209)](_0x483ae2,_0x50b4a7);const _0x53f761=this[_0x57f658(0x282)](_0x40cd19,_0x164263,_0x483ae2);try{const _0x5d1969=await this['_sendChatRequest'](_0x53f761);return this['_processChatResponse'](_0x483ae2,_0x164263,_0x5d1969),_0x5d1969[_0x57f658(0x27d)];}catch(_0x3d3651){this['logger']['error']('Error\x20sending\x20message\x20to\x20server:',_0x3d3651);throw this[_0x57f658(0x248)](_0x3d3651,_0x57f658(0x217));}}[a0_0x8c5fd6(0x225)](_0x194795,_0x216428){const _0x4bf866=a0_0x8c5fd6;if(!_0x194795||typeof _0x194795!==_0x4bf866(0x270))throw new Error('Invalid\x20conversation\x20ID');if(!_0x216428||typeof _0x216428!=='string')throw new Error(_0x4bf866(0x262));}['_updateConversationState'](_0x39a85d,_0x515ffe){const _0x1c9eba=a0_0x8c5fd6;_0x515ffe['messages']&&Array['isArray'](_0x515ffe[_0x1c9eba(0x298)])&&(_0x39a85d['messages']=_0x515ffe[_0x1c9eba(0x298)]),_0x515ffe[_0x1c9eba(0x215)]&&typeof _0x515ffe[_0x1c9eba(0x215)]==='string'&&(_0x39a85d[_0x1c9eba(0x215)]=_0x515ffe['systemPrompt']),_0x515ffe['model']&&this['availableModels'][_0x1c9eba(0x278)](_0x515ffe['model'])&&(_0x39a85d['model']=_0x515ffe['model']),_0x39a85d['lastActivity']=new Date()[_0x1c9eba(0x293)]();}[a0_0x8c5fd6(0x282)](_0x158b61,_0x4dde50,_0x324e3f){const _0x1cbbe6=a0_0x8c5fd6;return{'conversationId':_0x158b61,'message':_0x4dde50[_0x1cbbe6(0x257)](),'systemPrompt':_0x324e3f['systemPrompt'],'messages':_0x324e3f[_0x1cbbe6(0x298)]||[],'model':_0x324e3f[_0x1cbbe6(0x295)],'requestId':this[_0x1cbbe6(0x27e)](),'options':{'temperature':0.7,'maxTokens':this['_getModelMaxTokens'](_0x324e3f['model'])}};}[a0_0x8c5fd6(0x27e)](){const _0x2a540a=a0_0x8c5fd6;return'req_'+Date['now']()+'_'+ ++this[_0x2a540a(0x23e)];}['_getModelMaxTokens'](_0x898aa1){const _0x277a29=a0_0x8c5fd6,_0x278ca9=this['availableModels']['get'](_0x898aa1);return _0x278ca9?_0x278ca9[_0x277a29(0x1f3)]:0xfa0;}async['_sendChatRequest'](_0x4cefa0){const _0x1742a5=a0_0x8c5fd6;try{const _0x8a7986=await this['_makeRequest'](_0x1742a5(0x1e9),{'method':_0x1742a5(0x22a),'body':JSON['stringify'](_0x4cefa0)});if(!_0x8a7986['ok']){const _0x47ee7d=await this[_0x1742a5(0x236)](_0x8a7986),_0x237f11=this['_createHttpError'](_0x8a7986['status'],_0x47ee7d['error']||_0x8a7986[_0x1742a5(0x265)]);throw _0x237f11;}const _0xfd1e76=await _0x8a7986[_0x1742a5(0x283)]();return this[_0x1742a5(0x205)](_0xfd1e76),_0xfd1e76;}catch(_0x59c432){throw _0x59c432;}}[a0_0x8c5fd6(0x205)](_0x5a9639){const _0x6ca21b=a0_0x8c5fd6;if(!_0x5a9639['content']||typeof _0x5a9639['content']!==_0x6ca21b(0x270))throw new Error(_0x6ca21b(0x1ed));if(_0x5a9639[_0x6ca21b(0x25c)]&&typeof _0x5a9639['usage']!=='object')throw new Error(_0x6ca21b(0x1e8));}[a0_0x8c5fd6(0x1fc)](_0x4dde6b,_0x58d061,_0x232bef){const _0x5a46a0=a0_0x8c5fd6;_0x232bef['usage']&&(this['lastInputTokenCount']=_0x232bef['usage'][_0x5a46a0(0x253)]||0x0,this[_0x5a46a0(0x22f)]=_0x232bef['usage']['output_tokens']||0x0,this['tokenUsage']['input']+=this['lastInputTokenCount'],this['tokenUsage']['output']+=this[_0x5a46a0(0x22f)]),_0x4dde6b[_0x5a46a0(0x298)]['push']({'role':'user','content':_0x58d061},{'role':_0x5a46a0(0x1d9),'content':_0x232bef['content']}),_0x4dde6b['lastActivity']=new Date()['toISOString']();}async[a0_0x8c5fd6(0x28b)](_0x533ed0,_0x4da0ab){const _0x970a7a=a0_0x8c5fd6;this[_0x970a7a(0x268)]['info']('Updating\x20server\x20conversation:\x20'+_0x533ed0);const _0xa3053b=this['_sanitizeConversationId'](_0x533ed0),_0x4fbf2d=this[_0x970a7a(0x26a)][_0x970a7a(0x278)](_0x533ed0)?_0x533ed0:_0xa3053b;if(!this['conversations']['has'](_0x4fbf2d))throw new Error('Conversation\x20'+_0x533ed0+'\x20not\x20found');const _0x198120=this['conversations']['get'](_0x4fbf2d);this['_updateConversationState'](_0x198120,_0x4da0ab);}async[a0_0x8c5fd6(0x218)](_0x4dc3a7,_0x574a56=null){const _0x375b91=a0_0x8c5fd6;this['logger'][_0x375b91(0x25f)]('Getting summary from server');if(!this[_0x375b91(0x247)])throw new Error('Service\x20not\x20initialized.\x20Call\x20initialize()\x20first.');if(!this[_0x375b91(0x229)])throw new Error(_0x375b91(0x23d));if(!_0x4dc3a7||typeof _0x4dc3a7!==_0x375b91(0x270))throw new Error(_0x375b91(0x281));let _0x9ac3cc=_0x375b91(0x250);if(_0x574a56&&this[_0x375b91(0x26a)][_0x375b91(0x278)](_0x574a56)){const _0x1b7545=this[_0x375b91(0x26a)][_0x375b91(0x1e2)](_0x574a56);_0x9ac3cc=_0x1b7545['model'],this['logger']['info']('Using\x20conversation\x20model\x20for\x20summary:\x20'+_0x9ac3cc);}else this['logger']['warn']('No conversation ID provided or conversation not found, using default model for summary');try{const _0x2fb7df=await this['_makeRequest'](_0x375b91(0x28f),{'method':'POST','body':JSON['stringify']({'prompt':_0x4dc3a7['trim'](),'model':_0x9ac3cc})});if(!_0x2fb7df['ok']){const _0x4f722c=await this[_0x375b91(0x236)](_0x2fb7df);throw this[_0x375b91(0x216)](_0x2fb7df['status'],_0x4f722c['error']||_0x2fb7df['statusText']);}const _0x511e03=await _0x2fb7df['json']();return _0x511e03[_0x375b91(0x25c)]&&(this['lastInputTokenCount']=_0x511e03[_0x375b91(0x25c)][_0x375b91(0x253)]||0x0,this[_0x375b91(0x22f)]=_0x511e03['usage'][_0x375b91(0x1f6)]||0x0,this[_0x375b91(0x21f)]['input']+=this['lastInputTokenCount'],this['tokenUsage']['output']+=this[_0x375b91(0x22f)]),_0x511e03['content'];}catch(_0x3e3422){this['logger'][_0x375b91(0x214)]('Error getting summary from server:',_0x3e3422);throw this[_0x375b91(0x248)](_0x3e3422,_0x375b91(0x255));}}async[a0_0x8c5fd6(0x261)](_0x114e18,_0x438614,_0x35892b={}){const _0xa00d7a=a0_0x8c5fd6;this[_0xa00d7a(0x268)]['info']('Getting image description from server');if(!this[_0xa00d7a(0x247)])throw new Error(_0xa00d7a(0x22b));if(!this['apiKey'])throw new Error('No\x20API\x20key\x20available.\x20Please\x20set\x20your\x20API\x20key\x20first.');this[_0xa00d7a(0x24f)](_0x114e18,_0x438614);try{const _0x3b8863=await this[_0xa00d7a(0x264)]('/llm/vision',{'method':_0xa00d7a(0x22a),'body':JSON[_0xa00d7a(0x222)]({'image':_0x114e18,'prompt':_0x438614['trim'](),'metadata':_0x35892b||{}})}),_0x4d84ff=await this['_safeJsonParse'](_0x3b8863);if(!_0x3b8863['ok'])throw this[_0xa00d7a(0x216)](_0x3b8863['status'],_0x4d84ff[_0xa00d7a(0x214)]||_0x3b8863[_0xa00d7a(0x265)]);return _0x4d84ff['usage']&&(this[_0xa00d7a(0x286)]=_0x4d84ff[_0xa00d7a(0x25c)]['input_tokens']||0x0,this['lastOutputTokenCount']=_0x4d84ff[_0xa00d7a(0x25c)]['output_tokens']||0x0,this['tokenUsage'][_0xa00d7a(0x1e5)]+=this['lastInputTokenCount'],this['tokenUsage']['output']+=this['lastOutputTokenCount']),_0x4d84ff[_0xa00d7a(0x27d)];}catch(_0x593987){this['logger'][_0xa00d7a(0x214)]('Error getting image description from server:',_0x593987);throw this['_enhanceError'](_0x593987,'get_image_description');}}async['generateImage'](_0x56fa07,_0x1955e9={}){const _0x517322=a0_0x8c5fd6;this[_0x517322(0x268)]['info']('Generating image from server');if(!this['isInitialized'])throw new Error('Service\x20not\x20initialized.\x20Call\x20initialize()\x20first.');if(!this[_0x517322(0x229)])throw new Error(_0x517322(0x23d));this[_0x517322(0x26f)](_0x56fa07,_0x1955e9);try{const _0xe8db5c=_0x1955e9[_0x517322(0x295)]||_0x517322(0x213);if(!_0xe8db5c||_0xe8db5c[_0x517322(0x257)]()==='')throw new Error(_0x517322(0x1ec));const _0x5f3576={'prompt':_0x56fa07['trim'](),'model':_0xe8db5c,'size':_0x1955e9[_0x517322(0x259)]||_0x517322(0x1f2),'quality':_0x1955e9[_0x517322(0x1f0)]||'standard','response_format':_0x1955e9['responseFormat']||_0x517322(0x231),'requestId':this['_generateRequestId']()};this[_0x517322(0x268)]['debug']('Sending\x20image\x20generation\x20request:',_0x5f3576);const _0x4aec98=await this[_0x517322(0x264)]('/llm/generate-image',{'method':_0x517322(0x22a),'body':JSON['stringify'](_0x5f3576)}),_0x2a6fbd=await this['_safeJsonParse'](_0x4aec98);if(!_0x4aec98['ok'])throw this[_0x517322(0x216)](_0x4aec98['status'],_0x2a6fbd[_0x517322(0x214)]||_0x4aec98['statusText']);_0x2a6fbd[_0x517322(0x25c)]&&(this[_0x517322(0x286)]=_0x2a6fbd[_0x517322(0x25c)][_0x517322(0x253)]||0x0,this[_0x517322(0x22f)]=_0x2a6fbd['usage']['output_tokens']||0x0,this[_0x517322(0x21f)][_0x517322(0x1e5)]+=this[_0x517322(0x286)],this['tokenUsage']['output']+=this[_0x517322(0x22f)]);const _0x9306bf=_0x2a6fbd?.[_0x517322(0x269)][0x0];return{'imageUrl':_0x9306bf?.['url'],'model':_0x2a6fbd['model'],'size':_0x2a6fbd['size']||_0x5f3576[_0x517322(0x259)],'prompt':_0x9306bf?.[_0x517322(0x21e)]||_0x56fa07,'usage':_0x2a6fbd[_0x517322(0x25c)]};}catch(_0x20ddb0){this['logger'][_0x517322(0x214)]('Error generating image from server:',_0x20ddb0);throw this['_enhanceError'](_0x20ddb0,_0x517322(0x246));}}[a0_0x8c5fd6(0x26f)](_0x157213,_0x248cc1){const _0x53cb1b=a0_0x8c5fd6;if(!_0x157213||typeof _0x157213!=='string')throw new Error('Invalid\x20image\x20generation\x20prompt');if(_0x157213['length']>0xfa0)throw new Error(_0x53cb1b(0x289));if(_0x248cc1['model']&&(typeof _0x248cc1['model']!=='string'||_0x248cc1[_0x53cb1b(0x295)][_0x53cb1b(0x257)]()===''))throw new Error('Invalid\x20model\x20parameter\x20-\x20must\x20be\x20a\x20non-empty\x20string');if(_0x248cc1['size']&&typeof _0x248cc1[_0x53cb1b(0x259)]!=='string')throw new Error('Invalid\x20size\x20parameter');if(_0x248cc1['quality']&&!['standard','hd']['includes'](_0x248cc1[_0x53cb1b(0x1f0)]))throw new Error(_0x53cb1b(0x241));}[a0_0x8c5fd6(0x24f)](_0x2f2283,_0x80ab4f){const _0x3173c1=a0_0x8c5fd6;if(!_0x2f2283||typeof _0x2f2283!=='string')throw new Error('Invalid\x20base64\x20image\x20data');if(!_0x80ab4f||typeof _0x80ab4f!==_0x3173c1(0x270))throw new Error(_0x3173c1(0x23a));if(_0x2f2283[_0x3173c1(0x276)]>0x32*0x400*0x400)throw new Error(_0x3173c1(0x233));}async[a0_0x8c5fd6(0x203)](_0x1a1c6b){const _0x3fcc5c=a0_0x8c5fd6,_0x492198=this['_sanitizeConversationId'](_0x1a1c6b),_0x1c347b=this['conversations'][_0x3fcc5c(0x278)](_0x1a1c6b)?_0x1a1c6b:_0x492198;if(!this[_0x3fcc5c(0x26a)]['has'](_0x1c347b))throw new Error('Conversation\x20'+_0x1a1c6b+'\x20not\x20found');const _0x12f660=this['conversations']['get'](_0x1c347b);let _0x4fe67c=this[_0x3fcc5c(0x240)](_0x12f660['systemPrompt']);for(const _0x56a4d5 of _0x12f660[_0x3fcc5c(0x298)]){_0x4fe67c+=this[_0x3fcc5c(0x240)](_0x56a4d5['content']);}return _0x4fe67c;}[a0_0x8c5fd6(0x240)](_0x45ca58){const _0x40850c=a0_0x8c5fd6;if(!_0x45ca58||typeof _0x45ca58!=='string')return 0x0;return Math['ceil'](_0x45ca58[_0x40850c(0x276)]/0x4);}['supportsModel'](_0x15c5dc){const _0x23c6fd=a0_0x8c5fd6;return this['availableModels'][_0x23c6fd(0x278)](_0x15c5dc);}['getMaxContextSize'](){const _0x460c15=a0_0x8c5fd6;let _0x2532ef=0x0;for(const _0xc07c28 of this['availableModels']['values']()){_0xc07c28[_0x460c15(0x1f3)]>_0x2532ef&&(_0x2532ef=_0xc07c28['maxTokens']);}return _0x2532ef||0x186a0;}[a0_0x8c5fd6(0x22c)](){return this['lastInputTokenCount'];}[a0_0x8c5fd6(0x201)](){const _0x30bb05=a0_0x8c5fd6;return this[_0x30bb05(0x22f)];}[a0_0x8c5fd6(0x288)](){const _0x78d27d=a0_0x8c5fd6;return{...this[_0x78d27d(0x21f)]};}async['refreshPricingData'](){const _0x6b8b0c=a0_0x8c5fd6;this[_0x6b8b0c(0x268)][_0x6b8b0c(0x25f)]('Refreshing pricing data from server'),await this[_0x6b8b0c(0x22d)]();}async[a0_0x8c5fd6(0x1e7)](){const _0x5e81d4=a0_0x8c5fd6;try{const _0x1143b8=await this[_0x5e81d4(0x264)]('/health');if(!_0x1143b8['ok'])return{'status':'unhealthy','error':'HTTP\x20'+_0x1143b8['status']+':\x20'+_0x1143b8[_0x5e81d4(0x265)]};const _0x317038=await _0x1143b8[_0x5e81d4(0x283)]();return{'status':'healthy',..._0x317038};}catch(_0x10ae9c){return{'status':'unhealthy','error':_0x10ae9c['message']};}}async[a0_0x8c5fd6(0x27f)](){const _0x34ea1b=a0_0x8c5fd6;this['logger'][_0x34ea1b(0x25f)]('Shutting\x20down\x20server\x20LLM\x20service'),this[_0x34ea1b(0x26a)]['clear'](),this[_0x34ea1b(0x284)]['clear'](),this[_0x34ea1b(0x1fd)][_0x34ea1b(0x1dc)](),this[_0x34ea1b(0x247)]=![],this['apiKey']=null,this[_0x34ea1b(0x268)][_0x34ea1b(0x25f)]('Server\x20LLM\x20service\x20shut\x20down\x20successfully');}async['_makeRequest'](_0xc5d76b,_0x466bd8={}){const _0x1e0e22=a0_0x8c5fd6,_0x9db45e=''+this['serverUrl']+_0xc5d76b,_0x105131={'method':_0x466bd8[_0x1e0e22(0x25d)]||'GET','headers':{'Content-Type':_0x1e0e22(0x228),'User-Agent':'Loxia-CLI/1.0.0',..._0x466bd8[_0x1e0e22(0x1e6)]},'timeout':this[_0x1e0e22(0x243)],..._0x466bd8};this[_0x1e0e22(0x229)]&&(_0x105131[_0x1e0e22(0x1e6)][_0x1e0e22(0x20b)]='Bearer\x20'+this['apiKey']);try{const _0x11934c=await a0_0x26408d(_0x9db45e,_0x105131);return _0x11934c;}catch(_0x26b90d){throw this[_0x1e0e22(0x28e)](_0x26b90d,_0x9db45e);}}async[a0_0x8c5fd6(0x236)](_0x2201b1){const _0x84a39e=a0_0x8c5fd6;try{return await _0x2201b1[_0x84a39e(0x283)]();}catch(_0x4ff37e){return{};}}[a0_0x8c5fd6(0x248)](_0x88806a,_0x1c04e9){const _0x449b25=a0_0x8c5fd6,_0x305978=new Error(_0x1c04e9+'\x20failed:\x20'+_0x88806a['message']);return _0x305978[_0x449b25(0x24b)]=_0x1c04e9,_0x305978[_0x449b25(0x1db)]=_0x88806a,_0x305978['errorType']=this['_classifyError'](_0x88806a),_0x305978;}[a0_0x8c5fd6(0x216)](_0x233326,_0x403e9b){const _0x51c51a=a0_0x8c5fd6,_0x3a023e=new Error('HTTP\x20'+_0x233326+':\x20'+_0x403e9b);return _0x3a023e[_0x51c51a(0x235)]=_0x233326,_0x3a023e['errorType']=this['_classifyHttpError'](_0x233326),_0x3a023e;}[a0_0x8c5fd6(0x28e)](_0x11f905,_0x1eae00){const _0x56adef=a0_0x8c5fd6,_0x17372a=new Error('Network\x20request\x20failed:\x20'+_0x11f905['message']);_0x17372a[_0x56adef(0x212)]=_0x1eae00,_0x17372a[_0x56adef(0x1db)]=_0x11f905,_0x17372a['errorType']=ERROR_TYPES['NETWORK'];if(_0x11f905['code']===_0x56adef(0x279))_0x17372a[_0x56adef(0x1fb)]=_0x56adef(0x27a);else{if(_0x11f905[_0x56adef(0x211)]===_0x56adef(0x1da))_0x17372a[_0x56adef(0x1fb)]=_0x56adef(0x1e0);else(_0x11f905['code']===_0x56adef(0x28a)||_0x11f905[_0x56adef(0x277)]==='AbortError')&&(_0x17372a['message']='Request\x20timeout.\x20Server\x20may\x20be\x20overloaded.',_0x17372a[_0x56adef(0x25b)]=ERROR_TYPES['TIMEOUT']);}return _0x17372a;}['_classifyError'](_0x278e9a){const _0x35e0fa=a0_0x8c5fd6;if(_0x278e9a[_0x35e0fa(0x235)])return this[_0x35e0fa(0x1fa)](_0x278e9a[_0x35e0fa(0x235)]);if(_0x278e9a[_0x35e0fa(0x211)]==='ECONNREFUSED'||_0x278e9a[_0x35e0fa(0x211)]==='ENOTFOUND')return ERROR_TYPES[_0x35e0fa(0x20f)];if(_0x278e9a[_0x35e0fa(0x211)]===_0x35e0fa(0x28a)||_0x278e9a[_0x35e0fa(0x277)]==='AbortError')return ERROR_TYPES[_0x35e0fa(0x267)];return ERROR_TYPES[_0x35e0fa(0x25a)];}['_classifyHttpError'](_0x21cfcf){const _0x53bc57=a0_0x8c5fd6;switch(_0x21cfcf){case HTTP_STATUS['UNAUTHORIZED']:case HTTP_STATUS['FORBIDDEN']:return ERROR_TYPES[_0x53bc57(0x223)];case HTTP_STATUS[_0x53bc57(0x221)]:return ERROR_TYPES[_0x53bc57(0x27c)];case HTTP_STATUS['TOO_MANY_REQUESTS']:return ERROR_TYPES['RATE_LIMIT'];case HTTP_STATUS['INTERNAL_SERVER_ERROR']:case HTTP_STATUS['BAD_GATEWAY']:case HTTP_STATUS['SERVICE_UNAVAILABLE']:case HTTP_STATUS[_0x53bc57(0x24d)]:return ERROR_TYPES[_0x53bc57(0x237)];default:return ERROR_TYPES['UNKNOWN'];}}[a0_0x8c5fd6(0x21b)](_0x540d45){const _0x3fa9a1=a0_0x8c5fd6,_0x5136ab=[ERROR_TYPES[_0x3fa9a1(0x223)],ERROR_TYPES['VALIDATION']],_0x388f03=[HTTP_STATUS['BAD_REQUEST'],HTTP_STATUS['UNAUTHORIZED'],HTTP_STATUS[_0x3fa9a1(0x219)],HTTP_STATUS[_0x3fa9a1(0x226)]];return _0x5136ab['includes'](_0x540d45['errorType'])||_0x388f03['includes'](_0x540d45['status']);}[a0_0x8c5fd6(0x242)](_0x5ace2c){return new Promise(_0x21bb0e=>setTimeout(_0x21bb0e,_0x5ace2c));}[a0_0x8c5fd6(0x28c)](_0xc8f401){const _0x139f3e=a0_0x8c5fd6,_0x11a613=_0x139f3e(0x23c),_0x45b546=Buffer[_0x139f3e(0x1ef)](_0xc8f401,'base64')['toString']();let _0x53b32d='';for(let _0x48bad0=0x0;_0x48bad0<_0x45b546['length'];_0x48bad0++){_0x53b32d+=String['fromCharCode'](_0x45b546[_0x139f3e(0x245)](_0x48bad0)^_0x11a613[_0x139f3e(0x245)](_0x48bad0%_0x11a613['length']));}return _0x53b32d;}}