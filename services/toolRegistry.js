function a0_0xc8e7(){const _0x14bd3f=['mZy5oxzXwffUzW','zw50CMLLCW','vg9VBca','y29UzMLN','lI4VDg9VBhmVDxbKyxrLvxnLCLrVB2WUANm','rxjYB3iGCMvNAxn0zxjPBMCGyNvPBhqTAw4GDg9VBhm6','DxbKyxrLlxvZzxi','ig5VDcbMB3vUzcbPBIbYzwDPC3rYEq','ChvZAa','qxzHAwXHyMXLihrVB2XZoGOk','vg8GDxnLigeGDg9VBcWGD3jHCcb5B3vYignVBw1HBMrZigLUifT0B29SCY1JB21Tyw5KC10Gyw5KifSVDg9VBhmTy29TBwfUzhnDihrHz3mUcG','DwLuB29S','ota1ntmYmwHMExvHyG','lI4VDg9VBhmVzMLSzunVBNrLBNrszxbSywnLvg9VBc5QCW','CMvNAxn0zxjuB29S','ode4odi4reXgq09Z','z2v0vg9VBa','mtvsu0T1swu','mti2mfDIv1LyAW','C2v0','Aw5MBW','BgXTu2vYDMLJzq','nty1mKfjteXKsG','Bg9Nz2vY','zMLSzs1JB250zw50lxjLCgXHy2u','nvzXCw9PqG','DMLZAw9UlwfUywX5EMvY','y3jLyxrLvg9VBhntExn0zw1qCM9TChq','z2v0rgvZy3jPChrPB24','Aw1Hz2uTz2vU','DgvYBwLUywW','zw5HyMXLza','lI4VDg9VBhmVBwvTB3j5vg9VBc5QCW','mZC1mJeWDgrtBgzf','z2v0','iYmG','odK3odKWuxjxwNnl','rM9YigvHy2GGDg9VBcWGDxnLifT0B29SigLKpsj0B29Sx2LKiL0Gyw5KifSVDg9VBf0GDgfNCYb0BYbZCgvJAwz5ihDOAwnOihrVB2WGDg8GDxnLlGO','lI4VDg9VBhmVC2vLA1rVB2WUANm','BwnWlwnSAwvUDa','C2v0teXnu2vYDMLJzq','z2v0vg9VBhnezxnJCMLWDgLVBG','u2H1DhrPBMCGzg93BIbHBgWGDg9VBhm','u3vJy2vZC2z1BgX5ihjLz2LZDgvYzwqGDMLZAw9UlwfUywX5EMvYihrVB2W','ihrVB2XZ','mtiZndm4CMj6DwH0','C2H1DgrVD24','yNjVD3nLCG','nZqXnK5NwNjWyW','zNvUy3rPB24','Dg9VBhm','vxbKyxrLzcbICM93C2vYihrVB2WGD2L0Acbmte0GC2vYDMLJzsbMB3iGDMLZAw9UignHCgfIAwXPDgLLCW','CMvNAxn0zxjcDwLSDeLUvg9VBhm','ChjVAMvJDerPCG'];a0_0xc8e7=function(){return _0x14bd3f;};return a0_0xc8e7();}const a0_0x48e941=a0_0x50eb;function a0_0x50eb(_0x32b204,_0x44156f){const _0xc8e76b=a0_0xc8e7();return a0_0x50eb=function(_0x50ebed,_0x74fc67){_0x50ebed=_0x50ebed-0x1b4;let _0x54fcc3=_0xc8e76b[_0x50ebed];if(a0_0x50eb['nNGvyH']===undefined){var _0x80ed7b=function(_0x4717fd){const _0x43316b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x177649='',_0x20fc22='';for(let _0x50476e=0x0,_0x353110,_0x474493,_0x41159a=0x0;_0x474493=_0x4717fd['charAt'](_0x41159a++);~_0x474493&&(_0x353110=_0x50476e%0x4?_0x353110*0x40+_0x474493:_0x474493,_0x50476e++%0x4)?_0x177649+=String['fromCharCode'](0xff&_0x353110>>(-0x2*_0x50476e&0x6)):0x0){_0x474493=_0x43316b['indexOf'](_0x474493);}for(let _0x99817c=0x0,_0x9a8112=_0x177649['length'];_0x99817c<_0x9a8112;_0x99817c++){_0x20fc22+='%'+('00'+_0x177649['charCodeAt'](_0x99817c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x20fc22);};a0_0x50eb['zWKEFI']=_0x80ed7b,_0x32b204=arguments,a0_0x50eb['nNGvyH']=!![];}const _0x1cc26b=_0xc8e76b[0x0],_0x32cd22=_0x50ebed+_0x1cc26b,_0xae9c61=_0x32b204[_0x32cd22];return!_0xae9c61?(_0x54fcc3=a0_0x50eb['zWKEFI'](_0x54fcc3),_0x32b204[_0x32cd22]=_0x54fcc3):_0x54fcc3=_0xae9c61,_0x54fcc3;},a0_0x50eb(_0x32b204,_0x44156f);}(function(_0x1d146d,_0x1927cc){const _0x4d6286=a0_0x50eb,_0x2bca6f=_0x1d146d();while(!![]){try{const _0x3da9ca=parseInt(_0x4d6286(0x1e7))/0x1+-parseInt(_0x4d6286(0x1bd))/0x2*(parseInt(_0x4d6286(0x1d7))/0x3)+parseInt(_0x4d6286(0x1d5))/0x4*(-parseInt(_0x4d6286(0x1df))/0x5)+-parseInt(_0x4d6286(0x1dc))/0x6*(parseInt(_0x4d6286(0x1d8))/0x7)+parseInt(_0x4d6286(0x1c0))/0x8*(-parseInt(_0x4d6286(0x1c6))/0x9)+parseInt(_0x4d6286(0x1b4))/0xa+parseInt(_0x4d6286(0x1d2))/0xb;if(_0x3da9ca===_0x1927cc)break;else _0x2bca6f['push'](_0x2bca6f['shift']());}catch(_0x22e08a){_0x2bca6f['push'](_0x2bca6f['shift']());}}}(a0_0xc8e7,0x36c5f));import a0_0x4717fd from'path';import{promises as a0_0x43316b}from'fs';export class ToolRegistry{constructor(_0x177649,_0x20fc22,_0x50476e=null,_0x353110=null){const _0x4610a3=a0_0x50eb;this['config']=_0x177649,this[_0x4610a3(0x1dd)]=_0x20fc22,this['projectDir']=_0x353110,this['llmService']=_0x50476e,this[_0x4610a3(0x1c2)]=new Map(),this['toolDescriptions']=new Map(),this[_0x4610a3(0x1c4)]();}[a0_0x48e941(0x1b8)](_0x474493){const _0x58e6e3=a0_0x48e941;this[_0x58e6e3(0x1db)]=_0x474493;if(this['tools']['has']('browser')){const _0x41159a=this[_0x58e6e3(0x1c2)][_0x58e6e3(0x1e8)](_0x58e6e3(0x1bf));_0x41159a[_0x58e6e3(0x1b8)](_0x474493),this['logger'][_0x58e6e3(0x1da)](_0x58e6e3(0x1c3));}if(this[_0x58e6e3(0x1c2)]['has'](_0x58e6e3(0x1e3))){const _0x99817c=this[_0x58e6e3(0x1c2)]['get'](_0x58e6e3(0x1e3));_0x99817c['setLLMService'](_0x474493),this['logger'][_0x58e6e3(0x1da)]('Updated\x20image\x20tool\x20with\x20LLM\x20service\x20for\x20image\x20generation');}if(this[_0x58e6e3(0x1c2)]['has'](_0x58e6e3(0x1e0))){const _0x9a8112=this[_0x58e6e3(0x1c2)][_0x58e6e3(0x1e8)](_0x58e6e3(0x1e0));_0x9a8112['setLLMService'](_0x474493),this['logger'][_0x58e6e3(0x1da)]('Updated\x20vision\x20analyzer\x20tool\x20with\x20LLM\x20service\x20for\x20image\x20analysis');}}['setProjectDirectory'](_0x4ec916){const _0x2442e9=a0_0x48e941;this[_0x2442e9(0x1c5)]=_0x4ec916;const _0x4fea72=this['tools']['get'](_0x2442e9(0x1e4));_0x4fea72&&typeof _0x4fea72['setProjectDirectory']==='function'&&_0x4fea72['setProjectDirectory'](_0x4ec916),this[_0x2442e9(0x1dd)][_0x2442e9(0x1da)]('Updated\x20project\x20directory\x20for\x20tools:\x20'+_0x4ec916);}async['registerBuiltInTools'](){const _0x1a373f=a0_0x48e941;this[_0x1a373f(0x1dd)]['info']('Registering\x20built-in\x20tools');try{const {BrowserTool:_0x92be93}=await import('../tools/browserTool.js'),_0x2c0c53=new _0x92be93(this['config'],this[_0x1a373f(0x1dd)],this[_0x1a373f(0x1db)]);this[_0x1a373f(0x1d4)]('browser',_0x2c0c53);const {TerminalTool:_0xafca3}=await import('../tools/terminalTool.js'),_0x249d2f=new _0xafca3(this[_0x1a373f(0x1c9)],this['logger'],undefined,this[_0x1a373f(0x1c5)]);this[_0x1a373f(0x1d4)](_0x1a373f(0x1e4),_0x249d2f);const {FileSystemTool:_0x1050d9}=await import('../tools/fileSystemTool.js'),_0x27d42b=new _0x1050d9(this[_0x1a373f(0x1c9)],this[_0x1a373f(0x1dd)]);this[_0x1a373f(0x1d4)]('filesys',_0x27d42b);const {ImageTool:_0x3c9673}=await import('../tools/imageTool.js'),_0x1a01df=new _0x3c9673(this['config'],this[_0x1a373f(0x1dd)],this[_0x1a373f(0x1db)]);this['registerTool'](_0x1a373f(0x1e3),_0x1a01df);const {FileTreeTool:_0x1e9e29}=await import('../tools/fileTreeTool.js'),_0x3d9b89=new _0x1e9e29(this['config'],this[_0x1a373f(0x1dd)]);this[_0x1a373f(0x1d4)]('file-tree',_0x3d9b89);const {SeekTool:_0xaee584}=await import(_0x1a373f(0x1b6)),_0x13c07d=new _0xaee584(this['config'],this[_0x1a373f(0x1dd)]);this['registerTool']('seek',_0x13c07d);const {MemoryTool:_0x1babff}=await import(_0x1a373f(0x1e6)),_0x591fff=new _0x1babff(this['config'],this[_0x1a373f(0x1dd)]);this[_0x1a373f(0x1d4)]('memory',_0x591fff);const {CodeAnalysisTool:_0x4aab58}=await import('../tools/codeAnalysisTool.js'),_0x112e05=new _0x4aab58(this[_0x1a373f(0x1c9)],this[_0x1a373f(0x1dd)]);this[_0x1a373f(0x1d4)]('code-analysis',_0x112e05);const {FileContentReplaceTool:_0x5f4237}=await import(_0x1a373f(0x1d3)),_0x14cdee=new _0x5f4237(this['config'],this['logger']);this['registerTool'](_0x1a373f(0x1de),_0x14cdee);if(this['config'][_0x1a373f(0x1c2)]?.['mcpTool']?.['enabled']){const _0x2c4889=new MCPClientTool(this['config'],this[_0x1a373f(0x1dd)]);this[_0x1a373f(0x1d4)](_0x1a373f(0x1b7),_0x2c4889);}if(this['config']['tools']?.[_0x1a373f(0x1d1)]?.[_0x1a373f(0x1e5)]){const _0x5d4f17=await import('../tools/uiTool.js'),_0x5f4c69=new _0x5d4f17(this[_0x1a373f(0x1c9)],this['logger']);this[_0x1a373f(0x1d4)]('ui',_0x5f4c69);}const {UpdateUserTool:_0xca9e54}=await import(_0x1a373f(0x1ca)),_0x2fcffa=new _0xca9e54(this['config'],this['logger']);this[_0x1a373f(0x1d4)](_0x1a373f(0x1cc),_0x2fcffa);const {DependencyResolverTool:_0x2f83c7}=await import('../tools/dependencyResolverTool.js'),_0xec7ed0=new _0x2f83c7(this[_0x1a373f(0x1c9)],this['logger']);this['registerTool']('dep-resolver',_0xec7ed0);const {ImportAnalyzerTool:_0x526fc4}=await import('../tools/importAnalyzerTool.js'),_0x37ecca=new _0x526fc4(this[_0x1a373f(0x1c9)],this[_0x1a373f(0x1dd)]);this[_0x1a373f(0x1d4)]('import-analyzer',_0x37ecca);try{const {VisionAnalyzerTool:_0x180bdb}=await import('../tools/visionAnalyzerTool.js'),_0x156ff0=new _0x180bdb(this['config'],this[_0x1a373f(0x1dd)],this['llmService']);this[_0x1a373f(0x1d4)]('vision-analyzer',_0x156ff0),this['logger'][_0x1a373f(0x1da)](_0x1a373f(0x1bb));}catch(_0x54bdc2){this['logger']['error']('Failed\x20to\x20register\x20vision-analyzer\x20tool:',_0x54bdc2);}this[_0x1a373f(0x1dd)][_0x1a373f(0x1da)]('Registered\x20'+this[_0x1a373f(0x1c2)]['size']+_0x1a373f(0x1bc));}catch(_0x23a7fe){this[_0x1a373f(0x1dd)]['error'](_0x1a373f(0x1cb),_0x23a7fe);throw _0x23a7fe;}}[a0_0x48e941(0x1d4)](_0x32b6fd,_0x26aecc){const _0x4a04e1=a0_0x48e941;this['logger']['info']('Registering\x20tool:\x20'+_0x32b6fd);if(typeof _0x26aecc['execute']!==_0x4a04e1(0x1c1))throw new Error(_0x4a04e1(0x1c8)+_0x32b6fd+'\x20does\x20not\x20have\x20an\x20execute\x20method');if(typeof _0x26aecc[_0x4a04e1(0x1e2)]!=='function')throw new Error('Tool\x20'+_0x32b6fd+'\x20does\x20not\x20have\x20a\x20getDescription\x20method');this['tools']['set'](_0x32b6fd,_0x26aecc),this['toolDescriptions'][_0x4a04e1(0x1d9)](_0x32b6fd,_0x26aecc[_0x4a04e1(0x1e2)]());}['hasTool'](_0x589e08){const _0x3835a9=a0_0x48e941;return this[_0x3835a9(0x1c2)]['has'](_0x589e08);}[a0_0x48e941(0x1d6)](_0x49c977){const _0x2cdd0c=a0_0x48e941;if(!this['tools']['has'](_0x49c977))throw new Error(_0x2cdd0c(0x1c8)+_0x49c977+_0x2cdd0c(0x1cd));return this[_0x2cdd0c(0x1c2)][_0x2cdd0c(0x1e8)](_0x49c977);}['getToolIds'](){return Array['from'](this['tools']['keys']());}[a0_0x48e941(0x1b9)](){const _0x23590a=a0_0x48e941;let _0x2af47e='';for(const [_0x411cf9,_0x5b0961]of this['toolDescriptions'][_0x23590a(0x1c7)]()){_0x2af47e+='Tool\x20ID:\x20'+_0x411cf9+'\x0a',_0x2af47e+=_0x5b0961+'\x0a\x0a';}return _0x2af47e;}['getToolDescription'](_0x583d44){const _0x38c026=a0_0x48e941;if(!this['toolDescriptions']['has'](_0x583d44))throw new Error(_0x38c026(0x1c8)+_0x583d44+_0x38c026(0x1cd));return this['toolDescriptions'][_0x38c026(0x1e8)](_0x583d44);}[a0_0x48e941(0x1e1)](){const _0x52ede9=a0_0x48e941;let _0x5426d1=_0x52ede9(0x1cf);for(const [_0x85eb59,_0x5b80d3]of this['toolDescriptions'][_0x52ede9(0x1c7)]()){_0x5426d1+=_0x52ede9(0x1e9)+_0x85eb59+'\x0a',_0x5426d1+=_0x5b80d3+'\x0a\x0a';}return _0x5426d1+=_0x52ede9(0x1d0),_0x5426d1+=_0x52ede9(0x1b5),_0x5426d1+='Each\x20tool\x20has\x20its\x20own\x20specific\x20format\x20for\x20commands\x20as\x20described\x20above.',_0x5426d1;}async['shutdown'](){const _0x28b988=a0_0x48e941;this[_0x28b988(0x1dd)]['info'](_0x28b988(0x1ba));const _0x514272=[];for(const [_0x1fb863,_0x2e14a8]of this['tools'][_0x28b988(0x1c7)]()){typeof _0x2e14a8['shutdown']==='function'&&(this[_0x28b988(0x1dd)]['info']('Shutting\x20down\x20tool:\x20'+_0x1fb863),_0x514272[_0x28b988(0x1ce)](_0x2e14a8[_0x28b988(0x1be)]()));}await Promise['allSettled'](_0x514272),this[_0x28b988(0x1dd)]['info']('All\x20tools\x20shut\x20down');}}