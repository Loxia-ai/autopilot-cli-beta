const a0_0x257fd0=a0_0x1bcd;(function(_0x320f7b,_0xf26bc8){const _0x5d0d4a=a0_0x1bcd,_0x38feef=_0x320f7b();while(!![]){try{const _0xb68dac=-parseInt(_0x5d0d4a(0x8d))/0x1+parseInt(_0x5d0d4a(0x75))/0x2+-parseInt(_0x5d0d4a(0x82))/0x3*(parseInt(_0x5d0d4a(0xaa))/0x4)+parseInt(_0x5d0d4a(0x91))/0x5+parseInt(_0x5d0d4a(0x8b))/0x6*(-parseInt(_0x5d0d4a(0x7b))/0x7)+-parseInt(_0x5d0d4a(0xa1))/0x8+parseInt(_0x5d0d4a(0xa3))/0x9*(parseInt(_0x5d0d4a(0x9d))/0xa);if(_0xb68dac===_0xf26bc8)break;else _0x38feef['push'](_0x38feef['shift']());}catch(_0x63c34e){_0x38feef['push'](_0x38feef['shift']());}}}(a0_0x52f5,0x8aaec));import a0_0x222bd2 from'path';function a0_0x52f5(){const _0x4e7598=['DxbKyxrLlxvZzxi','yNjVD3nLCG','BwnWlwnSAwvUDa','BgXTu2vYDMLJzq','mJCZmZeWyMHpwhzi','z2v0vg9VBhnezxnJCMLWDgLVBG','C2v0teXnu2vYDMLJzq','Bg9Nz2vY','DwLuB29S','z2v0rgvZy3jPChrPB24','mtm1nZa5qNLRt3H1','z2v0vg9VBeLKCW','CMvNAxn0zxjuB29S','z2v0','CMvNAxn0zxjcDwLSDeLUvg9VBhm','Dg9VBerLC2nYAxb0Aw9UCW','lI4VDg9VBhmVzMLSzvrYzwvuB29SlMPZ','mZa3odK2reTIr3ze','y29UzMLN','AgfZ','lI4VDg9VBhmVDgvYBwLUywXuB29SlMPZ','rxjYB3iGCMvNAxn0zxjPBMCGyNvPBhqTAw4GDg9VBhm6','ywXSu2v0DgXLza','Dg9VBhm','DMLZAw9UlwfUywX5EMvY','Aw5MBW','mtHND2fiAgC','C2v0uhjVAMvJDerPCMvJDg9YEq','nZq2nZmWt1v2uNjh','lI4VDg9VBhmVAw1Hz2vuB29SlMPZ','zMLSzs10CMvL','ihrVB2XZ','ntq5mZm5mgHVBvnMCa','z2v0vg9VBa','rM9YigvHy2GGDg9VBcWGDxnLifT0B29SigLKpsj0B29Sx2LKiL0Gyw5KifSVDg9VBf0GDgfNCYb0BYbZCgvJAwz5ihDOAwnOihrVB2WGDg8GDxnLlGO','y3jLyxrLvg9VBhntExn0zw1qCM9TChq','zgvWlxjLC29SDMvY','C2H1DgrVD24','vg9VBca','C2L6zq','qxzHAwXHyMXLihrVB2XZoGOk','zMLSzs1JB250zw50lxjLCgXHy2u','uMvNAxn0zxjPBMCGyNvPBhqTAw4GDg9VBhm','lI4VDg9VBhmVDxbKyxrLvxnLCLrVB2WUANm','mtC0ntbjwgr4B2C','ChjVAMvJDerPCG','AgfZvg9VBa','uMvNAxn0zxjLzca','ntyWoti4BuvJrhD5','Aw1Hz2uTz2vU','nJG5ne5wAMTdtq','uMvNAxn0zxjPBMCGDg9VBdOG','zNvUy3rPB24','z2v0vg9VBerLC2nYAxb0Aw9U','zw5HyMXLza','DgvYBwLUywW','C2v0','ndrNwNjYt20','igrVzxmGBM90igHHDMuGyw4GzxHLy3v0zsbTzxrOB2q'];a0_0x52f5=function(){return _0x4e7598;};return a0_0x52f5();}import{promises as a0_0x517a83}from'fs';function a0_0x1bcd(_0x2fbbcb,_0x126967){const _0x52f584=a0_0x52f5();return a0_0x1bcd=function(_0x1bcdde,_0x3398d2){_0x1bcdde=_0x1bcdde-0x71;let _0x515816=_0x52f584[_0x1bcdde];if(a0_0x1bcd['sIKhxH']===undefined){var _0x261bf1=function(_0x222bd2){const _0x517a83='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3a6314='',_0x42c307='';for(let _0x20c1a3=0x0,_0x72ab32,_0x2e402d,_0x24d08c=0x0;_0x2e402d=_0x222bd2['charAt'](_0x24d08c++);~_0x2e402d&&(_0x72ab32=_0x20c1a3%0x4?_0x72ab32*0x40+_0x2e402d:_0x2e402d,_0x20c1a3++%0x4)?_0x3a6314+=String['fromCharCode'](0xff&_0x72ab32>>(-0x2*_0x20c1a3&0x6)):0x0){_0x2e402d=_0x517a83['indexOf'](_0x2e402d);}for(let _0x365848=0x0,_0x441898=_0x3a6314['length'];_0x365848<_0x441898;_0x365848++){_0x42c307+='%'+('00'+_0x3a6314['charCodeAt'](_0x365848)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x42c307);};a0_0x1bcd['oHPBLs']=_0x261bf1,_0x2fbbcb=arguments,a0_0x1bcd['sIKhxH']=!![];}const _0x5d30da=_0x52f584[0x0],_0x47eb26=_0x1bcdde+_0x5d30da,_0x36db81=_0x2fbbcb[_0x47eb26];return!_0x36db81?(_0x515816=a0_0x1bcd['oHPBLs'](_0x515816),_0x2fbbcb[_0x47eb26]=_0x515816):_0x515816=_0x36db81,_0x515816;},a0_0x1bcd(_0x2fbbcb,_0x126967);}export class ToolRegistry{constructor(_0x3a6314,_0x42c307,_0x20c1a3=null,_0x72ab32=null){const _0x502985=a0_0x1bcd;this[_0x502985(0x83)]=_0x3a6314,this[_0x502985(0x78)]=_0x42c307,this[_0x502985(0x9e)]=_0x72ab32,this[_0x502985(0x74)]=_0x20c1a3,this[_0x502985(0x88)]=new Map(),this['toolDescriptions']=new Map(),this[_0x502985(0x7f)]();}[a0_0x257fd0(0x77)](_0x2e402d){const _0x36495e=a0_0x257fd0;this[_0x36495e(0x74)]=_0x2e402d;if(this[_0x36495e(0x88)]['has'](_0x36495e(0x72))){const _0x24d08c=this[_0x36495e(0x88)][_0x36495e(0x7e)]('browser');_0x24d08c['setLLMService'](_0x2e402d),this[_0x36495e(0x78)]['info']('Updated\x20browser\x20tool\x20with\x20LLM\x20service\x20for\x20vision\x20capabilities');}if(this['tools']['has'](_0x36495e(0xa2))){const _0x365848=this[_0x36495e(0x88)]['get']('image-gen');_0x365848[_0x36495e(0x77)](_0x2e402d),this[_0x36495e(0x78)][_0x36495e(0x8a)]('Updated\x20image\x20tool\x20with\x20LLM\x20service\x20for\x20image\x20generation');}if(this['tools'][_0x36495e(0x84)]('vision-analyzer')){const _0x441898=this[_0x36495e(0x88)][_0x36495e(0x7e)](_0x36495e(0x89));_0x441898['setLLMService'](_0x2e402d),this['logger'][_0x36495e(0x8a)]('Updated\x20vision\x20analyzer\x20tool\x20with\x20LLM\x20service\x20for\x20image\x20analysis');}}[a0_0x257fd0(0x8c)](_0x51bb70){const _0x652b64=a0_0x257fd0;this['projectDir']=_0x51bb70;const _0x14fd17=this[_0x652b64(0x88)]['get'](_0x652b64(0xa8));_0x14fd17&&typeof _0x14fd17[_0x652b64(0x8c)]==='function'&&_0x14fd17[_0x652b64(0x8c)](_0x51bb70),this[_0x652b64(0x78)]['info']('Updated\x20project\x20directory\x20for\x20tools:\x20'+_0x51bb70);}async[a0_0x257fd0(0x7f)](){const _0x5781f4=a0_0x257fd0;this['logger']['info'](_0x5781f4(0x9b));try{const {BrowserTool:_0x510648}=await import('../tools/browserTool.js'),_0x2bed0b=new _0x510648(this[_0x5781f4(0x83)],this[_0x5781f4(0x78)],this['llmService']);this[_0x5781f4(0x7d)](_0x5781f4(0x72),_0x2bed0b);const {TerminalTool:_0xca7db3}=await import(_0x5781f4(0x85)),_0x205329=new _0xca7db3(this['config'],this['logger'],undefined,this['projectDir']);this['registerTool'](_0x5781f4(0xa8),_0x205329);const {FileSystemTool:_0x26071f}=await import('../tools/fileSystemTool.js'),_0x3ed3ec=new _0x26071f(this[_0x5781f4(0x83)],this[_0x5781f4(0x78)]);this['registerTool']('filesys',_0x3ed3ec);const {ImageTool:_0x42b686}=await import(_0x5781f4(0x8e)),_0x3a4854=new _0x42b686(this['config'],this['logger'],this[_0x5781f4(0x74)]);this['registerTool'](_0x5781f4(0xa2),_0x3a4854);const {FileTreeTool:_0x422dd7}=await import(_0x5781f4(0x81)),_0x18713d=new _0x422dd7(this['config'],this['logger']);this['registerTool'](_0x5781f4(0x8f),_0x18713d);const {SeekTool:_0x18c949}=await import('../tools/seekTool.js'),_0x11535c=new _0x18c949(this['config'],this[_0x5781f4(0x78)]);this['registerTool']('seek',_0x11535c);const {MemoryTool:_0x3f8124}=await import('../tools/memoryTool.js'),_0x130985=new _0x3f8124(this['config'],this[_0x5781f4(0x78)]);this[_0x5781f4(0x7d)]('memory',_0x130985);const {CodeAnalysisTool:_0xd78fe8}=await import('../tools/codeAnalysisTool.js'),_0xf26fd2=new _0xd78fe8(this['config'],this['logger']);this['registerTool']('code-analysis',_0xf26fd2);const {FileContentReplaceTool:_0x446389}=await import('../tools/fileContentReplaceTool.js'),_0xa15c1=new _0x446389(this[_0x5781f4(0x83)],this[_0x5781f4(0x78)]);this['registerTool'](_0x5781f4(0x9a),_0xa15c1);if(this['config']['tools']?.['mcpTool']?.[_0x5781f4(0xa7)]){const _0x3516a1=new MCPClientTool(this['config'],this['logger']);this['registerTool'](_0x5781f4(0x73),_0x3516a1);}if(this[_0x5781f4(0x83)][_0x5781f4(0x88)]?.[_0x5781f4(0x79)]?.[_0x5781f4(0xa7)]){const _0x1cea2d=await import('../tools/uiTool.js'),_0x5a4e04=new _0x1cea2d(this['config'],this[_0x5781f4(0x78)]);this['registerTool']('ui',_0x5a4e04);}const {UpdateUserTool:_0x1cebc1}=await import(_0x5781f4(0x9c)),_0xbd99e8=new _0x1cebc1(this['config'],this[_0x5781f4(0x78)]);this['registerTool'](_0x5781f4(0x71),_0xbd99e8);const {DependencyResolverTool:_0x1e9cd7}=await import('../tools/dependencyResolverTool.js'),_0x356c06=new _0x1e9cd7(this[_0x5781f4(0x83)],this['logger']);this[_0x5781f4(0x7d)](_0x5781f4(0x95),_0x356c06);const {ImportAnalyzerTool:_0x309fa6}=await import('../tools/importAnalyzerTool.js'),_0x14536e=new _0x309fa6(this['config'],this[_0x5781f4(0x78)]);this['registerTool']('import-analyzer',_0x14536e);const {VisionAnalyzerTool:_0x30dbe6}=await import('../tools/visionAnalyzerTool.js'),_0x498f7d=new _0x30dbe6(this['config'],this['logger'],this['llmService']);this['registerTool'](_0x5781f4(0x89),_0x498f7d),this[_0x5781f4(0x78)]['info'](_0x5781f4(0xa0)+this[_0x5781f4(0x88)][_0x5781f4(0x98)]+_0x5781f4(0x90));}catch(_0x375d28){this[_0x5781f4(0x78)]['error'](_0x5781f4(0x86),_0x375d28);throw _0x375d28;}}['registerTool'](_0x5ca2e6,_0x277177){const _0x32fcce=a0_0x257fd0;this['logger']['info'](_0x32fcce(0xa4)+_0x5ca2e6);if(typeof _0x277177['execute']!=='function')throw new Error('Tool\x20'+_0x5ca2e6+_0x32fcce(0xab));if(typeof _0x277177['getDescription']!=='function')throw new Error(_0x32fcce(0x97)+_0x5ca2e6+'\x20does\x20not\x20have\x20a\x20getDescription\x20method');this[_0x32fcce(0x88)][_0x32fcce(0xa9)](_0x5ca2e6,_0x277177),this[_0x32fcce(0x80)]['set'](_0x5ca2e6,_0x277177[_0x32fcce(0x7a)]());}[a0_0x257fd0(0x9f)](_0x2cee8b){const _0xbc5b53=a0_0x257fd0;return this['tools'][_0xbc5b53(0x84)](_0x2cee8b);}[a0_0x257fd0(0x92)](_0x97999e){const _0x5aa36c=a0_0x257fd0;if(!this['tools'][_0x5aa36c(0x84)](_0x97999e))throw new Error('Tool\x20'+_0x97999e+'\x20not\x20found\x20in\x20registry');return this['tools'][_0x5aa36c(0x7e)](_0x97999e);}[a0_0x257fd0(0x7c)](){return Array['from'](this['tools']['keys']());}[a0_0x257fd0(0x76)](){const _0xf6b759=a0_0x257fd0;let _0x568218='';for(const [_0x10125d,_0x218295]of this[_0xf6b759(0x80)]['entries']()){_0x568218+='Tool\x20ID:\x20'+_0x10125d+'\x0a',_0x568218+=_0x218295+'\x0a\x0a';}return _0x568218;}[a0_0x257fd0(0xa6)](_0x1599a8){const _0x5496e1=a0_0x257fd0;if(!this['toolDescriptions'][_0x5496e1(0x84)](_0x1599a8))throw new Error(_0x5496e1(0x97)+_0x1599a8+'\x20not\x20found\x20in\x20registry');return this['toolDescriptions'][_0x5496e1(0x7e)](_0x1599a8);}[a0_0x257fd0(0x94)](){const _0x474bb1=a0_0x257fd0;let _0x57c8e1=_0x474bb1(0x99);for(const [_0x52861f,_0x31982b]of this[_0x474bb1(0x80)]['entries']()){_0x57c8e1+='##\x20'+_0x52861f+'\x0a',_0x57c8e1+=_0x31982b+'\x0a\x0a';}return _0x57c8e1+='To\x20use\x20a\x20tool,\x20wrap\x20your\x20commands\x20in\x20[tools-commands]\x20and\x20[/tools-commands]\x20tags.\x0a',_0x57c8e1+=_0x474bb1(0x93),_0x57c8e1+='Each\x20tool\x20has\x20its\x20own\x20specific\x20format\x20for\x20commands\x20as\x20described\x20above.',_0x57c8e1;}async[a0_0x257fd0(0x96)](){const _0x14176d=a0_0x257fd0;this[_0x14176d(0x78)]['info']('Shutting\x20down\x20all\x20tools');const _0x1141c5=[];for(const [_0x337f77,_0x431024]of this['tools']['entries']()){typeof _0x431024['shutdown']===_0x14176d(0xa5)&&(this[_0x14176d(0x78)][_0x14176d(0x8a)]('Shutting\x20down\x20tool:\x20'+_0x337f77),_0x1141c5['push'](_0x431024['shutdown']()));}await Promise[_0x14176d(0x87)](_0x1141c5),this['logger']['info']('All\x20tools\x20shut\x20down');}}