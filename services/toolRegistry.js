function a0_0x2bf5(){const _0x13c99f=['z2v0rgvZy3jPChrPB24','rM9YigvHy2GGDg9VBcWGDxnLifT0B29SigLKpsj0B29Sx2LKiL0Gyw5KifSVDg9VBf0GDgfNCYb0BYbZCgvJAwz5ihDOAwnOihrVB2WGDg8GDxnLlGO','Dg9VBhm','vg9VBca','Bg9Nz2vY','mJuZndK2rNLQDhr2','igrVzxmGBM90igHHDMuGysbNzxrezxnJCMLWDgLVBIbTzxrOB2q','C2v0uhjVAMvJDerPCMvJDg9YEq','y29UzMLN','zNvUy3rPB24','ig5VDcbMB3vUzcbPBIbYzwDPC3rYEq','mtCXnJjeruzvA24','C2v0teXnu2vYDMLJzq','ChvZAa','y29Kzs1HBMfSExnPCW','lI4VDg9VBhmVC2vLA1rVB2WUANm','mtfMzwjisxK','z2v0vg9VBeLKCW','mtjbtvjZrNO','zw50CMLLCW','otC4ntqWDe9jDNns','zMLSzs1JB250zw50lxjLCgXHy2u','C2H1DgrVD24','rwfJAcb0B29SigHHCYbPDhmGB3DUihnWzwnPzMLJigzVCM1HDcbMB3iGy29TBwfUzhmGyxmGzgvZy3jPyMvKigfIB3zLlG','lI4VDg9VBhmVy29KzufUywX5C2LZvg9VBc5QCW','AgfZvg9VBa','CMvNAxn0zxjcDwLSDeLUvg9VBhm','qxzHAwXHyMXLihrVB2XZoGOk','y3jLyxrLvg9VBhntExn0zw1qCM9TChq','vg8GDxnLigeGDg9VBcWGD3jHCcb5B3vYignVBw1HBMrZigLUifT0B29SCY1JB21Tyw5KC10Gyw5KifSVDg9VBhmTy29TBwfUzhnDihrHz3mUcG','lI4VDg9VBhmVzMLSzvn5C3rLBvrVB2WUANm','CMvNAxn0zxjuB29S','z2v0vg9VBerLC2nYAxb0Aw9U','Aw5MBW','nJGZmJK5mefvu3H2EG','zxHLy3v0zq','mtm1AKLzBenm','yNjVD3nLCG','vxbKyxrLzcbWCM9Qzwn0igrPCMvJDg9YEsbMB3iGDg9VBhm6ia','AgfZ','nZyYode1teTSAMTo','Dg9VBerLC2nYAxb0Aw9UCW','C2L6zq','qwXSihrVB2XZihnODxqGzg93BG','m0f1CLnouq','C2v0','ihrVB2XZ','z2v0','mtq5ntK1Ee5yDfjQ','lI4VDg9VBhmVBwvTB3j5vg9VBc5QCW','u2H1DhrPBMCGzg93BIbHBgWGDg9VBhm','z2v0vg9VBhnezxnJCMLWDgLVBG','lI4VDg9VBhmVzMLSzunVBNrLBNrszxbSywnLvg9VBc5QCW','ntC5mtK5nMnjs01otq','z2v0vg9VBa'];a0_0x2bf5=function(){return _0x13c99f;};return a0_0x2bf5();}const a0_0x1ff20f=a0_0x446d;(function(_0x382f01,_0x462110){const _0x1828ae=a0_0x446d,_0x597ddc=_0x382f01();while(!![]){try{const _0x249289=parseInt(_0x1828ae(0x13d))/0x1*(-parseInt(_0x1828ae(0x153))/0x2)+-parseInt(_0x1828ae(0x141))/0x3*(-parseInt(_0x1828ae(0x15a))/0x4)+parseInt(_0x1828ae(0x139))/0x5+-parseInt(_0x1828ae(0x15c))/0x6+-parseInt(_0x1828ae(0x146))/0x7+parseInt(_0x1828ae(0x14d))/0x8*(parseInt(_0x1828ae(0x135))/0x9)+-parseInt(_0x1828ae(0x133))/0xa*(-parseInt(_0x1828ae(0x158))/0xb);if(_0x249289===_0x462110)break;else _0x597ddc['push'](_0x597ddc['shift']());}catch(_0x5c48e7){_0x597ddc['push'](_0x597ddc['shift']());}}}(a0_0x2bf5,0x6c855));import a0_0x1e27e8 from'path';import{promises as a0_0x2de388}from'fs';function a0_0x446d(_0x41f962,_0x1cd584){const _0x2bf507=a0_0x2bf5();return a0_0x446d=function(_0x446d22,_0x5b34ce){_0x446d22=_0x446d22-0x131;let _0x1a6283=_0x2bf507[_0x446d22];if(a0_0x446d['NSlnEo']===undefined){var _0x4bc140=function(_0x1e27e8){const _0x2de388='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x432468='',_0xe2099e='';for(let _0x86bba6=0x0,_0x39dc81,_0x433af7,_0x4acfc1=0x0;_0x433af7=_0x1e27e8['charAt'](_0x4acfc1++);~_0x433af7&&(_0x39dc81=_0x86bba6%0x4?_0x39dc81*0x40+_0x433af7:_0x433af7,_0x86bba6++%0x4)?_0x432468+=String['fromCharCode'](0xff&_0x39dc81>>(-0x2*_0x86bba6&0x6)):0x0){_0x433af7=_0x2de388['indexOf'](_0x433af7);}for(let _0x2fda23=0x0,_0xc71835=_0x432468['length'];_0x2fda23<_0xc71835;_0x2fda23++){_0xe2099e+='%'+('00'+_0x432468['charCodeAt'](_0x2fda23)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xe2099e);};a0_0x446d['xKEfQy']=_0x4bc140,_0x41f962=arguments,a0_0x446d['NSlnEo']=!![];}const _0x1831c8=_0x2bf507[0x0],_0x30f891=_0x446d22+_0x1831c8,_0x33121=_0x41f962[_0x30f891];return!_0x33121?(_0x1a6283=a0_0x446d['xKEfQy'](_0x1a6283),_0x41f962[_0x30f891]=_0x1a6283):_0x1a6283=_0x33121,_0x1a6283;},a0_0x446d(_0x41f962,_0x1cd584);}export class ToolRegistry{constructor(_0x432468,_0xe2099e,_0x86bba6=null,_0x39dc81=null){const _0x16156b=a0_0x446d;this['config']=_0x432468,this[_0x16156b(0x14c)]=_0xe2099e,this['projectDir']=_0x39dc81,this['llmService']=_0x86bba6,this['tools']=new Map(),this[_0x16156b(0x13a)]=new Map(),this[_0x16156b(0x162)]();}['setLLMService'](_0x433af7){const _0xde0e09=a0_0x446d;this['llmService']=_0x433af7;if(this[_0xde0e09(0x14a)][_0xde0e09(0x138)]('browser')){const _0x4acfc1=this['tools'][_0xde0e09(0x140)](_0xde0e09(0x136));_0x4acfc1[_0xde0e09(0x154)](_0x433af7),this['logger']['info']('Updated\x20browser\x20tool\x20with\x20LLM\x20service\x20for\x20vision\x20capabilities');}if(this[_0xde0e09(0x14a)][_0xde0e09(0x138)]('image-gen')){const _0x2fda23=this['tools']['get']('image-gen');_0x2fda23[_0xde0e09(0x154)](_0x433af7),this['logger'][_0xde0e09(0x132)]('Updated\x20image\x20tool\x20with\x20LLM\x20service\x20for\x20image\x20generation');}}['setProjectDirectory'](_0xc71835){const _0x1b9e77=a0_0x446d;this['projectDir']=_0xc71835;const _0xcc84c0=this[_0x1b9e77(0x14a)]['get']('terminal');_0xcc84c0&&typeof _0xcc84c0[_0x1b9e77(0x14f)]===_0x1b9e77(0x151)&&_0xcc84c0['setProjectDirectory'](_0xc71835),this[_0x1b9e77(0x14c)]['info'](_0x1b9e77(0x137)+_0xc71835);}async[a0_0x1ff20f(0x162)](){const _0x218c43=a0_0x1ff20f;this['logger'][_0x218c43(0x132)]('Registering\x20built-in\x20tools');try{const {BrowserTool:_0x55e722}=await import('../tools/browserTool.js'),_0x14b1a0=new _0x55e722(this['config'],this[_0x218c43(0x14c)],this['llmService']);this[_0x218c43(0x167)]('browser',_0x14b1a0);const {TerminalTool:_0xc2ba6f}=await import('../tools/terminalTool.js'),_0x2369c4=new _0xc2ba6f(this[_0x218c43(0x150)],this[_0x218c43(0x14c)],undefined,this['projectDir']);this[_0x218c43(0x167)]('terminal',_0x2369c4);const {FileSystemTool:_0x4d7583}=await import(_0x218c43(0x166)),_0x4b9677=new _0x4d7583(this['config'],this['logger']);this[_0x218c43(0x167)]('filesys',_0x4b9677);const {FileTreeTool:_0x10fbc2}=await import('../tools/fileTreeTool.js'),_0x5868c8=new _0x10fbc2(this[_0x218c43(0x150)],this[_0x218c43(0x14c)]);this[_0x218c43(0x167)]('file-tree',_0x5868c8);const {SeekTool:_0x391888}=await import(_0x218c43(0x157)),_0x1bb520=new _0x391888(this['config'],this['logger']);this[_0x218c43(0x167)]('seek',_0x1bb520);const {MemoryTool:_0x4bf555}=await import(_0x218c43(0x142)),_0x2a69f5=new _0x4bf555(this[_0x218c43(0x150)],this[_0x218c43(0x14c)]);this['registerTool']('memory',_0x2a69f5);const {CodeAnalysisTool:_0x39d49f}=await import(_0x218c43(0x160)),_0xd3990c=new _0x39d49f(this['config'],this[_0x218c43(0x14c)]);this[_0x218c43(0x167)](_0x218c43(0x156),_0xd3990c);const {FileContentReplaceTool:_0x4c2dec}=await import(_0x218c43(0x145)),_0x318a15=new _0x4c2dec(this['config'],this[_0x218c43(0x14c)]);this[_0x218c43(0x167)](_0x218c43(0x15d),_0x318a15);if(this['config']['tools']?.['mcpTool']?.['enabled']){const _0x66999e=new MCPClientTool(this[_0x218c43(0x150)],this['logger']);this[_0x218c43(0x167)]('mcp-client',_0x66999e);}if(this['config'][_0x218c43(0x14a)]?.['uiTool']?.['enabled']){const _0x13e322=await import('../tools/uiTool.js'),_0x256163=new _0x13e322(this[_0x218c43(0x150)],this[_0x218c43(0x14c)]);this[_0x218c43(0x167)]('ui',_0x256163);}const {UpdateUserTool:_0x5b3e40}=await import('../tools/updateUserTool.js'),_0x5eb9f5=new _0x5b3e40(this[_0x218c43(0x150)],this[_0x218c43(0x14c)]);this[_0x218c43(0x167)]('update-user',_0x5eb9f5),this[_0x218c43(0x14c)][_0x218c43(0x132)]('Registered\x20'+this[_0x218c43(0x14a)][_0x218c43(0x13b)]+_0x218c43(0x13f));}catch(_0x2637e4){this[_0x218c43(0x14c)]['error']('Error\x20registering\x20built-in\x20tools:',_0x2637e4);throw _0x2637e4;}}['registerTool'](_0x44e2ec,_0x427442){const _0x454011=a0_0x1ff20f;this['logger']['info']('Registering\x20tool:\x20'+_0x44e2ec);if(typeof _0x427442[_0x454011(0x134)]!==_0x454011(0x151))throw new Error(_0x454011(0x14b)+_0x44e2ec+'\x20does\x20not\x20have\x20an\x20execute\x20method');if(typeof _0x427442['getDescription']!==_0x454011(0x151))throw new Error(_0x454011(0x14b)+_0x44e2ec+_0x454011(0x14e));this['tools'][_0x454011(0x13e)](_0x44e2ec,_0x427442),this['toolDescriptions']['set'](_0x44e2ec,_0x427442[_0x454011(0x148)]());}[a0_0x1ff20f(0x161)](_0x18bcbf){const _0x116ff8=a0_0x1ff20f;return this[_0x116ff8(0x14a)]['has'](_0x18bcbf);}[a0_0x1ff20f(0x147)](_0xd2bf28){const _0x4e1963=a0_0x1ff20f;if(!this[_0x4e1963(0x14a)]['has'](_0xd2bf28))throw new Error(_0x4e1963(0x14b)+_0xd2bf28+_0x4e1963(0x152));return this['tools'][_0x4e1963(0x140)](_0xd2bf28);}[a0_0x1ff20f(0x159)](){const _0x44ccbc=a0_0x1ff20f;return Array['from'](this[_0x44ccbc(0x14a)]['keys']());}[a0_0x1ff20f(0x144)](){let _0x422ef1='';for(const [_0x274417,_0x43deb]of this['toolDescriptions']['entries']()){_0x422ef1+='Tool\x20ID:\x20'+_0x274417+'\x0a',_0x422ef1+=_0x43deb+'\x0a\x0a';}return _0x422ef1;}[a0_0x1ff20f(0x131)](_0x3bae2a){const _0x2324c1=a0_0x1ff20f;if(!this[_0x2324c1(0x13a)]['has'](_0x3bae2a))throw new Error('Tool\x20'+_0x3bae2a+_0x2324c1(0x152));return this[_0x2324c1(0x13a)][_0x2324c1(0x140)](_0x3bae2a);}[a0_0x1ff20f(0x164)](){const _0x10a90a=a0_0x1ff20f;let _0x50f7ce=_0x10a90a(0x163);for(const [_0x6f1956,_0x598e42]of this[_0x10a90a(0x13a)][_0x10a90a(0x15b)]()){_0x50f7ce+='##\x20'+_0x6f1956+'\x0a',_0x50f7ce+=_0x598e42+'\x0a\x0a';}return _0x50f7ce+=_0x10a90a(0x165),_0x50f7ce+=_0x10a90a(0x149),_0x50f7ce+=_0x10a90a(0x15f),_0x50f7ce;}async['shutdown'](){const _0x5d9af9=a0_0x1ff20f;this[_0x5d9af9(0x14c)][_0x5d9af9(0x132)](_0x5d9af9(0x143));const _0x5d7477=[];for(const [_0x1c1dd3,_0x1e53ae]of this[_0x5d9af9(0x14a)]['entries']()){typeof _0x1e53ae[_0x5d9af9(0x15e)]==='function'&&(this['logger']['info']('Shutting\x20down\x20tool:\x20'+_0x1c1dd3),_0x5d7477[_0x5d9af9(0x155)](_0x1e53ae['shutdown']()));}await Promise['allSettled'](_0x5d7477),this['logger']['info'](_0x5d9af9(0x13c));}}