const a0_0x2f58fa=a0_0x22f7;(function(_0x2a86de,_0xbc4902){const _0x48fd19=a0_0x22f7,_0x55fef0=_0x2a86de();while(!![]){try{const _0x1d79b0=-parseInt(_0x48fd19(0xc4))/0x1*(parseInt(_0x48fd19(0x92))/0x2)+-parseInt(_0x48fd19(0x80))/0x3+-parseInt(_0x48fd19(0x8f))/0x4*(parseInt(_0x48fd19(0x11f))/0x5)+parseInt(_0x48fd19(0x122))/0x6+-parseInt(_0x48fd19(0x124))/0x7*(-parseInt(_0x48fd19(0xe7))/0x8)+parseInt(_0x48fd19(0x99))/0x9*(-parseInt(_0x48fd19(0xa0))/0xa)+-parseInt(_0x48fd19(0xdb))/0xb*(-parseInt(_0x48fd19(0xf4))/0xc);if(_0x1d79b0===_0xbc4902)break;else _0x55fef0['push'](_0x55fef0['shift']());}catch(_0x1d2656){_0x55fef0['push'](_0x55fef0['shift']());}}}(a0_0x3300,0x5ec2b));const a0_0x2f1593=(function(){const _0xa149d1=a0_0x22f7,_0x530936={};_0x530936[_0xa149d1(0x10e)]=function(_0x13fd18,_0x815fb6){return _0x13fd18!==_0x815fb6;},_0x530936[_0xa149d1(0x109)]=_0xa149d1(0x85),_0x530936['QQdnR']='wjHKb';const _0x2670da=_0x530936;let _0x1e90e1=!![];return function(_0x55e8f3,_0x5734a9){const _0x342e1a=_0xa149d1;if(_0x2670da[_0x342e1a(0x10e)](_0x2670da[_0x342e1a(0x109)],_0x2670da[_0x342e1a(0x10d)])){const _0x2dce60=_0x1e90e1?function(){if(_0x5734a9){const _0xc95d20=_0x5734a9['apply'](_0x55e8f3,arguments);return _0x5734a9=null,_0xc95d20;}}:function(){};return _0x1e90e1=![],_0x2dce60;}else{const _0x2d8f78={};_0x2d8f78[_0x342e1a(0x98)]='anthropic-sonnet',_0x2d8f78[_0x342e1a(0xdd)]=_0x342e1a(0xd3),_0x2d8f78['google']=_0x342e1a(0x91);const _0x4443d0=_0x2d8f78;return _0x4443d0[_0x228c68]||_0x438027;}};}()),a0_0x2944e1=a0_0x2f1593(this,function(){const _0x58cecf=a0_0x22f7,_0x5b9ccf={};_0x5b9ccf[_0x58cecf(0xce)]=_0x58cecf(0xfe);const _0x546f79=_0x5b9ccf;return a0_0x2944e1[_0x58cecf(0x125)]()[_0x58cecf(0xb0)](_0x546f79[_0x58cecf(0xce)])[_0x58cecf(0x125)]()[_0x58cecf(0x114)](a0_0x2944e1)['search'](_0x546f79[_0x58cecf(0xce)]);});function a0_0x3300(){const _0x26200b=['nhPwu2DzCW','Bwf4uMv0CMLLCW','z29Vz2XLlwDLBwLUAq','nJK4ntG0D3HItKjU','BxmGkhvUDgLSia','Dg9Vig1HBNKGCMvXDwvZDhm','x19WCM90B19F','yxzHAwXHyMXL','y29UDMvYC2f0Aw9Uu2vYDMLJzxm','yw50AhjVCgLJ','ndGZnZC3Eurfy1fn','y2XLyxi','B2fkEhK','t1rewNG','wvjrAe8','BxmUlI4','DK5MC04','mtaWwMrhvuH3','tNjsrfm','yxv0AgvUDgLJyxrPB24GzMfPBgvK','wLP4vvu','C2vYDMLJzuLUC3rHBMnLCW','vLjivxy','zgvIDwC','z29Vz2XL','z2v0','sxf4vg4','uMv0CNLPBMCGywz0zxiG','z2v0tgfZDeLUChv0vg9Rzw5dB3vUDa','rfzZs0e','sLftrNy','Cvzmu2m','vfDpEvm','C2vHCMnO','yw50AhjVCgLJlxnVBM5LDa','ig5VDcbMB3vUzcbMB3iGy29UDMvYC2f0Aw9Uia','x2LZtM9UuMv0CNLHyMXLrxjYB3i','x2LZuMf0zuXPBwL0rxjYB3i','oIbsyxrLigXPBwL0igHPDhmGCMvZzxqGkhn1y2nLC3nMDwWGCMvXDwvZDcK','Aw52ywXPzcbYzxf1zxn0igzVCM1HDa','Dg9ju09tDhjPBMC','Bg9Nz2vY','rMjwy2O','qwXSihjLDhj5igf0DgvTChrZigzHAwXLzdOG','x2DLDfnLCNzPy2vnB2rLBeLK','DK9pEg0','BKrfDeC','BM93','zKXWrvi','yuvzru4','uen4Bvq','shzvuMG','q3n2sgq','mMDVEMDLyq','yKT1qLm','y29UC29Szq','C2vUze1LC3nHz2u','u2vYDMLJzsa','Ae5fq2u','u2zgB0W','r2PuDwy','CMv0DxjUicHMDw5JDgLVBIGPia','yMLUza','rhDdAxK','ExDqBMO','Dg9mB3DLCKnHC2u','CMv0CMLLCW','zfj6Age','B3bLBMfPlwDWDdq','z2v0uMf0zuXPBwL0Aw5Nu3rHDhvZ','yxbWBhK','BMv4DefSBg93zwruAw1L','CMvXDwvZDcbSAw1PDa','BwvZC2fNzq','zgvNCMfKzwq','C0HSzvm','mtf6DLzfEfG','oIbszwfKEsb0BYbZzw5KicHUBYbKzwXHEsbUzwvKzwqP','B3bLBMfP','su5jveLbtf9sqvrfx0XjtuLux0rftefz','zhrhEgq','suXiwgC','Agvhsu8','rvHuru5erurFuKfurv9msu1jvf9eruXbwq','CMf0zuXPBwL0sgL0CW','BM1Yv28','CMvZzxrsyxrLtgLTAxriAxrZ','Aw52ywXPzcbHCgKGA2v5','mta0swnoyurP','DgHYB3r0Bgu','ChznBg4','C2v0rgvSyxK','yMfZzurLBgf5txm','uhzOv1i','uvLTq1G','tg1TyMu','qvPezge','uMvXDwvZDcbMywLSzwqGkgf0DgvTChqG','tgrMrvO','zgvSzxrL','z2v0u3rHDhvZ','mJeYndqXnJryww5qrLu','EhfxBMG','uMf0zsbSAw1PDcbOAxqGiW','vfrIwuK','Bw9KzwWGBM90igzVDw5K','C2v0','EeD5swG','C29Tzq','rfDHwvu','teX0A2G','kcGOlISPkYKRksSK','Dw5HDxrOB3jPEMvK','CMf0zuXPBwL0u2vYDMLJzq','Aw5JBhvKzxm','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','yLPUvvi','y29UDgvUDcbWB2XPy3K','Aw5MBW','DhjHy2u','D0jXAgu','wK9iDvi','tvzrz0m','BxmGyMvMB3jLihnLBMrPBMCGkhvUDgLSia','A2v5CW','wLncrK8','uvfKBLi','t3DdqNi','ndi5','zxHJzxb0Aw9U','shnbsxu','z2v0qwXSu3rHDhvZ','vu5muLK','y29UC3rYDwn0B3i','D2fYBG','C2vYDMLJzvn0yxr1CW','qKHlALK','y29UzMLN','CLPAt0u','BNjKsNi','q0Hfq0TFsu5urvjwquW','yNvKz2v0u2vYDMLJzq','tMPNz0W','BgnxreG','ntyWmdCWB0niuhLH','zxjhDu0','uMf0zsbSAw1PDcbKzwXHEsbZzxqGzM9Yia','mJe3mJGYmMzRwLPkCa','CLjsExq','mtq0mtm3Ahnfrwzo','Dg9tDhjPBMC','A2XSz08','uMf0zsbSAw1PDgLUzYbZDgf0zsbJBgvHCMvK','wK9Uu2G','q29UDMvYC2f0Aw9Uia','ChjVDg90ExbL','vw5RBM93BIbLCNjVCG','mtK5mtCWmhnwD2XKva','zLPWA1G','BgvUz3rO','D2fPDeLMtMvLzgvK','CMf0zsbSAw1PDa','EhvWtfa','zMfeug4','De1ZA0K','z3jNuKG','r1LmuMW','AgfUzgXLuMf0zuXPBwL0sgL0','v1zzrg0','zgvSyxLnDwX0AxbSAwvY','shn3DgW','vvPqEfC'];a0_0x3300=function(){return _0x26200b;};return a0_0x3300();}function a0_0x22f7(_0x2b742b,_0x329c67){const _0x304e21=a0_0x3300();return a0_0x22f7=function(_0xe3bdf4,_0x430da4){_0xe3bdf4=_0xe3bdf4-0x7d;let _0x4f0c8a=_0x304e21[_0xe3bdf4];if(a0_0x22f7['qmgIlP']===undefined){var _0x416db9=function(_0x22f7db){const _0x35ce7e='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5a2bd4='',_0xec87d='',_0x1087c6=_0x5a2bd4+_0x416db9;for(let _0x41d464=0x0,_0x24ba4d,_0x3b0593,_0x5300dd=0x0;_0x3b0593=_0x22f7db['charAt'](_0x5300dd++);~_0x3b0593&&(_0x24ba4d=_0x41d464%0x4?_0x24ba4d*0x40+_0x3b0593:_0x3b0593,_0x41d464++%0x4)?_0x5a2bd4+=_0x1087c6['charCodeAt'](_0x5300dd+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x24ba4d>>(-0x2*_0x41d464&0x6)):_0x41d464:0x0){_0x3b0593=_0x35ce7e['indexOf'](_0x3b0593);}for(let _0x302d22=0x0,_0xa9e0f=_0x5a2bd4['length'];_0x302d22<_0xa9e0f;_0x302d22++){_0xec87d+='%'+('00'+_0x5a2bd4['charCodeAt'](_0x302d22)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xec87d);};a0_0x22f7['JYtvCw']=_0x416db9,_0x2b742b=arguments,a0_0x22f7['qmgIlP']=!![];}const _0x2944e1=_0x304e21[0x0],_0x2f1593=_0xe3bdf4+_0x2944e1,_0x3300db=_0x2b742b[_0x2f1593];if(!_0x3300db){const _0x34dd1c=function(_0x261065){this['MRzVHM']=_0x261065,this['DMHHHm']=[0x1,0x0,0x0],this['zELvkc']=function(){return'newState';},this['wIxUgT']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['vMvLHA']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x34dd1c['prototype']['mXTRGR']=function(){const _0x2f23d7=new RegExp(this['wIxUgT']+this['vMvLHA']),_0x47bea2=_0x2f23d7['test'](this['zELvkc']['toString']())?--this['DMHHHm'][0x1]:--this['DMHHHm'][0x0];return this['egGllI'](_0x47bea2);},_0x34dd1c['prototype']['egGllI']=function(_0x2d7618){if(!Boolean(~_0x2d7618))return _0x2d7618;return this['zEyifW'](this['MRzVHM']);},_0x34dd1c['prototype']['zEyifW']=function(_0x4049c8){for(let _0x12c40b=0x0,_0x21b92d=this['DMHHHm']['length'];_0x12c40b<_0x21b92d;_0x12c40b++){this['DMHHHm']['push'](Math['round'](Math['random']())),_0x21b92d=this['DMHHHm']['length'];}return _0x4049c8(this['DMHHHm'][0x0]);},new _0x34dd1c(a0_0x22f7)['mXTRGR'](),_0x4f0c8a=a0_0x22f7['JYtvCw'](_0x4f0c8a),_0x2b742b[_0x2f1593]=_0x4f0c8a;}else _0x4f0c8a=_0x3300db;return _0x4f0c8a;},a0_0x22f7(_0x2b742b,_0x329c67);}a0_0x2944e1();const a0_0x430da4=(function(){const _0x3d54bd=a0_0x22f7,_0x29a876={};_0x29a876[_0x3d54bd(0xe0)]=_0x3d54bd(0xee);const _0x562c30=_0x29a876;let _0x2080d7=!![];return function(_0x578073,_0x2dba96){const _0xebc4cd=_0x3d54bd;if(_0x562c30[_0xebc4cd(0xe0)]!==_0x562c30[_0xebc4cd(0xe0)]){if(_0x527e97){const _0x30475e=_0x1c2e19[_0xebc4cd(0xd5)](_0x316a17,arguments);return _0x18e75a=null,_0x30475e;}}else{const _0x492506=_0x2080d7?function(){if(_0x2dba96){const _0x1d1b25=_0x2dba96['apply'](_0x578073,arguments);return _0x2dba96=null,_0x1d1b25;}}:function(){};return _0x2080d7=![],_0x492506;}};}()),a0_0xe3bdf4=a0_0x430da4(this,function(){const _0x3f8335=a0_0x22f7,_0x496f8c={'faDPn':function(_0x25734c,_0x4d255b){return _0x25734c===_0x4d255b;},'WVYDm':_0x3f8335(0xfd),'rRRyt':function(_0x9ae069,_0x55bb23){return _0x9ae069(_0x55bb23);},'oFCgR':function(_0x13b039,_0x482c4b){return _0x13b039+_0x482c4b;},'eAoxU':_0x3f8335(0xcc),'bKuBS':'{}.constructor(\x22return\x20this\x22)(\x20)','fZpkX':_0x3f8335(0xe9),'WNiPB':function(_0x4b6542){return _0x4b6542();},'LdfEZ':'log','vNfsN':_0x3f8335(0x115),'CDYhN':_0x3f8335(0x105),'xjSKf':'error','aEYEN':_0x3f8335(0x110),'ywPnj':'table','dRzha':function(_0x22b49c,_0x57f786){return _0x22b49c<_0x57f786;}},_0x2950a7=function(){const _0x133966=_0x3f8335;let _0x44504a;try{if(_0x496f8c[_0x133966(0x86)](_0x496f8c['WVYDm'],_0x496f8c[_0x133966(0x8b)]))_0x44504a=_0x496f8c[_0x133966(0x123)](Function,_0x496f8c['oFCgR'](_0x496f8c['eAoxU']+_0x496f8c[_0x133966(0xc5)],');'))();else throw new _0x47da5c(_0x133966(0xc8)+_0x324496+_0x133966(0xb2)+_0x16e072);}catch(_0xf12754){_0x496f8c['faDPn'](_0x133966(0xe9),_0x496f8c[_0x133966(0x81)])?_0x44504a=window:_0x4c5614=this[_0x133966(0xe2)];}return _0x44504a;},_0x27984f=_0x496f8c['WNiPB'](_0x2950a7),_0x260eba=_0x27984f[_0x3f8335(0xc6)]=_0x27984f[_0x3f8335(0xc6)]||{},_0x507437=[_0x496f8c[_0x3f8335(0xf1)],_0x496f8c[_0x3f8335(0x9f)],_0x496f8c['CDYhN'],_0x496f8c['xjSKf'],_0x496f8c[_0x3f8335(0xc0)],_0x496f8c[_0x3f8335(0xcf)],_0x3f8335(0x106)];for(let _0xa6be3a=0x0;_0x496f8c[_0x3f8335(0xd2)](_0xa6be3a,_0x507437[_0x3f8335(0x82)]);_0xa6be3a++){const _0x3c11d4=a0_0x430da4[_0x3f8335(0x114)][_0x3f8335(0x7e)][_0x3f8335(0xcd)](a0_0x430da4),_0x18a0c0=_0x507437[_0xa6be3a],_0x51b1a2=_0x260eba[_0x18a0c0]||_0x3c11d4;_0x3c11d4[_0x3f8335(0x95)]=a0_0x430da4['bind'](a0_0x430da4),_0x3c11d4[_0x3f8335(0x125)]=_0x51b1a2['toString'][_0x3f8335(0xcd)](_0x51b1a2),_0x260eba[_0x18a0c0]=_0x3c11d4;}});a0_0xe3bdf4();export class RateLimitService{constructor(_0x49cafe){const _0x33da52=a0_0x22f7;this['logger']=_0x49cafe,this[_0x33da52(0xd6)]=new Map(),this[_0x33da52(0xe3)]=new Map(),this['INITIAL_RATE_LIMIT_DELAY']=0x7530,this[_0x33da52(0xe2)]=0xea60,this['CHECK_INTERVAL']=0x3e8;}[a0_0x2f58fa(0xea)](_0x427f17,_0x203dfc){const _0x5ae588=a0_0x2f58fa,_0x24e594={};_0x24e594['HujXy']=function(_0x4183c5,_0x487247){return _0x4183c5+_0x487247;},_0x24e594[_0x5ae588(0xda)]=function(_0x4fefe7,_0x20cf5c){return _0x4fefe7>_0x20cf5c;};const _0x4e827f=_0x24e594,_0x153433=_0x4e827f['HujXy'](Date[_0x5ae588(0xbe)](),_0x203dfc),_0xb5004a=this[_0x5ae588(0xd6)]['get'](_0x427f17)||0x0;_0x4e827f['sHleS'](_0x153433,_0xb5004a)&&(this['nextAllowedTime'][_0x5ae588(0xf9)](_0x427f17,_0x153433),this[_0x5ae588(0xb8)][_0x5ae588(0x105)]('Rate\x20limit\x20delay\x20set\x20for\x20'+_0x427f17+':\x20'+_0x203dfc+'ms\x20(until\x20'+new Date(_0x153433)['toISOString']()+')'));}[a0_0x2f58fa(0x8a)](_0x27551a){const _0x45c3ab=a0_0x2f58fa,_0x11ec9c={};_0x11ec9c['ZOHuR']=function(_0x1faf44,_0x16f2e5){return _0x1faf44+_0x16f2e5;},_0x11ec9c['nrdJr']=function(_0x1b4023,_0x8e881a){return _0x1b4023+_0x8e881a;},_0x11ec9c[_0x45c3ab(0xef)]=function(_0x3ce8e8,_0x2ff370){return _0x3ce8e8===_0x2ff370;},_0x11ec9c[_0x45c3ab(0xa9)]=function(_0x27c867,_0x279032){return _0x27c867===_0x279032;},_0x11ec9c[_0x45c3ab(0x11e)]=_0x45c3ab(0xfc);const _0x4985e0=_0x11ec9c,_0x5141e3=this['rateLimitHits'][_0x45c3ab(0xa8)](_0x27551a)||0x0,_0x2c643b=_0x4985e0[_0x45c3ab(0x11a)](_0x5141e3,0x1);this[_0x45c3ab(0xe3)]['set'](_0x27551a,_0x2c643b);let _0x2a9e51;if(_0x4985e0[_0x45c3ab(0xef)](_0x2c643b,0x1)){if(_0x4985e0[_0x45c3ab(0xa9)](_0x4985e0['lcWDH'],_0x4985e0[_0x45c3ab(0x11e)]))_0x2a9e51=this[_0x45c3ab(0xde)];else{const _0x5a8121=_0x4985e0[_0x45c3ab(0x108)](_0xbe44fa[_0x45c3ab(0xbe)](),_0x20196e),_0x626b7e=this[_0x45c3ab(0xd6)][_0x45c3ab(0xa8)](_0x48ef26)||0x0;_0x5a8121>_0x626b7e&&(this['nextAllowedTime'][_0x45c3ab(0xf9)](_0xee0a6a,_0x5a8121),this[_0x45c3ab(0xb8)][_0x45c3ab(0x105)](_0x45c3ab(0x121)+_0xdd7a26+':\x20'+_0x586d24+_0x45c3ab(0x93)+new _0x5eac61(_0x5a8121)['toISOString']()+')'));}}else _0x2a9e51=this['EXTENDED_RATE_LIMIT_DELAY'];this['setDelay'](_0x27551a,_0x2a9e51),this[_0x45c3ab(0xb8)]['warn'](_0x45c3ab(0xf6)+_0x2c643b+'\x20for\x20'+_0x27551a+',\x20applying\x20'+_0x2a9e51+'ms\x20delay');}async[a0_0x2f58fa(0x83)](_0x5d60e4){const _0x59880d=a0_0x2f58fa,_0x22a038={};_0x22a038[_0x59880d(0x120)]=function(_0x244de8,_0xc09ccd){return _0x244de8-_0xc09ccd;},_0x22a038['SfFoL']=function(_0x8fbe57,_0x5497a9){return _0x8fbe57+_0x5497a9;};const _0x15ecb=_0x22a038,_0x50dee7=this[_0x59880d(0xd6)]['get'](_0x5d60e4)||0x0,_0x5455ed=Date['now']();if(_0x5455ed>=_0x50dee7){this[_0x59880d(0xb8)]['debug'](_0x5d60e4+_0x59880d(0xdc));return;}const _0xa65bfb=_0x15ecb[_0x59880d(0x120)](_0x50dee7,_0x5455ed),_0x2f97e9=_0x15ecb[_0x59880d(0xca)](_0xa65bfb,this[_0x59880d(0x11b)]);this[_0x59880d(0xb8)][_0x59880d(0x105)](_0x5d60e4+':\x20Waiting\x20'+_0x2f97e9+_0x59880d(0x10a)+new Date(_0x50dee7+this[_0x59880d(0x11b)])[_0x59880d(0xb7)]()+')'),await new Promise(_0x36d234=>setTimeout(_0x36d234,_0x2f97e9));}[a0_0x2f58fa(0xe5)](_0x30506e){const _0x209d7b=a0_0x2f58fa;this[_0x209d7b(0xe3)]['has'](_0x30506e)&&(this[_0x209d7b(0xe3)][_0x209d7b(0xf2)](_0x30506e),this[_0x209d7b(0xb8)][_0x209d7b(0xa6)](_0x30506e+_0x209d7b(0xb5)));}[a0_0x2f58fa(0xf3)](_0x45f263){const _0x5c00eb=a0_0x2f58fa,_0x11f595={};_0x11f595[_0x5c00eb(0xa5)]=function(_0xe69683,_0x246491){return _0xe69683>_0x246491;},_0x11f595[_0x5c00eb(0x103)]=function(_0x4f1af5,_0x350377){return _0x4f1af5-_0x350377;},_0x11f595[_0x5c00eb(0x119)]=function(_0x19ff3f,_0x4be661){return _0x19ff3f>=_0x4be661;};const _0x6d83aa=_0x11f595,_0x2beaf9=this['nextAllowedTime'][_0x5c00eb(0xa8)](_0x45f263)||0x0,_0x997df1=this[_0x5c00eb(0xe3)][_0x5c00eb(0xa8)](_0x45f263)||0x0,_0x4f7949=Date[_0x5c00eb(0xbe)]();return{'serviceModel':_0x45f263,'nextAllowedTime':_0x2beaf9,'nextAllowedDate':_0x6d83aa[_0x5c00eb(0xa5)](_0x2beaf9,0x0)?new Date(_0x2beaf9)[_0x5c00eb(0xb7)]():null,'remainingDelayMs':Math['max'](0x0,_0x6d83aa['bZnUR'](_0x2beaf9,_0x4f7949)),'canSendNow':_0x6d83aa['rZZOE'](_0x4f7949,_0x2beaf9),'consecutiveRateLimitHits':_0x997df1};}[a0_0x2f58fa(0x112)](){const _0x172657=a0_0x2f58fa,_0x4c39ab=new Set([...this[_0x172657(0xd6)][_0x172657(0x10b)](),...this['rateLimitHits'][_0x172657(0x10b)]()]),_0x171c3e={};for(const _0x5c3cbf of _0x4c39ab){_0x171c3e[_0x5c3cbf]=this['getStatus'](_0x5c3cbf);}return _0x171c3e;}['clear'](){const _0x213ba9=a0_0x2f58fa;this[_0x213ba9(0xd6)][_0x213ba9(0x9a)](),this[_0x213ba9(0xe3)]['clear'](),this['logger'][_0x213ba9(0x105)](_0x213ba9(0x127));}}export class EnhancedLLMService{constructor(_0x254b3c,_0x36e2b0){const _0x56e061=a0_0x2f58fa;this['config']=_0x254b3c,this['logger']=_0x36e2b0,this[_0x56e061(0x100)]=new RateLimitService(_0x36e2b0),this[_0x56e061(0x11c)]=new BudgetService(_0x254b3c,_0x36e2b0),this[_0x56e061(0xa4)]=new Map(),this['conversationServices']=new Map(),this[_0x56e061(0x116)]=new Map();}async[a0_0x2f58fa(0xc7)](_0x52c920,_0x5f4e98,_0x956d9f){const _0x5b9ce7=a0_0x2f58fa,_0x34a513={'Hswtl':_0x5b9ce7(0x94),'ZOnSh':_0x5b9ce7(0x10f),'aITqp':'authentication\x20failed','xqWnh':_0x5b9ce7(0xff),'TTbYI':_0x5b9ce7(0xf8),'JQSFv':_0x5b9ce7(0xb6),'weBqr':function(_0x40f111,_0x151b01){return _0x40f111(_0x151b01);},'NjggL':function(_0x4383b6,_0x13ae1a){return _0x4383b6+_0x13ae1a;},'yUUNy':_0x5b9ce7(0xcc),'wBqhe':function(_0x15fd88,_0x5ca0d9){return _0x15fd88<=_0x5ca0d9;},'NrRDS':function(_0x436ec0,_0xffa59){return _0x436ec0!==_0xffa59;},'HqrJN':_0x5b9ce7(0xe1),'hNECe':_0x5b9ce7(0x126),'oaJxy':'IWnSp','BHKjY':function(_0x274d61,_0x4f921c){return _0x274d61===_0x4f921c;},'nmrWo':_0x5b9ce7(0xd9),'CQwdF':_0x5b9ce7(0xc2),'CsvHd':_0x5b9ce7(0xbd),'YRQhO':_0x5b9ce7(0x96),'UNLRY':function(_0x526c7c,_0x40f48f){return _0x526c7c===_0x40f48f;},'DVsKA':'DtIQk','fLpER':function(_0x4052ae,_0x2769be){return _0x4052ae+_0x2769be;},'TWOyS':function(_0x1d9b62,_0xf7dbc9){return _0x1d9b62<_0xf7dbc9;},'ZSBFO':_0x5b9ce7(0xb9),'RSSjJ':_0x5b9ce7(0xc1),'OTDZx':'Rate\x20limit\x20error\x20detected,\x20waiting\x20and\x20retrying...','vOOxm':_0x5b9ce7(0x7f)},_0x5c7adc=this[_0x5b9ce7(0x97)][_0x5b9ce7(0xa8)](_0x52c920);if(!_0x5c7adc)throw new Error(_0x5b9ce7(0x7d)+_0x52c920+'\x20is\x20not\x20registered\x20with\x20any\x20service');const _0x4bdcff=this[_0x5b9ce7(0xa4)][_0x5b9ce7(0xa8)](_0x5c7adc);if(!_0x4bdcff)throw new Error('Service\x20'+_0x5c7adc+'\x20not\x20found\x20for\x20conversation\x20'+_0x52c920);const _0x1130cf=this[_0x5b9ce7(0xbb)](_0x5c7adc);await this[_0x5b9ce7(0x100)][_0x5b9ce7(0x83)](_0x1130cf);const _0xd38e42=this['config'][_0x5b9ce7(0xd1)]?.[_0x5b9ce7(0x90)]||0x3;let _0x383fdf=0x0,_0x2ca224=null;while(_0x34a513[_0x5b9ce7(0x107)](_0x383fdf,_0xd38e42)){if(_0x34a513[_0x5b9ce7(0xa1)](_0x34a513['HqrJN'],_0x34a513[_0x5b9ce7(0xc9)]))try{if(_0x34a513[_0x5b9ce7(0xa1)](_0x34a513[_0x5b9ce7(0x9b)],_0x34a513['oaJxy'])){const _0x3704cf=_0x2f23d7?function(){const _0x1f44d0=_0x5b9ce7;if(_0x209c37){const _0x12214d=_0x49c4aa[_0x1f44d0(0xd5)](_0x465330,arguments);return _0xbacc39=null,_0x12214d;}}:function(){};return _0x21b92d=![],_0x3704cf;}else{const _0x5d7e43=await _0x4bdcff['sendMessage'](_0x52c920,_0x5f4e98,_0x956d9f);this[_0x5b9ce7(0x100)][_0x5b9ce7(0xe5)](_0x1130cf),await this[_0x5b9ce7(0x11c)]['recordUsage'](_0x5c7adc,_0x4bdcff[_0x5b9ce7(0xab)](),_0x4bdcff['getLastOutputTokenCount']());if(_0x34a513[_0x5b9ce7(0x117)](this[_0x5b9ce7(0x116)]['get'](_0x5c7adc),_0x34a513[_0x5b9ce7(0xe4)])){if(_0x34a513['BHKjY'](_0x34a513['CQwdF'],_0x34a513[_0x5b9ce7(0xc3)])){const _0x1e0088=[_0x5b9ce7(0x84),_0x34a513[_0x5b9ce7(0x8d)],'quota\x20exceeded',_0x5b9ce7(0xd7),_0x34a513[_0x5b9ce7(0x128)],_0x5b9ce7(0xe8)],_0x58242f=_0x1aaad5[_0x5b9ce7(0xd8)]?.[_0x5b9ce7(0xd0)]()||'';return _0x1e0088['some'](_0x1e65c3=>_0x58242f[_0x5b9ce7(0x101)](_0x1e65c3));}else this[_0x5b9ce7(0x116)][_0x5b9ce7(0xf9)](_0x5c7adc,_0x34a513[_0x5b9ce7(0x9d)]);}return _0x5d7e43;}}catch(_0x998ce4){if(_0x34a513[_0x5b9ce7(0x113)]('DtIQk',_0x34a513[_0x5b9ce7(0xac)])){_0x2ca224=_0x998ce4,this['logger']['error'](_0x5b9ce7(0xf0)+_0x34a513[_0x5b9ce7(0xbf)](_0x383fdf,0x1)+'/'+_0x34a513[_0x5b9ce7(0xbf)](_0xd38e42,0x1)+'):',_0x998ce4);if(this[_0x5b9ce7(0xb4)](_0x998ce4)){this[_0x5b9ce7(0x100)][_0x5b9ce7(0x8a)](_0x1130cf);if(_0x34a513[_0x5b9ce7(0xaf)](_0x383fdf,_0xd38e42)){if(_0x34a513[_0x5b9ce7(0x10c)]!==_0x34a513['RSSjJ']){this['logger'][_0x5b9ce7(0x105)](_0x34a513[_0x5b9ce7(0x9c)]),await this[_0x5b9ce7(0x100)][_0x5b9ce7(0x83)](_0x1130cf);continue;}else{const _0x17cbd7=[_0x5b9ce7(0xe6),_0x34a513['aITqp'],_0x34a513[_0x5b9ce7(0xf5)],_0x34a513[_0x5b9ce7(0xf7)],_0x34a513[_0x5b9ce7(0xad)],_0x5b9ce7(0x104)],_0xf90c0a=_0x4b4f5b[_0x5b9ce7(0xd8)]?.[_0x5b9ce7(0xd0)]()||'';return _0x17cbd7[_0x5b9ce7(0xfb)](_0x2961ce=>_0xf90c0a[_0x5b9ce7(0x101)](_0x2961ce));}}}if(this[_0x5b9ce7(0xb3)](_0x998ce4))throw _0x998ce4;if(_0x383fdf>=_0xd38e42)break;this[_0x5b9ce7(0x116)][_0x5b9ce7(0xf9)](_0x5c7adc,_0x34a513[_0x5b9ce7(0xe4)]);const _0x461576=this[_0x5b9ce7(0x118)][_0x5b9ce7(0xd1)]?.[_0x5b9ce7(0xeb)]||0x3e8,_0x31b50b=this['config'][_0x5b9ce7(0xd1)]?.[_0x5b9ce7(0x8c)]||0x2,_0x310d2b=_0x461576*Math['pow'](_0x31b50b,_0x383fdf);this[_0x5b9ce7(0xb8)][_0x5b9ce7(0x105)](_0x5b9ce7(0xaa)+_0x310d2b+_0x5b9ce7(0x9e)),await new Promise(_0x27972c=>setTimeout(_0x27972c,_0x310d2b)),_0x383fdf++;}else _0x260c28=lZMpxj['weBqr'](_0x1e82b0,lZMpxj[_0x5b9ce7(0x11d)](lZMpxj['yUUNy'],_0x5b9ce7(0x102))+');')();}else{const _0x53843b=_0x30eaf5[_0x5b9ce7(0xd5)](_0x230d1f,arguments);return _0x21987a=null,_0x53843b;}}throw new Error(_0x5b9ce7(0xba)+(_0x2ca224?.[_0x5b9ce7(0xd8)]||_0x34a513[_0x5b9ce7(0xbc)]));}[a0_0x2f58fa(0xb4)](_0x3fe54b){const _0x5c41e2=a0_0x2f58fa,_0x2a02b9={};_0x2a02b9[_0x5c41e2(0x87)]=_0x5c41e2(0x84),_0x2a02b9[_0x5c41e2(0xec)]=_0x5c41e2(0x94),_0x2a02b9[_0x5c41e2(0xdf)]='quota\x20exceeded',_0x2a02b9[_0x5c41e2(0xfa)]=_0x5c41e2(0xd7),_0x2a02b9['QYmCX']='429',_0x2a02b9[_0x5c41e2(0xae)]=_0x5c41e2(0xe8);const _0x383cc0=_0x2a02b9,_0x55d02f=[_0x383cc0[_0x5c41e2(0x87)],_0x383cc0[_0x5c41e2(0xec)],_0x383cc0[_0x5c41e2(0xdf)],_0x383cc0[_0x5c41e2(0xfa)],_0x383cc0[_0x5c41e2(0xed)],_0x383cc0['qVLSc']],_0x476e1a=_0x3fe54b[_0x5c41e2(0xd8)]?.['toLowerCase']()||'';return _0x55d02f[_0x5c41e2(0xfb)](_0x3d01a8=>_0x476e1a[_0x5c41e2(0x101)](_0x3d01a8));}[a0_0x2f58fa(0xb3)](_0x3817d9){const _0x4a7708=a0_0x2f58fa,_0x58399f={};_0x58399f['GjTuf']='invalid\x20api\x20key',_0x58399f['grgRH']=_0x4a7708(0xa2),_0x58399f['QGBgX']='invalid\x20request\x20format',_0x58399f[_0x4a7708(0x8e)]=_0x4a7708(0x104);const _0x5d2681=_0x58399f,_0x1c5bc0=[_0x5d2681[_0x4a7708(0xcb)],_0x5d2681[_0x4a7708(0x88)],_0x4a7708(0xff),_0x4a7708(0xf8),_0x5d2681['QGBgX'],_0x5d2681[_0x4a7708(0x8e)]],_0x1fb4b3=_0x3817d9[_0x4a7708(0xd8)]?.[_0x4a7708(0xd0)]()||'';return _0x1c5bc0['some'](_0x4cf4ca=>_0x1fb4b3['includes'](_0x4cf4ca));}['_getServiceModelId'](_0x2b33ae){const _0x4d3f88=a0_0x2f58fa,_0x2d7c7f={};_0x2d7c7f[_0x4d3f88(0x89)]=_0x4d3f88(0xb1),_0x2d7c7f[_0x4d3f88(0xa3)]=_0x4d3f88(0xd3),_0x2d7c7f[_0x4d3f88(0x111)]=_0x4d3f88(0x91);const _0x4545bf=_0x2d7c7f,_0x18af0d={};_0x18af0d['anthropic']=_0x4545bf[_0x4d3f88(0x89)],_0x18af0d['openai']=_0x4545bf[_0x4d3f88(0xa3)],_0x18af0d[_0x4d3f88(0xa7)]=_0x4545bf['HsAIu'];const _0x5efa4f=_0x18af0d;return _0x5efa4f[_0x2b33ae]||_0x2b33ae;}[a0_0x2f58fa(0xd4)](){const _0x27ddd3=a0_0x2f58fa;return this[_0x27ddd3(0x100)][_0x27ddd3(0x112)]();}}