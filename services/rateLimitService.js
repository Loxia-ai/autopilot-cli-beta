const a0_0x55de8d=a0_0x55e1;function a0_0x3789(){const _0x550c7e=['C2vUze1LC3nHz2u','uMf0zsbSAw1PDcbKzwXHEsbZzxqGzM9Yia','yxbWBhK','z29Vz2XLlwDLBwLUAq','yw50AhjVCgLJlxnVBM5LDa','Bg9N','Bwf4uMv0CMLLCW','qur5sMe','refNBM8','mZK0odm0qLPJvLLQ','su14Afy','B0PZr1i','x2LZtM9UuMv0CNLHyMXLrxjYB3i','EgzgDgW','C2v0rgvSyxK','C2vYDMLJzvn0yxr1CW','DxHIB0y','Bwf4','CM5VuM8','u2vYDMLJzsa','B3bLBMfP','ALvdse0','qLDXD1i','CMvXDwvZDcbSAw1PDa','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','uMf0zsbSAw1PDcbLCNjVCIbKzxrLy3rLzcWGD2fPDgLUzYbHBMqGCMv0CNLPBMCUlI4','ndi5','BxmGkhvUDgLSia','oIbszwfKEsb0BYbZzw5KicHUBYbKzwXHEsbUzwvKzwqP','DhjHy2u','u3bSrvy','CMf0zuXPBwL0u2vYDMLJzq','r1P5BfG','CwfMtwy','wffiBeq','C29Tzq','z2v0u3rHDhvZ','zgD2Dfq','BgvUz3rO','CMf0zsbSAw1PDa','q0vVCe8','CxvVDgeGzxHJzwvKzwq','CxL3C0i','CMf0zuXPBwL0sgL0CW','mJG1mdvLr3j6zvy','Bw9KzwWGBM90igzVDw5K','zLDYrgW','zgvNCMfKzwq','ig5VDcbMB3vUzcbMB3iGy29UDMvYC2f0Aw9Uia','CMvZzxrsyxrLtgLTAxriAxrZ','y29UDMvYC2f0Aw9Uu2vYDMLJzxm','uMvXDwvZDcbMywLSzwqGkgf0DgvTChqG','t0fhu00','uMv0CNLPBMCGywz0zxiG','ChjVDg90ExbL','tKr2DNq','AvPmtMi','y29UC3rYDwn0B3i','sMDTz2W','su5jveLbtf9sqvrfx0XjtuLux0rftefz','BwvZC2fNzq','rLfiufm','AwPouuG','tgHiswm','ntyYmZCXyvrAy2P6','kcGOlISPkYKRksSK','uMf0zsbSAw1PDgLUzYbZDgf0zsbJBgvHCMvK','y0rUDK0','t2T5v1G','mJmXntG3zNLTwvfz','yNvKz2v0u2vYDMLJzq','C3bSAxq','Bfvhvwu','AeL0EMq','Aw5MBW','u3PqEKy','BfLiBuy','AgfUzgXLuMf0zuXPBwL0sgL0','ELLRBuy','tfjtD1y','igLZig5VDcbYzwDPC3rLCMvKihDPDgGGyw55ihnLCNzPy2u','rKrSy2i','zgvSzxrL','z29Vz2XL','v2nIEuW','Aw52ywXPzcbHCgKGA2v5','A2v5CW','DgfIBgu','CgLlEKy','mtm4mJqWBMPXyvHf','BwfIzKq','v0jRDhG','q0Hfq0TFsu5urvjwquW','CMv0DxjUicHMDw5JDgLVBIGPia','Dg9Vig1HBNKGCMvXDwvZDhm','u2XNqMq','yM9Zs0C','uvnKsuG','DgHYB3r0Bgu','qMz3Bfa','zwX3u0S','EMDou1C','rvHuru5erurFuKfurv9msu1jvf9eruXbwq','C2v0','zxHJzxb0Aw9U','C2vHCMnO','t2zsBuq','wKvIzwq','y29UzMLN','z2v0','mta4tg5Rqxfx','ze9VALy','qwfruu4','twrezMe','yxboy3C','AxLewgO','A0XttuK','y29UC29Szq','mtKYmtK5mLbJz2fwrG','C2vYDMLJzuLUC3rHBMnLCW','thver2K','vxf0r3G','sxbQzeu','yMfZzurLBgf5txm','y2XLyxi','nxWYFdf8nhWWFdm','x19WCM90B19F','wNDrtM4','Dg9mB3DLCKnHC2u','AgfZ','AMLbvNy','Dg9tDhjPBMC','yw50AhjVCgLJ','C3r4qvy','D2fYBG','CMv0CMLLCW','vw5RBM93BIbLCNjVCG','rezwr1a','rw1rtwK','sK1JEgu','BwPyqwe','AfjLAMi','tMXpvw0','uMf0zsbSAw1PDcbOAxqGiW','Bg9Nz2vY','oIbxywL0Aw5Nia','x2DLDfnLCNzPy2vnB2rLBeLK','lcbHChbSEwLUzYa','A2T0u2m','BM93','DuTQyMu','yxzHAwXHyMXL','z2v0uMf0zuXPBwL0Aw5Nu3rHDhvZ','zhHRquq','EKjLCfa','B2zQveK','z2v0tgfZDe91Dhb1DfrVA2vUq291BNq','z2v0qwXSu3rHDhvZ','mtC2otq0nNjgsxD5Eq','BxmGyMvMB3jLihnLBMrPBMCGkhvUDgLSia','Dg9ju09tDhjPBMC','BxmUlI4','yMLUza','txrLqLO','v2Lfyw8','BMv4DefSBg93zwruAw1L','sLfMzNO','ruLQDg0','sxLfwKm','CMDcsu4','oIbsyxrLigXPBwL0igHPDhmGCMvZzxqGkhn1y2nLC3nMDwWGCMvXDwvZDcK','AM1rC2e','swr6Efu','x2LZuMf0zuXPBwL0rxjYB3i','zxjYB3i','zvDywhm','Ce9grNq','q29UDMvYC2f0Aw9Uia','EuzSq0G','Dw5HDxrOB3jPEMvK','zgvIDwC','Aw5JBhvKzxm','sLPcvM0','D2fPDeLMtMvLzgvK'];a0_0x3789=function(){return _0x550c7e;};return a0_0x3789();}(function(_0x10bf72,_0x104edb){const _0xd89627=a0_0x55e1,_0x32e85e=_0x10bf72();while(!![]){try{const _0x269c88=-parseInt(_0xd89627(0x12f))/0x1+parseInt(_0xd89627(0x1ab))/0x2+parseInt(_0xd89627(0x12a))/0x3+-parseInt(_0xd89627(0x158))/0x4*(-parseInt(_0xd89627(0x116))/0x5)+-parseInt(_0xd89627(0x143))/0x6+-parseInt(_0xd89627(0x188))/0x7+parseInt(_0xd89627(0x160))/0x8;if(_0x269c88===_0x104edb)break;else _0x32e85e['push'](_0x32e85e['shift']());}catch(_0x2f14aa){_0x32e85e['push'](_0x32e85e['shift']());}}}(a0_0x3789,0x4251d));const a0_0x3a7044=(function(){let _0x3f0e2b=!![];return function(_0x222c26,_0x14e515){const _0x178103=_0x3f0e2b?function(){const _0x1a7bbb=a0_0x55e1;if(_0x14e515){const _0x2f01a2=_0x14e515[_0x1a7bbb(0x1a4)](_0x222c26,arguments);return _0x14e515=null,_0x2f01a2;}}:function(){};return _0x3f0e2b=![],_0x178103;};}()),a0_0x87f9be=a0_0x3a7044(this,function(){const _0x31d055=a0_0x55e1,_0x39248d={};_0x39248d[_0x31d055(0x159)]=_0x31d055(0x12b);const _0x2ff315=_0x39248d;return a0_0x87f9be[_0x31d055(0x16d)]()[_0x31d055(0x153)](_0x2ff315['dOojV'])['toString']()['constructor'](a0_0x87f9be)['search'](_0x2ff315[_0x31d055(0x159)]);});a0_0x87f9be();function a0_0x55e1(_0x2609f0,_0x2f8eec){const _0x1e8471=a0_0x3789();return a0_0x55e1=function(_0x52205d,_0x591dd6){_0x52205d=_0x52205d-0x102;let _0x187e6a=_0x1e8471[_0x52205d];if(a0_0x55e1['weeTCX']===undefined){var _0x3453ca=function(_0x55e1bf){const _0x212175='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xf1a0b6='',_0x2fde13='',_0x3e8845=_0xf1a0b6+_0x3453ca;for(let _0x5cd048=0x0,_0x4ebf4c,_0x1d86ff,_0x553c35=0x0;_0x1d86ff=_0x55e1bf['charAt'](_0x553c35++);~_0x1d86ff&&(_0x4ebf4c=_0x5cd048%0x4?_0x4ebf4c*0x40+_0x1d86ff:_0x1d86ff,_0x5cd048++%0x4)?_0xf1a0b6+=_0x3e8845['charCodeAt'](_0x553c35+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x4ebf4c>>(-0x2*_0x5cd048&0x6)):_0x5cd048:0x0){_0x1d86ff=_0x212175['indexOf'](_0x1d86ff);}for(let _0x55f911=0x0,_0x51dd57=_0xf1a0b6['length'];_0x55f911<_0x51dd57;_0x55f911++){_0x2fde13+='%'+('00'+_0xf1a0b6['charCodeAt'](_0x55f911)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2fde13);};a0_0x55e1['SGqojO']=_0x3453ca,_0x2609f0=arguments,a0_0x55e1['weeTCX']=!![];}const _0x87f9be=_0x1e8471[0x0],_0x3a7044=_0x52205d+_0x87f9be,_0x37898e=_0x2609f0[_0x3a7044];if(!_0x37898e){const _0x54e0e5=function(_0x3bc028){this['qjtuJd']=_0x3bc028,this['qUTTQr']=[0x1,0x0,0x0],this['KnuDLJ']=function(){return'newState';},this['AzxDVj']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['OhuRIz']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x54e0e5['prototype']['VnLoNi']=function(){const _0x5d74b8=new RegExp(this['AzxDVj']+this['OhuRIz']),_0x22c1fa=_0x5d74b8['test'](this['KnuDLJ']['toString']())?--this['qUTTQr'][0x1]:--this['qUTTQr'][0x0];return this['xpNqdg'](_0x22c1fa);},_0x54e0e5['prototype']['xpNqdg']=function(_0x218ba7){if(!Boolean(~_0x218ba7))return _0x218ba7;return this['AVDsir'](this['qjtuJd']);},_0x54e0e5['prototype']['AVDsir']=function(_0x1f61cb){for(let _0x10b261=0x0,_0x43b50f=this['qUTTQr']['length'];_0x10b261<_0x43b50f;_0x10b261++){this['qUTTQr']['push'](Math['round'](Math['random']())),_0x43b50f=this['qUTTQr']['length'];}return _0x1f61cb(this['qUTTQr'][0x0]);},new _0x54e0e5(a0_0x55e1)['VnLoNi'](),_0x187e6a=a0_0x55e1['SGqojO'](_0x187e6a),_0x2609f0[_0x3a7044]=_0x187e6a;}else _0x187e6a=_0x37898e;return _0x187e6a;},a0_0x55e1(_0x2609f0,_0x2f8eec);}const a0_0x591dd6=(function(){const _0x2752c7=a0_0x55e1,_0x47f5d9={};_0x47f5d9[_0x2752c7(0x12e)]=function(_0x3f57e1,_0xe0ce53){return _0x3f57e1===_0xe0ce53;},_0x47f5d9[_0x2752c7(0x14b)]=_0x2752c7(0x13e),_0x47f5d9['xfFtl']='jUJfY',_0x47f5d9[_0x2752c7(0x190)]=_0x2752c7(0x155),_0x47f5d9[_0x2752c7(0x129)]=_0x2752c7(0x10a);const _0x55a220=_0x47f5d9;let _0x17d81f=!![];return function(_0x5759dd,_0x543067){const _0x200cea=_0x2752c7,_0x27edd9={'oWOHe':function(_0x1e2386,_0x16f11d){const _0x1ad7f1=a0_0x55e1;return _0x55a220[_0x1ad7f1(0x12e)](_0x1e2386,_0x16f11d);},'lUGUe':_0x55a220['QSdIH'],'zBepP':_0x55a220[_0x200cea(0x1af)],'Jgmgl':_0x55a220[_0x200cea(0x190)],'ofjTI':_0x55a220[_0x200cea(0x129)]};if(_0x200cea(0x122)===_0x200cea(0x122)){const _0x1de268=_0x17d81f?function(){const _0xcd0ac0=_0x200cea;if(_0x27edd9['oWOHe'](_0x27edd9[_0xcd0ac0(0x132)],_0x27edd9[_0xcd0ac0(0x184)])){const _0x16bf7a=_0x3b49a1[_0xcd0ac0(0x123)][_0xcd0ac0(0x120)][_0xcd0ac0(0x18c)](_0x56d1d4),_0x2172f6=_0x70b752[_0x33f244],_0x23696f=_0x59c327[_0x2172f6]||_0x16bf7a;_0x16bf7a[_0xcd0ac0(0x168)]=_0x59dfcf[_0xcd0ac0(0x18c)](_0x254651),_0x16bf7a['toString']=_0x23696f['toString'][_0xcd0ac0(0x18c)](_0x23696f),_0x160fb8[_0x2172f6]=_0x16bf7a;}else{if(_0x543067){if(_0x27edd9[_0xcd0ac0(0x124)]===_0x27edd9[_0xcd0ac0(0x185)])throw new _0x150f67(_0xcd0ac0(0x19b)+_0x49a276+'\x20is\x20not\x20registered\x20with\x20any\x20service');else{const _0xd2b66=_0x543067[_0xcd0ac0(0x1a4)](_0x5759dd,arguments);return _0x543067=null,_0xd2b66;}}}}:function(){};return _0x17d81f=![],_0x1de268;}else throw new _0x563227(_0x200cea(0x1b5)+_0x5a3035+_0x200cea(0x11a)+_0x5d2c4c);};}()),a0_0x52205d=a0_0x591dd6(this,function(){const _0x1d6ada=a0_0x55e1,_0x58d1c9={'yFlCH':function(_0x2f6253,_0x414658){return _0x2f6253(_0x414658);},'MdDfa':function(_0x4794af,_0x3c63c7){return _0x4794af+_0x3c63c7;},'WiEao':_0x1d6ada(0x147),'hRejb':_0x1d6ada(0x102),'BLHKp':function(_0x3650a0){return _0x3650a0();},'pOFFt':_0x1d6ada(0x128),'lYHmF':function(_0x419471,_0x3cfe0c){return _0x419471+_0x3cfe0c;},'CJTeL':function(_0x8c4727,_0x6b81fb){return _0x8c4727+_0x6b81fb;},'UqtGx':function(_0x1cd674,_0xe0671f){return _0x1cd674!==_0xe0671f;},'cDnvM':'agBAh','yqcBn':_0x1d6ada(0x1a7),'mduNd':_0x1d6ada(0x170),'JMcxe':_0x1d6ada(0x134),'EmQMi':_0x1d6ada(0x198),'lOXzb':_0x1d6ada(0x141),'ObLYJ':function(_0x282626,_0x400976){return _0x282626<_0x400976;}};let _0x5025eb;try{if(_0x1d6ada(0x1ad)!==_0x58d1c9[_0x1d6ada(0x19a)]){const _0x567084=_0x58d1c9[_0x1d6ada(0x19c)](Function,_0x58d1c9[_0x1d6ada(0x136)](_0x58d1c9['CJTeL'](_0x58d1c9[_0x1d6ada(0x18e)],_0x58d1c9['hRejb']),');'));_0x5025eb=_0x567084();}else{const _0x2c5ad5=_0x58d1c9[_0x1d6ada(0x19c)](_0x4fb0dc,_0x58d1c9[_0x1d6ada(0x15b)](_0x58d1c9[_0x1d6ada(0x15b)](_0x58d1c9[_0x1d6ada(0x18e)],_0x58d1c9[_0x1d6ada(0x177)]),');'));_0x72a049=_0x58d1c9['BLHKp'](_0x2c5ad5);}}catch(_0x208b36){if(_0x58d1c9[_0x1d6ada(0x163)](_0x58d1c9[_0x1d6ada(0x12d)],_0x58d1c9[_0x1d6ada(0x12d)])){this[_0x1d6ada(0x17a)]['debug'](_0x43a786+_0x1d6ada(0x106));return;}else _0x5025eb=window;}const _0x202190=_0x5025eb[_0x1d6ada(0x15f)]=_0x5025eb[_0x1d6ada(0x15f)]||{},_0x5c6735=[_0x58d1c9['yqcBn'],_0x58d1c9['mduNd'],_0x58d1c9[_0x1d6ada(0x175)],_0x58d1c9[_0x1d6ada(0x174)],_0x1d6ada(0x152),_0x58d1c9['lOXzb'],_0x1d6ada(0x107)];for(let _0x1cf215=0x0;_0x58d1c9['ObLYJ'](_0x1cf215,_0x5c6735[_0x1d6ada(0x110)]);_0x1cf215++){const _0x59f218=a0_0x591dd6[_0x1d6ada(0x123)][_0x1d6ada(0x120)][_0x1d6ada(0x18c)](a0_0x591dd6),_0x324ef7=_0x5c6735[_0x1cf215],_0x202911=_0x202190[_0x324ef7]||_0x59f218;_0x59f218[_0x1d6ada(0x168)]=a0_0x591dd6[_0x1d6ada(0x18c)](a0_0x591dd6),_0x59f218[_0x1d6ada(0x16d)]=_0x202911[_0x1d6ada(0x16d)][_0x1d6ada(0x18c)](_0x202911),_0x202190[_0x324ef7]=_0x59f218;}});a0_0x52205d();export class RateLimitService{constructor(_0x233f31){const _0x99f6c6=a0_0x55e1,_0x4c7866={};_0x4c7866[_0x99f6c6(0x135)]=_0x99f6c6(0x167);const _0xc8beb3=_0x4c7866,_0x3b1b08=_0xc8beb3[_0x99f6c6(0x135)][_0x99f6c6(0x131)]('|');let _0x503678=0x0;while(!![]){switch(_0x3b1b08[_0x503678++]){case'0':this['EXTENDED_RATE_LIMIT_DELAY']=0xea60;continue;case'1':this[_0x99f6c6(0x115)]=new Map();continue;case'2':this[_0x99f6c6(0x18f)]=new Map();continue;case'3':this[_0x99f6c6(0x146)]=0x3e8;continue;case'4':this[_0x99f6c6(0x125)]=0x7530;continue;case'5':this[_0x99f6c6(0x17a)]=_0x233f31;continue;}break;}}[a0_0x55de8d(0x1b0)](_0x16e6d5,_0x30dea5){const _0x2e02b8=a0_0x55de8d,_0x5ba062={};_0x5ba062[_0x2e02b8(0x18d)]=function(_0x2090ad,_0x408b66){return _0x2090ad+_0x408b66;},_0x5ba062[_0x2e02b8(0x1b7)]=function(_0x3f02b5,_0x5784ed){return _0x3f02b5>_0x5784ed;},_0x5ba062['uKjbe']=_0x2e02b8(0x10c),_0x5ba062[_0x2e02b8(0x1aa)]=_0x2e02b8(0x10f);const _0x1c533f=_0x5ba062,_0x5a2234=_0x1c533f[_0x2e02b8(0x18d)](Date[_0x2e02b8(0x17f)](),_0x30dea5),_0x2ab095=this['nextAllowedTime'][_0x2e02b8(0x157)](_0x16e6d5)||0x0;if(_0x1c533f[_0x2e02b8(0x1b7)](_0x5a2234,_0x2ab095)){if(_0x1c533f[_0x2e02b8(0x180)]===_0x1c533f[_0x2e02b8(0x1aa)]){if(_0x3746e4){const _0x4d125e=_0x454d4b[_0x2e02b8(0x1a4)](_0x490b2d,arguments);return _0x2ba1fc=null,_0x4d125e;}}else this['nextAllowedTime'][_0x2e02b8(0x151)](_0x16e6d5,_0x5a2234),this[_0x2e02b8(0x17a)][_0x2e02b8(0x134)](_0x2e02b8(0x1a3)+_0x16e6d5+':\x20'+_0x30dea5+_0x2e02b8(0x105)+new Date(_0x5a2234)['toISOString']()+')');}}[a0_0x55de8d(0x137)](_0x451f3d){const _0x4437c3=a0_0x55de8d,_0x2d2fe6={};_0x2d2fe6[_0x4437c3(0x1b8)]=function(_0x4d44be,_0x2cb97a){return _0x4d44be+_0x2cb97a;},_0x2d2fe6[_0x4437c3(0x15c)]=function(_0x2776f0,_0x210822){return _0x2776f0===_0x210822;};const _0x117cca=_0x2d2fe6,_0x1d161b=this[_0x4437c3(0x115)][_0x4437c3(0x157)](_0x451f3d)||0x0,_0x48107e=_0x117cca[_0x4437c3(0x1b8)](_0x1d161b,0x1);this[_0x4437c3(0x115)][_0x4437c3(0x151)](_0x451f3d,_0x48107e);let _0x349889;_0x117cca['apNcw'](_0x48107e,0x1)?_0x349889=this['INITIAL_RATE_LIMIT_DELAY']:_0x349889=this[_0x4437c3(0x150)],this['setDelay'](_0x451f3d,_0x349889),this['logger'][_0x4437c3(0x170)]('Rate\x20limit\x20hit\x20#'+_0x48107e+'\x20for\x20'+_0x451f3d+_0x4437c3(0x17d)+_0x349889+'ms\x20delay');}async[a0_0x55de8d(0x1a1)](_0x25e672){const _0x14f536=a0_0x55de8d,_0x6153f8={};_0x6153f8[_0x14f536(0x154)]=function(_0x5b5a0a,_0x114473){return _0x5b5a0a>=_0x114473;},_0x6153f8['ZwQNn']=function(_0x3a9926,_0x3668a9){return _0x3a9926+_0x3668a9;};const _0x48cd53=_0x6153f8,_0x576409=this[_0x14f536(0x18f)][_0x14f536(0x157)](_0x25e672)||0x0,_0x5b36fe=Date['now']();if(_0x48cd53['OfRmD'](_0x5b36fe,_0x576409)){this[_0x14f536(0x17a)][_0x14f536(0x19e)](_0x25e672+_0x14f536(0x106));return;}const _0x4de070=_0x576409-_0x5b36fe,_0x18a05c=_0x48cd53[_0x14f536(0x169)](_0x4de070,this['CHECK_INTERVAL']);this[_0x14f536(0x17a)][_0x14f536(0x134)](_0x25e672+_0x14f536(0x17b)+_0x18a05c+_0x14f536(0x189)+new Date(_0x576409+this[_0x14f536(0x146)])[_0x14f536(0x18a)]()+')'),await new Promise(_0x3863b0=>setTimeout(_0x3863b0,_0x18a05c));}[a0_0x55de8d(0x11b)](_0x1d641a){const _0x59c782=a0_0x55de8d;this[_0x59c782(0x115)][_0x59c782(0x16b)](_0x1d641a)&&(this[_0x59c782(0x115)][_0x59c782(0x13c)](_0x1d641a),this[_0x59c782(0x17a)][_0x59c782(0x19e)](_0x1d641a+_0x59c782(0x194)));}[a0_0x55de8d(0x10e)](_0x1e374e){const _0x2cc9b2=a0_0x55de8d,_0x41a32d={};_0x41a32d[_0x2cc9b2(0x112)]=function(_0x47ad2f,_0x2511db){return _0x47ad2f-_0x2511db;},_0x41a32d[_0x2cc9b2(0x173)]=function(_0x2728b2,_0x4be7c8){return _0x2728b2>=_0x4be7c8;};const _0x205ac4=_0x41a32d,_0x1c379b=this[_0x2cc9b2(0x18f)][_0x2cc9b2(0x157)](_0x1e374e)||0x0,_0x4fcd2f=this[_0x2cc9b2(0x115)][_0x2cc9b2(0x157)](_0x1e374e)||0x0,_0x57543a=Date[_0x2cc9b2(0x17f)]();return{'serviceModel':_0x1e374e,'nextAllowedTime':_0x1c379b,'nextAllowedDate':_0x1c379b>0x0?new Date(_0x1c379b)[_0x2cc9b2(0x18a)]():null,'remainingDelayMs':Math[_0x2cc9b2(0x1b3)](0x0,_0x205ac4[_0x2cc9b2(0x112)](_0x1c379b,_0x57543a)),'canSendNow':_0x205ac4['DFVGP'](_0x57543a,_0x1c379b),'consecutiveRateLimitHits':_0x4fcd2f};}[a0_0x55de8d(0x187)](){const _0x399859=a0_0x55de8d,_0x634160=new Set([...this[_0x399859(0x18f)][_0x399859(0x140)](),...this['rateLimitHits'][_0x399859(0x140)]()]),_0x7b21f4={};for(const _0x41c334 of _0x634160){_0x7b21f4[_0x41c334]=this[_0x399859(0x10e)](_0x41c334);}return _0x7b21f4;}[a0_0x55de8d(0x166)](){const _0x1bfbaf=a0_0x55de8d,_0x2adf0c={};_0x2adf0c[_0x1bfbaf(0x176)]=_0x1bfbaf(0x12c);const _0x36032b=_0x2adf0c;this[_0x1bfbaf(0x18f)][_0x1bfbaf(0x166)](),this[_0x1bfbaf(0x115)][_0x1bfbaf(0x166)](),this[_0x1bfbaf(0x17a)]['info'](_0x36032b[_0x1bfbaf(0x176)]);}}export class EnhancedLLMService{constructor(_0x38bf9a,_0x45dda3){const _0x125923=a0_0x55de8d,_0x31da13={};_0x31da13[_0x125923(0x192)]='2|1|6|4|5|0|3';const _0xf8ff02=_0x31da13,_0x1fb0b8=_0xf8ff02['IyEZC'][_0x125923(0x131)]('|');let _0x125922=0x0;while(!![]){switch(_0x1fb0b8[_0x125922++]){case'0':this[_0x125923(0x11c)]=new Map();continue;case'1':this['logger']=_0x45dda3;continue;case'2':this[_0x125923(0x156)]=_0x38bf9a;continue;case'3':this[_0x125923(0x1b1)]=new Map();continue;case'4':this[_0x125923(0x130)]=new BudgetService(_0x38bf9a,_0x45dda3);continue;case'5':this[_0x125923(0x161)]=new Map();continue;case'6':this[_0x125923(0x109)]=new RateLimitService(_0x45dda3);continue;}break;}}async[a0_0x55de8d(0x1a2)](_0x53a09a,_0x18c0fa,_0x19e0b2){const _0x11a7fc=a0_0x55de8d,_0x8f3835={'SlgBd':function(_0x54b2a6,_0xfcb032){return _0x54b2a6+_0xfcb032;},'aKFln':function(_0x2869c0,_0x536419){return _0x2869c0===_0x536419;},'FQHPS':function(_0x52f313,_0x3d0ae5){return _0x52f313(_0x3d0ae5);},'pOYCW':function(_0x25bd36,_0x5348e3){return _0x25bd36+_0x5348e3;},'mabfD':_0x11a7fc(0x147),'jmQsa':_0x11a7fc(0x102),'LRSwV':function(_0x267455){return _0x267455();},'Rnnhu':'log','qywsB':_0x11a7fc(0x170),'VSpfF':_0x11a7fc(0x134),'pJCAF':_0x11a7fc(0x198),'OAGSM':_0x11a7fc(0x152),'NnpDA':_0x11a7fc(0x141),'rnoRo':_0x11a7fc(0x107),'hItzd':function(_0x386949,_0x58d40f){return _0x386949<_0x58d40f;},'qafMf':'rate\x20limit','NlOUm':_0x11a7fc(0x148),'kktSc':_0x11a7fc(0x113),'kLSMI':_0x11a7fc(0x104),'IMxhV':_0x11a7fc(0x14c),'EIjtm':function(_0x13b0c7,_0x549d37){return _0x13b0c7-_0x549d37;},'LuDGi':_0x11a7fc(0x16c),'dxkAD':function(_0xf3d430,_0x697739){return _0xf3d430===_0x697739;},'piKzF':_0x11a7fc(0x119),'uxboF':function(_0x192150,_0x365220){return _0x192150!==_0x365220;},'NDvvt':'icQGB','qzhBv':_0x11a7fc(0x108),'bosKG':'alDSo','iyDXj':function(_0xaf19c0,_0x5e4d92){return _0xaf19c0+_0x5e4d92;},'fWrDl':function(_0x4e123a,_0x1ef401){return _0x4e123a===_0x1ef401;},'BfwlP':'WNWrz','THhBJ':function(_0x5f3891,_0x1be8e0){return _0x5f3891<_0x1be8e0;},'stxAV':_0x11a7fc(0x103),'IdzxU':function(_0x1d8f91,_0x488cd5){return _0x1d8f91>=_0x488cd5;},'zgNSW':_0x11a7fc(0x172)},_0x1e2bd0=this[_0x11a7fc(0x11c)]['get'](_0x53a09a);if(!_0x1e2bd0)throw new Error(_0x11a7fc(0x19b)+_0x53a09a+_0x11a7fc(0x13a));const _0x3528ff=this['serviceInstances']['get'](_0x1e2bd0);if(!_0x3528ff)throw new Error(_0x11a7fc(0x1b5)+_0x1e2bd0+_0x11a7fc(0x11a)+_0x53a09a);const _0x4df7b5=this[_0x11a7fc(0x17c)](_0x1e2bd0);await this[_0x11a7fc(0x109)][_0x11a7fc(0x1a1)](_0x4df7b5);const _0x224928=this['config']['retries']?.[_0x11a7fc(0x1a8)]||0x3;let _0x3fd6a2=0x0,_0x4c93d3=null;while(_0x3fd6a2<=_0x224928){if(_0x8f3835['aKFln'](_0x8f3835[_0x11a7fc(0x162)],_0x11a7fc(0x16c)))try{if(_0x11a7fc(0x145)!==_0x11a7fc(0x1a0)){const _0x1542df=await _0x3528ff[_0x11a7fc(0x1a2)](_0x53a09a,_0x18c0fa,_0x19e0b2);this['rateLimitService'][_0x11a7fc(0x11b)](_0x4df7b5),await this[_0x11a7fc(0x130)]['recordUsage'](_0x1e2bd0,_0x3528ff['getLastInputTokenCount'](),_0x3528ff[_0x11a7fc(0x186)]());if(_0x8f3835[_0x11a7fc(0x183)](this['serviceStatus'][_0x11a7fc(0x157)](_0x1e2bd0),_0x8f3835[_0x11a7fc(0x142)])){if(_0x8f3835[_0x11a7fc(0x1b2)](_0x8f3835[_0x11a7fc(0x121)],_0x8f3835['qzhBv']))this[_0x11a7fc(0x1b1)][_0x11a7fc(0x151)](_0x1e2bd0,_0x11a7fc(0x181));else{const _0x50c099=this['rateLimitHits']['get'](_0x15b854)||0x0,_0x107fc0=_0x8f3835[_0x11a7fc(0x149)](_0x50c099,0x1);this[_0x11a7fc(0x115)][_0x11a7fc(0x151)](_0x1ad627,_0x107fc0);let _0x73e0b3;_0x8f3835['aKFln'](_0x107fc0,0x1)?_0x73e0b3=this[_0x11a7fc(0x125)]:_0x73e0b3=this['EXTENDED_RATE_LIMIT_DELAY'],this[_0x11a7fc(0x1b0)](_0x274a64,_0x73e0b3),this[_0x11a7fc(0x17a)][_0x11a7fc(0x170)](_0x11a7fc(0x179)+_0x107fc0+'\x20for\x20'+_0x6ad2ed+_0x11a7fc(0x17d)+_0x73e0b3+'ms\x20delay');}}return _0x1542df;}else{let _0x7ed4dd;try{const _0x160d62=nycqqW[_0x11a7fc(0x127)](_0x17f0a6,nycqqW['pOYCW'](nycqqW[_0x11a7fc(0x144)],nycqqW[_0x11a7fc(0x195)])+');');_0x7ed4dd=nycqqW[_0x11a7fc(0x139)](_0x160d62);}catch(_0x5d0b41){_0x7ed4dd=_0x3a867e;}const _0x4bd3f8=_0x7ed4dd[_0x11a7fc(0x15f)]=_0x7ed4dd[_0x11a7fc(0x15f)]||{},_0x52f3dc=[nycqqW['Rnnhu'],nycqqW[_0x11a7fc(0x114)],nycqqW['VSpfF'],nycqqW['pJCAF'],nycqqW[_0x11a7fc(0x11e)],nycqqW['NnpDA'],nycqqW[_0x11a7fc(0x1b4)]];for(let _0x4d60ff=0x0;nycqqW[_0x11a7fc(0x133)](_0x4d60ff,_0x52f3dc[_0x11a7fc(0x110)]);_0x4d60ff++){const _0x3d8239=_0x25f15b[_0x11a7fc(0x123)][_0x11a7fc(0x120)][_0x11a7fc(0x18c)](_0x12739e),_0x1181d5=_0x52f3dc[_0x4d60ff],_0x264951=_0x4bd3f8[_0x1181d5]||_0x3d8239;_0x3d8239[_0x11a7fc(0x168)]=_0xa9c324[_0x11a7fc(0x18c)](_0x24742e),_0x3d8239[_0x11a7fc(0x16d)]=_0x264951['toString']['bind'](_0x264951),_0x4bd3f8[_0x1181d5]=_0x3d8239;}}}catch(_0x2ccad5){if(_0x8f3835[_0x11a7fc(0x1b2)]('HUqEG',_0x8f3835[_0x11a7fc(0x14a)])){_0x4c93d3=_0x2ccad5,this[_0x11a7fc(0x17a)][_0x11a7fc(0x198)](_0x11a7fc(0x11d)+(_0x3fd6a2+0x1)+'/'+_0x8f3835[_0x11a7fc(0x15d)](_0x224928,0x1)+'):',_0x2ccad5);if(this[_0x11a7fc(0x197)](_0x2ccad5)){if(_0x8f3835[_0x11a7fc(0x118)](_0x8f3835[_0x11a7fc(0x14d)],_0x8f3835['BfwlP'])){this['rateLimitService'][_0x11a7fc(0x137)](_0x4df7b5);if(_0x8f3835['THhBJ'](_0x3fd6a2,_0x224928)){this[_0x11a7fc(0x17a)][_0x11a7fc(0x134)](_0x8f3835[_0x11a7fc(0x16f)]),await this['rateLimitService']['waitIfNeeded'](_0x4df7b5);continue;}}else{const _0x1fac11=_0x11ad90?function(){if(_0x54287d){const _0x47cc22=_0x40a2d1['apply'](_0x551b0b,arguments);return _0x8eb32f=null,_0x47cc22;}}:function(){};return _0x4bb4fc=![],_0x1fac11;}}if(this[_0x11a7fc(0x1ae)](_0x2ccad5))throw _0x2ccad5;if(_0x8f3835[_0x11a7fc(0x196)](_0x3fd6a2,_0x224928))break;this[_0x11a7fc(0x1b1)][_0x11a7fc(0x151)](_0x1e2bd0,_0x8f3835[_0x11a7fc(0x142)]);const _0x103130=this['config'][_0x11a7fc(0x171)]?.[_0x11a7fc(0x165)]||0x3e8,_0x1be07b=this['config']['retries']?.['delayMultiplier']||0x2,_0x31fb28=_0x103130*Math['pow'](_0x1be07b,_0x3fd6a2);this[_0x11a7fc(0x17a)][_0x11a7fc(0x134)](_0x11a7fc(0x11f)+_0x31fb28+_0x11a7fc(0x18b)),await new Promise(_0x59b306=>setTimeout(_0x59b306,_0x31fb28)),_0x3fd6a2++;}else{const _0x53519b=[_0x8f3835[_0x11a7fc(0x10b)],_0x8f3835[_0x11a7fc(0x178)],_0x8f3835[_0x11a7fc(0x17e)],_0x11a7fc(0x1b9),_0x8f3835[_0x11a7fc(0x15e)],_0x8f3835[_0x11a7fc(0x1ac)]],_0xc4bf83=_0x4fde2c[_0x11a7fc(0x126)]?.[_0x11a7fc(0x16a)]()||'';return _0x53519b['some'](_0x1e07dd=>_0xc4bf83[_0x11a7fc(0x19f)](_0x1e07dd));}}else{const _0x5dd3a5=this[_0x11a7fc(0x18f)]['get'](_0x1301ba)||0x0,_0x3c933b=this[_0x11a7fc(0x115)][_0x11a7fc(0x157)](_0xb534f4)||0x0,_0x5678b1=_0x3b8468[_0x11a7fc(0x17f)]();return{'serviceModel':_0xa66d75,'nextAllowedTime':_0x5dd3a5,'nextAllowedDate':_0x5dd3a5>0x0?new _0x25f895(_0x5dd3a5)['toISOString']():null,'remainingDelayMs':_0x37b3a1[_0x11a7fc(0x1b3)](0x0,_0x8f3835[_0x11a7fc(0x191)](_0x5dd3a5,_0x5678b1)),'canSendNow':_0x5678b1>=_0x5dd3a5,'consecutiveRateLimitHits':_0x3c933b};}}throw new Error('All\x20retry\x20attempts\x20failed:\x20'+(_0x4c93d3?.['message']||_0x8f3835[_0x11a7fc(0x14f)]));}[a0_0x55de8d(0x197)](_0x32433d){const _0x3a81c0=a0_0x55de8d,_0x245610={};_0x245610[_0x3a81c0(0x164)]=_0x3a81c0(0x111),_0x245610[_0x3a81c0(0x1a9)]=_0x3a81c0(0x148),_0x245610[_0x3a81c0(0x138)]='quota\x20exceeded',_0x245610[_0x3a81c0(0x13b)]=_0x3a81c0(0x104),_0x245610[_0x3a81c0(0x14e)]='throttle';const _0x208472=_0x245610,_0x1632d9=[_0x208472[_0x3a81c0(0x164)],_0x208472[_0x3a81c0(0x1a9)],_0x208472[_0x3a81c0(0x138)],_0x3a81c0(0x1b9),_0x208472['FDlcb'],_0x208472[_0x3a81c0(0x14e)]],_0x496add=_0x32433d[_0x3a81c0(0x126)]?.[_0x3a81c0(0x16a)]()||'';return _0x1632d9[_0x3a81c0(0x10d)](_0x3ca896=>_0x496add[_0x3a81c0(0x19f)](_0x3ca896));}[a0_0x55de8d(0x1ae)](_0x568083){const _0x30f7c1=a0_0x55de8d,_0xb5bfe2={};_0xb5bfe2['rgBIN']=_0x30f7c1(0x13f),_0xb5bfe2[_0x30f7c1(0x15a)]='invalid\x20request\x20format';const _0x248001=_0xb5bfe2,_0x128623=[_0x248001[_0x30f7c1(0x193)],'authentication\x20failed',_0x30f7c1(0x19d),_0x30f7c1(0x117),_0x248001[_0x30f7c1(0x15a)],'content\x20policy'],_0x1cf56d=_0x568083[_0x30f7c1(0x126)]?.['toLowerCase']()||'';return _0x128623[_0x30f7c1(0x10d)](_0x5ab1d8=>_0x1cf56d[_0x30f7c1(0x19f)](_0x5ab1d8));}[a0_0x55de8d(0x17c)](_0x4c6185){const _0x25d547=a0_0x55de8d,_0x8b786e={};_0x8b786e['eWXXs']='openai-gpt4';const _0x3fccdf=_0x8b786e,_0xdadd62={};_0xdadd62[_0x25d547(0x16e)]=_0x25d547(0x1a6),_0xdadd62[_0x25d547(0x1b6)]=_0x3fccdf[_0x25d547(0x199)],_0xdadd62[_0x25d547(0x13d)]=_0x25d547(0x1a5);const _0x1e8922=_0xdadd62;return _0x1e8922[_0x4c6185]||_0x4c6185;}[a0_0x55de8d(0x182)](){const _0x592288=a0_0x55de8d;return this[_0x592288(0x109)][_0x592288(0x187)]();}}