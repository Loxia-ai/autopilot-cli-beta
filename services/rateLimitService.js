const a0_0x21282c=a0_0x1ed6;(function(_0x5cc8b1,_0x40e4d4){const _0x134818=a0_0x1ed6,_0x4ca09c=_0x5cc8b1();while(!![]){try{const _0x29c916=parseInt(_0x134818(0x193))/0x1+parseInt(_0x134818(0x1dc))/0x2*(parseInt(_0x134818(0x1c0))/0x3)+parseInt(_0x134818(0x165))/0x4*(parseInt(_0x134818(0x1cb))/0x5)+-parseInt(_0x134818(0x1eb))/0x6+-parseInt(_0x134818(0x1d9))/0x7*(parseInt(_0x134818(0x1f3))/0x8)+-parseInt(_0x134818(0x1ae))/0x9*(-parseInt(_0x134818(0x15b))/0xa)+-parseInt(_0x134818(0x18b))/0xb;if(_0x29c916===_0x40e4d4)break;else _0x4ca09c['push'](_0x4ca09c['shift']());}catch(_0x3af0c8){_0x4ca09c['push'](_0x4ca09c['shift']());}}}(a0_0x112e,0xe9c42));function a0_0x1ed6(_0x5c0ed2,_0x4048a3){const _0x5b6b26=a0_0x112e();return a0_0x1ed6=function(_0x1ddf5a,_0x5a5b04){_0x1ddf5a=_0x1ddf5a-0x157;let _0x3e6f4c=_0x5b6b26[_0x1ddf5a];if(a0_0x1ed6['PDObrv']===undefined){var _0x156172=function(_0x1ed6b7){const _0x59e304='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x21f95c='',_0x829e69='',_0x1d1bdd=_0x21f95c+_0x156172;for(let _0x1cfa26=0x0,_0x5df326,_0x4dd691,_0x2b121e=0x0;_0x4dd691=_0x1ed6b7['charAt'](_0x2b121e++);~_0x4dd691&&(_0x5df326=_0x1cfa26%0x4?_0x5df326*0x40+_0x4dd691:_0x4dd691,_0x1cfa26++%0x4)?_0x21f95c+=_0x1d1bdd['charCodeAt'](_0x2b121e+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x5df326>>(-0x2*_0x1cfa26&0x6)):_0x1cfa26:0x0){_0x4dd691=_0x59e304['indexOf'](_0x4dd691);}for(let _0x23e59f=0x0,_0x1d33d6=_0x21f95c['length'];_0x23e59f<_0x1d33d6;_0x23e59f++){_0x829e69+='%'+('00'+_0x21f95c['charCodeAt'](_0x23e59f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x829e69);};a0_0x1ed6['bAELPW']=_0x156172,_0x5c0ed2=arguments,a0_0x1ed6['PDObrv']=!![];}const _0x22e610=_0x5b6b26[0x0],_0x40aa84=_0x1ddf5a+_0x22e610,_0x112ef6=_0x5c0ed2[_0x40aa84];if(!_0x112ef6){const _0x4ff988=function(_0xce7c80){this['ymZuyo']=_0xce7c80,this['cBApQb']=[0x1,0x0,0x0],this['jKVhKr']=function(){return'newState';},this['ssjOwG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['uLbEbQ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4ff988['prototype']['hiyvUx']=function(){const _0x48cb1f=new RegExp(this['ssjOwG']+this['uLbEbQ']),_0x42efe1=_0x48cb1f['test'](this['jKVhKr']['toString']())?--this['cBApQb'][0x1]:--this['cBApQb'][0x0];return this['CYzwuK'](_0x42efe1);},_0x4ff988['prototype']['CYzwuK']=function(_0x220029){if(!Boolean(~_0x220029))return _0x220029;return this['JexUzH'](this['ymZuyo']);},_0x4ff988['prototype']['JexUzH']=function(_0x8d7853){for(let _0x357e44=0x0,_0x429dd9=this['cBApQb']['length'];_0x357e44<_0x429dd9;_0x357e44++){this['cBApQb']['push'](Math['round'](Math['random']())),_0x429dd9=this['cBApQb']['length'];}return _0x8d7853(this['cBApQb'][0x0]);},new _0x4ff988(a0_0x1ed6)['hiyvUx'](),_0x3e6f4c=a0_0x1ed6['bAELPW'](_0x3e6f4c),_0x5c0ed2[_0x40aa84]=_0x3e6f4c;}else _0x3e6f4c=_0x112ef6;return _0x3e6f4c;},a0_0x1ed6(_0x5c0ed2,_0x4048a3);}const a0_0x40aa84=(function(){const _0x2ec67e=a0_0x1ed6,_0x4676ce={};_0x4676ce[_0x2ec67e(0x1ef)]=function(_0x1adc10,_0x2e525c){return _0x1adc10!==_0x2e525c;},_0x4676ce[_0x2ec67e(0x1a8)]=_0x2ec67e(0x183),_0x4676ce[_0x2ec67e(0x187)]=_0x2ec67e(0x1a4);const _0x5d834c=_0x4676ce;let _0x339e0b=!![];return function(_0x899af8,_0x30d6fc){const _0x46455d=_0x2ec67e,_0x559291={'KaFAt':function(_0x51807b,_0x255ac5){return _0x5d834c['oeOrz'](_0x51807b,_0x255ac5);},'tyCPV':_0x5d834c[_0x46455d(0x1a8)],'iJEiW':_0x5d834c[_0x46455d(0x187)]},_0x141661=_0x339e0b?function(){const _0x49a1b7=_0x46455d;if(_0x30d6fc){if(_0x559291[_0x49a1b7(0x1df)](_0x559291['tyCPV'],_0x559291['iJEiW'])){const _0x35fd81=_0x30d6fc[_0x49a1b7(0x1fd)](_0x899af8,arguments);return _0x30d6fc=null,_0x35fd81;}else this['serviceStatus'][_0x49a1b7(0x1c3)](_0x376ad0,_0x49a1b7(0x192));}}:function(){};return _0x339e0b=![],_0x141661;};}()),a0_0x22e610=a0_0x40aa84(this,function(){const _0x2072c4=a0_0x1ed6;return a0_0x22e610[_0x2072c4(0x174)]()[_0x2072c4(0x1fb)]('(((.+)+)+)+$')[_0x2072c4(0x174)]()['constructor'](a0_0x22e610)[_0x2072c4(0x1fb)](_0x2072c4(0x20f));});a0_0x22e610();function a0_0x112e(){const _0x44fd06=['t1vKD04','z29Vz2XL','zK1LBue','AgfZ','yxzHAwXHyMXL','odu2mJy2rxzZsMj2','BhzUDgO','ENvjz1m','CMvXDwvZDcbSAw1PDa','C29Tzq','CwP3Au4','y3Lbq24','q0Hfq0TFsu5urvjwquW','B3bLBMfPlwDWDdq','werhCLO','zxjYB3i','twrwzuO','C3bSAxq','CMf0zuXPBwL0u2vYDMLJzq','Cunvu1q','z2v0','EgDmugC','A3PbDLu','DhjHy2u','Bw1HshK','y29UC29Szq','twXnwu8','s2XwBwK','q0vcwNG','vKHIBvy','u3DcshG','qNLizgq','oujZBuPLsG','v2Xgu0m','y250z1i','uMruBK0','z2v0tgfZDe91Dhb1DfrVA2vUq291BNq','vw5RBM93BIbLCNjVCG','s3b0A28','tgHMtNe','AgfUzgXLuMf0zuXPBwL0sgL0','x2LZtM9UuMv0CNLHyMXLrxjYB3i','z1PKAxe','t0nUDeu','rNfyEM4','uhD3tK8','zgvSzxrL','Dg9ju09tDhjPBMC','uMf0zsbSAw1PDcbOAxqGiW','uwDvCNe','m0HXvgHZza','Dg9mB3DLCKnHC2u','rvHuru5erurFuKfurv9msu1jvf9eruXbwq','C2v0','q2Xzyuu','vMv1ENG','vvvwvKu','txjLsMC','y29UC3rYDwn0B3i','uhD4qMi','CxvVDgeGzxHJzwvKzwq','mtv2A0XmyNq','Bg9Nz2vY','tLLrsvm','Aff2EgW','BwvZC2fNzq','BLvAy2q','BMv4DefSBg93zwruAw1L','ndi5','D2fYBG','uMv0CNLPBMCGywz0zxiG','z2v0uMf0zuXPBwL0Aw5Nu3rHDhvZ','C251Eu0','sxHTDhu','BxmGzgvSyxK','mJK0DgHis2v5','t0PUsNy','tNrxreO','odqWntu2A25IB1PN','CMv0CMLLCW','uvnosxy','s2fgqxq','BMTds0i','B3bLBMfP','u3bdBgC','Aw5MBW','rwzWwwu','AhzIwem','CvHzzMS','igLZig5VDcbYzwDPC3rLCMvKihDPDgGGyw55ihnLCNzPy2u','y2XLyxi','lcbHChbSEwLUzYa','z2v0tgfZDeLUChv0vg9Rzw5dB3vUDa','nZK4nZeXmgHquhzyDa','wKfpwha','zgvIDwC','Dg9Vig1HBNKGCMvXDwvZDhm','B2vpCNO','EhHfAxy','yMLUza','Aw52ywXPzcbYzxf1zxn0igzVCM1HDa','mZe0mtzTuwzoB0i','D3ndzuS','zgvSyxLnDwX0AxbSAwvY','A2v5CW','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','x2DLDfnLCNzPy2vnB2rLBeLK','B2H4Cg8','uhPsyNC','C2vHCMnO','yNvKz2v0u2vYDMLJzq','yxbWBhK','BuvkqNK','uMf0zsbSAw1PDgLUzYbZDgf0zsbJBgvHCMvK','zgvNCMfKzwq','C2vYDMLJzuLUC3rHBMnLCW','sNPHwKW','BxmUlI4','y29UzMLN','Bg9N','s3bJveC','CMvJB3jKvxnHz2u','D1zqu0y','qvzNEuC','txPjvhG','DgTPwwu','CMvZzxrsyxrLtgLTAxriAxrZ','C2vYDMLJzvn0yxr1CW','C2v0rgvSyxK','kcGOlISPkYKRksSK','nxWZFdb8nNWXFdr8mG','rhbAEgu','uMvXDwvZDcbMywLSzwqGkgf0DgvTChqG','D2fPDeLMtMvLzgvK','Bwf4','oIbsyxrLigXPBwL0igHPDhmGCMvZzxqGkhn1y2nLC3nMDwWGCMvXDwvZDcK','mtiYodGWmtbwuezUywy','yxv0AgvUDgLJyxrPB24GzMfPBgvK','BM93','zxHJzxb0Aw9U','vuHvENK','BxmGyMvMB3jLihnLBMrPBMCGkhvUDgLSia','wNPivLK','AffjwNu','txL5qNu','quTpBuq','nJu4mJC2wvPsANjZ','ugr3ug4','su5jveLbtf9sqvrfx0XjtuLux0rftefz','q29UDMvYC2f0Aw9Uia','thv0C1u','x2LZuMf0zuXPBwL0rxjYB3i','DgHYB3r0Bgu','wKDWyLG','ChjVDg90ExbL','sMr3ufy','t1DPtw4','x19WCM90B19F','tLbNCve','z2v0qwXSu3rHDhvZ','Cg93','Dg9tDhjPBMC','Bw9KzwWGBM90igzVDw5K','z2v0u3rHDhvZ','tgnKAfy','t1Dpuvq','AfnuveO','EfH4wgC','oIbszwfKEsb0BYbZzw5KicHUBYbKzwXHEsbUzwvKzwqP','wNHlA2W','Aerssfe','DKnQtgi','y29UDMvYC2f0Aw9Uu2vYDMLJzxm','Aw5JBhvKzxm','BuP2Cwq','D1Ppzw8','tg1szum','Dwvwt28','yw50AhjVCgLJ','Aw52ywXPzcbHCgKGA2v5','ALrMr1i','DuX6wwC','Dgjkz3a','u2PfEvC','ntK5oty5n0DZyNLnDW','CMf0zuXPBwL0sgL0CW','Dw5HDxrOB3jPEMvK'];a0_0x112e=function(){return _0x44fd06;};return a0_0x112e();}const a0_0x5a5b04=(function(){const _0x48877f=a0_0x1ed6,_0x70b6f={};_0x70b6f[_0x48877f(0x199)]=_0x48877f(0x1ff),_0x70b6f[_0x48877f(0x1f0)]=function(_0x1ec967,_0x22da75){return _0x1ec967!==_0x22da75;},_0x70b6f[_0x48877f(0x17e)]='wsCeK',_0x70b6f['dOzpi']=_0x48877f(0x1b4);const _0x3f732a=_0x70b6f;let _0x5c3dc8=!![];return function(_0x4467c2,_0x1c87d0){const _0x576a18=_0x48877f,_0x1c8093={'BbMHW':function(_0x1b4670,_0x1e9738){const _0x4e6876=a0_0x1ed6;return _0x3f732a[_0x4e6876(0x1f0)](_0x1b4670,_0x1e9738);},'tkiYe':_0x3f732a[_0x576a18(0x17e)],'QSNIv':_0x576a18(0x1fa)};if(_0x3f732a['dOzpi']!==_0x576a18(0x1b4))this['nextAllowedTime'][_0x576a18(0x1e8)](),this['rateLimitHits'][_0x576a18(0x1e8)](),this[_0x576a18(0x1cc)][_0x576a18(0x1e3)](_0x3f732a[_0x576a18(0x199)]);else{const _0x112713=_0x5c3dc8?function(){const _0x347cc2=_0x576a18;if(_0x1c8093['BbMHW'](_0x1c8093[_0x347cc2(0x20b)],_0x347cc2(0x1f4))){const _0x414fa3=new _0x5179e8([...this[_0x347cc2(0x1d1)][_0x347cc2(0x1f6)](),...this[_0x347cc2(0x18c)][_0x347cc2(0x1f6)]()]),_0x152f60={};for(const _0x523a9f of _0x414fa3){_0x152f60[_0x523a9f]=this['getStatus'](_0x523a9f);}return _0x152f60;}else{if(_0x1c87d0){if(_0x1c8093['BbMHW'](_0x1c8093[_0x347cc2(0x1de)],'PzRbw')){this[_0x347cc2(0x1cc)]['debug'](_0x3583b9+_0x347cc2(0x17b));return;}else{const _0x28aa9e=_0x1c87d0[_0x347cc2(0x1fd)](_0x4467c2,arguments);return _0x1c87d0=null,_0x28aa9e;}}}}:function(){};return _0x5c3dc8=![],_0x112713;}};}()),a0_0x1ddf5a=a0_0x5a5b04(this,function(){const _0x3ea083=a0_0x1ed6,_0x5f5826={'qjwiN':'0|4|2|5|1|3','OUdwN':function(_0x103526,_0x516224){return _0x103526===_0x516224;},'XDGrZ':_0x3ea083(0x189),'ZGpbX':_0x3ea083(0x1d6),'NPgqQ':function(_0x551afe,_0x4e0ca6){return _0x551afe(_0x4e0ca6);},'Ixmtu':function(_0x51b931,_0x12a3cd){return _0x51b931+_0x12a3cd;},'Etgvu':'return\x20(function()\x20','QgUrq':_0x3ea083(0x1f7),'xXxXg':function(_0x2a33aa){return _0x2a33aa();},'AKOmD':_0x3ea083(0x205),'UUVVE':'warn','tlcQb':'info','NtWDJ':_0x3ea083(0x19d),'mEJBy':_0x3ea083(0x15e),'MyyBu':_0x3ea083(0x1a5),'ZxKkl':function(_0x122994,_0x84015b){return _0x122994<_0x84015b;},'LutsU':_0x3ea083(0x1ec),'PdwPn':'ZhDmS'},_0x3a0508=function(){const _0x4cc64f=_0x3ea083;if(_0x5f5826[_0x4cc64f(0x18e)](_0x5f5826[_0x4cc64f(0x19c)],_0x5f5826[_0x4cc64f(0x16c)])){const _0x5236ab=_0x5f5826[_0x4cc64f(0x198)][_0x4cc64f(0x19f)]('|');let _0x41a256=0x0;while(!![]){switch(_0x5236ab[_0x41a256++]){case'0':this['logger']=_0x9b344a;continue;case'1':this['EXTENDED_RATE_LIMIT_DELAY']=0xea60;continue;case'2':this[_0x4cc64f(0x18c)]=new _0x27218b();continue;case'3':this['CHECK_INTERVAL']=0x3e8;continue;case'4':this['nextAllowedTime']=new _0x3e8126();continue;case'5':this[_0x4cc64f(0x167)]=0x7530;continue;}break;}}else{let _0x157c4e;try{_0x157c4e=_0x5f5826[_0x4cc64f(0x171)](Function,_0x5f5826[_0x4cc64f(0x1d7)](_0x5f5826['Etgvu'],_0x5f5826[_0x4cc64f(0x1bf)])+');')();}catch(_0x2296ac){_0x157c4e=window;}return _0x157c4e;}},_0x45bd5a=_0x5f5826[_0x3ea083(0x17a)](_0x3a0508),_0x1bc7f6=_0x45bd5a[_0x3ea083(0x1a7)]=_0x45bd5a[_0x3ea083(0x1a7)]||{},_0x329670=[_0x5f5826[_0x3ea083(0x164)],_0x5f5826[_0x3ea083(0x1c6)],_0x5f5826['tlcQb'],_0x5f5826[_0x3ea083(0x1db)],_0x5f5826[_0x3ea083(0x1fe)],'table',_0x5f5826[_0x3ea083(0x163)]];for(let _0xa33523=0x0;_0x5f5826[_0x3ea083(0x17c)](_0xa33523,_0x329670['length']);_0xa33523++){if(_0x5f5826[_0x3ea083(0x18e)](_0x5f5826[_0x3ea083(0x169)],_0x5f5826[_0x3ea083(0x166)]))throw new _0x5e7aeb(_0x3ea083(0x168)+_0x241bfb+_0x3ea083(0x1e7));else{const _0x3b028d=a0_0x5a5b04['constructor']['prototype']['bind'](a0_0x5a5b04),_0x16d765=_0x329670[_0xa33523],_0x4e88ba=_0x1bc7f6[_0x16d765]||_0x3b028d;_0x3b028d[_0x3ea083(0x170)]=a0_0x5a5b04[_0x3ea083(0x1f1)](a0_0x5a5b04),_0x3b028d[_0x3ea083(0x174)]=_0x4e88ba[_0x3ea083(0x174)][_0x3ea083(0x1f1)](_0x4e88ba),_0x1bc7f6[_0x16d765]=_0x3b028d;}}});a0_0x1ddf5a();export class RateLimitService{constructor(_0x2c88d5){const _0x21da93=a0_0x1ed6,_0x112164={};_0x112164[_0x21da93(0x18a)]='5|2|3|1|4|0';const _0x362098=_0x112164,_0x1caa27=_0x362098[_0x21da93(0x18a)][_0x21da93(0x19f)]('|');let _0xe81d3=0x0;while(!![]){switch(_0x1caa27[_0xe81d3++]){case'0':this['CHECK_INTERVAL']=0x3e8;continue;case'1':this[_0x21da93(0x167)]=0x7530;continue;case'2':this[_0x21da93(0x1d1)]=new Map();continue;case'3':this['rateLimitHits']=new Map();continue;case'4':this[_0x21da93(0x1c2)]=0xea60;continue;case'5':this[_0x21da93(0x1cc)]=_0x2c88d5;continue;}break;}}[a0_0x21282c(0x20e)](_0xd42de5,_0x35f29c){const _0x25833f=a0_0x21282c,_0x2566df={};_0x2566df[_0x25833f(0x1e5)]=function(_0x3eb938,_0x549eaa){return _0x3eb938+_0x549eaa;},_0x2566df[_0x25833f(0x1a3)]=function(_0x1b3d80,_0x136563){return _0x1b3d80>_0x136563;};const _0x3e0643=_0x2566df,_0x576339=_0x3e0643[_0x25833f(0x1e5)](Date[_0x25833f(0x15d)](),_0x35f29c),_0x1a4e60=this[_0x25833f(0x1d1)][_0x25833f(0x1a2)](_0xd42de5)||0x0;_0x3e0643[_0x25833f(0x1a3)](_0x576339,_0x1a4e60)&&(this[_0x25833f(0x1d1)]['set'](_0xd42de5,_0x576339),this[_0x25833f(0x1cc)][_0x25833f(0x1e3)]('Rate\x20limit\x20delay\x20set\x20for\x20'+_0xd42de5+':\x20'+_0x35f29c+'ms\x20(until\x20'+new Date(_0x576339)['toISOString']()+')'));}[a0_0x21282c(0x1b6)](_0x1ac68e){const _0x4d06de=a0_0x21282c,_0x513693={};_0x513693['hQIZu']=function(_0x5d542a,_0x23ed5a){return _0x5d542a+_0x23ed5a;},_0x513693[_0x4d06de(0x20a)]=function(_0x1a4ab8,_0x500125){return _0x1a4ab8===_0x500125;},_0x513693[_0x4d06de(0x1a9)]=function(_0x5f33b8,_0x5c577d){return _0x5f33b8!==_0x5c577d;},_0x513693[_0x4d06de(0x1c5)]=_0x4d06de(0x1e2),_0x513693[_0x4d06de(0x208)]=_0x4d06de(0x19e);const _0x132c2f=_0x513693,_0x19612c=this[_0x4d06de(0x18c)][_0x4d06de(0x1a2)](_0x1ac68e)||0x0,_0x220e38=_0x132c2f[_0x4d06de(0x162)](_0x19612c,0x1);this[_0x4d06de(0x18c)]['set'](_0x1ac68e,_0x220e38);let _0x3ce743;if(_0x132c2f[_0x4d06de(0x20a)](_0x220e38,0x1)){if(_0x132c2f[_0x4d06de(0x1a9)](_0x132c2f[_0x4d06de(0x1c5)],_0x132c2f[_0x4d06de(0x208)]))_0x3ce743=this[_0x4d06de(0x167)];else{const _0x34f157=_0x2ad1ad[_0x4d06de(0x1fd)](_0x10da15,arguments);return _0x4fd777=null,_0x34f157;}}else _0x3ce743=this[_0x4d06de(0x1c2)];this['setDelay'](_0x1ac68e,_0x3ce743),this[_0x4d06de(0x1cc)][_0x4d06de(0x1d3)](_0x4d06de(0x1be)+_0x220e38+'\x20for\x20'+_0x1ac68e+_0x4d06de(0x1e9)+_0x3ce743+_0x4d06de(0x1d8));}async['waitIfNeeded'](_0x6fc524){const _0x2d0612=a0_0x21282c,_0x5db375={};_0x5db375[_0x2d0612(0x1b9)]=function(_0x36773d,_0x353717){return _0x36773d>=_0x353717;},_0x5db375[_0x2d0612(0x178)]=function(_0x475792,_0x460d6b){return _0x475792===_0x460d6b;},_0x5db375[_0x2d0612(0x1ab)]=_0x2d0612(0x16f),_0x5db375[_0x2d0612(0x1c9)]=_0x2d0612(0x1da),_0x5db375[_0x2d0612(0x1b5)]=function(_0x1b98d6,_0x2a9640){return _0x1b98d6-_0x2a9640;},_0x5db375[_0x2d0612(0x190)]=function(_0x5b7167,_0x405965){return _0x5b7167+_0x405965;};const _0x4494d6=_0x5db375,_0x26033a=this['nextAllowedTime']['get'](_0x6fc524)||0x0,_0x1412a=Date[_0x2d0612(0x15d)]();if(_0x4494d6[_0x2d0612(0x1b9)](_0x1412a,_0x26033a)){if(_0x4494d6[_0x2d0612(0x178)](_0x4494d6[_0x2d0612(0x1ab)],_0x4494d6[_0x2d0612(0x1c9)]))this[_0x2d0612(0x18c)][_0x2d0612(0x1bc)](_0xd9a030),this[_0x2d0612(0x1cc)][_0x2d0612(0x1ed)](_0x40ac7b+_0x2d0612(0x15a));else{this[_0x2d0612(0x1cc)][_0x2d0612(0x1ed)](_0x6fc524+_0x2d0612(0x17b));return;}}const _0x4841b4=_0x4494d6[_0x2d0612(0x1b5)](_0x26033a,_0x1412a),_0x590825=_0x4494d6[_0x2d0612(0x190)](_0x4841b4,this[_0x2d0612(0x19a)]);this[_0x2d0612(0x1cc)][_0x2d0612(0x1e3)](_0x6fc524+':\x20Waiting\x20'+_0x590825+_0x2d0612(0x160)+new Date(_0x26033a+this['CHECK_INTERVAL'])[_0x2d0612(0x1bd)]()+')'),await new Promise(_0x1361fc=>setTimeout(_0x1361fc,_0x590825));}['resetRateLimitHits'](_0x5ae29e){const _0x5865d3=a0_0x21282c;this[_0x5865d3(0x18c)][_0x5865d3(0x191)](_0x5ae29e)&&(this[_0x5865d3(0x18c)][_0x5865d3(0x1bc)](_0x5ae29e),this['logger'][_0x5865d3(0x1ed)](_0x5ae29e+_0x5865d3(0x15a)));}[a0_0x21282c(0x176)](_0x897b1d){const _0x1cd4b0=a0_0x21282c,_0x149f61={};_0x149f61[_0x1cd4b0(0x177)]=function(_0x2446fb,_0x198354){return _0x2446fb-_0x198354;};const _0x288a71=_0x149f61,_0x2154e2=this[_0x1cd4b0(0x1d1)]['get'](_0x897b1d)||0x0,_0x101807=this['rateLimitHits'][_0x1cd4b0(0x1a2)](_0x897b1d)||0x0,_0x1438f4=Date[_0x1cd4b0(0x15d)]();return{'serviceModel':_0x897b1d,'nextAllowedTime':_0x2154e2,'nextAllowedDate':_0x2154e2>0x0?new Date(_0x2154e2)[_0x1cd4b0(0x1bd)]():null,'remainingDelayMs':Math[_0x1cd4b0(0x159)](0x0,_0x288a71[_0x1cd4b0(0x177)](_0x2154e2,_0x1438f4)),'canSendNow':_0x1438f4>=_0x2154e2,'consecutiveRateLimitHits':_0x101807};}[a0_0x21282c(0x172)](){const _0x2abb49=a0_0x21282c,_0x501542={};_0x501542['ZzHVY']=function(_0x218687,_0x2544be){return _0x218687!==_0x2544be;},_0x501542['cntgR']=_0x2abb49(0x1b1),_0x501542[_0x2abb49(0x1aa)]=_0x2abb49(0x184);const _0x5d6e99=_0x501542,_0x47baae=new Set([...this[_0x2abb49(0x1d1)][_0x2abb49(0x1f6)](),...this[_0x2abb49(0x18c)][_0x2abb49(0x1f6)]()]),_0x12a430={};for(const _0x274823 of _0x47baae){if(_0x5d6e99[_0x2abb49(0x161)](_0x5d6e99[_0x2abb49(0x1b0)],_0x5d6e99[_0x2abb49(0x1aa)]))_0x12a430[_0x274823]=this[_0x2abb49(0x176)](_0x274823);else{if(_0x3479f3){const _0x2e9d54=_0x3ed77d[_0x2abb49(0x1fd)](_0x146e61,arguments);return _0x5018e7=null,_0x2e9d54;}}}return _0x12a430;}['clear'](){const _0x52a076=a0_0x21282c;this[_0x52a076(0x1d1)][_0x52a076(0x1e8)](),this['rateLimitHits'][_0x52a076(0x1e8)](),this['logger'][_0x52a076(0x1e3)]('Rate\x20limiting\x20state\x20cleared');}}export class EnhancedLLMService{constructor(_0x3683eb,_0x4ef960){const _0x4135bd=a0_0x21282c,_0x540492=_0x4135bd(0x210)['split']('|');let _0x121127=0x0;while(!![]){switch(_0x540492[_0x121127++]){case'0':this['rateLimitService']=new RateLimitService(_0x4ef960);continue;case'1':this[_0x4135bd(0x201)]=new Map();continue;case'2':this[_0x4135bd(0x20d)]=new Map();continue;case'3':this[_0x4135bd(0x1cc)]=_0x4ef960;continue;case'4':this[_0x4135bd(0x17f)]=new Map();continue;case'5':this[_0x4135bd(0x204)]=_0x3683eb;continue;case'6':this['budgetService']=new BudgetService(_0x3683eb,_0x4ef960);continue;}break;}}async['sendMessage'](_0x22e907,_0x49d0b8,_0x50e1ed){const _0x29fcd3=a0_0x21282c,_0x5e9add={};_0x5e9add[_0x29fcd3(0x1ba)]=_0x29fcd3(0x1f2),_0x5e9add[_0x29fcd3(0x16e)]=function(_0x4dcc14,_0xafeeb5){return _0x4dcc14===_0xafeeb5;},_0x5e9add[_0x29fcd3(0x1e4)]=_0x29fcd3(0x1af),_0x5e9add[_0x29fcd3(0x202)]=function(_0x5018d4,_0x22b51d){return _0x5018d4!==_0x22b51d;},_0x5e9add['hSTTJ']=_0x29fcd3(0x1cd),_0x5e9add[_0x29fcd3(0x1a1)]=function(_0x5b1f50,_0x55432b){return _0x5b1f50<=_0x55432b;},_0x5e9add['qXYfk']=_0x29fcd3(0x1ce),_0x5e9add[_0x29fcd3(0x206)]=_0x29fcd3(0x188),_0x5e9add[_0x29fcd3(0x1c7)]=_0x29fcd3(0x200),_0x5e9add[_0x29fcd3(0x1ad)]=_0x29fcd3(0x192),_0x5e9add[_0x29fcd3(0x1c4)]=function(_0x2f03f9,_0x1d0ce0){return _0x2f03f9<_0x1d0ce0;},_0x5e9add[_0x29fcd3(0x209)]='Rate\x20limit\x20error\x20detected,\x20waiting\x20and\x20retrying...',_0x5e9add[_0x29fcd3(0x195)]=function(_0x4b4bcb,_0x5959c3){return _0x4b4bcb>=_0x5959c3;},_0x5e9add[_0x29fcd3(0x1d0)]=function(_0x252a35,_0x130a6a){return _0x252a35*_0x130a6a;},_0x5e9add[_0x29fcd3(0x182)]=_0x29fcd3(0x1b3);const _0x419184=_0x5e9add,_0x4e3b72=this[_0x29fcd3(0x17f)][_0x29fcd3(0x1a2)](_0x22e907);if(!_0x4e3b72){if(_0x419184[_0x29fcd3(0x16e)](_0x419184[_0x29fcd3(0x1e4)],_0x419184[_0x29fcd3(0x1e4)]))throw new Error(_0x29fcd3(0x168)+_0x22e907+'\x20is\x20not\x20registered\x20with\x20any\x20service');else{const _0x155e03=_0x30067d[_0x29fcd3(0x1c8)][_0x29fcd3(0x16d)][_0x29fcd3(0x1f1)](_0x283c5d),_0x30f1d1=_0x543ec6[_0x441524],_0x1db0bb=_0x60e2d5[_0x30f1d1]||_0x155e03;_0x155e03[_0x29fcd3(0x170)]=_0x5d7e4a[_0x29fcd3(0x1f1)](_0x2d3fb5),_0x155e03[_0x29fcd3(0x174)]=_0x1db0bb[_0x29fcd3(0x174)][_0x29fcd3(0x1f1)](_0x1db0bb),_0x322ff2[_0x30f1d1]=_0x155e03;}}const _0x556f98=this[_0x29fcd3(0x201)][_0x29fcd3(0x1a2)](_0x4e3b72);if(!_0x556f98){if(_0x419184['JzaZL'](_0x419184[_0x29fcd3(0x179)],_0x419184[_0x29fcd3(0x179)])){const _0x50525b=_0x2bcdf5?function(){const _0x5d3fb1=_0x29fcd3;if(_0x57c653){const _0x3c119e=_0x5997d4[_0x5d3fb1(0x1fd)](_0x24af39,arguments);return _0x56648a=null,_0x3c119e;}}:function(){};return _0x2bc477=![],_0x50525b;}else throw new Error('Service\x20'+_0x4e3b72+'\x20not\x20found\x20for\x20conversation\x20'+_0x22e907);}const _0x598363=this[_0x29fcd3(0x1f8)](_0x4e3b72);await this[_0x29fcd3(0x1a0)][_0x29fcd3(0x158)](_0x598363);const _0x2c9a16=this[_0x29fcd3(0x204)][_0x29fcd3(0x1dd)]?.['maxRetries']||0x3;let _0x4d9375=0x0,_0xcc3a95=null;while(_0x419184[_0x29fcd3(0x1a1)](_0x4d9375,_0x2c9a16)){if(_0x419184[_0x29fcd3(0x1e6)]==='hQvxl')try{if(_0x419184[_0x29fcd3(0x206)]===_0x419184[_0x29fcd3(0x206)]){const _0x15de05=await _0x556f98['sendMessage'](_0x22e907,_0x49d0b8,_0x50e1ed);return this[_0x29fcd3(0x1a0)][_0x29fcd3(0x20c)](_0x598363),await this[_0x29fcd3(0x1fc)][_0x29fcd3(0x207)](_0x4e3b72,_0x556f98[_0x29fcd3(0x1ea)](),_0x556f98[_0x29fcd3(0x1b2)]()),_0x419184['JdwPV'](this[_0x29fcd3(0x20d)][_0x29fcd3(0x1a2)](_0x4e3b72),_0x419184[_0x29fcd3(0x1c7)])&&this[_0x29fcd3(0x20d)]['set'](_0x4e3b72,_0x419184[_0x29fcd3(0x1ad)]),_0x15de05;}else{const _0x561c53=[_0x29fcd3(0x186),_0x29fcd3(0x15c),_0x29fcd3(0x18d),_0x29fcd3(0x175),_0x419184['FqXzn'],'content\x20policy'],_0xf2ea0b=_0x716b4e[_0x29fcd3(0x1cf)]?.[_0x29fcd3(0x1c1)]()||'';return _0x561c53[_0x29fcd3(0x197)](_0x14d9b7=>_0xf2ea0b[_0x29fcd3(0x180)](_0x14d9b7));}}catch(_0x262f99){_0xcc3a95=_0x262f99,this[_0x29fcd3(0x1cc)]['error'](_0x29fcd3(0x157)+(_0x4d9375+0x1)+'/'+(_0x2c9a16+0x1)+'):',_0x262f99);if(this[_0x29fcd3(0x16a)](_0x262f99)){this[_0x29fcd3(0x1a0)][_0x29fcd3(0x1b6)](_0x598363);if(_0x419184[_0x29fcd3(0x1c4)](_0x4d9375,_0x2c9a16)){this[_0x29fcd3(0x1cc)][_0x29fcd3(0x1e3)](_0x419184[_0x29fcd3(0x209)]),await this['rateLimitService'][_0x29fcd3(0x158)](_0x598363);continue;}}if(this[_0x29fcd3(0x1b7)](_0x262f99))throw _0x262f99;if(_0x419184['zuIgS'](_0x4d9375,_0x2c9a16))break;this[_0x29fcd3(0x20d)][_0x29fcd3(0x1c3)](_0x4e3b72,_0x419184['MreJg']);const _0x17eb54=this['config'][_0x29fcd3(0x1dd)]?.['baseDelayMs']||0x3e8,_0x57395a=this['config']['retries']?.[_0x29fcd3(0x1f5)]||0x2,_0x449014=_0x419184[_0x29fcd3(0x1d0)](_0x17eb54,Math[_0x29fcd3(0x173)](_0x57395a,_0x4d9375));this[_0x29fcd3(0x1cc)]['info'](_0x29fcd3(0x1d4)+_0x449014+_0x29fcd3(0x203)),await new Promise(_0x311990=>setTimeout(_0x311990,_0x449014)),_0x4d9375++;}else return this[_0x29fcd3(0x1a0)][_0x29fcd3(0x172)]();}throw new Error('All\x20retry\x20attempts\x20failed:\x20'+(_0xcc3a95?.[_0x29fcd3(0x1cf)]||_0x419184[_0x29fcd3(0x182)]));}[a0_0x21282c(0x16a)](_0x536372){const _0x331c60=a0_0x21282c,_0xfaa0ea={};_0xfaa0ea['mJvqd']=_0x331c60(0x1ee),_0xfaa0ea[_0x331c60(0x1b8)]=_0x331c60(0x1ca),_0xfaa0ea['SwBHx']=_0x331c60(0x196),_0xfaa0ea[_0x331c60(0x194)]=_0x331c60(0x1d2);const _0x425cfa=_0xfaa0ea,_0x340406=['rate\x20limit',_0x425cfa[_0x331c60(0x181)],_0x425cfa['gZdiq'],_0x425cfa[_0x331c60(0x1ac)],_0x425cfa[_0x331c60(0x194)],_0x331c60(0x16b)],_0xed768e=_0x536372[_0x331c60(0x1cf)]?.['toLowerCase']()||'';return _0x340406[_0x331c60(0x197)](_0x16b1e2=>_0xed768e[_0x331c60(0x180)](_0x16b1e2));}[a0_0x21282c(0x1b7)](_0x2505ed){const _0x16db8c=a0_0x21282c,_0x2b994e={};_0x2b994e[_0x16db8c(0x1e0)]='invalid\x20api\x20key',_0x2b994e[_0x16db8c(0x211)]=_0x16db8c(0x18d),_0x2b994e[_0x16db8c(0x15f)]=_0x16db8c(0x1f2),_0x2b994e[_0x16db8c(0x1f9)]='content\x20policy';const _0x207707=_0x2b994e,_0x458ed5=[_0x207707[_0x16db8c(0x1e0)],_0x16db8c(0x15c),_0x207707[_0x16db8c(0x211)],_0x16db8c(0x175),_0x207707[_0x16db8c(0x15f)],_0x207707[_0x16db8c(0x1f9)]],_0x676e46=_0x2505ed[_0x16db8c(0x1cf)]?.['toLowerCase']()||'';return _0x458ed5[_0x16db8c(0x197)](_0x62f1e8=>_0x676e46[_0x16db8c(0x180)](_0x62f1e8));}['_getServiceModelId'](_0x1858e1){const _0x417984=a0_0x21282c,_0x2f9c5e={};_0x2f9c5e[_0x417984(0x17d)]='anthropic-sonnet',_0x2f9c5e[_0x417984(0x1bb)]=_0x417984(0x19b),_0x2f9c5e[_0x417984(0x1a6)]='google-gemini';const _0x5ae940=_0x2f9c5e,_0x432921={};_0x432921[_0x417984(0x185)]=_0x5ae940[_0x417984(0x17d)],_0x432921[_0x417984(0x1e1)]=_0x5ae940[_0x417984(0x1bb)],_0x432921[_0x417984(0x18f)]=_0x5ae940[_0x417984(0x1a6)];const _0x558ee8=_0x432921;return _0x558ee8[_0x1858e1]||_0x1858e1;}[a0_0x21282c(0x1d5)](){const _0x4f2721=a0_0x21282c;return this[_0x4f2721(0x1a0)][_0x4f2721(0x172)]();}}