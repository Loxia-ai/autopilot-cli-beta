const a0_0x7dfead=a0_0x5e42;function a0_0x5e42(_0x566511,_0x469951){const _0x286500=a0_0x2682();return a0_0x5e42=function(_0x13cfa4,_0x3eb60f){_0x13cfa4=_0x13cfa4-0x196;let _0x51e2c4=_0x286500[_0x13cfa4];if(a0_0x5e42['vqyrLH']===undefined){var _0x41e039=function(_0x5e42e5){const _0x20b1c1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3400ba='',_0x2b99f6='',_0x39f0db=_0x3400ba+_0x41e039;for(let _0x5ed86a=0x0,_0x1cc73d,_0x49b730,_0x4fff0a=0x0;_0x49b730=_0x5e42e5['charAt'](_0x4fff0a++);~_0x49b730&&(_0x1cc73d=_0x5ed86a%0x4?_0x1cc73d*0x40+_0x49b730:_0x49b730,_0x5ed86a++%0x4)?_0x3400ba+=_0x39f0db['charCodeAt'](_0x4fff0a+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x1cc73d>>(-0x2*_0x5ed86a&0x6)):_0x5ed86a:0x0){_0x49b730=_0x20b1c1['indexOf'](_0x49b730);}for(let _0x2b81af=0x0,_0x183289=_0x3400ba['length'];_0x2b81af<_0x183289;_0x2b81af++){_0x2b99f6+='%'+('00'+_0x3400ba['charCodeAt'](_0x2b81af)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2b99f6);};a0_0x5e42['Eduyoe']=_0x41e039,_0x566511=arguments,a0_0x5e42['vqyrLH']=!![];}const _0x271510=_0x286500[0x0],_0x390aeb=_0x13cfa4+_0x271510,_0x268221=_0x566511[_0x390aeb];if(!_0x268221){const _0x4e401c=function(_0x2e521a){this['ZClSQl']=_0x2e521a,this['KVAGlA']=[0x1,0x0,0x0],this['yLIMzP']=function(){return'newState';},this['EZtNAq']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['aTbYst']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4e401c['prototype']['Rbywqp']=function(){const _0x25cfc5=new RegExp(this['EZtNAq']+this['aTbYst']),_0x552405=_0x25cfc5['test'](this['yLIMzP']['toString']())?--this['KVAGlA'][0x1]:--this['KVAGlA'][0x0];return this['COdSlM'](_0x552405);},_0x4e401c['prototype']['COdSlM']=function(_0x40e9d9){if(!Boolean(~_0x40e9d9))return _0x40e9d9;return this['NWbhUl'](this['ZClSQl']);},_0x4e401c['prototype']['NWbhUl']=function(_0x2c7201){for(let _0x36bc13=0x0,_0x534903=this['KVAGlA']['length'];_0x36bc13<_0x534903;_0x36bc13++){this['KVAGlA']['push'](Math['round'](Math['random']())),_0x534903=this['KVAGlA']['length'];}return _0x2c7201(this['KVAGlA'][0x0]);},new _0x4e401c(a0_0x5e42)['Rbywqp'](),_0x51e2c4=a0_0x5e42['Eduyoe'](_0x51e2c4),_0x566511[_0x390aeb]=_0x51e2c4;}else _0x51e2c4=_0x268221;return _0x51e2c4;},a0_0x5e42(_0x566511,_0x469951);}(function(_0x38525b,_0x4ce025){const _0x233634=a0_0x5e42,_0x5bc342=_0x38525b();while(!![]){try{const _0x3fdae6=parseInt(_0x233634(0x200))/0x1*(-parseInt(_0x233634(0x224))/0x2)+-parseInt(_0x233634(0x1f7))/0x3*(-parseInt(_0x233634(0x227))/0x4)+-parseInt(_0x233634(0x221))/0x5+-parseInt(_0x233634(0x198))/0x6+parseInt(_0x233634(0x1cb))/0x7*(parseInt(_0x233634(0x19c))/0x8)+-parseInt(_0x233634(0x239))/0x9+-parseInt(_0x233634(0x219))/0xa*(-parseInt(_0x233634(0x209))/0xb);if(_0x3fdae6===_0x4ce025)break;else _0x5bc342['push'](_0x5bc342['shift']());}catch(_0x23b704){_0x5bc342['push'](_0x5bc342['shift']());}}}(a0_0x2682,0x66488));const a0_0x390aeb=(function(){const _0x163eb2=a0_0x5e42,_0x4d89e9={};_0x4d89e9[_0x163eb2(0x1b1)]=_0x163eb2(0x1e7),_0x4d89e9['HpSfy']=function(_0x277167,_0x1e5bd8){return _0x277167===_0x1e5bd8;},_0x4d89e9[_0x163eb2(0x1cd)]=_0x163eb2(0x204);const _0x3d3453=_0x4d89e9;let _0xe11314=!![];return function(_0x33d626,_0x247552){const _0x603850=_0x163eb2;if(_0x3d3453[_0x603850(0x21a)](_0x603850(0x201),_0x3d3453[_0x603850(0x1cd)]))this[_0x603850(0x217)][_0x603850(0x1a8)](),this[_0x603850(0x1c9)][_0x603850(0x1a8)](),this[_0x603850(0x1df)][_0x603850(0x1fa)](_0x3d3453[_0x603850(0x1b1)]);else{const _0x5c45c2=_0xe11314?function(){const _0x5a2a26=_0x603850;if(_0x247552){const _0x309a95=_0x247552[_0x5a2a26(0x19a)](_0x33d626,arguments);return _0x247552=null,_0x309a95;}}:function(){};return _0xe11314=![],_0x5c45c2;}};}()),a0_0x271510=a0_0x390aeb(this,function(){const _0x409d77=a0_0x5e42,_0x597ec2={};_0x597ec2[_0x409d77(0x237)]=_0x409d77(0x233);const _0x4b73be=_0x597ec2;return a0_0x271510['toString']()[_0x409d77(0x244)](_0x4b73be['bmtwk'])[_0x409d77(0x1dc)]()[_0x409d77(0x1a5)](a0_0x271510)[_0x409d77(0x244)](_0x4b73be['bmtwk']);});a0_0x271510();const a0_0x3eb60f=(function(){let _0x3790f3=!![];return function(_0x172d4e,_0x169a1f){const _0x38551b=_0x3790f3?function(){const _0x30678d=a0_0x5e42;if(_0x169a1f){const _0x39a898=_0x169a1f[_0x30678d(0x19a)](_0x172d4e,arguments);return _0x169a1f=null,_0x39a898;}}:function(){};return _0x3790f3=![],_0x38551b;};}()),a0_0x13cfa4=a0_0x3eb60f(this,function(){const _0x3d648b=a0_0x5e42,_0x261b8b={'xfwDU':function(_0x5553e8,_0x3d3dad){return _0x5553e8===_0x3d3dad;},'uOIZX':_0x3d648b(0x23a),'Hquwu':function(_0x502a73,_0x3dd527){return _0x502a73(_0x3dd527);},'KLVyO':function(_0x5a756d,_0x427ea9){return _0x5a756d+_0x427ea9;},'hnRDf':function(_0x360f1d,_0x2ad60b){return _0x360f1d===_0x2ad60b;},'HTIGz':_0x3d648b(0x225),'PtmcK':_0x3d648b(0x1b3),'tXKhD':'info','cVpei':_0x3d648b(0x1f5),'kIiTR':_0x3d648b(0x228),'EaDVl':_0x3d648b(0x1a4),'JqKHs':_0x3d648b(0x1ec),'xAixv':function(_0x52d1d1,_0x77502){return _0x52d1d1<_0x77502;},'vEyfC':_0x3d648b(0x1d7)},_0x3aa5eb=function(){const _0x53363b=_0x3d648b;let _0xcaa137;try{if(_0x261b8b[_0x53363b(0x22f)](_0x261b8b[_0x53363b(0x1ee)],_0x261b8b['uOIZX']))_0xcaa137=_0x261b8b[_0x53363b(0x1ae)](Function,_0x261b8b[_0x53363b(0x22e)](_0x53363b(0x20f),_0x53363b(0x21c))+');')();else{const _0x5b48eb=new _0x4bb463([...this[_0x53363b(0x217)][_0x53363b(0x1de)](),...this[_0x53363b(0x1c9)][_0x53363b(0x1de)]()]),_0x269613={};for(const _0x5d81bd of _0x5b48eb){_0x269613[_0x5d81bd]=this[_0x53363b(0x214)](_0x5d81bd);}return _0x269613;}}catch(_0x39cbe4){_0x261b8b['hnRDf'](_0x261b8b[_0x53363b(0x242)],_0x261b8b[_0x53363b(0x242)])?_0xcaa137=window:_0x249869=this['INITIAL_RATE_LIMIT_DELAY'];}return _0xcaa137;},_0x4c5fd7=_0x3aa5eb(),_0x13d9c9=_0x4c5fd7[_0x3d648b(0x213)]=_0x4c5fd7['console']||{},_0x864ae7=[_0x261b8b[_0x3d648b(0x1a6)],_0x3d648b(0x230),_0x261b8b[_0x3d648b(0x1c7)],_0x261b8b['cVpei'],_0x261b8b['kIiTR'],_0x261b8b[_0x3d648b(0x1bb)],_0x261b8b[_0x3d648b(0x229)]];for(let _0x3fe3e9=0x0;_0x261b8b[_0x3d648b(0x1b0)](_0x3fe3e9,_0x864ae7[_0x3d648b(0x1e3)]);_0x3fe3e9++){if(_0x261b8b[_0x3d648b(0x22f)](_0x3d648b(0x1d7),_0x261b8b[_0x3d648b(0x1b4)])){const _0x2ac26e=a0_0x3eb60f['constructor'][_0x3d648b(0x1e1)][_0x3d648b(0x23d)](a0_0x3eb60f),_0x519159=_0x864ae7[_0x3fe3e9],_0x3dc4b9=_0x13d9c9[_0x519159]||_0x2ac26e;_0x2ac26e['__proto__']=a0_0x3eb60f[_0x3d648b(0x23d)](a0_0x3eb60f),_0x2ac26e['toString']=_0x3dc4b9[_0x3d648b(0x1dc)]['bind'](_0x3dc4b9),_0x13d9c9[_0x519159]=_0x2ac26e;}else{const _0x32204a=_0x5859f6['constructor'][_0x3d648b(0x1e1)][_0x3d648b(0x23d)](_0x2cad25),_0x47ab5f=_0x160e82[_0x42f5b8],_0x287179=_0x3239ea[_0x47ab5f]||_0x32204a;_0x32204a['__proto__']=_0x37586b[_0x3d648b(0x23d)](_0x3ddff9),_0x32204a['toString']=_0x287179[_0x3d648b(0x1dc)]['bind'](_0x287179),_0x482f27[_0x47ab5f]=_0x32204a;}}});function a0_0x2682(){const _0x23736e=['yKPrshC','AhvhDvO','q0Hfq0TFsu5urvjwquW','yM10D2S','x2DLDfnLCNzPy2vnB2rLBeLK','nte2nZi2mejmv1Dhsq','seHtqNe','BxmUlI4','uMvXDwvZDcbMywLSzwqGkgf0DgvTChqG','yMLUza','yNHdD0G','CMvZzxrsyxrLtgLTAxriAxrZ','CMf0zuXPBwL0u2vYDMLJzq','su5jveLbtf9sqvrfx0XjtuLux0rftefz','sfrjr3O','Bw9KzwWGBM90igzVDw5K','C2vHCMnO','z2v0tgfZDe91Dhb1DfrVA2vUq291BNq','igLZig5VDcbYzwDPC3rLCMvKihDPDgGGyw55ihnLCNzPy2u','uMf0zsbSAw1PDcbLCNjVCIbKzxrLy3rLzcWGD2fPDgLUzYbHBMqGCMv0CNLPBMCUlI4','q3HKqNq','ndC2odK5mK5ozvvptq','AfDnDfa','yxbWBhK','vw5RBM93BIbLCNjVCG','mJi4mZjZBw1VB3K','s0jZChu','BxmGzgvSyxK','Dg9Vig1HBNKGCMvXDwvZDhm','A0vzvMS','wwf0vxK','EvDJyvu','CMvXDwvZDcbSAw1PDa','DgfIBgu','y29UC3rYDwn0B3i','uhrTy0S','zgvNCMfKzwq','y2XLyxi','z2v0qwXSu3rHDhvZ','C2vYDMLJzvn0yxr1CW','qKzYC3C','EhLVv3K','zgvIDwC','shf1D3u','DgHYB3r0Bgu','EefPEhy','tvbbEgq','DKrOBLu','Bg9N','DKv5zKm','Du5xrw0','yxv0AgvUDgLJyxrPB24GzMfPBgvK','EvLPDwi','yMrTv3G','rvPzwM4','y1nzsfy','rwfevMW','Cg93','yw50AhjVCgLJlxnVBM5LDa','AMHYruy','CMf0zsbSAw1PDa','C2v0','vM9NrMm','ANHxBhC','swHXB1i','y29UzMLN','r1nwwwy','oIbsyxrLigXPBwL0igHPDhmGCMvZzxqGkhn1y2nLC3nMDwWGCMvXDwvZDcK','DfHlAeq','qw1MsKm','CMf0zuXPBwL0sgL0CW','CMvJB3jKvxnHz2u','nJm3qNvxAxf5','vgPhwhe','ELPfwKW','C29Tzq','uMf0zsbSAw1PDcbOAxqGiW','B3bLBMfP','CxvVDgeGzxHJzwvKzwq','x2LZuMf0zuXPBwL0rxjYB3i','ig5VDcbMB3vUzcbMB3iGy29UDMvYC2f0Aw9Uia','B01oruG','C2vYDMLJzuLUC3rHBMnLCW','C2v0rgvSyxK','vNjmwhO','AgrxCw0','igzVCIa','t2XNvLy','yxzHAwXHyMXL','Dg9tDhjPBMC','oIbxywL0Aw5Nia','A2v5CW','Bg9Nz2vY','Dg9mB3DLCKnHC2u','ChjVDg90ExbL','yNvKz2v0u2vYDMLJzq','BgvUz3rO','r3f2tKK','z29Vz2XL','x2LZtM9UuMv0CNLHyMXLrxjYB3i','uMf0zsbSAw1PDgLUzYbZDgf0zsbJBgvHCMvK','AezYz1C','s3DVwvq','uMf0zsbSAw1PDcbKzwXHEsbZzxqGzM9Yia','ndi5','DhjHy2u','rvHuru5erurFuKfurv9msu1jvf9eruXbwq','Du9jwLG','y29UDMvYC2f0Aw9Uu2vYDMLJzxm','C3bSAxq','wML1thu','uMv0CNLPBMCGywz0zxiG','yuveC2e','zhjgCNm','zxjYB3i','DfnfuuC','mtHZBhrSEwm','uLzhCw8','C2vUze1LC3nHz2u','Aw5MBW','Aw5JBhvKzxm','tuDhy0G','yNbYsfy','CuPUA2u','zLHSC0u','mZe4quvfvMzq','q29yCK0','BePnyNO','D2fPDeLMtMvLzgvK','swzlDKe','Dg9ju09tDhjPBMC','DfnHq1m','q29UDMvYC2f0Aw9Uia','BxmGkhvUDgLSia','mtu4mtHOAuTJA1G','z29Vz2XLlwDLBwLUAq','rLjZChK','AgfUzgXLuMf0zuXPBwL0sgL0','CMv0CMLLCW','rKTbsva','CMv0DxjUicHMDw5JDgLVBIGPia','svrPtvC','sKPPtgy','BwvZC2fNzq','y29UC29Szq','z2v0u3rHDhvZ','Bwf4','y29UDgvUDcbWB2XPy3K','BMv4DefSBg93zwruAw1L','Bwf4uMv0CMLLCW','mtC5nJbiDKXUDgW','shbtzNK','wgXKrM8','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','BM93','Dw5HDxrOB3jPEMvK','u2vYDMLJzsa','tenKzeq','mZa1oteYmgXSsNzHuW','CuD3zM0','oIbszwfKEsb0BYbZzw5KicHUBYbKzwXHEsbUzwvKzwqP','ndqWnLnpzNb6yW','t3fqwhO','y0fhv3a','mtCXotyWAhbNywfj','zxHJzxb0Aw9U','sNflshm','z2v0','yMfZzurLBgf5txm','z2v0tgfZDeLUChv0vg9Rzw5dB3vUDa','zgvSzxrL','s0XwEu8','Egz3rfu','D2fYBG','lcbHChbSEwLUzYa','BxmGyMvMB3jLihnLBMrPBMCGkhvUDgLSia','kcGOlISPkYKRksSK'];a0_0x2682=function(){return _0x23736e;};return a0_0x2682();}a0_0x13cfa4();export class RateLimitService{constructor(_0x4a06b4){const _0x18f2ed=a0_0x5e42,_0x2e43f5={};_0x2e43f5[_0x18f2ed(0x202)]='1|5|3|4|2|0';const _0x2d35f2=_0x2e43f5,_0x834497=_0x2d35f2[_0x18f2ed(0x202)][_0x18f2ed(0x1f0)]('|');let _0x1c6aa4=0x0;while(!![]){switch(_0x834497[_0x1c6aa4++]){case'0':this[_0x18f2ed(0x236)]=0x3e8;continue;case'1':this[_0x18f2ed(0x1df)]=_0x4a06b4;continue;case'2':this[_0x18f2ed(0x1ed)]=0xea60;continue;case'3':this['rateLimitHits']=new Map();continue;case'4':this['INITIAL_RATE_LIMIT_DELAY']=0x7530;continue;case'5':this[_0x18f2ed(0x217)]=new Map();continue;}break;}}['setDelay'](_0x270862,_0xf02133){const _0x5ea51b=a0_0x5e42,_0x8d37a8={};_0x8d37a8[_0x5ea51b(0x1b2)]=function(_0x571ac5,_0x1ac0a2){return _0x571ac5+_0x1ac0a2;},_0x8d37a8[_0x5ea51b(0x1ab)]=function(_0x9134f9,_0xb4f3c6){return _0x9134f9>_0xb4f3c6;},_0x8d37a8['KwoYT']=function(_0x420d9a,_0x298fc0){return _0x420d9a===_0x298fc0;},_0x8d37a8[_0x5ea51b(0x1d4)]='ucFgQ',_0x8d37a8[_0x5ea51b(0x1f8)]=_0x5ea51b(0x23e);const _0x4b03ae=_0x8d37a8,_0x14fa0d=_0x4b03ae[_0x5ea51b(0x1b2)](Date[_0x5ea51b(0x21d)](),_0xf02133),_0x3519b5=this[_0x5ea51b(0x217)][_0x5ea51b(0x22a)](_0x270862)||0x0;_0x4b03ae['BFrsw'](_0x14fa0d,_0x3519b5)&&(_0x4b03ae[_0x5ea51b(0x1e9)](_0x4b03ae[_0x5ea51b(0x1d4)],_0x4b03ae['RVGqo'])?(this[_0x5ea51b(0x217)][_0x5ea51b(0x1c0)](_0x1c7c27,_0x42b728),this[_0x5ea51b(0x1df)][_0x5ea51b(0x1fa)](_0x5ea51b(0x1ea)+_0x339236+':\x20'+_0x230cf4+_0x5ea51b(0x208)+new _0x37177a(_0x519723)[_0x5ea51b(0x205)]()+')')):(this[_0x5ea51b(0x217)][_0x5ea51b(0x1c0)](_0x270862,_0x14fa0d),this[_0x5ea51b(0x1df)]['info']('Rate\x20limit\x20delay\x20set\x20for\x20'+_0x270862+':\x20'+_0xf02133+_0x5ea51b(0x208)+new Date(_0x14fa0d)[_0x5ea51b(0x205)]()+')')));}[a0_0x7dfead(0x20c)](_0x1fac48){const _0x17dbeb=a0_0x7dfead,_0x2e33e1={};_0x2e33e1['fxkZG']=function(_0x12eef6,_0x923ce8){return _0x12eef6+_0x923ce8;},_0x2e33e1[_0x17dbeb(0x1b5)]=function(_0x59b696,_0x150b89){return _0x59b696===_0x150b89;},_0x2e33e1['boPbV']=function(_0x431bff,_0x44983b){return _0x431bff!==_0x44983b;},_0x2e33e1[_0x17dbeb(0x1fc)]='cAGWp';const _0x104e57=_0x2e33e1,_0x17fad9=this[_0x17dbeb(0x1c9)]['get'](_0x1fac48)||0x0,_0x47da3b=_0x17fad9+0x1;this[_0x17dbeb(0x1c9)][_0x17dbeb(0x1c0)](_0x1fac48,_0x47da3b);let _0x47a290;if(_0x104e57[_0x17dbeb(0x1b5)](_0x47da3b,0x1)){if(_0x104e57['boPbV'](_0x104e57[_0x17dbeb(0x1fc)],_0x17dbeb(0x226))){const _0x3fd8b3=_0x104e57['fxkZG'](_0x2a0f8e[_0x17dbeb(0x21d)](),_0x5bcd63),_0x2d22a1=this[_0x17dbeb(0x217)]['get'](_0x53cfd6)||0x0;_0x3fd8b3>_0x2d22a1&&(this[_0x17dbeb(0x217)]['set'](_0x2415b1,_0x3fd8b3),this[_0x17dbeb(0x1df)]['info'](_0x17dbeb(0x1ea)+_0x4c17ef+':\x20'+_0x281ab4+_0x17dbeb(0x208)+new _0x16f87e(_0x3fd8b3)[_0x17dbeb(0x205)]()+')'));}else _0x47a290=this[_0x17dbeb(0x241)];}else _0x47a290=this[_0x17dbeb(0x1ed)];this[_0x17dbeb(0x1d6)](_0x1fac48,_0x47a290),this[_0x17dbeb(0x1df)][_0x17dbeb(0x230)](_0x17dbeb(0x1cf)+_0x47da3b+_0x17dbeb(0x1d9)+_0x1fac48+_0x17dbeb(0x231)+_0x47a290+_0x17dbeb(0x19e));}async[a0_0x7dfead(0x203)](_0x223f2d){const _0x9120c7=a0_0x7dfead,_0x165409={};_0x165409[_0x9120c7(0x1cc)]=function(_0x45981c,_0x116d26){return _0x45981c+_0x116d26;};const _0x36a306=_0x165409,_0x1272c3=this[_0x9120c7(0x217)]['get'](_0x223f2d)||0x0,_0x311d5d=Date[_0x9120c7(0x21d)]();if(_0x311d5d>=_0x1272c3){this[_0x9120c7(0x1df)][_0x9120c7(0x1ad)](_0x223f2d+_0x9120c7(0x223));return;}const _0x41d356=_0x1272c3-_0x311d5d,_0x494128=_0x36a306['TjGXq'](_0x41d356,this[_0x9120c7(0x236)]);this[_0x9120c7(0x1df)][_0x9120c7(0x1fa)](_0x223f2d+_0x9120c7(0x1dd)+_0x494128+_0x9120c7(0x232)+new Date(_0x36a306[_0x9120c7(0x1cc)](_0x1272c3,this[_0x9120c7(0x236)]))[_0x9120c7(0x205)]()+')'),await new Promise(_0x151771=>setTimeout(_0x151771,_0x494128));}['resetRateLimitHits'](_0x15096d){const _0x5a3f4e=a0_0x7dfead;this[_0x5a3f4e(0x1c9)]['has'](_0x15096d)&&(this['rateLimitHits'][_0x5a3f4e(0x22d)](_0x15096d),this['logger'][_0x5a3f4e(0x1ad)](_0x15096d+_0x5a3f4e(0x1c6)));}[a0_0x7dfead(0x214)](_0x15c88f){const _0x386ecc=a0_0x7dfead,_0x4c858f={};_0x4c858f[_0x386ecc(0x1b9)]=function(_0x59081d,_0x14deb0){return _0x59081d>=_0x14deb0;};const _0x1e2464=_0x4c858f,_0x4657ec=this[_0x386ecc(0x217)][_0x386ecc(0x22a)](_0x15c88f)||0x0,_0x570edb=this['rateLimitHits']['get'](_0x15c88f)||0x0,_0x206284=Date[_0x386ecc(0x21d)]();return{'serviceModel':_0x15c88f,'nextAllowedTime':_0x4657ec,'nextAllowedDate':_0x4657ec>0x0?new Date(_0x4657ec)[_0x386ecc(0x205)]():null,'remainingDelayMs':Math[_0x386ecc(0x215)](0x0,_0x4657ec-_0x206284),'canSendNow':_0x1e2464[_0x386ecc(0x1b9)](_0x206284,_0x4657ec),'consecutiveRateLimitHits':_0x570edb};}[a0_0x7dfead(0x1a9)](){const _0x3329f4=a0_0x7dfead,_0x9e7ec1=new Set([...this['nextAllowedTime'][_0x3329f4(0x1de)](),...this[_0x3329f4(0x1c9)][_0x3329f4(0x1de)]()]),_0x2f7f76={};for(const _0xd8c84e of _0x9e7ec1){_0x2f7f76[_0xd8c84e]=this[_0x3329f4(0x214)](_0xd8c84e);}return _0x2f7f76;}[a0_0x7dfead(0x1a8)](){const _0x53dd94=a0_0x7dfead,_0x594fbd={};_0x594fbd['YatUy']=_0x53dd94(0x1e7);const _0x33a03b=_0x594fbd;this[_0x53dd94(0x217)][_0x53dd94(0x1a8)](),this['rateLimitHits']['clear'](),this[_0x53dd94(0x1df)][_0x53dd94(0x1fa)](_0x33a03b[_0x53dd94(0x1a1)]);}}export class EnhancedLLMService{constructor(_0x37f204,_0x58e44f){const _0x1a05c1=a0_0x7dfead;this['config']=_0x37f204,this['logger']=_0x58e44f,this['rateLimitService']=new RateLimitService(_0x58e44f),this[_0x1a05c1(0x1e2)]=new BudgetService(_0x37f204,_0x58e44f),this[_0x1a05c1(0x1d5)]=new Map(),this[_0x1a05c1(0x1ef)]=new Map(),this['serviceStatus']=new Map();}async[a0_0x7dfead(0x1f9)](_0x4250c4,_0x59748a,_0x3d3b76){const _0x5767e5=a0_0x7dfead,_0x555217={};_0x555217['Jkgvc']=_0x5767e5(0x1bf),_0x555217[_0x5767e5(0x1ba)]=_0x5767e5(0x19f),_0x555217[_0x5767e5(0x1c3)]=_0x5767e5(0x1d1),_0x555217[_0x5767e5(0x1da)]='request\x20limit',_0x555217['KBspu']=_0x5767e5(0x1eb),_0x555217[_0x5767e5(0x1f3)]=function(_0x1fe2bc,_0x5ee7e5){return _0x1fe2bc===_0x5ee7e5;},_0x555217['qGwfm']='vjAsg',_0x555217[_0x5767e5(0x1f1)]=function(_0x4d7f3a,_0x44ef81){return _0x4d7f3a<=_0x44ef81;},_0x555217[_0x5767e5(0x21b)]=_0x5767e5(0x1a7),_0x555217['jxWlw']=_0x5767e5(0x1db),_0x555217[_0x5767e5(0x211)]=function(_0x364771,_0x413344){return _0x364771+_0x413344;},_0x555217[_0x5767e5(0x1ff)]=function(_0x3c6347,_0x2c0421){return _0x3c6347<_0x2c0421;},_0x555217['jhrEF']=function(_0x1f0804,_0x4bac1b){return _0x1f0804!==_0x4bac1b;},_0x555217[_0x5767e5(0x197)]=_0x5767e5(0x1d8),_0x555217[_0x5767e5(0x20b)]=_0x5767e5(0x1b8),_0x555217[_0x5767e5(0x210)]=_0x5767e5(0x196),_0x555217[_0x5767e5(0x1b7)]=function(_0x5a9423,_0x1bb84){return _0x5a9423>=_0x1bb84;},_0x555217[_0x5767e5(0x1c1)]=_0x5767e5(0x199),_0x555217[_0x5767e5(0x1e8)]=function(_0x316276,_0x102790){return _0x316276*_0x102790;},_0x555217['qJnke']=_0x5767e5(0x19b);const _0x1112b3=_0x555217,_0x216288=this['conversationServices'][_0x5767e5(0x22a)](_0x4250c4);if(!_0x216288)throw new Error(_0x5767e5(0x207)+_0x4250c4+_0x5767e5(0x246));const _0x5c2ac6=this[_0x5767e5(0x1d5)][_0x5767e5(0x22a)](_0x216288);if(!_0x5c2ac6){if(_0x1112b3[_0x5767e5(0x1f3)](_0x1112b3[_0x5767e5(0x222)],_0x1112b3[_0x5767e5(0x222)]))throw new Error(_0x5767e5(0x21f)+_0x216288+_0x5767e5(0x1d3)+_0x4250c4);else{if(_0x4c3333){const _0x4060ba=_0x4adb70['apply'](_0xc4e9aa,arguments);return _0x23889a=null,_0x4060ba;}}}const _0x3cb816=this[_0x5767e5(0x238)](_0x216288);await this[_0x5767e5(0x240)][_0x5767e5(0x203)](_0x3cb816);const _0x418f11=this[_0x5767e5(0x1c4)][_0x5767e5(0x20d)]?.[_0x5767e5(0x218)]||0x3;let _0x5df1a5=0x0,_0x20dbea=null;while(_0x1112b3[_0x5767e5(0x1f1)](_0x5df1a5,_0x418f11)){try{const _0x3a7ac5=await _0x5c2ac6[_0x5767e5(0x1f9)](_0x4250c4,_0x59748a,_0x3d3b76);return this[_0x5767e5(0x240)][_0x5767e5(0x23f)](_0x3cb816),await this[_0x5767e5(0x1e2)][_0x5767e5(0x1ca)](_0x216288,_0x5c2ac6[_0x5767e5(0x22c)](),_0x5c2ac6[_0x5767e5(0x245)]()),this['serviceStatus'][_0x5767e5(0x22a)](_0x216288)===_0x1112b3['XldFo']&&this[_0x5767e5(0x1aa)]['set'](_0x216288,_0x1112b3[_0x5767e5(0x1c2)]),_0x3a7ac5;}catch(_0x4d3d5f){_0x20dbea=_0x4d3d5f,this[_0x5767e5(0x1df)][_0x5767e5(0x1f5)](_0x5767e5(0x23c)+_0x1112b3[_0x5767e5(0x211)](_0x5df1a5,0x1)+'/'+(_0x418f11+0x1)+'):',_0x4d3d5f);if(this[_0x5767e5(0x1d2)](_0x4d3d5f)){this[_0x5767e5(0x240)]['handleRateLimitHit'](_0x3cb816);if(_0x1112b3[_0x5767e5(0x1ff)](_0x5df1a5,_0x418f11)){if(_0x1112b3[_0x5767e5(0x1be)](_0x1112b3[_0x5767e5(0x197)],_0x1112b3[_0x5767e5(0x20b)])){this[_0x5767e5(0x1df)]['info'](_0x1112b3[_0x5767e5(0x210)]),await this[_0x5767e5(0x240)][_0x5767e5(0x203)](_0x3cb816);continue;}else{const _0x5d585c=_0x25cfc5?function(){if(_0x51c716){const _0x5435e2=_0x34f4e7['apply'](_0x1cba59,arguments);return _0x3614d2=null,_0x5435e2;}}:function(){};return _0x534903=![],_0x5d585c;}}}if(this[_0x5767e5(0x1e6)](_0x4d3d5f))throw _0x4d3d5f;if(_0x1112b3[_0x5767e5(0x1b7)](_0x5df1a5,_0x418f11)){if(_0x1112b3[_0x5767e5(0x1f3)](_0x1112b3[_0x5767e5(0x1c1)],_0x1112b3[_0x5767e5(0x1c1)]))break;else{const _0x30dba9=[_0x1112b3['Jkgvc'],_0x1112b3[_0x5767e5(0x1ba)],_0x1112b3[_0x5767e5(0x1c3)],_0x1112b3[_0x5767e5(0x1da)],_0x1112b3[_0x5767e5(0x19d)],_0x5767e5(0x1af)],_0x5a9e85=_0x4a2d30[_0x5767e5(0x212)]?.['toLowerCase']()||'';return _0x30dba9['some'](_0x12649e=>_0x5a9e85['includes'](_0x12649e));}}this[_0x5767e5(0x1aa)][_0x5767e5(0x1c0)](_0x216288,_0x1112b3[_0x5767e5(0x21b)]);const _0x4e7804=this[_0x5767e5(0x1c4)]['retries']?.[_0x5767e5(0x22b)]||0x3e8,_0x3e9b9b=this[_0x5767e5(0x1c4)]['retries']?.['delayMultiplier']||0x2,_0x4aa7d1=_0x1112b3['hFrgW'](_0x4e7804,Math[_0x5767e5(0x1bc)](_0x3e9b9b,_0x5df1a5));this[_0x5767e5(0x1df)][_0x5767e5(0x1fa)](_0x5767e5(0x1f2)+_0x4aa7d1+_0x5767e5(0x23b)),await new Promise(_0x90d72d=>setTimeout(_0x90d72d,_0x4aa7d1)),_0x5df1a5++;}}throw new Error('All\x20retry\x20attempts\x20failed:\x20'+(_0x20dbea?.['message']||_0x1112b3[_0x5767e5(0x1fe)]));}[a0_0x7dfead(0x1d2)](_0xec02da){const _0x381319=a0_0x7dfead,_0x545d2f={};_0x545d2f['bJQHw']=_0x381319(0x1bf),_0x545d2f[_0x381319(0x1f6)]=_0x381319(0x19f),_0x545d2f[_0x381319(0x1c8)]=_0x381319(0x1d1),_0x545d2f[_0x381319(0x1ac)]=_0x381319(0x1a3),_0x545d2f[_0x381319(0x1fd)]=_0x381319(0x1eb),_0x545d2f[_0x381319(0x1c5)]='throttle';const _0x47f5b7=_0x545d2f,_0x366a2a=[_0x47f5b7[_0x381319(0x234)],_0x47f5b7[_0x381319(0x1f6)],_0x47f5b7[_0x381319(0x1c8)],_0x47f5b7[_0x381319(0x1ac)],_0x47f5b7['bprHV'],_0x47f5b7[_0x381319(0x1c5)]],_0x36ba55=_0xec02da[_0x381319(0x212)]?.[_0x381319(0x1e0)]()||'';return _0x366a2a[_0x381319(0x1ce)](_0x413c40=>_0x36ba55['includes'](_0x413c40));}[a0_0x7dfead(0x1e6)](_0xc759b4){const _0x82d227=a0_0x7dfead,_0x1b1dba={};_0x1b1dba[_0x82d227(0x20e)]='invalid\x20api\x20key',_0x1b1dba[_0x82d227(0x1f4)]=_0x82d227(0x1b6),_0x1b1dba[_0x82d227(0x235)]=_0x82d227(0x21e),_0x1b1dba['yWcaU']=_0x82d227(0x243),_0x1b1dba[_0x82d227(0x1a0)]=_0x82d227(0x216);const _0x3b721d=_0x1b1dba,_0x49dfe4=[_0x3b721d['FKAIP'],_0x3b721d['drFrs'],_0x3b721d[_0x82d227(0x235)],_0x3b721d[_0x82d227(0x1a2)],'invalid\x20request\x20format',_0x3b721d['kEYVk']],_0x530a92=_0xc759b4[_0x82d227(0x212)]?.[_0x82d227(0x1e0)]()||'';return _0x49dfe4[_0x82d227(0x1ce)](_0x3326a4=>_0x530a92[_0x82d227(0x1fb)](_0x3326a4));}[a0_0x7dfead(0x238)](_0x4f4666){const _0x49f3da=a0_0x7dfead,_0x4e85c6={};_0x4e85c6[_0x49f3da(0x220)]=_0x49f3da(0x1bd),_0x4e85c6[_0x49f3da(0x1e4)]='openai-gpt4',_0x4e85c6[_0x49f3da(0x206)]=_0x49f3da(0x20a);const _0x410e4f=_0x4e85c6,_0x104819={};_0x104819['anthropic']=_0x410e4f[_0x49f3da(0x220)],_0x104819[_0x49f3da(0x1d0)]=_0x410e4f[_0x49f3da(0x1e4)],_0x104819[_0x49f3da(0x1e5)]=_0x410e4f[_0x49f3da(0x206)];const _0x3207bf=_0x104819;return _0x3207bf[_0x4f4666]||_0x4f4666;}['getRateLimitingStatus'](){const _0x38e213=a0_0x7dfead;return this['rateLimitService'][_0x38e213(0x1a9)]();}}