const a0_0x2736bb=a0_0x117f;function a0_0x117f(_0x4914d5,_0x50bab6){const _0x40d157=a0_0x40d1();return a0_0x117f=function(_0x117fd3,_0x4929a7){_0x117fd3=_0x117fd3-0x1cd;let _0x4919cc=_0x40d157[_0x117fd3];if(a0_0x117f['kDjzTv']===undefined){var _0x2e37fd=function(_0x5f1603){const _0x2c6327='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2da253='',_0x425e04='';for(let _0x530c7f=0x0,_0x23c0f1,_0x413d64,_0x3b0ede=0x0;_0x413d64=_0x5f1603['charAt'](_0x3b0ede++);~_0x413d64&&(_0x23c0f1=_0x530c7f%0x4?_0x23c0f1*0x40+_0x413d64:_0x413d64,_0x530c7f++%0x4)?_0x2da253+=String['fromCharCode'](0xff&_0x23c0f1>>(-0x2*_0x530c7f&0x6)):0x0){_0x413d64=_0x2c6327['indexOf'](_0x413d64);}for(let _0x392fe6=0x0,_0x1f02a4=_0x2da253['length'];_0x392fe6<_0x1f02a4;_0x392fe6++){_0x425e04+='%'+('00'+_0x2da253['charCodeAt'](_0x392fe6)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x425e04);};a0_0x117f['ZudCiS']=_0x2e37fd,_0x4914d5=arguments,a0_0x117f['kDjzTv']=!![];}const _0x63c92f=_0x40d157[0x0],_0x38fd98=_0x117fd3+_0x63c92f,_0x4fd278=_0x4914d5[_0x38fd98];return!_0x4fd278?(_0x4919cc=a0_0x117f['ZudCiS'](_0x4919cc),_0x4914d5[_0x38fd98]=_0x4919cc):_0x4919cc=_0x4fd278,_0x4919cc;},a0_0x117f(_0x4914d5,_0x50bab6);}(function(_0x1fa58f,_0x38c141){const _0x19fcd2=a0_0x117f,_0x21c624=_0x1fa58f();while(!![]){try{const _0x5e81d8=parseInt(_0x19fcd2(0x1da))/0x1+-parseInt(_0x19fcd2(0x1f5))/0x2+-parseInt(_0x19fcd2(0x1cd))/0x3*(parseInt(_0x19fcd2(0x21b))/0x4)+parseInt(_0x19fcd2(0x1ea))/0x5*(parseInt(_0x19fcd2(0x1e7))/0x6)+-parseInt(_0x19fcd2(0x1e5))/0x7+-parseInt(_0x19fcd2(0x1fb))/0x8+parseInt(_0x19fcd2(0x1db))/0x9;if(_0x5e81d8===_0x38c141)break;else _0x21c624['push'](_0x21c624['shift']());}catch(_0x210daf){_0x21c624['push'](_0x21c624['shift']());}}}(a0_0x40d1,0x62ed8));import a0_0x5f1603 from'winston';import a0_0x2c6327 from'path';import a0_0x2da253 from'fs/promises';import a0_0x425e04 from'ora';function a0_0x40d1(){const _0x319140=['AxndB25ZB2XLrw5HyMXLza','BNbT','C2v0q29UC29Szu1Vzgu','B3v0Chv0q2HHBM5LBa','ntuZnZq4og1bz09zqq','C3rHy2S','C3rVCfnWAw5Uzxi','y29UzMLN','BM93','C3rHCNrtCgLUBMvY','zgLZCgXHEuHLBha','zM9Yy2vdB25ZB2XL','zgvIDwC','DhjHBNnWB3j0CW','C3LTyM9SCW','rxjYB3iGy3jLyxrPBMCGBg9NigrPCMvJDg9YEtOG','ChjPBNrM','D2fYBG','rMLSzsbVCgvYyxrPB246ia','yMX1zq','zM9YBwf0vgfZA1n0yxr1CW','q29TCgXLDgvKihrHC2S6ia','D2fYBMLUzW','C2LSzw50','BwvZC2fNzq','zxjYB3i','Bg9Ntgv2zwW','vLmGq29KzsbUB3qGyxzHAwXHyMXLlcbMywXSAw5NigjHy2SGDg8Gy29UC29SzsbSB2DNAw5N','zM9YBwf0','Dg9VBe9WzxjHDgLVBG','B3b0Aw9UCW','C3rHCNruyxnR','y29UC29Szq','C3bPBM5LCG','A2v5CW','rMLSzq','ne1JvuPbuG','tg94AweGquK','yxbWzw5KtgLUzq','nZi3mtK0DwziAu1N','zMLSzq','Bgv2zwW','zM9YBwf0uhjVz3jLC3m','C3bSAxq','y3LHBG','zM9YBwf0vg9VBe9WzxjHDgLVBG','z3jHEq','Bg9Nz2vY','C3bPBM5LCKfJDgL2zq','Bg9N','C3rYAw5NAwz5','y2HPBgq','mZmXnty4tvzLtuHv','otyXnti3nNLIrMPPtq','zMfPBgvK','y29SB3jPEMu','zM9YBwf0rhvYyxrPB24','tg9Nz2vYigvYCM9YoG','ChjVy2vZC2LUzW','zgLZCgXHEvDLBgnVBwu','AM9PBG','CMvK','icaG','mZq3ode2Dhzdt3vW','zMXVB3i','mZK4mZrKuNvbDve','Bg9NrgLY','DNnJB2rL','mtyWEw1vENbP','Dgv4Da','y29TyMLUzq','wvLzws1nts1ercbisdPTBtPZCW','yM9Sza','Aw5MBW','EwvSBg93','BMfTzq','w0vsuK9sxsa','ANnVBG','zxjYB3jZlw9UBhK','ndq1odaWvxbKtgvo','y3vYCMvUDfrHC2S'];a0_0x40d1=function(){return _0x319140;};return a0_0x40d1();}import a0_0x530c7f from'chalk';import{outputFormatter}from'./outputFormatting.js';export class LoggingService{constructor(_0x23c0f1={}){const _0x5b827e=a0_0x117f;this[_0x5b827e(0x215)]={'logLevel':_0x23c0f1[_0x5b827e(0x211)]||'info','logDir':_0x23c0f1['logDir']||'./logs','console':_0x23c0f1['console']!==undefined?_0x23c0f1['console']:'errors-only','file':_0x23c0f1[_0x5b827e(0x1ce)]!==undefined?_0x23c0f1[_0x5b827e(0x1ce)]:!![],'silent':_0x23c0f1['silent']!==undefined?_0x23c0f1[_0x5b827e(0x20e)]:![],'vscode':_0x23c0f1[_0x5b827e(0x1e9)]!==undefined?_0x23c0f1[_0x5b827e(0x1e9)]:![]},this['outputChannel']=null;if(this['options']['vscode'])try{const _0x413d64=require('vscode');this[_0x5b827e(0x1fa)]=_0x413d64['window']['createOutputChannel'](_0x5b827e(0x21c));}catch(_0x3b0ede){console['warn'](_0x5b827e(0x212)),this[_0x5b827e(0x215)]['vscode']=![];}this['spinner']=a0_0x425e04({'color':_0x5b827e(0x1d2),'spinner':'dots','interval':0x50}),this['spinnerActive']=![],this[_0x5b827e(0x1f6)]=null,this['taskStartTime']=null;}async['initLogger'](){const _0x2a8ec1=a0_0x117f;if(this[_0x2a8ec1(0x215)]['file'])try{await a0_0x2da253['mkdir'](this['options']['logDir'],{'recursive':!![]});}catch(_0x176153){console[_0x2a8ec1(0x210)](_0x2a8ec1(0x206)+_0x176153[_0x2a8ec1(0x20f)]),this[_0x2a8ec1(0x215)][_0x2a8ec1(0x1ce)]=![];}const _0x392fe6=a0_0x5f1603[_0x2a8ec1(0x213)]['combine'](a0_0x5f1603[_0x2a8ec1(0x213)]['timestamp']({'format':_0x2a8ec1(0x1ed)}),a0_0x5f1603[_0x2a8ec1(0x213)]['errors']({'stack':![]}),a0_0x5f1603[_0x2a8ec1(0x213)]['splat'](),a0_0x5f1603['format'][_0x2a8ec1(0x1f3)]()),_0x1f02a4=a0_0x5f1603[_0x2a8ec1(0x213)][_0x2a8ec1(0x1ec)](a0_0x5f1603['format'][_0x2a8ec1(0x1dd)](),a0_0x5f1603[_0x2a8ec1(0x213)]['timestamp']({'format':'HH:mm:ss'}),a0_0x5f1603[_0x2a8ec1(0x213)][_0x2a8ec1(0x207)](({level:_0xe2543c,message:_0x30fe53,timestamp:_0x219c74,..._0x41addd})=>{const _0x291cac=_0x2a8ec1,_0x20a0f4=Object[_0x291cac(0x219)](_0x41addd)['length']?'\x0a'+JSON[_0x291cac(0x1d8)](_0x41addd,null,0x2):'';return _0x219c74+'\x20'+_0xe2543c+':\x20'+_0x30fe53+_0x20a0f4;})),_0x5c7108=[];if(this['options']['console']&&!this['options']['silent']){let _0xf3110a=this[_0x2a8ec1(0x215)][_0x2a8ec1(0x211)];this['options'][_0x2a8ec1(0x217)]==='errors-only'&&(_0xf3110a='error'),_0x5c7108['push'](new a0_0x5f1603[(_0x2a8ec1(0x204))]['Console']({'format':_0x1f02a4,'level':_0xf3110a,'silent':this['options'][_0x2a8ec1(0x20e)]}));}if(this['options'][_0x2a8ec1(0x1ce)]){const _0x10e41d=a0_0x2c6327[_0x2a8ec1(0x1e2)](this[_0x2a8ec1(0x215)][_0x2a8ec1(0x1e8)],'loxia.log'),_0x581269=a0_0x2c6327[_0x2a8ec1(0x1e2)](this[_0x2a8ec1(0x215)]['logDir'],'error.log');_0x5c7108['push'](new a0_0x5f1603[(_0x2a8ec1(0x204))]['File']({'filename':_0x10e41d,'format':_0x392fe6,'level':this['options']['logLevel'],'maxsize':0x500000,'maxFiles':0x5}),new a0_0x5f1603[(_0x2a8ec1(0x204))][(_0x2a8ec1(0x21a))]({'filename':_0x581269,'format':_0x392fe6,'level':_0x2a8ec1(0x210),'maxsize':0x500000,'maxFiles':0x5}));}this['logger']=a0_0x5f1603['createLogger']({'level':this['options'][_0x2a8ec1(0x211)],'levels':a0_0x5f1603[_0x2a8ec1(0x1fe)][_0x2a8ec1(0x1f8)]['levels'],'format':_0x392fe6,'transports':_0x5c7108}),this['logger']['on']('error',_0x21c2ff=>{const _0x3d69a4=_0x2a8ec1;console['error'](_0x3d69a4(0x1df),_0x21c2ff);});}['info'](_0x5935f7,_0x5d0d81,_0xe5227b=![]){const _0x5aea9e=a0_0x117f;this[_0x5aea9e(0x1d5)]['info'](_0x5935f7,_0x5d0d81);this['outputChannel']&&this[_0x5aea9e(0x1fa)]['appendLine']('[INFO]\x20'+_0x5935f7);const _0x124877=_0xe5227b||this[_0x5aea9e(0x215)]['console']===!![]||this[_0x5aea9e(0x215)][_0x5aea9e(0x217)]==='errors-only'&&_0xe5227b;if(this['spinnerActive']&&_0x124877&&!this[_0x5aea9e(0x215)]['silent'])this['spinner'][_0x5aea9e(0x1eb)]=_0x5935f7;else _0x124877&&!this['options'][_0x5aea9e(0x20e)]&&(this[_0x5aea9e(0x1fd)](),console[_0x5aea9e(0x1d7)](a0_0x530c7f[_0x5aea9e(0x1d2)](outputFormatter['symbols']['info']),a0_0x530c7f[_0x5aea9e(0x1d2)](_0x5935f7)));}[a0_0x2736bb(0x210)](_0x5051df,_0x2e0698,_0x4c671e=![]){const _0x354c35=a0_0x2736bb;this['stopSpinner'](),this['logger'][_0x354c35(0x210)](_0x5051df,_0x2e0698);if(this[_0x354c35(0x1fa)]){this['outputChannel']['appendLine'](_0x354c35(0x1f2)+_0x5051df);if(_0x2e0698 instanceof Error)this['outputChannel'][_0x354c35(0x21d)](_0x354c35(0x1e4)+_0x2e0698['message']),_0x2e0698['stack']&&_0x4c671e&&this['outputChannel'][_0x354c35(0x21d)]('\x20\x20\x20'+_0x2e0698['stack']);else _0x2e0698&&this['outputChannel'][_0x354c35(0x21d)]('\x20\x20\x20'+JSON['stringify'](_0x2e0698));}if(!this[_0x354c35(0x215)]['silent']){console[_0x354c35(0x210)](a0_0x530c7f[_0x354c35(0x1e3)](outputFormatter['symbols']['error']),a0_0x530c7f[_0x354c35(0x1e3)]['bold'](_0x5051df));if(_0x2e0698 instanceof Error)console[_0x354c35(0x210)](a0_0x530c7f[_0x354c35(0x1e3)](_0x354c35(0x1e4)+_0x2e0698[_0x354c35(0x20f)])),_0x2e0698[_0x354c35(0x1fc)]&&_0x4c671e&&console['error'](a0_0x530c7f[_0x354c35(0x1d4)](_0x354c35(0x1e4)+_0x2e0698[_0x354c35(0x1fc)][_0x354c35(0x1d1)]('\x0a')['slice'](0x1)['join']('\x0a\x20\x20\x20')));else _0x2e0698&&console['error'](a0_0x530c7f['red']('\x20\x20\x20'+JSON['stringify'](_0x2e0698)));}}['warn'](_0x4a219c,_0x541155){const _0x469400=a0_0x2736bb;this['stopSpinner'](),this['logger']['warn'](_0x4a219c,_0x541155),this[_0x469400(0x1fa)]&&this[_0x469400(0x1fa)]['appendLine']('[WARN]\x20'+_0x4a219c),this['options'][_0x469400(0x217)]===!![]&&!this[_0x469400(0x215)][_0x469400(0x20e)]&&console[_0x469400(0x208)](a0_0x530c7f[_0x469400(0x1f0)](outputFormatter['symbols'][_0x469400(0x20d)]),a0_0x530c7f['yellow'](_0x4a219c));}[a0_0x2736bb(0x203)](_0x4c9638,_0x47a2c2){const _0x2980b3=a0_0x2736bb;this[_0x2980b3(0x1d5)][_0x2980b3(0x203)](_0x4c9638,_0x47a2c2),this[_0x2980b3(0x215)]['logLevel']==='debug'&&this['options'][_0x2980b3(0x217)]===!![]&&!this[_0x2980b3(0x215)][_0x2980b3(0x20e)]&&(this[_0x2980b3(0x1fd)](),console['debug'](a0_0x530c7f[_0x2980b3(0x20a)](outputFormatter[_0x2980b3(0x205)]['bullet']),a0_0x530c7f['blue']('DEBUG:\x20'+_0x4c9638)));}['verbose'](_0x531efa,_0xd9c77d){const _0x50fd32=a0_0x2736bb;this[_0x50fd32(0x1d5)]['verbose'](_0x531efa,_0xd9c77d);}[a0_0x2736bb(0x216)](_0x2a9b0f,_0x27bcf3=''){const _0x2b84f9=a0_0x2736bb;this['currentTask']=_0x2a9b0f,this['taskStartTime']=Date[_0x2b84f9(0x1ff)](),this[_0x2b84f9(0x1d5)]['info']('Starting\x20task:\x20'+_0x2a9b0f+'\x0a'+_0x27bcf3),!this['options'][_0x2b84f9(0x20e)]&&(this['stopSpinner'](),this[_0x2b84f9(0x215)]['console']===!![]&&console['log'](outputFormatter['formatTaskStatus'](_0x2a9b0f,_0x2b84f9(0x1e0),_0x27bcf3)));}['completeTask'](_0x591db7,_0x5c283a=!![],_0x3323f0={}){const _0x5f54fa=a0_0x2736bb,_0x106d6f=_0x5c283a?'success':'error',_0x4d4584=this['taskStartTime']?Date['now']()-this['taskStartTime']:null;this['logger'][_0x5f54fa(0x1ef)](_0x5f54fa(0x20c)+_0x591db7,{'status':_0x106d6f,'duration':_0x4d4584,..._0x3323f0});if(!this['options'][_0x5f54fa(0x20e)]){this['stopSpinner']();const _0x40fec0={..._0x3323f0,'duration':_0x4d4584},_0x565b22=this[_0x5f54fa(0x215)]['console']===!![]||this['options']['console']==='errors-only'&&!_0x5c283a;_0x565b22&&(_0x5c283a?console[_0x5f54fa(0x1d7)](outputFormatter[_0x5f54fa(0x20b)](_0x591db7,'completed','Completed\x20in\x20'+outputFormatter[_0x5f54fa(0x1de)](_0x4d4584))):console['log'](outputFormatter['formatTaskStatus'](_0x591db7,_0x5f54fa(0x1dc),_0x3323f0[_0x5f54fa(0x210)]||'Task\x20failed')));}this[_0x5f54fa(0x1f6)]=null,this['taskStartTime']=null;}[a0_0x2736bb(0x214)](_0x560e90,_0x456ea1,_0x32ad14,_0x4ef580={}){const _0x295b8e=a0_0x2736bb;this[_0x295b8e(0x1d5)]['info']('Tool\x20operation:\x20'+_0x560e90+'\x20'+_0x456ea1,{'toolName':_0x560e90,'operation':_0x456ea1,'status':_0x32ad14,'details':_0x4ef580}),!this[_0x295b8e(0x215)][_0x295b8e(0x20e)]&&this[_0x295b8e(0x215)][_0x295b8e(0x217)]===!![]&&(this['stopSpinner'](),console['log'](outputFormatter[_0x295b8e(0x1d3)](_0x560e90,_0x456ea1,_0x32ad14,_0x4ef580)));}['fileOperation'](_0x3418c1,_0x43295d,_0x5a88eb,_0x394eee={}){const _0x5b5113=a0_0x2736bb;this['logger'][_0x5b5113(0x1ef)](_0x5b5113(0x209)+_0x3418c1+'\x20'+_0x43295d,{'operation':_0x3418c1,'filePath':_0x43295d,'status':_0x5a88eb,'details':_0x394eee}),!this['options']['silent']&&this[_0x5b5113(0x215)]['console']===!![]&&(this[_0x5b5113(0x1fd)](),console['log'](outputFormatter['formatFileOperation'](_0x3418c1,_0x43295d,_0x5a88eb,_0x394eee)));}[a0_0x2736bb(0x200)](_0x4a183c){const _0x454ce6=a0_0x2736bb;if(this['options']['silent'])return this['spinner'];return this[_0x454ce6(0x1fd)](),this[_0x454ce6(0x218)][_0x454ce6(0x1eb)]=_0x4a183c,this['spinner']['start'](),this[_0x454ce6(0x1d6)]=!![],this[_0x454ce6(0x218)];}['updateSpinner'](_0x5204dd){const _0x451f1a=a0_0x2736bb;if(this['options']['silent'])return;this[_0x451f1a(0x1d6)]?this[_0x451f1a(0x218)][_0x451f1a(0x1eb)]=_0x5204dd:this[_0x451f1a(0x200)](_0x5204dd);}['updateProgress'](_0x10bcf3,_0x418642){const _0x2efefe=a0_0x2736bb;if(this[_0x2efefe(0x215)][_0x2efefe(0x20e)])return;this['stopSpinner'](),this['options'][_0x2efefe(0x217)]===!![]&&console[_0x2efefe(0x1d7)](outputFormatter[_0x2efefe(0x1d0)](this['currentTask']||'Task',_0x418642,_0x10bcf3)),this[_0x2efefe(0x200)](Math[_0x2efefe(0x1e6)](_0x418642)+'%\x20complete...');}['stopSpinner'](){const _0x19d9d9=a0_0x2736bb;this[_0x19d9d9(0x1d6)]&&(this['spinner']['stop'](),this[_0x19d9d9(0x1d6)]=![]);}['succeedSpinner'](_0x510871){const _0x59dfa9=a0_0x2736bb;if(this[_0x59dfa9(0x215)][_0x59dfa9(0x20e)])return;this[_0x59dfa9(0x1d6)]&&(this[_0x59dfa9(0x218)]['succeed'](_0x510871),this[_0x59dfa9(0x1d6)]=![]);}['failSpinner'](_0x5f58ad){const _0x1b2842=a0_0x2736bb;if(this['options'][_0x1b2842(0x20e)])return;this['spinnerActive']&&(this[_0x1b2842(0x218)]['fail'](_0x5f58ad),this[_0x1b2842(0x1d6)]=![]);}[a0_0x2736bb(0x1e1)](){const _0x19c6a3=a0_0x2736bb;if(this[_0x19c6a3(0x215)][_0x19c6a3(0x20e)])return;console[_0x19c6a3(0x1d7)](outputFormatter['formatWelcome']());}[a0_0x2736bb(0x201)](_0x1d2e28){const _0xe3b249=a0_0x2736bb;if(this[_0xe3b249(0x215)]['silent'])return;console['log'](outputFormatter['formatHelp'](_0x1d2e28));}[a0_0x2736bb(0x1d9)](_0x5db9bf){const _0x549428=a0_0x2736bb,_0x4384e6=new LoggingService(this['options']);return _0x4384e6['logger']=this[_0x549428(0x1d5)]['child'](_0x5db9bf),_0x4384e6;}['setLevel'](_0x2058e5){const _0x4f82e7=a0_0x2736bb;this[_0x4f82e7(0x1d5)][_0x4f82e7(0x1cf)]=_0x2058e5,this['options']['logLevel']=_0x2058e5,this[_0x4f82e7(0x1d5)][_0x4f82e7(0x204)]['forEach'](_0x79f1ea=>{_0x79f1ea['name']!=='console'&&(_0x79f1ea['level']=_0x2058e5);});}[a0_0x2736bb(0x1f9)](_0x217ba5){const _0x3eb59c=a0_0x2736bb;this['options'][_0x3eb59c(0x217)]=_0x217ba5,this['logger']['transports']['forEach'](_0x1798fd=>{const _0xdbb54c=_0x3eb59c;if(_0x1798fd[_0xdbb54c(0x1f1)]==='console'){if(_0x217ba5==='errors-only')_0x1798fd[_0xdbb54c(0x1cf)]='error';else{if(_0x217ba5===!![])_0x1798fd[_0xdbb54c(0x1cf)]=this[_0xdbb54c(0x215)]['logLevel'];else _0x217ba5===![]&&(_0x1798fd[_0xdbb54c(0x20e)]=!![]);}}});}[a0_0x2736bb(0x202)](_0x59afdd,_0x34b026='info'){const _0x529740=a0_0x2736bb;this[_0x529740(0x1d5)][_0x34b026](_0x59afdd);if(!this['options']['silent']){this[_0x529740(0x1fd)]();switch(_0x34b026){case'error':console[_0x529740(0x210)](a0_0x530c7f[_0x529740(0x1e3)](outputFormatter['symbols']['error']),a0_0x530c7f[_0x529740(0x1e3)][_0x529740(0x1ee)](_0x59afdd));break;case _0x529740(0x208):console['warn'](a0_0x530c7f['yellow'](outputFormatter[_0x529740(0x205)][_0x529740(0x20d)]),a0_0x530c7f['yellow'](_0x59afdd));break;default:console['log'](a0_0x530c7f[_0x529740(0x1d2)](outputFormatter['symbols']['info']),a0_0x530c7f[_0x529740(0x1d2)](_0x59afdd));break;}}}['getConfig'](){const _0x1490e4=a0_0x2736bb;return{...this[_0x1490e4(0x215)],'currentTask':this[_0x1490e4(0x1f6)],'spinnerActive':this['spinnerActive']};}[a0_0x2736bb(0x1f7)](_0x32b81c){const _0x5c96cf=a0_0x2736bb;if(this['options'][_0x5c96cf(0x20e)]||!this['options'][_0x5c96cf(0x217)])return![];if(this[_0x5c96cf(0x215)]['console']===_0x5c96cf(0x1f4))return _0x32b81c===_0x5c96cf(0x210);return!![];}}export default LoggingService;