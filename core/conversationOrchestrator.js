const a0_0x324eb0=a0_0x2951;(function(_0x14e2c8,_0x3d5d38){const _0x101020=a0_0x2951,_0x3bd45c=_0x14e2c8();while(!![]){try{const _0x1fb37c=-parseInt(_0x101020(0x18e))/0x1+-parseInt(_0x101020(0x210))/0x2+-parseInt(_0x101020(0x169))/0x3+parseInt(_0x101020(0x157))/0x4*(-parseInt(_0x101020(0x17e))/0x5)+-parseInt(_0x101020(0x23f))/0x6*(-parseInt(_0x101020(0x1e9))/0x7)+-parseInt(_0x101020(0x247))/0x8*(-parseInt(_0x101020(0x1d5))/0x9)+parseInt(_0x101020(0x1df))/0xa*(parseInt(_0x101020(0x15f))/0xb);if(_0x1fb37c===_0x3d5d38)break;else _0x3bd45c['push'](_0x3bd45c['shift']());}catch(_0x2c2d58){_0x3bd45c['push'](_0x3bd45c['shift']());}}}(a0_0x8796,0xcd777));import{TagParser}from'../utilities/tagParser.js';import{TagParserService}from'../services/tagParserService.js';import a0_0x4fb036 from'path';import{promises as a0_0x3cae5d}from'fs';import{v4 as a0_0x76ce03}from'uuid';import{LLMService}from'../services/llmService.js';import{ToolRegistry}from'../services/toolRegistry.js';import{BudgetService}from'../services/budgetService.js';import{displayOnly}from'../utilities/stringOps.js';function a0_0x8796(){const _0x1197cb=['twfWCgvKignVBNzLCNnHDgLVBIbjrcbMB3iGzMLSzsbVCgvYyxrPB25ZoIaI','y29UDMvYC2f0Aw9Uihj1BgvZigfYzq','ww91CIbTzxnZywDLigrPzg4NDcbJB250ywLUigfUEsb0B29SignVBw1HBMrZlcbHig1LC3nHz2uGDg8Gyw5VDgHLCIbHz2vUDcWGB3iGysbWCM9TChqUia','CM91DgvnzxnZywDLvg9bz2vUDa','lMXVEgLHlxn0yxrL','u2vZC2LVBIbZDgf0zsbZyxzLzcb0BZOG','v2fPDgLUzYbMB3iG','nde3mtmWCNPrqMjn','yMX1zq','BwLU','ywn0AxzLvg9VBhm','DgHLBG','cIaGicaGicaGicaGifrOzsb0yxnRigLZihrVig1VzgLMEsbJB250zw50igLUihrOzsbKAxjLy3rVCNKGjW','q2fUy2vSBgLUzYbVCgvYyxrPB24G','vxnLCIbZzwXLy3rLzdOG','q2fUBM90ihbYB2nLzwq6ign1CNjLBNqGC3rHDguGAxmG','AgfZvg9VBa','C3vIC3rYAw5N','igrVzxmGBM90igv4Axn0lcbJyw5UB3qGCM91DguGBwvZC2fNzq','B3jPz2LUywXfCNjVCG','CMvWBgfJzq','z2v0vg9VBeLKCW','cIaGica','q291BgqGBM90igXVywqGy29UDMvYC2f0Aw9UigHPC3rVCNKGzM9Yia','AwrSzq','x2DLDezPBgvtywzLq29UDMvYC2f0Aw9Uswq','q3jLyxrPBMCGy29UDMvYC2f0Aw9UoIa','twvZC2fNzsbIBg9JA2vKic0GD2fPDgLUzYbMB3iGDxnLCIbPBNb1Da','icaGicbSB3HPysbTB2rPzNKGlI95B3vYlxbYB2PLy3qGiMnVBNrPBNvLigrLDMvSB3bTzw50iG','B25vC2vYuhjVBxb0','vg9VBcbLEgvJDxrPB24GCMvWB3j0icG','z2v0qNvKz2v0vxnHz2u','seLtve9swv9tvuzgsvG','zgvMyxvSDa','icHTB2rLoIa','C2L6zq','BgvUz3rO','C3LZDgvTlxbYB21WDa','C2vUze1LC3nHz2vuB0nVBNzLCNnHDgLVBG','u1Ltvevnx01fu1nbr0vFuK9mrq','C2v0qNvKz2v0tgLTAxq','C2v0v2fPDgLUz0zVCLvZzxjjBNb1Da','C2HVDwXKqMXVy2TnzxnZywDL','Dg9mB2nHBgvmB3DLCKnHC2u','zxHPDa','z3jHEq','mtyZntryEunRCLi','Dg9uAw1Lu3rYAw5N','ChjVAMvJDerPCG','ywXSu2v0DgXLza','CMvJAxbPzw50','rMfPBgvKihrVigXVywqGy29UDMvYC2f0Aw9UigHPC3rVCNKGzM9Yia','uMvZDw1PBMCGy29UDMvYC2f0Aw9UigzYB206ia','CgvUzgLUzW','icaYlIbpCIbZDgfYDcbHig5LDYbZzxnZAw9UigfZA2LUzYb0AguGywDLBNqGDg8Gy29UDgLUDwu6','zNjVBq','q291BgqGBM90ihjLywqGC2vZC2LVBIbZDgf0zsbVCIbPBMrLEcbMAwXLoIa','lIbPzIb5B3uGD2LZAcb0BYbZzw5KigeGBwvZC2fNzsb0BYb0AguGDxnLCIb3Ag8GCMvXDwvZDgvKihrOAxmGDgfZAYb1C2uGDgHLifTWCM9TChrDihrVB2WGC3LUDgf4','z2v0uhjVBxb0rw5NAw5LzxjtExn0zw1qCM9TChq','zxjYB3i','B25kB2jeB25L','ww91igfYzsbHBIbbssbHC3nPC3rHBNqGDgfZA2vKihDPDgGGy29TCgXLDgLUzYb0AguGzM9SBg93Aw5NoIa','ms4WlJa','C2vUzfbYB2nLzwrnzxnZywDL','8j+tPcbtzw5KAw5Nigf1Dg8TChjVy2vLzcbTzxnZywDLlI4U','AgfUzgXLvxnLCLbYB21WDa','Bg9Nz2vY','tuflrvjFquDftLrFrevgqvvmvf9jra','Aw5JBhvKzxm','ChjVy2vZC1rVB2XdB21Tyw5KCW','yMXVy2TLze1LC3nHz2vZ','B3b0Aw9UCW','qvvutYbTB2rLoIbbDxrVlxnLBgvJDgvKici','ignVBNzLCNnHDgLVBIbjrcbTyxbWAw5NCW','cIbuAgLZihnLy3rPB24GD2LSBcbIzsbZzw50igfWyxj0igzYB20GDgHLihrVB2WGAw5ZDhj1y3rPB25ZlG','u1vntufswv9nqvjlrvjFqKvhsu4','zNjVBuvUDhjPzxm','y29UDMvYC2f0Aw9UswrnyxbWAw5N','Dg9VBenOzwnRsw50zxj2ywW','ufjptvbux0vor0Loruvsx0Le','y2HLy2TbBMrqzxjMB3jTq29TCgfJDgL6yxrPB24','BgfUz3vHz2vnB2rLBa','yxv0BW','C2vZC2LVBLn0yxrL','tg9HzgvKignVBNzLCNnHDgLVBIbOAxn0B3j5igzVCJOG','AwrSzunOzwnRsw50zxj2ywW','Aw50zxjHy3rPDMu','sgfUzgXPBMCGDxnLCIbWCM9TChq6ia','DxrMltG','q291BgqGBM90igzPBMqGAgLZDg9YEsbMB3iG','vw5YzwnVDMvYywjSzsbLCNjVCIbKDxjPBMCGy29UDMvYC2f0Aw9Uihn1Bw1HCNKUia','Dg9VBhmGyxzHAwXHyMXLigfYzq','CMvTB3zLuhjVBxb0u3LUDgf4rNjVBvn5C3rLBvbYB21WDa','mtm4ugHgv1n0','CYbLBgfWC2vKks4Gt3bLCMf0Aw9UieLeoIa','yNvKz2v0u2vYDMLJzq','ChjVBwLZzq','cIaGicbzB3uGyxjLigeGChjVBxb0igvUz2LUzwvYAw5Nigv4CgvYDcb3Ag8GzgvZAwDUCYbLzMzLy3rPDMuGC3LZDgvTihbYB21WDhmGzM9YiefjigfNzw50CY4kicaGifDLigfYzsbHyM91Dcb0BYbHC3nPz24GDgHLihjLC3bVBNnPyMLSAxr5igzVCIa','Dg9VBfjLz2LZDhj5','w1n5C3rLBv06iev4zwn1DgLVBIbOyxmGyMvLBIbWyxvZzwqGyNKGDgHLihvZzxiUifDHAxrPBMCGDg8GCMvZDw1LlG','ywn0AxzLq29UDMvYC2f0Aw9UswrZ','mta4odq4zffArMjo','tw9KAwz5Aw5NignVBNrLBNqGAw46ia','ls1fBMqGB2yGu3vTBwfYEs0T','oIbbz2vUDcbKB2vZig5VDcbLEgLZDa','CMfJzq','Dhj5tg9HzenVBNzLCNnHDgLVBKHPC3rVCNLcEvbHDhrLCM4','q291BgqGBM90ihjLywqVCgfYC2uG','w3rVB2XZlwnVBw1HBMrZxsb0ywDZihrVihvZzsb0B29SCYWGB3iGDgHLigzVBgXVD2LUzYbZEw50yxGGDg8GAw50zxjHy3qGD2L0Acb0AguGC3vWzxj2AxnPBMCGAhvTyw4GDxnLCJOGw3bYB21WDcbUyw1LpsjZB21LihbYB21WDcbKAxnWBgf5ihrPDgXLiL08ChjVBxb0ig1LC3nHz2u+w29WDgLVBL08B3b0Aw9UideGDgv4Dd5Bl29WDgLVBL0Gw29WDgLVBL08B3b0Aw9UidiGDgv4Dd5Bl29WDgLVBL0UlI5Bl3bYB21WDf0k','icHMAwXLoIa','Bg9N','zw5Oyw5Jzvn5C3rLBvbYB21WDa','tM8GChjVAMvJDcbKAxjLy3rVCNKGC2v0lcbJyw5UB3qGC2f2zsbZzxnZAw9Uihn0yxrL','C2v0','rMfPBgvKihrVihnHDMuGC2vZC2LVBIbZDgf0ztO','vxbKyxrLzcbZExn0zw0GChjVBxb0igzVCIa','EwvSBg93','C3rYAw5NAwz5','Dg9VBeLK','DMfSDwvZ','q29TCgfJDgL6yxrPB246ia','ihbLBMrPBMCPoG','w1vZzxiGAw5WDxrDoIa','q291BgqGBM90ihjLywqGC2vZC2LVBIbZDgf0zsbMAwXLoIa','C2f2zvnLC3nPB25tDgf0zq','q2fUBM90igrPC3bSyxKGChjVBxb0ihrVihvZzxi6ie5VihbYB21WDcbOyw5KBgvYigLZihjLz2LZDgvYzwqUia','z2v0sw5KAwnHDg9YrgLZCgXHEq','BwTKAxi','Aw5PDgLHBgL6zvnLCNzPy2vZ','Dg9tDhjPBMC','Aw5PDgLHBgL6zvDPDgHqCM9Qzwn0','8j+AQcbqCM9TChqGDg9VigXVBMCGzgv0zwn0zwqGzM9Yicr7y29UDMvYC2f0Aw9Uswr9ic0GCgvYzM9YBwLUzYbJB21Wywn0AxPHDgLVBG','lIbnzxnZywDLCYbYzwr1y2vKigzYB20G','rxjYB3iGC3rHCNrPBMCGBMv3ignVBNzLCNnHDgLVBJO','jYbUB3qGzM91BMqUief2ywLSywjSzsb0B29SCZOG','BgfZDefJDgL2Axr5vgLTzq','ChjVy2vZC0fNzw50twvZC2fNzq','CMvHzezPBgu','BgfUz3vHz2uTBw9KzwW','AgfUzgXLvxnLCLbYB21WDejHC2vKt25nB2rL','lwHPC3rVCNKUANnVBG','BMfTzq','C3LZDgvTuhjVBxb0','C2v0teXnu2vYDMLJzq','CMvNAxn0zxjkB2jeB25LsgfUzgXLCG','q09nuefdveLAqvrjt05FveHsrvnit0Xex1bfuKnftLrbr0u','Bw9KAwz5Aw5Nigv4Axn0Aw5NignVBNrLBNq','DhjHy2Tqzw5KAw5Nt3bLCMf0Aw9U','rxjYB3iGC2vUzgLUzYbHDxrVlxbYB2nLzwqGBwvZC2fNztO','icbHBMqGDgHLihn1Bw1HCNKGC2vYDMLJzsbPCYb1BMf2ywLSywjSzs4','qwz0zxiGy29TCgfJDgL6yxrPB246ia','BwvZC2fNzq','zw50CMLLCW','icaXlIbvC2uGDgHLihjLC3vTzsbJB21Tyw5KihrVignVBNrPBNvLihrOAxmGy29UDMvYC2f0Aw9UoG','AgfZ','DxbKyxrLq29UDMvYC2f0Aw9Uu3LZDgvTuhjVBxb0','AM9PBG','y3jLyxrLsw5PDgLHBfbYB21WDezVCKvUz2LUzwvY','C2f2zunVBNzLCNnHDgLVBKHPC3rVCNK','Dg9VBenVBw1HBMrZ','xtOG','mtzdtuXNwwW','u3rHCNrPBMCGBMv3ignVBNzLCNnHDgLVBIbMB3iGDgfZAZOG','CgvUzgLUz1jLC3vSDhm','C3rHCNrjzgXLtw9UAxrVCMLUzW','Cgf1C2vK','BwvZC2fNzxm','z2v0','C3vJy2vZCW','mtfzqvz1vwq','cGO9psbqzw5KAw5Nie9WzxjHDgLVBNmGpt0','DxbKyxrLtwvZC2fNzuLUzgLJyxrVCG','icaGicbSB3HPysbYzxn1BwuGlI95B3vYlxbYB2PLy3qTzgLYzwn0B3j5','C2v0uhjVAMvJDerPCMvJDg9YEq','uMvJzwL2zwqGDxnLCIbPBNb1DdOG','A2v5CW','ChjVBxb0','lGOGicaGcIaGicaGicaGww91igfYzsbLEhbLy3rLzcb0BYbWDxqGDgHLihrLEhqGAw50zw5KzwqGzM9YihrOzsbVDgHLCIbHz2vUDcbPBNnPzguGw21LC3nHz2uGDg89iG','B3bLCMf0Aw9Uswq','mJaZmtaZBejsBerI','CgfYC2vqCM9TChrfBMDPBMvLCLjLC3bVBNnL','CxvLDwvqzw5KAw5NuMvZDwX0','Bwf4','C2vZC2LVBI1ZDgf0zs5QC29U','C2vUze1LC3nHz2u','DgfNugfYC2vYu2vYDMLJzq','D2HPDgu','q09nuefdveLAqvrjt05Ft1vuufvux1jfu0vsvKvFuevsq0vovefhrq','Bw9KzwXZ','C3rHCNruAw1L','CgvYzM9YBunVBxbHy3rPEMf0Aw9U','AxnvC2vYrNjPzw5KBhK','vxbKyxrLzcbJB252zxjZyxrPB24GB3jJAgvZDhjHDg9YihbYB2PLy3qGzgLYzwn0B3j5oIa','Bg9HzenVBNzLCNnHDgLVBKHPC3rVCNK','CM9Szq','q29UDMvYC2f0Aw9UihjLC3vTzwqGD2L0Ag91DcbOAxn0B3j5lG','rxjYB3iGC2vHCMnOAw5NigzVCIbJB252zxjZyxrPB24GAgLZDg9YEtOG','ihbLBMrPBMCGB3bLCMf0Aw9UCYb0BYbJB21WBgv0zsbVCIb0Aw1LB3v0','u2H1DhrPBMCGzg93BIbJB252zxjZyxrPB24GB3jJAgvZDhjHDg9Y','u1rbvevFreLsx05btuu','mtmWmtKZnvDbzNDxqG','y3jLyxrLq29UDMvYC2f0Aw9U','igrVzxmGBM90igv4Axn0','zMLSDgvY','tgfZDcbZzxnZAw9UigzPBguGC2f2zwqGDg86ia','lIbuAgLZig1HEsbUB3qGyMuGysb2ywXPzcbmB3HPysbWCM9Qzwn0lG','C2H1DgrVD24','iL08Ew91CIbJB250zw50pLSVBwvZC2fNzv0UcGOGicaGicaGienOywXSzw5Nzsb0AguGywDLBNqSigHLihDPBgWGDhj5ihrVignVDMvYigvHy2GGC3vIAMvJDc9ZDgfNzsb3AxrOAw4GysbZAw5NBguGBwvZC2fNzsWGyxnRigHPBsb0BYbZDxbWBhKGzgv0ywLSCYWGy2HHBgXLBMDLigHPCYbHC3n1Bxb0Aw9UCYWGyw5Kig1HA2uGC3vYzsbOzsDZig5VDcbMB3jNzxr0Aw5NigfUEsbPBxbVCNrHBNqGyxnWzwn0ig9MihrOzsb0yxnRlaOGicaGicaGie9UzsbZCgvJAwzPyYbLEgfTCgXLig9MigeGBwf0DgvYig9MigHPz2GGAw1WB3j0yw5JzsbPCYb0AguGDMvYAwzPy2f0Aw9Uig9MihrOzsb0yxnRignVBxbSzxrPB24GAw4GysbSyxjNzsb2yxjPzxr5ig9MihDHExmUcIaGicaGicaG','y29UDgv4DfDPBMrVDW','surmrv9usu1ft1vux01t','khn5C3rLBsbTzxnZywDLkq','CgfYC2vnzxnZywDL','DxbKyxrLu3LZDgvTuhjVBxb0C0zVCK1Vzgu','cLrOyw5RihLVDsbMB3iGy2HVB3nPBMCGtg94AweU','AwrSzvrPBwvY','ihrVia','mti2mJGXnMjoEgvTrq','x3nHBML0AxPLq29UDMvYC2f0Aw9UswrgB3jgAwXL','BwfRzxjbz2vUDeLK','CMvZDwX0','rMfPBgvKihrVihnHDMuGC2vZC2LVBIbZDgf0ztOG','DxnPBMCGDgHLifTTzxnZywDLxsb0ywCGD2L0Acb0AguGzM9SBg93Aw5NigLKCW','Aw5MBW','y29UDMvYC2f0Aw9UCW','tefor1vbr0vFtu9eruXFsuq','8j+uKIbjBNrLCMfJDgL2zsbTB2rLoIbcBg9JA2LUzYbHDxrVBwf0AwmGBwvZC2fNzxm','z3jLzw4','vg9VBca','tM8GBwfRzxiGywDLBNqGzM91BMqGDg8GC2vUzcb1C2vYigLUChv0ihrV','D3jPDgvgAwXL','q29UDMvYC2f0Aw9UihjLC3vTzwqGD2L0Ag91DcbJB21WBgv0zsbOAxn0B3j5','BwfRzxiTywDLBNq','u0vtu0LptL9tvefurv9gsuXftKfnrq','vg9VBcaN','sM9IigrVBMuGCMvJzwL2zwq6ia','ig5VDcbMB3vUzcbMB3iGy29TCgfJDgL6yxrPB24','cGPdB252zxjZyxrPB24GCNvSzxmGyxjLoGOGicaGms4Gv2HLBIbZzw5KAw5NigeGBwvZC2fNzsb0BYbHBM90AgvYihbHCNrPy2LWyw50lcb1C2uGw21LC3nHz2uGDg89iNbHCNrPy2LWyw50x2LKiL0GzM9YBwf0cIaGicaYlIbxAgvUihvZAw5NihrVB2XZlcb3CMfWignVBw1HBMrZigLUifT0B29SCY1JB21Tyw5KC10Gyw5KifSVDg9VBhmTy29TBwfUzhnDihrHz3mkicaGidmUievHy2GGDg9VBcbJB21Tyw5KihnOB3vSzcbIzsb3CMfWCgvKigLUifT0B29SigLKpsj0B29Sx2LKiL0Gyw5KifSVDg9VBf0GDgfNCWOGicaGnc4Gww91ig11C3qGzM9SBg93ihrOzsbZCgvJAwzPyYbMB3jTyxqGzM9YigvHy2GGDg9VBcbHCYbKzxnJCMLIzwqGAw4GDgHLihrVB2XZihnLy3rPB24kicaGiduUieLMihLVDsbUzwvKihvZzxiGAw5WDxqGB3iGysbKzwnPC2LVBIWGDxnLihrOzsbBChjVBxb0xsbMB3jTyxqOtK9usunfoIbHDcbSzwfZDcaYig9WDgLVBIb0ywDZigfYzsbYzwnVBw1LBMrLzcK6ifTWCM9TChqGBMfTzt0IChjVBxb0igrPC3bSyxKGDgL0BguIxxrOzsbTzxnZywDLihrOzsb1C2vYihDPBgWGC2vLw29WDgLVBL1VChrPB24Gmsb0zxH0wY9VChrPB25DifTVChrPB25DB3b0Aw9UidiGDgv4DfSVB3b0Aw9Uxs4UlM1VCMuGB3b0Aw9UCYbPzIbUzwvKzwqUlI5Bl3bYB21WDf0kicaGidyUihDOzw4GEw91igHHDMuGzMLUAxnOzwqGEw91CIb0yxnRigLUy2X1zgLUzYb2zxjPzMLJyxrPB24Gyw5KihzHBgLKyxrPB24GB2yGywn0DwfSignVBNrLBNqGyxmGD3jPDhrLBIbVBIbKAxnRigfZignVBxbHCMvLzcb0BYbKzxjPDMvKihnWzwnZlcbVCIb5B3uNCMuGBM90igDLDhrPBMCGyw55ihbYB2DYzxnZihvZzsb0AguGw2PVyI1KB25LxtX5B3vYig1LC3nHz2u+wY9QB2iTzg9Uzv0GC3bLy2LHBcbPBNn0CNvJDgLVBIb0ywCUihbYzwzLCNjHyMX5igLUigL0CYbVD24GBwvZC2fNzsaOBM8GB3rOzxiGAw5ZDhj1y3rPB25Zks4kicaGidCUig5LDMvYigfUBM91BMnLigPVyI1KB25LigjLzM9Yzsb5B3uGAgf2zsbJB21WBgv0zwqGywXSihn0ywDLCYbVzIb0AguGzgv2zwXVCg1LBNqGChjVy2vZCYWGDgvZDgvKigfUzcbYzs12ywXPzgf0zwqGEw91CIbZB2X1DgLVBIbIEsbVyNnLCNzPBMCGDgHLignYzwf0zwqGzMLSzxmGyw5KigfYDgLMywn0CY4kicaGifLVDxiGuhjVAMvJDcbsB290ierPCMvJDg9YEsbjCZOG','BgfUz3vHz2vnB2rLBefNzw50swq','BM93','zgvSzxrL','y2HLy2TuB29SrxHLy3v0Aw9Uu3rHDhvZ','C2vTAs1HDxrV','q29TCgfJDgL6yxrPB24Gy29TCgXLDgvKigzVCIa','4PYfievYCM9YlxrYAwDNzxjLzcbJB21Wywn0AxPHDgLVBIbJB21WBgv0zwqGzM9Yia','Dgv4Da','qwDLBNqG','z2v0vg9VBa','zgvIDwC','AxnxywL0Aw5NrM9YvxnLCKLUChv0','BgXTu2vYDMLJzq','D2fPDgLUzY1MB3iTBgXT','tMv3ignVBNzLCNnHDgLVBIbZDgfYDgvKigfUzcbZzxnZAw9Uihn0yxrLihnHDMvK','DxnLCG','BwvZC2fNzuLUzgLJyxrVCG','icbuAgLZignHBIbOyxbWzw4GD2HLBIb0AguGy29UDMvYC2f0Aw9UigjLy29TzxmGDg9VigXHCMDL','z2v0tgfUz3vHz2vnB2rLBfn5C3rLBvbYB21WDa','CgfYC2u','ww91igfYzsbHBIbHBwf6Aw5Nihn0yxrLlw9MlxrOzs1HCNqGquKGywDLBNqSihDVCMTPBMCGD2L0AcbHBM90AgvYihnWzwnPywXPEMvKiefjigfNzw50ihrOyxqGAxmGy29TCgXLDgLUzYb0yxnRCY4Gww91CIbYB2XLigLZihrVihbYB3zPzguGAw5MB3jTyxrPB24SigfUC3DLCIbXDwvZDgLVBNmSigfUzcbHC3nPC3qGDgHLigfNzw50ihDOzw4GBMvLzgvKlGOGicaGcIaGicaGicaGww91ignHBM5VDcbKAxjLy3rSEsb1C2uGDg9VBhmGB3iGCgvYzM9YBsbHy3rPB25Zig9UihrOzsbJB21WDxrLCI4Gww91CIb0yxnRigLZihnPBxbSEsb0BYbWCM92AwrLigLUzM9YBwf0AxzLigfUzcbOzwXWzNvSihjLC3bVBNnLCYb0BYbHC3nPC3qGDgHLigfNzw50igLUignVBxbSzxrPBMCGDgHLAxiGDgfZAY4kicaGiaOGicaGicaGifDOzw4GDgHLigfNzw50igfZA3mGEw91igeGCxvLC3rPB24GB3iGCMvXDwvZDhmGAw5MB3jTyxrPB24SihbYB3zPzguGy2XLyxiGyw5KigfJy3vYyxrLigLUzM9YBwf0Aw9UihrVihrOzsbIzxn0ig9MihLVDxiGywjPBgL0Es4kicaGicaGicakicaGicaGicbMCM9TihrPBwuGDg8GDgLTzsb0AguGywDLBNqGBwf5ig1PC3rHA2uGyw5KihvZzsbZB21LigLUC3rYDwn0Aw9UihrHzYbBDg9VBcbPzd0IlI4UiL0UlI5Bl3rVB2XDig9YihnPBwLSyxiSigLUigeGD3jVBMCGD2f5lIbKBYbUB3qGDhj5ihrVigD1AwrLigHPBsWGEw91ignHBIbUB3rPzNKGAgLTihrOyxqGC2LUy2uGEw91j3jLig5VDcbZDxbWB3nLihrVihnLzsbZDwnOihrHz3mGkgf1Dg9TyxrPy2fSBhKGC3rYAxbWzwqGzNjVBsbJB252zxjZyxrPB24Plcb0AgvYzsbPCYbHihbVC3nPyMLSAxr5ihrOyxqGDgHPCYbHz2vUDcbTywrLigeGC3LUDgf4igvYCM9YlGOkicaGicaGicbjBIbHBNKGChjVzMvZC2LVBMfSig1HDhrLCIWGzw5JB3vYywDLigeGBxvSDgLZDgvWl211BhrPBwvZC2fNzsbZzxnZAw9UigfUzcbHC3nPC3qGAgLTlcbZDwDNzxn0igLTChjVDMvTzw50CYWGy3jPDgLJAxPLigHPCYb3B3jRlcbKzxrLy3qGy2HHBgXLBMDLCYbPzIbJCNvJAwfSigfUzcbZDwDNzxn0ig92zxjJB21LCY4GAgvSCcbOAw0GyMuGyxqGAgLZigjLC3qUcGOGicaGicaGifrVB2XZigf2ywLSywjSzsb0BYb0AguGB3rOzxiGywDLBNqGyxjLoIa','CMvNAxn0zxjcDwLSDeLUvg9VBhm','yMvNAw4','Dg9ju09tDhjPBMC','C3bSAxq','yMvNAw4GBw9KAwzPy2f0Aw9Uig9MignVBNrLBNqGAw4G','y29UzMLN','CMvHzgrPCG','q3jPDgLJywWGzxjYB3i6ienHBM5VDcbJCMvHDguGy29UDMvYC2f0Aw9Uihn1Bw1HCNKGzM9Yia','igLZihn0AwXSihj1BM5PBMCGka','y3LHBG','B3jPz2LUywXtExn0zw1qCM9TChrZ','Aw50zxjHy3rPB25nB2rL','q3jPDgLJywWGy29TCgfJDgL6yxrPB24GzMfPBhvYztO','CMvK','ChvZAa','zMLUza','y2f0y2G','q29UDMvYC2f0Aw9UihjLC3vTzwq','D2fYBG','ns4Gw1vtrviGufjptvbuuYbesvnbqKXfrcbjtIbbvvrpie1prevDia','cGOVkIbot1rfoIbqCM9TChqGC3LUDgf4ihjLBw92zwqGzM9Yigf1Dg8GBw9Kzs4G','z2v0vg9VBhnezxnJCMLWDgLVBG','8j+uHcbutYbdt05usu5vrsbzt1vsifDpuKS6','q29UDMvYC2f0Aw9Uia','ignVBxbSzxrLzcWG','cGOGicaGicaGifbYB3zPzguGDgHLihjLCgXHy2vTzw50ihrLEhqU','C2XPy2u','C3rHDhvZ','AxntAhv0DgLUz0rVD24','mtm1r013wNf1','AgfUzgXLuhjVBxb0vg9Vtg9UzW','su5ervHFrKLmru5btuu','uM91DgLUzYbTzxnZywDLigzYB20G','yxnZAxn0yw50','D2fPDgLUzY1MB3iTywDLBNq','ic0+ia','ugXLyxnLihrYEsbYzxj1BM5PBMCGDgHLienmssb3AxrOigrVlcbTB2rPzNKSig9YihjLC3vTzsbJB21Tyw5KCYbHC2TPBMCGDgHLigfNzw50ihrVignVBNrPBNvLlG','AM9Irg9Uzq','CMvWzwf0','mty0nZe3mZbQChHSvva','CMvXDwLYzxnszxnWB25Zzq','rMfPBgvKihrVihjLC3vTzsbJB252zxjZyxrPB246ia'];a0_0x8796=function(){return _0x1197cb;};return a0_0x8796();}import a0_0xeb9901 from'chalk';function a0_0x2951(_0x1dba62,_0x38494f){const _0x879657=a0_0x8796();return a0_0x2951=function(_0x295172,_0x19b93f){_0x295172=_0x295172-0x135;let _0x1df1b7=_0x879657[_0x295172];if(a0_0x2951['CJmWxG']===undefined){var _0x2f0e46=function(_0x4fb036){const _0x3cae5d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x76ce03='',_0xeb9901='';for(let _0x1cbbc9=0x0,_0x5c9bb3,_0x565ff6,_0x35438e=0x0;_0x565ff6=_0x4fb036['charAt'](_0x35438e++);~_0x565ff6&&(_0x5c9bb3=_0x1cbbc9%0x4?_0x5c9bb3*0x40+_0x565ff6:_0x565ff6,_0x1cbbc9++%0x4)?_0x76ce03+=String['fromCharCode'](0xff&_0x5c9bb3>>(-0x2*_0x1cbbc9&0x6)):0x0){_0x565ff6=_0x3cae5d['indexOf'](_0x565ff6);}for(let _0xa6b890=0x0,_0x2e7cd0=_0x76ce03['length'];_0xa6b890<_0x2e7cd0;_0xa6b890++){_0xeb9901+='%'+('00'+_0x76ce03['charCodeAt'](_0xa6b890)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xeb9901);};a0_0x2951['fjSUCw']=_0x2f0e46,_0x1dba62=arguments,a0_0x2951['CJmWxG']=!![];}const _0x427d46=_0x879657[0x0],_0x6494aa=_0x295172+_0x427d46,_0x137ecd=_0x1dba62[_0x6494aa];return!_0x137ecd?(_0x1df1b7=a0_0x2951['fjSUCw'](_0x1df1b7),_0x1dba62[_0x6494aa]=_0x1df1b7):_0x1df1b7=_0x137ecd,_0x1df1b7;},a0_0x2951(_0x1dba62,_0x38494f);}export const CONVERSATION_CONSTANTS={'STATE_DIR_NAME':a0_0x324eb0(0x1e6),'SESSION_STATE_FILENAME':a0_0x324eb0(0x16d),'INDEX_FILENAME':'conversation-index.json','LAST_SESSION_FILENAME':'last-session.json','HISTORY_SUFFIX':a0_0x324eb0(0x142),'SYSTEM_MESSAGE_ROLE':'system','USER_MESSAGE_ROLE':a0_0x324eb0(0x1b2),'ASSISTANT_MESSAGE_ROLE':a0_0x324eb0(0x1d9),'COMPACTIZATION_THRESHOLD_PERCENTAGE':0.7,'COMPACTIZATION_OUTPUT_RESERVE_PERCENTAGE':0.4,'COMPACTIZATION_BEGIN_PERCENTAGE':0.15,'COMPACTIZATION_END_PERCENTAGE':0.35,'MIN_MESSAGES_TO_KEEP':0x2,'SUMMARY_MARKER_BEGIN':'--Conversation\x20Became\x20Long,\x20This\x20Part\x20Has\x20Been\x20Summarized--','SUMMARY_MARKER_END':a0_0x324eb0(0x249),'TOOL_CALL_FREQUENCY_CHECK_MS':0x2710,'TOOL_STATUS_UPDATE_INTERVAL_MS':0x2710,'DEFAULT_CONTEXT_WINDOW_SIZE':0x186a0,'MAKER_AGENT_DEFAULT_ID':a0_0x324eb0(0x19d),'LANGUAGE_MODEL_ID':a0_0x324eb0(0x140),'PROMPT_ENGINEER_ID':'prompt-engineer'};export class ConversationOrchestrator{constructor(_0x1cbbc9,_0x5c9bb3){const _0x18c0d5=a0_0x324eb0;this[_0x18c0d5(0x1bd)]=_0x1cbbc9,this['logger']=_0x5c9bb3,this['blockedMessages']=[],this[_0x18c0d5(0x16f)]=new TagParserService(_0x5c9bb3),this['llmService']=new LLMService(_0x1cbbc9,_0x5c9bb3),this['llmService']['registerPromptTooLongHandler'](_0x565ff6=>this['handlePromptTooLong'](_0x565ff6)),this[_0x18c0d5(0x244)]=new ToolRegistry(_0x1cbbc9,_0x5c9bb3,this[_0x18c0d5(0x1af)]),this['budgetService']=new BudgetService(_0x1cbbc9,_0x5c9bb3),this['conversations']=new Map(),this[_0x18c0d5(0x1ec)]=new Map(),this['conversationIdMapping']=new Map(),this['interactionMode']='interactive',this[_0x18c0d5(0x1c2)]=new Map(),this[_0x18c0d5(0x235)]={'projectDir':null,'makerAgentId':null,'languageModelAgentId':null,'activeConversationIds':[],'conversationHistory':{}},this['toolCheckInterval']=setInterval(()=>this['checkToolExecutionStatus'](),CONVERSATION_CONSTANTS['TOOL_CALL_FREQUENCY_CHECK_MS']),this[_0x18c0d5(0x1b3)]=_0x18c0d5(0x1fa),this[_0x18c0d5(0x13d)]=Date[_0x18c0d5(0x1a4)](),this[_0x18c0d5(0x18c)]=null,this[_0x18c0d5(0x187)]=0x1388,this['isShuttingDown']=![],this[_0x18c0d5(0x15a)]();}async[a0_0x324eb0(0x138)](_0x35438e){const _0x18839d=a0_0x324eb0;this[_0x18839d(0x235)][_0x18839d(0x212)]=_0x35438e,this[_0x18839d(0x244)][_0x18839d(0x163)](_0x35438e),this[_0x18839d(0x224)][_0x18839d(0x194)]('Conversation\x20orchestrator\x20initialized\x20with\x20project:\x20'+_0x35438e);}async['initializeWithProject'](_0xa6b890){const _0x3b670e=a0_0x324eb0;this[_0x3b670e(0x235)][_0x3b670e(0x212)]=_0xa6b890,this[_0x3b670e(0x244)]['setProjectDirectory'](_0xa6b890),this[_0x3b670e(0x224)]['info']('Conversation\x20orchestrator\x20initialized\x20with\x20project:\x20'+_0xa6b890);}['setProjectDirectory'](_0x2e7cd0){const _0x1f87d1=a0_0x324eb0;this['sessionState']['projectDir']=_0x2e7cd0,this[_0x1f87d1(0x244)]&&this['toolRegistry'][_0x1f87d1(0x163)](_0x2e7cd0),this['logger'][_0x1f87d1(0x194)](_0x1f87d1(0x176)+_0x2e7cd0);}async['initialize'](){const _0x1ed7e4=a0_0x324eb0;this['toolRegistry']=new ToolRegistry(this[_0x1ed7e4(0x1bd)],this[_0x1ed7e4(0x224)]),await this[_0x1ed7e4(0x244)][_0x1ed7e4(0x1b8)]();}['updateProjectDirectory'](_0x888b70){const _0x3ccef0=a0_0x324eb0;this[_0x3ccef0(0x163)](_0x888b70);}['startIdleMonitoring'](){const _0x5dcbfd=a0_0x324eb0;this[_0x5dcbfd(0x237)]=setInterval(()=>{const _0x3f23fe=_0x5dcbfd;if(this[_0x3f23fe(0x1d4)])return;if(this['interactionMode']==='interactive')return;const _0x29ea18=Date['now'](),_0x284035=_0x29ea18-this['lastActivityTime'];this['messageIndicator']===_0x3f23fe(0x1fa)&&_0x284035>=this[_0x3f23fe(0x187)]&&this[_0x3f23fe(0x235)]['makerAgentId']&&(this['logger']['info']('ðŸ”„\x20Auto-proceeding\x20after\x203\x20seconds\x20of\x20idle\x20time'),this[_0x3f23fe(0x221)]());},0x1f4);}[a0_0x324eb0(0x20b)](_0x46bf49){const _0x3f41cd=a0_0x324eb0,_0x5beb67=this[_0x3f41cd(0x1ae)];this['isWaitingForUserInput']=_0x46bf49;if(_0x46bf49&&!_0x5beb67)console['log'](a0_0xeb9901[_0x3f41cd(0x1c1)](_0x3f41cd(0x197)));else!_0x46bf49&&_0x5beb67&&(console['log'](a0_0xeb9901[_0x3f41cd(0x198)]('ðŸ”“\x20Interactive\x20mode:\x20Resuming\x20message\x20flow')),this[_0x3f41cd(0x228)]=[]);}[a0_0x324eb0(0x20c)](_0x3ed91e,_0x1a540d){const _0x3c95a0=a0_0x324eb0;if(this[_0x3c95a0(0x1c3)]!==_0x3c95a0(0x238)||!this['isWaitingForUserInput'])return![];if(_0x1a540d['includes']('[User\x20input]:'))return![];if(_0x1a540d['includes'](_0x3c95a0(0x188)))return![];return!![];}['updateMessageIndicator'](_0xdc3a39){const _0x400f05=a0_0x324eb0,_0xffad47=this[_0x400f05(0x1b3)];this['messageIndicator']=_0xdc3a39,this['lastActivityTime']=Date['now']();this[_0x400f05(0x18c)]&&(clearTimeout(this[_0x400f05(0x18c)]),this[_0x400f05(0x18c)]=null);if(_0xffad47!==_0xdc3a39){const _0x9b44cc=this[_0x400f05(0x260)](_0xdc3a39);console[_0x400f05(0x250)](a0_0xeb9901[_0x400f05(0x20f)](_0x9b44cc+'\x20'+_0xdc3a39));}}[a0_0x324eb0(0x260)](_0x1d4af3){const _0x2f8b93=a0_0x324eb0;switch(_0x1d4af3){case _0x2f8b93(0x1da):return a0_0xeb9901['yellow']('â³');case _0x2f8b93(0x1b0):return a0_0xeb9901[_0x2f8b93(0x1ea)]('ðŸ¤–');case _0x2f8b93(0x1fa):return a0_0xeb9901[_0x2f8b93(0x198)]('âœ“');default:return'â€¢';}}async['sendProceedMessage'](){const _0x27f696=a0_0x324eb0;if(!this['sessionState']['makerAgentId']||this['isShuttingDown'])return;try{this[_0x27f696(0x161)](_0x27f696(0x1da)),console['log'](a0_0xeb9901[_0x27f696(0x20f)](_0x27f696(0x222)));const _0x390396=new Date()[_0x27f696(0x211)]()[_0x27f696(0x1bb)]('\x20')[0x0];await this[_0x27f696(0x208)](this[_0x27f696(0x235)][_0x27f696(0x190)],'('+_0x390396+'\x20system\x20message:)\x20proceed.\x20If\x20stuck\x20for\x20too\x20long\x20use\x20tools\x20or\x20perform\x20operations\x20to\x20effectively\x20continue\x20the\x20task.');}catch(_0x59e7a){this['logger']['error'](_0x27f696(0x14a),_0x59e7a),this[_0x27f696(0x161)](_0x27f696(0x1fa));}}['setInteractionMode'](_0x4b861a){const _0x31281d=a0_0x324eb0,_0x4cf931=this[_0x31281d(0x1c3)];this['interactionMode']=_0x4b861a,this['logger'][_0x31281d(0x194)]('Interaction\x20mode\x20changed:\x20'+_0x4cf931+_0x31281d(0x1db)+_0x4b861a);if(_0x4b861a==='interactive'&&_0x4cf931!==_0x31281d(0x238))this[_0x31281d(0x20b)](!![]);else _0x4b861a!=='interactive'&&_0x4cf931==='interactive'&&this[_0x31281d(0x20b)](![]);this['updateSystemPromptsForMode'](_0x4b861a);}['getBlockingStatus'](){const _0x4d6b09=a0_0x324eb0;return{'interactionMode':this['interactionMode'],'isWaitingForUserInput':this['isWaitingForUserInput'],'blockedMessagesCount':this['blockedMessages']['length'],'indicatorState':this[_0x4d6b09(0x1b3)]};}[a0_0x324eb0(0x18a)](_0x3578af){const _0x2b0c3d=a0_0x324eb0;for(const [_0x14c5c4,_0x5e5119]of this[_0x2b0c3d(0x195)]){this['updateConversationSystemPrompt'](_0x14c5c4,_0x3578af);}}[a0_0x324eb0(0x151)](_0x568364,_0x59db5a){const _0x468f4e=a0_0x324eb0,_0x300dc2=this['conversations'][_0x468f4e(0x15d)](_0x568364);if(!_0x300dc2)return;!this['originalSystemPrompts']['has'](_0x568364)&&this[_0x468f4e(0x1c2)][_0x468f4e(0x253)](_0x568364,_0x300dc2[_0x468f4e(0x144)]);const _0xb9fcfc=this[_0x468f4e(0x1c2)][_0x468f4e(0x15d)](_0x568364);let _0x54587c;_0x59db5a==='auto'?_0x54587c=this[_0x468f4e(0x23e)](_0xb9fcfc):_0x54587c=_0xb9fcfc,_0x300dc2['systemPrompt']=_0x54587c,this['llmService']&&this[_0x468f4e(0x1af)]['updateConversationSystemPrompt']&&this['llmService'][_0x468f4e(0x151)](_0x568364,_0x54587c),this[_0x468f4e(0x224)]['debug'](_0x468f4e(0x255)+_0x568364+'\x20(mode:\x20'+_0x59db5a+')');}['removePromptSyntaxFromSystemPrompt'](_0x127933){const _0x2242f3=a0_0x324eb0;let _0x12f265=_0x127933[_0x2242f3(0x1f6)](/5\.\s*If you need user input or a decision[^6]*/,_0x2242f3(0x1cb));return _0x12f265=_0x12f265['replace'](/\[prompt[^\]]*\][^[]*\[\/prompt\]/g,''),_0x12f265+=_0x2242f3(0x1cc)+'To\x20re-enable,\x20switch\x20to\x20interactive\x20mode\x20or\x20modify\x20enhanceSystemPrompt()\x20*/',_0x12f265;}[a0_0x324eb0(0x251)](_0x53d353,_0x4e2765,_0x9bc59d,_0x429029){const _0x1ad170=a0_0x324eb0;let _0x3de96a=_0x53d353;return!_0x3de96a[_0x1ad170(0x20d)]()[_0x1ad170(0x226)](_0x1ad170(0x23d))&&(_0x3de96a+='\x0a\x0aTools\x20available\x20are:\x0a'+_0x4e2765),!_0x3de96a[_0x1ad170(0x20d)]()['includes'](_0x1ad170(0x193))&&(_0x3de96a+='\x0a\x0aYou\x20are\x20expected\x20to\x20consult\x20your\x20LLM\x20agent\x20using\x20the\x20[message]\x20tag\x20with\x20the\x20following\x20ids:\x20'+_0x429029['join'](',\x20')+_0x1ad170(0x22c)),!_0x3de96a['includes'](_0x1ad170(0x1e3))&&(_0x3de96a+=_0x1ad170(0x1a2)+_0x9bc59d+_0x1ad170(0x1f8)),_0x3de96a;}['_sanitizeConversationIdForFile'](_0x3eb692){const _0x304bf3=a0_0x324eb0;if(!_0x3eb692||typeof _0x3eb692!=='string')return'conversation-'+Date[_0x304bf3(0x1a4)]();let _0x42465d=_0x3eb692['replace'](/\s+/g,'-')[_0x304bf3(0x1f6)](/[^a-zA-Z0-9_-]/g,'')['replace'](/-+/g,'-')[_0x304bf3(0x1f6)](/^-+|-+$/g,'')['toLowerCase']();if(!_0x42465d)_0x42465d='conversation-'+Date['now']();else _0x42465d[_0x304bf3(0x206)]>0x32&&(_0x42465d=_0x42465d[_0x304bf3(0x1f3)](0x0,0x28)+'-'+Date['now']()[_0x304bf3(0x137)]()['slice'](-0x8));return _0x42465d;}[a0_0x324eb0(0x1fb)](_0xd8d319){const _0x3dd4fa=a0_0x324eb0;if(this[_0x3dd4fa(0x22f)][_0x3dd4fa(0x150)](_0xd8d319))return this[_0x3dd4fa(0x22f)][_0x3dd4fa(0x15d)](_0xd8d319);const _0x2e0357=this[_0x3dd4fa(0x18f)](_0xd8d319);return this['conversationIdMapping']['set'](_0xd8d319,_0x2e0357),_0x2e0357!==_0xd8d319&&this[_0x3dd4fa(0x224)]['info'](_0x3dd4fa(0x1e2)+_0xd8d319+'\x22\x20->\x20\x22'+_0x2e0357+'\x22'),_0x2e0357;}async[a0_0x324eb0(0x136)](){const _0x33655f=a0_0x324eb0;this['llmService']&&this['toolRegistry']&&(this['toolRegistry'][_0x33655f(0x145)](this[_0x33655f(0x1af)]),this[_0x33655f(0x224)][_0x33655f(0x194)]('LLM\x20service\x20connected\x20to\x20tool\x20registry\x20for\x20vision\x20capabilities'));}async['getImageDescription'](_0xdabe6b,_0x36b720,_0x22626d={}){const _0xb6fc57=a0_0x324eb0;if(!this[_0xb6fc57(0x1af)])throw new Error('LLM\x20service\x20not\x20available\x20for\x20image\x20description');return await this['llmService']['getImageDescription'](_0xdabe6b,_0x36b720,_0x22626d);}async['handleUserPromptBasedOnMode'](_0x2f9bab,_0xd630bd){const _0x1b9b18=a0_0x324eb0;this[_0x1b9b18(0x224)][_0x1b9b18(0x194)]('Handling\x20user\x20prompt:\x20'+_0xd630bd['name']+'\x20from\x20'+_0x2f9bab+_0x1b9b18(0x204)+this['interactionMode']+')');switch(this[_0x1b9b18(0x1c3)]){case _0x1b9b18(0x234):const _0x4d9c42=_0xd630bd['options']&&_0xd630bd['options'][_0x1b9b18(0x206)]>0x0?_0xd630bd['options'][0x0]:'Continue\x20automatically';this['logger'][_0x1b9b18(0x194)](_0x1b9b18(0x22a)+_0x4d9c42+'\x22\x20for\x20prompt:\x20'+_0xd630bd['name']),await this['sendMessageToConversation'](_0x2f9bab,'[System\x20Auto-Response]:\x20'+_0x4d9c42);break;case _0x1b9b18(0x1a7):if(this[_0x1b9b18(0x1ff)]){const _0xb3320a=await this['onUserPrompt'](_0xd630bd['name'],_0xd630bd['text'],_0xd630bd['options']);await this['sendMessageToConversation'](_0x2f9bab,_0x1b9b18(0x1f0)+_0xb3320a);}else await this[_0x1b9b18(0x208)](_0x2f9bab,_0x1b9b18(0x25f)+'Please\x20implement\x20the\x20onUserPrompt\x20handler\x20in\x20the\x20CLI.');break;case'interactive':default:if(this['onUserPrompt']){const _0x4047c1=await this['onUserPrompt'](_0xd630bd[_0x1b9b18(0x143)],_0xd630bd['text'],_0xd630bd['options']);await this['sendMessageToConversation'](_0x2f9bab,_0x1b9b18(0x1f0)+_0x4047c1);}else await this['sendMessageToConversation'](_0x2f9bab,_0x1b9b18(0x25f)+'Please\x20implement\x20the\x20onUserPrompt\x20handler\x20in\x20the\x20CLI.');break;}}async['handleJobDoneBasedOnMode'](_0x5ac871){const _0x287675=a0_0x324eb0;this[_0x287675(0x224)]['info'](_0x287675(0x1a0)+_0x5ac871+'\x20(mode:\x20'+this[_0x287675(0x1c3)]+')');if(this['onJobDone'])await this[_0x287675(0x21e)](_0x5ac871);else switch(this['interactionMode']){case'auto':this['logger'][_0x287675(0x194)](_0x5ac871+_0x287675(0x18b)),process[_0x287675(0x20e)](0x0);break;case _0x287675(0x1a7):this['logger'][_0x287675(0x194)]('Job\x20completed:\x20'+_0x5ac871),this['logger'][_0x287675(0x194)]('SEMI-AUTO\x20mode:\x20Task\x20completed.\x20Press\x20Ctrl+I\x20to\x20enter\x20interactive\x20mode\x20or\x20exit.');break;case _0x287675(0x238):default:this[_0x287675(0x224)][_0x287675(0x194)]('Job\x20completed:\x20'+_0x5ac871);break;}}[a0_0x324eb0(0x146)](_0x298eb2){this['onJobDone']=_0x298eb2;}async['processAgentMessage'](_0x5cf8e6,_0x1f681a){const _0x30053f=a0_0x324eb0;this[_0x30053f(0x224)][_0x30053f(0x194)]('Processing\x20message\x20from\x20'+_0x5cf8e6);const _0x5300c3=this[_0x30053f(0x16f)][_0x30053f(0x189)](_0x1f681a);_0x5300c3['toolCommands']&&_0x5300c3['toolCommands']['length']>0x0&&await this[_0x30053f(0x227)](_0x5cf8e6,_0x5300c3[_0x30053f(0x155)]);_0x5300c3[_0x30053f(0x166)]&&await this[_0x30053f(0x141)](_0x5cf8e6,_0x5300c3['prompt']);if(_0x5300c3[_0x30053f(0x1dd)]!=null){await this['handleJobDoneBasedOnMode'](_0x5300c3[_0x30053f(0x1dd)]);return;}if(_0x5300c3['recipient']){const _0x59ee70=_0x5300c3['recipient'],_0x40f29a=_0x5300c3['content'];await this['routeMessageToAgent'](_0x5cf8e6,_0x59ee70,_0x40f29a),this[_0x30053f(0x224)]['info']('['+displayOnly(_0x5cf8e6,0xa)+'\x20->\x20'+displayOnly(_0x59ee70,0xa)+_0x30053f(0x156)+displayOnly(_0x40f29a,0xff)+'\x0a');}!_0x5300c3[_0x30053f(0x214)]&&(!_0x5300c3['toolCommands']||_0x5300c3['toolCommands']['length']===0x0)&&!_0x5300c3[_0x30053f(0x166)]&&!_0x5300c3[_0x30053f(0x1dd)]&&await this['sendMessageToConversation'](_0x5cf8e6,_0x30053f(0x1e4)+'Please\x20use\x20[message\x20to=\x22...\x22]\x20tags\x20to\x20send\x20a\x20message\x20to\x20another\x20agent,\x20'+_0x30053f(0x24e));}['parsePromptEngineerResponse'](_0x306b77){const _0x91174c=a0_0x324eb0,_0x19c24f=CONVERSATION_CONSTANTS[_0x91174c(0x225)],_0x5be2ce=_0x91174c(0x21f);try{const _0x1dbc8a=TagParser['extractStructured'](_0x306b77,{'role':'ai-role','systemPrompt':_0x91174c(0x207)});let _0x4cfa89=_0x1dbc8a[_0x91174c(0x178)];_0x4cfa89?_0x4cfa89=_0x4cfa89[_0x91174c(0x1f6)](/[\\/]/g,''):(_0x4cfa89=_0x19c24f,this[_0x91174c(0x224)]['warn']('Failed to parse role from prompt engineer response, using default'));let _0x18176c=_0x1dbc8a['systemPrompt'];return!_0x18176c&&(_0x18176c=''+_0x5be2ce+_0x306b77,this['logger']['warn']('Failed to parse system prompt from prompt engineer response, using generated one')),{'role':_0x4cfa89,'systemPrompt':_0x18176c};}catch(_0x184695){return this['logger'][_0x91174c(0x21d)]('Error\x20parsing\x20prompt\x20engineer\x20response:',_0x184695),{'role':_0x19c24f,'systemPrompt':''+_0x5be2ce+_0x306b77};}}async['startNewConversation'](_0x36dc6c,_0x437fd4,_0x22ffc0,_0x2581d7){const _0x4dc2d0=a0_0x324eb0;this[_0x4dc2d0(0x224)][_0x4dc2d0(0x194)](_0x4dc2d0(0x158)+_0x36dc6c),this['sessionState']['projectDir']=_0x437fd4;const _0x5edfc0=a0_0x4fb036['join'](_0x437fd4,CONVERSATION_CONSTANTS[_0x4dc2d0(0x17d)]);await a0_0x3cae5d[_0x4dc2d0(0x135)](_0x5edfc0,{'recursive':!![]}),this['sessionState']={'projectDir':_0x437fd4,'makerAgentId':null,'languageModelAgentId':null,'activeConversationIds':[],'conversationHistory':{},'paused':![]};try{const _0x2ad17e=this[_0x4dc2d0(0x21c)](this[_0x4dc2d0(0x244)][_0x4dc2d0(0x1cd)]()),_0x484179=CONVERSATION_CONSTANTS[_0x4dc2d0(0x231)];await this[_0x4dc2d0(0x17f)](_0x484179,_0x2ad17e,[],_0x22ffc0);const _0x34dc07=this[_0x4dc2d0(0x153)](_0x36dc6c),_0x29740a=await this['sendMessageToConversation'](_0x484179,_0x34dc07),{role:_0x4d75bd,systemPrompt:_0x2064fb}=this['parsePromptEngineerResponse'](_0x29740a),_0x40cf4b=_0x4d75bd||CONVERSATION_CONSTANTS[_0x4dc2d0(0x225)];this['sessionState'][_0x4dc2d0(0x190)]=_0x40cf4b;const _0x290abf=this[_0x4dc2d0(0x251)](_0x2064fb,this['toolRegistry']['getToolsDescription'](),this['sessionState'][_0x4dc2d0(0x212)],[CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID']]);await this['createConversation'](_0x40cf4b,_0x290abf,[],_0x22ffc0);const _0x531b47=CONVERSATION_CONSTANTS[_0x4dc2d0(0x196)];this['sessionState']['languageModelAgentId']=_0x531b47;const _0x5bafc6=this[_0x4dc2d0(0x1b5)](this[_0x4dc2d0(0x244)]['getToolsDescription'](),_0x40cf4b);await this[_0x4dc2d0(0x17f)](_0x531b47,_0x5bafc6,[],_0x22ffc0),this['sessionState']['activeConversationIds']=[_0x40cf4b,_0x531b47],await this[_0x4dc2d0(0x25e)](),await this[_0x4dc2d0(0x208)](_0x40cf4b,_0x4dc2d0(0x1b9)),this[_0x4dc2d0(0x224)]['info'](_0x4dc2d0(0x1b1));}catch(_0x467111){this[_0x4dc2d0(0x224)]['error'](_0x4dc2d0(0x13b),_0x467111);throw _0x467111;}}async['loadConversationHistory'](_0x1b33b3,_0x33644e){const _0x204a7b=a0_0x324eb0,_0x546d17=this['_getFileSafeConversationId'](_0x33644e),_0x3ecc19=a0_0x4fb036[_0x204a7b(0x152)](_0x1b33b3,''+_0x546d17+CONVERSATION_CONSTANTS[_0x204a7b(0x202)]);try{const _0xdf7592=await a0_0x3cae5d['readFile'](_0x3ecc19,'utf-8'),_0x312a1a=JSON[_0x204a7b(0x1b6)](_0xdf7592),_0x4b17d6=(_0x312a1a[_0x204a7b(0x15c)]||[])['filter'](_0x5095fe=>_0x5095fe['role']!=='system');await this[_0x204a7b(0x17f)](_0x33644e,_0x312a1a[_0x204a7b(0x144)]||'Conversation\x20resumed',_0x4b17d6),this[_0x204a7b(0x224)]['info'](_0x204a7b(0x236)+_0x33644e+_0x204a7b(0x24f)+_0x546d17+')');}catch(_0x320511){this[_0x204a7b(0x224)]['warn'](_0x204a7b(0x215)+_0x33644e+':\x20'+_0x320511[_0x204a7b(0x14d)]),await this[_0x204a7b(0x24c)](_0x1b33b3,_0x33644e);}}async['tryLoadConversationHistoryByPattern'](_0x4d3a8e,_0xe1fb50){const _0x13fb0d=a0_0x324eb0;try{const _0x330ae4=await a0_0x3cae5d[_0x13fb0d(0x1be)](_0x4d3a8e),_0x9ece34=_0x330ae4['filter'](_0x55efbf=>_0x55efbf['endsWith'](CONVERSATION_CONSTANTS[_0x13fb0d(0x202)])),_0x404b72=this['_getFileSafeConversationId'](_0xe1fb50);for(const _0x391a21 of _0x9ece34){const _0x4f172a=_0x391a21['replace'](CONVERSATION_CONSTANTS[_0x13fb0d(0x202)],'');if(_0x4f172a===_0x404b72||_0x4f172a[_0x13fb0d(0x226)](_0x404b72)||_0x404b72[_0x13fb0d(0x226)](_0x4f172a))try{const _0x10e8cb=a0_0x4fb036[_0x13fb0d(0x152)](_0x4d3a8e,_0x391a21),_0x5815bc=await a0_0x3cae5d[_0x13fb0d(0x13f)](_0x10e8cb,'utf-8'),_0x15b999=JSON[_0x13fb0d(0x1b6)](_0x5815bc),_0x49ab55=(_0x15b999[_0x13fb0d(0x15c)]||[])[_0x13fb0d(0x181)](_0x896a27=>_0x896a27['role']!=='system');await this[_0x13fb0d(0x17f)](_0xe1fb50,_0x15b999['systemPrompt']||_0x13fb0d(0x1c9),_0x49ab55),this['logger']['info']('Found\x20and\x20loaded\x20conversation\x20history\x20for\x20'+_0xe1fb50+'\x20from\x20file\x20'+_0x391a21);return;}catch(_0x3354a1){this[_0x13fb0d(0x224)]['debug'](_0x13fb0d(0x24d)+_0x391a21+':',_0x3354a1);}}this['logger']['warn'](_0x13fb0d(0x23b)+_0xe1fb50+',\x20creating\x20empty\x20conversation'),await this[_0x13fb0d(0x17f)](_0xe1fb50,_0x13fb0d(0x179));}catch(_0x16613e){this['logger'][_0x13fb0d(0x21d)](_0x13fb0d(0x17a)+_0x16613e['message']),await this[_0x13fb0d(0x17f)](_0xe1fb50,'Conversation\x20resumed\x20without\x20complete\x20history');}}async['saveConversationHistory'](_0xbe7008){const _0x24a78b=a0_0x324eb0;if(!this[_0x24a78b(0x235)]['projectDir'])return;const _0xc00f20=this[_0x24a78b(0x195)]['get'](_0xbe7008);if(!_0xc00f20)return;const _0x4c4701=a0_0x4fb036[_0x24a78b(0x152)](this[_0x24a78b(0x235)]['projectDir'],CONVERSATION_CONSTANTS[_0x24a78b(0x17d)]);await a0_0x3cae5d[_0x24a78b(0x135)](_0x4c4701,{'recursive':!![]});const _0x1d2b80={'id':_0xbe7008,'originalId':_0xbe7008,'systemPrompt':_0xc00f20['systemPrompt'],'messages':_0xc00f20[_0x24a78b(0x15c)],'contextWindow':_0xc00f20['contextWindow'],'lastUpdated':new Date()[_0x24a78b(0x1ba)]()},_0x44542d=this['_getFileSafeConversationId'](_0xbe7008),_0x2325a9=a0_0x4fb036[_0x24a78b(0x152)](_0x4c4701,''+_0x44542d+CONVERSATION_CONSTANTS[_0x24a78b(0x202)]);await a0_0x3cae5d[_0x24a78b(0x19b)](_0x2325a9,JSON[_0x24a78b(0x257)](_0x1d2b80,null,0x2),_0x24a78b(0x23a)),this[_0x24a78b(0x224)][_0x24a78b(0x194)]('Conversation\x20history\x20saved\x20for\x20'+_0xbe7008+_0x24a78b(0x24f)+_0x44542d+')');}['_handleSummaryFailure'](_0x3330c4,_0x540d32){const _0x24a881=a0_0x324eb0;this[_0x24a881(0x25e)]()[_0x24a881(0x1c8)](_0x2b0c6b=>{const _0x2f321e=_0x24a881;this['logger'][_0x2f321e(0x21d)](_0x2f321e(0x254),_0x2b0c6b);}),this[_0x24a881(0x224)][_0x24a881(0x21d)](_0x24a881(0x1bf)+_0x3330c4+':',_0x540d32),console[_0x24a881(0x250)]('\x0a'+a0_0xeb9901['red']('ðŸš¨\x20UNRECOVERABLE\x20ERROR')),console['log'](a0_0xeb9901[_0x24a881(0x256)]('â”'[_0x24a881(0x1de)](0x3c))),console['log'](a0_0xeb9901[_0x24a881(0x1c5)]('âœ—\x20Failed\x20to\x20create\x20conversation\x20summary')),console['log'](a0_0xeb9901['gray'](_0x24a881(0x1b4))),console[_0x24a881(0x250)](a0_0xeb9901[_0x24a881(0x20f)](_0x24a881(0x14b))),console['log'](''),console['log'](a0_0xeb9901['bold'][_0x24a881(0x1c1)](_0x24a881(0x1ce))),console['log'](a0_0xeb9901[_0x24a881(0x170)](_0x24a881(0x14f))),console[_0x24a881(0x250)](a0_0xeb9901['cyan'](_0x24a881(0x162))),console[_0x24a881(0x250)](''),console[_0x24a881(0x250)](a0_0xeb9901[_0x24a881(0x170)](_0x24a881(0x218))),console['log'](a0_0xeb9901[_0x24a881(0x1c1)]('\x20\x20\x20\x20\x20loxia\x20do\x20\x22continue\x20the\x20previous\x20work\x20in\x20this\x20directory\x22')),console[_0x24a881(0x250)](''),console[_0x24a881(0x250)](a0_0xeb9901[_0x24a881(0x170)]('\x20\x203.\x20Or\x20modify\x20existing\x20content:')),console['log'](a0_0xeb9901['cyan'](_0x24a881(0x1fe))),console['log'](''),console['log'](a0_0xeb9901['gray']('ðŸ’¡\x20Your\x20project\x20files\x20have\x20been\x20saved\x20and\x20can\x20be\x20resumed.')),console['log'](a0_0xeb9901[_0x24a881(0x256)]('â”'['repeat'](0x3c))),this[_0x24a881(0x224)]['error']('Summary\x20failure\x20details:',{'conversationId':_0x3330c4,'error':_0x540d32['message'],'errorType':_0x540d32['errorType']||'unknown','originalError':_0x540d32['originalError']||null});const _0x582605=new Error(_0x24a881(0x23c)+_0x24a881(0x1dc));_0x582605[_0x24a881(0x175)]=!![],_0x582605[_0x24a881(0x1f5)]=_0x540d32;throw _0x582605;}async['saveSessionState'](){const _0x3e8a93=a0_0x324eb0;if(!this['sessionState'][_0x3e8a93(0x212)]){this['logger'][_0x3e8a93(0x1ca)](_0x3e8a93(0x252));return;}try{const _0x69312=a0_0x4fb036[_0x3e8a93(0x152)](this[_0x3e8a93(0x235)]['projectDir'],CONVERSATION_CONSTANTS[_0x3e8a93(0x17d)]);await a0_0x3cae5d[_0x3e8a93(0x135)](_0x69312,{'recursive':!![]}),this['logger'][_0x3e8a93(0x1ad)]('State\x20directory\x20created/verified:\x20'+_0x69312);const _0x352f3b=a0_0x4fb036[_0x3e8a93(0x152)](_0x69312,CONVERSATION_CONSTANTS['SESSION_STATE_FILENAME']),_0x2b5690={'projectDir':this['sessionState'][_0x3e8a93(0x212)],'makerAgentId':this['sessionState']['makerAgentId'],'languageModelAgentId':this['sessionState']['languageModelAgentId'],'activeConversationIds':this[_0x3e8a93(0x235)][_0x3e8a93(0x246)]||[],'conversationHistory':this[_0x3e8a93(0x235)]['conversationHistory']||{},'conversationIdMapping':Object[_0x3e8a93(0x22e)](this[_0x3e8a93(0x22f)]),'paused':this[_0x3e8a93(0x235)]['paused']||![],'lastUpdated':new Date()[_0x3e8a93(0x1ba)](),'version':'1.0.0'};await a0_0x3cae5d['writeFile'](_0x352f3b,JSON['stringify'](_0x2b5690,null,0x2),'utf-8'),this['logger'][_0x3e8a93(0x1ad)](_0x3e8a93(0x1e7)+_0x352f3b);const _0x35d397=a0_0x4fb036[_0x3e8a93(0x152)](_0x69312,CONVERSATION_CONSTANTS[_0x3e8a93(0x1d7)]),_0x152ecf={'projectDir':this[_0x3e8a93(0x235)]['projectDir'],'lastUpdated':new Date()['toISOString'](),'makerAgentId':this['sessionState'][_0x3e8a93(0x190)],'languageModelAgentId':this[_0x3e8a93(0x235)]['languageModelAgentId'],'activeConversationIds':this[_0x3e8a93(0x235)][_0x3e8a93(0x246)]||[],'conversationIdMapping':Object['fromEntries'](this['conversationIdMapping']),'sessionStateFile':CONVERSATION_CONSTANTS['SESSION_STATE_FILENAME'],'version':'1.0.0'};await a0_0x3cae5d[_0x3e8a93(0x19b)](_0x35d397,JSON['stringify'](_0x152ecf,null,0x2),'utf-8'),this[_0x3e8a93(0x224)][_0x3e8a93(0x1ad)]('Index\x20file\x20saved\x20to:\x20'+_0x35d397);const _0x23610e=a0_0x4fb036[_0x3e8a93(0x152)](_0x69312,CONVERSATION_CONSTANTS['LAST_SESSION_FILENAME']),_0x17fae5={'projectDir':this['sessionState'][_0x3e8a93(0x212)],'timestamp':new Date()[_0x3e8a93(0x1ba)](),'makerAgentId':this['sessionState']['makerAgentId'],'languageModelAgentId':this['sessionState'][_0x3e8a93(0x1a3)],'conversationIdMapping':Object[_0x3e8a93(0x22e)](this[_0x3e8a93(0x22f)]),'version':_0x3e8a93(0x220)};await a0_0x3cae5d['writeFile'](_0x23610e,JSON[_0x3e8a93(0x257)](_0x17fae5,null,0x2),'utf-8'),this[_0x3e8a93(0x224)]['debug'](_0x3e8a93(0x182)+_0x23610e),this[_0x3e8a93(0x224)][_0x3e8a93(0x194)]('Session\x20state\x20saved\x20successfully\x20with\x20index\x20files');}catch(_0x560511){this['logger'][_0x3e8a93(0x21d)](_0x3e8a93(0x254),_0x560511);throw new Error(_0x3e8a93(0x192)+_0x560511[_0x3e8a93(0x14d)]);}}async['resumeConversation'](_0x496748){const _0x42b375=a0_0x324eb0;this['logger']['info'](_0x42b375(0x216)+_0x496748);try{const _0x30a546=a0_0x4fb036['join'](_0x496748,CONVERSATION_CONSTANTS[_0x42b375(0x17d)]);try{await a0_0x3cae5d['access'](_0x30a546);}catch(_0x2c36a1){throw new Error('State\x20directory\x20not\x20found:\x20'+_0x30a546+_0x42b375(0x183));}const _0x5700ab=a0_0x4fb036[_0x42b375(0x152)](_0x30a546,CONVERSATION_CONSTANTS[_0x42b375(0x19e)]);let _0x3e902f;try{const _0x194633=await a0_0x3cae5d['readFile'](_0x5700ab,_0x42b375(0x23a));_0x3e902f=JSON[_0x42b375(0x1b6)](_0x194633),_0x3e902f['conversationIdMapping']&&(this[_0x42b375(0x22f)]=new Map(Object[_0x42b375(0x14e)](_0x3e902f['conversationIdMapping'])),this[_0x42b375(0x224)]['info']('Restored\x20'+this['conversationIdMapping'][_0x42b375(0x205)]+_0x42b375(0x22b)));}catch(_0x3b3df4){this['logger'][_0x42b375(0x1ca)](_0x42b375(0x25d)+_0x3b3df4['message']);const _0x4d3838=a0_0x4fb036[_0x42b375(0x152)](_0x30a546,CONVERSATION_CONSTANTS['INDEX_FILENAME']);try{const _0x586581=await a0_0x3cae5d[_0x42b375(0x13f)](_0x4d3838,'utf-8'),_0x1cce26=JSON['parse'](_0x586581);_0x3e902f={'projectDir':_0x1cce26[_0x42b375(0x212)]||_0x496748,'makerAgentId':_0x1cce26['makerAgentId'],'languageModelAgentId':_0x1cce26[_0x42b375(0x1a3)],'activeConversationIds':_0x1cce26['activeConversationIds']||[],'conversationHistory':{},'conversationIdMapping':_0x1cce26['conversationIdMapping']||{}},_0x1cce26['conversationIdMapping']&&(this[_0x42b375(0x22f)]=new Map(Object[_0x42b375(0x14e)](_0x1cce26['conversationIdMapping']))),this['logger'][_0x42b375(0x194)]('Recovered session state from index file');}catch(_0x35d5a6){throw new Error(_0x42b375(0x21a)+_0x3b3df4['message']);}}this[_0x42b375(0x235)]={..._0x3e902f,'projectDir':_0x496748};const _0x3d5a6a=this['sessionState']['activeConversationIds']||[];for(const _0x32afb4 of _0x3d5a6a){try{await this[_0x42b375(0x177)](_0x30a546,_0x32afb4);}catch(_0x5c455a){this[_0x42b375(0x224)]['warn'](_0x42b375(0x1f9)+_0x32afb4+':\x20'+_0x5c455a[_0x42b375(0x14d)]),await this['createConversation'](_0x32afb4,_0x42b375(0x19c));}}this[_0x42b375(0x224)]['info']('Conversation\x20resumed\x20successfully.\x20Active\x20conversations:\x20'+_0x3d5a6a[_0x42b375(0x206)]);}catch(_0x23444f){this[_0x42b375(0x224)][_0x42b375(0x21d)]('Failed\x20to\x20resume\x20conversation:',_0x23444f);throw new Error(_0x42b375(0x1e1)+_0x23444f['message']);}}async['modifyExistingContent'](_0x48dadd,_0x42f45d){const _0x3e87bc=a0_0x324eb0;this[_0x3e87bc(0x224)]['info'](_0x3e87bc(0x248)+_0x48dadd+'\x20with\x20instructions:\x20'+_0x42f45d),this['sessionState']['projectDir']=_0x48dadd;const _0x4bf3e9=a0_0x4fb036['join'](_0x48dadd,CONVERSATION_CONSTANTS[_0x3e87bc(0x17d)]);await a0_0x3cae5d['mkdir'](_0x4bf3e9,{'recursive':!![]});const _0x1620d5=this[_0x3e87bc(0x21c)](this[_0x3e87bc(0x244)]['getToolsDescription'](),!![]),_0x29e3eb=CONVERSATION_CONSTANTS['PROMPT_ENGINEER_ID'];await this['createConversation'](_0x29e3eb,_0x1620d5);const _0xaf34c6=this['createInitialPromptForEngineer'](_0x42f45d,_0x48dadd,!![]),_0x66a1f7=await this['sendMessageToConversation'](_0x29e3eb,_0xaf34c6),{role:_0x450ff3,systemPrompt:_0x2a9db9}=this[_0x3e87bc(0x16a)](_0x66a1f7),_0x195e2e=_0x450ff3||'content-modifier';this['sessionState']['makerAgentId']=_0x195e2e;const _0x4cd669=this['enhanceSystemPrompt'](_0x2a9db9,this[_0x3e87bc(0x244)]['getToolsDescription'](),this[_0x3e87bc(0x235)]['projectDir'],[CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID']]);await this['createConversation'](_0x195e2e,_0x4cd669);const _0x2bb9c4=CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID'];this[_0x3e87bc(0x235)][_0x3e87bc(0x1a3)]=_0x2bb9c4;const _0x2f546b=this[_0x3e87bc(0x1b5)](this[_0x3e87bc(0x244)][_0x3e87bc(0x1cd)](),_0x195e2e);await this[_0x3e87bc(0x17f)](_0x2bb9c4,_0x2f546b),this[_0x3e87bc(0x235)][_0x3e87bc(0x246)]=[_0x195e2e,_0x2bb9c4],await this[_0x3e87bc(0x208)](_0x195e2e,_0x3e87bc(0x1bc)+_0x48dadd),await this['saveSessionState']();}async[a0_0x324eb0(0x223)](_0x7a45fa,_0x19614b){const _0x6c1f4c=a0_0x324eb0;this['logger']['info'](_0x6c1f4c(0x239)+_0x19614b['name']+'\x20from\x20'+_0x7a45fa);if(this[_0x6c1f4c(0x1ff)]){const _0x12a05b=await this[_0x6c1f4c(0x1ff)](_0x19614b['name'],_0x19614b[_0x6c1f4c(0x1aa)],_0x19614b[_0x6c1f4c(0x229)]);await this['sendMessageToConversation'](_0x7a45fa,_0x6c1f4c(0x1f0)+_0x12a05b);}else await this[_0x6c1f4c(0x208)](_0x7a45fa,'Cannot\x20display\x20prompt\x20to\x20user:\x20No\x20prompt\x20handler\x20is\x20registered.\x20'+'Please\x20implement\x20the\x20onUserPrompt\x20handler\x20in\x20the\x20CLI.');}async[a0_0x324eb0(0x1d6)](_0x4a7f83){const _0x3ef7fa=a0_0x324eb0;this[_0x3ef7fa(0x224)][_0x3ef7fa(0x1ca)](_0x3ef7fa(0x139)),await this[_0x3ef7fa(0x174)](_0x4a7f83);}async['sendMessageToConversation'](_0x256d60,_0x2e7771){const _0xa8e983=a0_0x324eb0;if(this['shouldBlockMessage'](_0x256d60,_0x2e7771))return this[_0xa8e983(0x224)]['info']('ðŸš«\x20Blocking\x20message\x20in\x20interactive\x20mode:\x20'+displayOnly(_0x2e7771,0x64)),this[_0xa8e983(0x228)]['push']({'conversationId':_0x256d60,'message':_0x2e7771,'timestamp':Date[_0xa8e983(0x1a4)]()}),_0xa8e983(0x1fd);const _0x179c5e=_0x256d60===CONVERSATION_CONSTANTS[_0xa8e983(0x196)],_0x4bf38d=_0x179c5e?_0xa8e983(0x1b0):'waiting-for-agent';!this[_0xa8e983(0x1ae)]&&this[_0xa8e983(0x161)](_0x4bf38d);this['logger'][_0xa8e983(0x194)]('[Orchestrator]\x20Messaging\x20'+_0x256d60+':\x0a'+displayOnly(_0x2e7771,0xff));if(!this['conversations'][_0xa8e983(0x150)](_0x256d60)){!this['isWaitingForUserInput']&&this[_0xa8e983(0x161)]('idle');throw new Error('Conversation\x20'+_0x256d60+_0xa8e983(0x180));}try{const _0x2c7bb2=this[_0xa8e983(0x195)][_0xa8e983(0x15d)](_0x256d60),_0x53cf4a={'systemPrompt':_0x2c7bb2['systemPrompt'],'messages':_0x2c7bb2['messages'],'id':_0x256d60,'contextWindow':_0x2c7bb2[_0xa8e983(0x186)]},_0x227d09=await this[_0xa8e983(0x1af)][_0xa8e983(0x16e)](_0x256d60,_0x2e7771,_0x53cf4a);return await this['checkAndPerformCompactization'](_0x256d60),await this[_0xa8e983(0x154)](_0x256d60),this['sessionState']['activeConversationIds']['includes'](_0x256d60)&&await this[_0xa8e983(0x13e)](_0x256d60,_0x227d09),!this['isWaitingForUserInput']&&this[_0xa8e983(0x161)]('idle'),_0x227d09;}catch(_0x566cb1){!this[_0xa8e983(0x1ae)]&&this[_0xa8e983(0x161)](_0xa8e983(0x1fa));throw _0x566cb1;}}async[a0_0x324eb0(0x17f)](_0x433d29,_0x230100,_0x23de00=[],_0x183520=null){const _0x54e331=a0_0x324eb0;this['logger'][_0x54e331(0x194)](_0x54e331(0x1fc)+_0x433d29),this[_0x54e331(0x1c2)]['set'](_0x433d29,_0x230100);const _0x477039=this['interactionMode']===_0x54e331(0x234)?this['removePromptSyntaxFromSystemPrompt'](_0x230100):_0x230100;let _0x7cc6a0=[];_0x23de00['length']>0x0&&(_0x7cc6a0=_0x23de00['filter'](_0xb9dc03=>_0xb9dc03[_0x54e331(0x178)]!=='system'));const _0xaeacd2={'id':_0x433d29,'systemPrompt':_0x477039,'messages':_0x7cc6a0,'contextWindow':this['getContextWindowSize'](_0x433d29)};this['conversations'][_0x54e331(0x253)](_0x433d29,_0xaeacd2),await this[_0x54e331(0x1af)]['registerConversation'](_0x433d29,_0x477039,_0x183520),_0x7cc6a0[_0x54e331(0x206)]>0x0&&await this['llmService']['updateConversation'](_0x433d29,_0xaeacd2),this['sessionState']['conversationHistory'][_0x433d29]={'systemPrompt':_0x477039,'lastUpdateTime':new Date()[_0x54e331(0x1ba)]()},await this['saveConversationHistory'](_0x433d29);}['getListOfAvailableAgentIds'](_0x3634ba){const _0x353ca7=a0_0x324eb0,_0x4ae657=Array['from'](this['conversations'][_0x353ca7(0x165)]())['filter'](_0x27f944=>_0x27f944!==_0x3634ba);return _0x4ae657;}async[a0_0x324eb0(0x1e5)](_0x488828,_0x4d1094,_0x5554d9){const _0x103da6=a0_0x324eb0;this['logger']['info'](_0x103da6(0x1d8)+_0x488828+'\x20to\x20'+_0x4d1094);if(!this[_0x103da6(0x195)]['has'](_0x4d1094)){const _0x2694b8=_0x103da6(0x1ab)+_0x4d1094+'\x20does\x20not\x20exist,\x20cannot\x20route\x20message.\x20Available\x20agents\x20are:\x20'+this['getListOfAvailableAgentIds'](_0x488828)['join'](',\x20')+_0x103da6(0x21b);this[_0x103da6(0x224)][_0x103da6(0x1ca)](_0x2694b8),await this['sendMessageToConversation'](_0x488828,_0x2694b8);return;}const _0x96cda7='[From\x20'+_0x488828+_0x103da6(0x156)+_0x5554d9;await this[_0x103da6(0x208)](_0x4d1094,_0x96cda7);}async[a0_0x324eb0(0x1e5)](_0x8b95c9,_0x13b8f0,_0x2fdf5b){const _0x38a1c0=a0_0x324eb0;this[_0x38a1c0(0x224)]['info']('Routing\x20message\x20from\x20'+_0x8b95c9+_0x38a1c0(0x18d)+_0x13b8f0);if(!this[_0x38a1c0(0x195)][_0x38a1c0(0x150)](_0x13b8f0)){this['logger'][_0x38a1c0(0x1ca)]('Agent\x20'+_0x13b8f0+_0x38a1c0(0x1f4)),await this[_0x38a1c0(0x208)](_0x8b95c9,'Cannot\x20send\x20message\x20to\x20'+_0x13b8f0+_0x38a1c0(0x24a));return;}const _0xed767d='[From\x20'+_0x8b95c9+']:\x20'+_0x2fdf5b;await this[_0x38a1c0(0x208)](_0x13b8f0,_0xed767d);}async[a0_0x324eb0(0x1a6)](){const _0x2e476f=a0_0x324eb0;for(const [_0x5994af,_0x38d64c]of this['activeTools'][_0x2e476f(0x14e)]()){const _0x5a9bb9=Date[_0x2e476f(0x1a4)]()-_0x38d64c[_0x2e476f(0x173)];_0x5a9bb9>CONVERSATION_CONSTANTS['TOOL_STATUS_UPDATE_INTERVAL_MS']&&(await this[_0x2e476f(0x208)](_0x38d64c['agentId'],_0x2e476f(0x199)+_0x38d64c[_0x2e476f(0x258)]+_0x2e476f(0x1c0)+Math['floor'](_0x5a9bb9/0x3e8)+_0x2e476f(0x240)+_0x5994af),_0x38d64c[_0x2e476f(0x173)]=Date['now']());}}['registerUserPromptHandler'](_0x453f24){this['onUserPrompt']=_0x453f24;}async['sendUserInput'](_0x1b1318){const _0xdaff71=a0_0x324eb0;this['logger']['info'](_0xdaff71(0x164)+_0x1b1318),this['setWaitingForUserInput'](![]),this['sessionState']['makerAgentId']?await this[_0xdaff71(0x208)](this['sessionState'][_0xdaff71(0x190)],_0xdaff71(0x25c)+_0x1b1318):this[_0xdaff71(0x224)][_0xdaff71(0x1ca)](_0xdaff71(0x19a));}async[a0_0x324eb0(0x232)](_0x59d0d7){const _0x5441ce=a0_0x324eb0,_0x335f87=this['conversations']['get'](_0x59d0d7);if(!_0x335f87)return;const _0x16d04c=await this[_0x5441ce(0x1af)]['estimateTokenCount'](_0x59d0d7),_0x4eb123=_0x335f87['contextWindow'];_0x16d04c>_0x4eb123*CONVERSATION_CONSTANTS[_0x5441ce(0x147)]&&(this['logger']['info']('Performing\x20compactization\x20for\x20conversation\x20'+_0x59d0d7),await this[_0x5441ce(0x174)](_0x59d0d7));}async[a0_0x324eb0(0x174)](_0x37f3fd){const _0x264e10=a0_0x324eb0,_0x28853c=this['conversations'][_0x264e10(0x15d)](_0x37f3fd);if(!_0x28853c||_0x28853c['messages']['length']<0x4)return;const _0x46057f=CONVERSATION_CONSTANTS['MIN_MESSAGES_TO_KEEP'],_0x57f6be=_0x28853c['messages']['slice'](0x0,_0x46057f),_0x42c1dc=_0x28853c[_0x264e10(0x186)],_0x2584f9=Math['floor'](_0x42c1dc*CONVERSATION_CONSTANTS[_0x264e10(0x171)]),_0x2a0910=_0x42c1dc-_0x2584f9,_0x1bbdf0=CONVERSATION_CONSTANTS['COMPACTIZATION_BEGIN_PERCENTAGE'],_0x173161=CONVERSATION_CONSTANTS['COMPACTIZATION_END_PERCENTAGE'],_0x1d83b1=Math[_0x264e10(0x16c)](_0x46057f,Math['floor'](_0x28853c['messages'][_0x264e10(0x206)]*_0x1bbdf0)),_0x588f1d=Math[_0x264e10(0x1eb)](_0x28853c['messages']['length']-_0x1d83b1,Math['floor'](_0x28853c['messages'][_0x264e10(0x206)]*_0x173161)),_0x68d739=_0x28853c[_0x264e10(0x15c)]['slice'](0x0,_0x1d83b1),_0x3e218f=_0x28853c[_0x264e10(0x15c)]['slice'](-_0x588f1d),_0x5cbf8e=_0x28853c['messages'][_0x264e10(0x1d2)](_0x1d83b1,_0x28853c[_0x264e10(0x15c)][_0x264e10(0x206)]-_0x588f1d);if(_0x5cbf8e[_0x264e10(0x206)]===0x0)return;const _0x399a73=this['createSummaryPrompt'](_0x5cbf8e);this['logger']['info'](_0x264e10(0x25a)+_0x1d83b1+'\x20begin\x20+\x20'+_0x5cbf8e['length']+'\x20summarized\x20+\x20'+_0x588f1d+'\x20end\x20messages');try{const _0x17033c=await this['llmService']['getSummary'](_0x37f3fd,_0x399a73),_0x5c7c65={'role':CONVERSATION_CONSTANTS[_0x264e10(0x209)],'content':CONVERSATION_CONSTANTS[_0x264e10(0x22d)]+'\x0a'+_0x17033c+'\x0a'+CONVERSATION_CONSTANTS['SUMMARY_MARKER_END']};_0x28853c['messages']=[..._0x68d739,_0x5c7c65,..._0x3e218f],await this[_0x264e10(0x1af)]['updateConversation'](_0x37f3fd,_0x28853c),this[_0x264e10(0x224)]['info'](_0x264e10(0x1a8)+_0x37f3fd+_0x264e10(0x13a)+(_0x1d83b1+_0x5cbf8e[_0x264e10(0x206)]+_0x588f1d)+'\x20to\x20'+(_0x68d739[_0x264e10(0x206)]+0x1+_0x3e218f['length']));}catch(_0x5db923){this['logger'][_0x264e10(0x21d)](_0x264e10(0x1c4),_0x5db923),this['_handleSummaryFailure'](_0x37f3fd,_0x5db923);}}['createSummaryPrompt'](_0x53ef38){const _0x4af579=a0_0x324eb0;return'\x0a\x20\x20\x20\x20\x20\x20\x20\x20The\x20following\x20text\x20is\x20a\x20part\x20of\x20a\x20conversation.\x20It\x20is\x20very\x20long.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20Replace\x20this\x20part\x20of\x20the\x20conversation\x20with\x20a\x20concise\x20alternative\x20while\x20preserving\x20key\x20information,\x20decisions,\x20and\x20context\x0a\x20\x20\x20\x20\x20\x20\x20\x20Agent\x20should\x20be\x20able\x20to\x20proceed\x20with\x20its\x20task\x20by\x20using\x20this\x20shorter\x20summary\x20instead\x20of\x20the\x20original\x20long\x20conversation.\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x53ef38['map'](_0x895f8c=>_0x895f8c['role']+':\x20'+_0x895f8c['content'])['join']('\x0a\x0a')+_0x4af579(0x1d1);}['getContextWindowSize'](_0x19491d){const _0x2b62a9=a0_0x324eb0,_0x3af8b9=this[_0x2b62a9(0x1bd)]['models']?.[_0x2b62a9(0x203)]?.['contextWindow']||CONVERSATION_CONSTANTS['DEFAULT_CONTEXT_WINDOW_SIZE'];if(_0x19491d===CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID'])return this[_0x2b62a9(0x1bd)][_0x2b62a9(0x172)]?.[_0x2b62a9(0x233)]?.[_0x2b62a9(0x186)]||_0x3af8b9;return _0x3af8b9;}[a0_0x324eb0(0x21c)](_0x67187e,_0x110a4b=![]){const _0x16ebee=a0_0x324eb0,_0x436ac9=_0x110a4b?_0x16ebee(0x148):'creating\x20new\x20content';return _0x16ebee(0x243)+_0x436ac9+'\x20to\x20an\x20AI\x20agent.\x20\x0a\x20\x20\x20\x20For\x20that\x20we\x20need\x20to\x20write\x20a\x20comprehensive\x20SYSTEM\x20prompt\x20that\x20will\x20help\x20the\x20agent\x20make\x20smart\x20decisions.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20The\x20agent\x20will\x20need\x20to\x20know\x20the\x20task\x20and\x20the\x20tools\x20available\x20to\x20it,\x20but\x20will\x20also\x20need\x20to\x20think\x20like\x20a\x20professional\x20relevant\x20for\x20the\x20task\x20at\x20hand.\x0a\x0a\x20\x20\x20\x20Your\x20job\x20is\x20to\x20create\x20a\x20role\x20for\x20the\x20AI\x20agent\x20and\x20write\x20a\x20system\x20prompt\x20that\x20will\x20guide\x20it\x20to\x20successfully\x20complete\x20the\x20task.\x0a\x0a\x20\x20\x20\x20Embed\x20appropriate\x20guidelines\x5cprocess\x20description\x20into\x20the\x20system\x20prompt,\x20according\x20to\x20the\x20task\x20type:\x0a\x20\x20\x20\x201.\x20TASK\x20OF\x20DEVELOPING\x20CODE\x5cSOFTWARE:\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20AI\x20Agent\x20Development\x20Process\x20Guide\x0a\x20\x20\x20\x20\x20\x20\x20\x20##\x20Development\x20Stages\x20Overview\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20As\x20conversation\x20progresses,\x20context\x20window\x20will\x20be\x20filled\x20and\x20what\x20agent\x20rememebers\x20will\x20be\x20truncated/summarized.\x0a\x20\x20\x20\x20\x20\x20\x20\x20To\x20retain\x20the\x20context\x20of\x20the\x20project\x20agent\x20will\x20have\x20to\x20use\x20memory\x20tool\x20to\x20store\x20relevant\x20information\x20throughout\x20the\x20conversation.\x0a\x20\x20\x20\x20\x20\x20\x20\x20In\x20particular,\x20the\x20agent\x20should\x20store\x20a\x20summary\x20of\x20each\x20stage,\x20its\x20requirements,\x20and\x20any\x20important\x20decisions\x20made\x20during\x20the\x20development\x20process.\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x201:\x20System\x20Functional\x20Description\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Define\x20what\x20the\x20system\x20does\x20at\x20a\x20high\x20level\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Write\x20a\x20clear\x20description\x20of\x20the\x20system\x27s\x20main\x20purpose\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Identify\x20the\x20core\x20problem\x20the\x20system\x20solves\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20the\x20system\x27s\x20scope\x20and\x20boundaries\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x202:\x20Comprehensive\x20Functional\x20Requirements\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Detail\x20what\x20the\x20system\x20must\x20do\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20List\x20specific\x20features\x20and\x20capabilities\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20user\x20interactions\x20and\x20system\x20behaviors\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Specify\x20data\x20processing\x20requirements\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x203:\x20Non-Functional\x20Requirements\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Define\x20how\x20the\x20system\x20should\x20perform\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Performance\x20requirements\x20(speed,\x20response\x20time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Security\x20requirements\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Scalability\x20needs\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Usability\x20standards\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x204:\x20System\x20Actors\x20and\x20Target\x20Devices\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Identify\x20who\x20uses\x20the\x20system\x20and\x20how\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20user\x20roles\x20and\x20permissions\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Specify\x20target\x20devices\x20(desktop,\x20mobile,\x20tablet)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Identify\x20operating\x20system\x20requirements\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20browser\x20compatibility\x20needs\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x205:\x20Use\x20Cases\x20Development\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Document\x20user\x20workflows\x20and\x20interactions\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Write\x20detailed\x20user\x20stories\x20involving\x20system\x20features\x20as\x20previously\x20defined\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Map\x20user\x20journeys\x20through\x20the\x20system\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Connect\x20features\x20to\x20specific\x20user\x20goals\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Include\x20edge\x20cases\x20and\x20error\x20scenarios\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x206:\x20UX\x20Design\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Create\x20intuitive,\x20user-friendly\x20interfaces\x20addressing\x20the\x20use\x20cases\x20and\x20features\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Apply\x20modern\x20UX/UI\x20best\x20practices\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Design\x20responsive\x20layouts\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Plan\x20user\x20flows\x20and\x20information\x20architecture\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Consider\x20accessibility\x20standards\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x207:\x20High-Level\x20Design\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Define\x20system\x20architecture\x20and\x20main\x20components\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Identify\x20core\x20system\x20components\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20component\x20responsibilities,\x20inputs,\x20and\x20outputs\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Map\x20data\x20flow\x20between\x20components\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Analyze\x20alternatives,\x20choose\x20technology\x20stack\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x208:\x20Low-Level\x20Design\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Detail\x20implementation\x20specifics\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20database\x20design\x20and\x20schemas\x20if\x20needed\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Specify\x20API\x20endpoints\x20and\x20contracts\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Detail\x20component\x20architecture\x20and\x20interfaces\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Plan\x20error\x20handling\x20strategies\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Security\x20implementation\x20plan\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20MULTI-MESSAGE\x20SESSIONS/STAGES:\x0a\x20\x20\x20\x20\x20\x20\x20\x20Stage\x209:\x20Implementation\x20according\x20to\x20previous\x20stages\x20(longest\x20and\x20most\x20important\x20stage,\x20dedicate\x20more\x20time\x20and\x20messages\x20to\x20this\x20stage)\x0a\x20\x20\x20\x20\x20\x20\x20\x20when\x20implementing\x20the\x20code,\x20make\x20sure\x20to\x20be\x20consider\x20memories\x20stored\x20in\x20memory\x20tool\x20and\x20guidelines\x20derived\x20in\x20previous\x20stages.\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Write\x20and\x20build\x20the\x20complete\x20application\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20In\x20a\x20test\x20driven\x20manner,\x20implement\x20all\x20features\x20and\x20components\x20code\x20as\x20defined\x20in\x20previous\x20stages\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Integrate\x20databases\x20if\x20needed\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Create\x20necessary\x20assets\x20(graphics,\x20icons,\x20etc.)\x20and\x20embed\x20fontawesome\x20(or\x20its\x20alternatives)\x20where\x20needed\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Implement\x20core\x20features,\x20UI\x20components\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Integrate\x20components\x20(e.g\x20frontend\x20and\x20backend)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Create\x20README.md\x20with\x20setup\x20instructions\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20at\x20this\x20point\x20INSTALL\x20DEPENDENCIES\x20and\x20run\x20project,\x20try\x20until\x20success.\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20MULTI-MESSAGE\x20SESSIONS/STAGES:\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x2010:\x20Testing\x20and\x20Quality\x20Assurance\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Ensure\x20code\x20quality\x20and\x20functionality\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Perform\x20static\x20code\x20analysis\x20-\x20REPAIR\x20UNTIL\x20NO\x20ERRORS\x20ARE\x20PRESENT\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20execute\x20unit\x20tests\x20for\x20individual\x20components\x20\x20-\x20REPAIR\x20UNTIL\x20NO\x20ERRORS\x20ARE\x20PRESENT\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Execute\x20integration\x20tests\x20for\x20component\x20interactions\x20\x20-\x20REPAIR\x20UNTIL\x20NO\x20ERRORS\x20ARE\x20PRESENT\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Perform\x20end-to-end\x20tests\x20for\x20user\x20workflows\x20\x20-\x20REPAIR\x20UNTIL\x20NO\x20ERRORS\x20ARE\x20PRESENT\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Make\x20sure\x20no\x20errors\x20or\x20bugs\x20are\x20present\x20in\x20the\x20static\x20code\x20analysis,\x20tests,\x20terminal\x20output,\x20and\x20browser\x20testing\x20(console\x20+\x20visual\x20testing\x20using\x20vision\x20capabilities)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20This\x20stage\x20HAS\x20TO\x20BE\x20REPEATED\x20AND\x20RE-CHECKED\x20until\x20all\x20components\x20launch\x20without\x20errors\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ONLY\x20AFTER\x20THIS\x20STAGE,\x20ONCE\x20TESTING\x20IS\x20COMPLETED\x20AND\x20PROGRAM\x20WAS\x20EXECUTED\x20WITH\x20NO\x20ERRORS,\x20YOU\x20ARE\x20ALLOWED\x20TO\x20ANNOUNCE\x20JOB\x20DONE.\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20##\x20Process\x20Guidelines\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Complete\x20each\x20stage\x20thoroughly\x20before\x20moving\x20to\x20the\x20next\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20(Important!)\x20Coversation\x20Dynamics\x20(different\x20stages\x20cannot\x20take\x20part\x20in\x20same\x20message):\x0a\x20\x20\x20\x20\x20\x20\x20\x201)\x20AGENT->LLM:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20identify\x20language-model\x20recipent\x20id,\x20direct\x20a\x20message\x20to\x20him\x20explaining\x20what\x20you\x20want\x20to\x20do\x0a\x20\x20\x20\x20\x20\x20\x20\x20[tool\x20id=\x22update-user\x22]\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20...use\x20tool\x27s\x20syntax\x20to\x20update\x20the\x20supervising\x20user\x20on\x20what\x20you\x27re\x20doing\x0a\x20\x20\x20\x20\x20\x20\x20\x20[/tool]\x0a\x20\x20\x20\x20\x20\x20\x20\x20[message\x20to=\x22language-model(or\x20any\x20other\x20suitable\x20recipent\x20id)\x22]\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tell\x20the\x20llm\x20what\x20you\x27re\x20about\x20to\x20do\x20now,\x20ask\x20for\x20recommendations\x20or\x20scoring\x20rubrics\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20that\x20would\x20assist\x20you\x20in\x20comleting\x20the\x20following\x20task\x5csub-task\x20with\x20great\x20success\x20and\x20quality\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20consult\x20about\x20challenges,\x20solutions,\x20guidelines\x20and\x20more.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20[/message]\x0a\x20\x20\x20\x20\x20\x20\x20\x202)\x20LLM->AGENT:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20The\x20llm\x20would\x20give\x20some\x20anwer,\x20agent\x20will\x20be\x20able\x20to\x20return\x20to\x20stage\x20one\x20and\x20continue\x20conversation\x20or\x20when\x20ready\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20continuing\x20to\x20step\x203.\x0a\x20\x20\x20\x20\x20\x20\x20\x203)\x20AGENT\x20ACTION:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20agent\x20has\x20no\x20comments\x20regarding\x20llm\x20content,\x20the\x20agent\x20can\x20now\x20do\x20whatever\x20it\x20meant\x20to\x20do\x20(writing\x20content,\x20creating\x20things\x20will\x20tools\x20etc).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20this\x20dynamic\x20acts\x20like\x20a\x20meta-thinking\x20process.\x20Think\x20with\x20your\x20llm\x20-\x20at\x20least\x201\x20message\x20epr\x20thinking,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20act\x20-\x20with\x20the\x20use\x20of\x20tools\x20in\x20the\x20following\x20message,\x20repeat\x20this\x20process.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20always\x20start\x20a\x20message\x20by\x20updating\x20user\x20on\x20current\x20stages.\x20add\x20links\x20to\x20generated\x20files,\x20locations,\x20web\x20pages\x20when\x20needed.\x0a\x20\x20\x20\x20\x20\x20\x20\x204)\x20back\x20to\x20stage\x20one\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Code\x20guidelines\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20No\x20magic\x20numbers,\x20use\x20constants\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Project\x20file\x20structure\x20must\x20follow\x20best\x20practices\x20and\x20serve\x20the\x20purpose\x20of\x20the\x20project\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Use\x20known\x20and\x20highly\x20maintained\x20packages\x20and\x20technologies\x20which\x20suits\x20the\x20project\x20goals)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Use\x20SecureCoding\x20best\x20practices.\x20if\x20needed\x20install\x20external\x20scanners\x20to\x20scan\x20the\x20files\x20before\x20you\x27re\x20done\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Identify\x20common\x20logic,\x20values\x20and\x20functionality,\x20gather\x20them\x20under\x20suitable\x20project\x20files\x20as\x20dependencies\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20when\x20creating\x20a\x20project\x20that\x20uses\x20package.json\x20or\x20package_lock.json,\x20use\x20seek\x20tool\x20to\x20search\x20for\x20import\x20lines,\x20then\x20use\x20the\x20result\x20to\x20analyze\x20needed\x20packages.\x20when\x20using\x20different\x20technologies\x20make\x20adaptations\x20to\x20acheive\x20same\x20goal.\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20when\x20creating\x20node\x20packages,\x20prefer\x20ESM\x20over\x20CommonJS\x20(unless\x20states\x20otherwise),\x20add\x20\x22type\x22:\x22module\x22\x20to\x20the\x20package.json\x20if\x20needed.\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20IF\x20THIS\x20SOFTWARE\x20IS\x20A\x20COMPUTER\x20GAME\x20COMPLEMENT\x20WITH\x20THE\x20FOLLOWING:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x201:\x20Basic\x20Concept\x20Definition**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Define\x20the\x20game\x27s\x20core\x20idea\x20and\x20desired\x20player\x20experience\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Choose\x20game\x20genre\x20(action,\x20strategy,\x20RPG,\x20puzzle,\x20etc.)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20Define\x20target\x20audience\x20(age,\x20skill\x20level,\x20preferences)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20Determine\x20target\x20platform\x20(PC,\x20console,\x20mobile)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x202:\x20Game\x20Mechanics\x20Design**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x205.\x20Develop\x20core\x20mechanics\x20(how\x20player\x20interacts\x20with\x20the\x20game)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x206.\x20Design\x20player\x20progression\x20system\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x207.\x20Define\x20game\x20rules,\x20limitations\x20and\x20challenges\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x208.\x20Design\x20scoring/reward\x20system\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x203:\x20Initial\x20Technical\x20Planning**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x209.\x20Choose\x20game\x20engine\x20(Unity,\x20Unreal,\x20Godot,\x20etc.)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2010.\x20Identify\x20required\x20libraries\x20and\x20tools\x20(physics,\x20networking,\x20AI)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2011.\x20Plan\x20basic\x20code\x20architecture\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2012.\x20Assess\x20hardware\x20requirements\x20and\x20performance\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x204:\x20Visual\x20and\x20Artistic\x20Design**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2013.\x20Determine\x20art\x20style\x20(realistic,\x20cartoon,\x20pixel\x20art,\x20etc.)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2014.\x20Design\x20color\x20palette\x20and\x20overall\x20atmosphere\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2015.\x20Plan\x20user\x20interface\x20(UI/UX)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2016.\x20Create\x20artistic\x20style\x20guide\x20(Art\x20Bible)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x205:\x20Story\x20and\x20Plot\x20Development**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2017.\x20Write\x20main\x20storyline\x20and\x20secondary\x20plot\x20lines\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2018.\x20Develop\x20main\x20and\x20secondary\x20characters\x20with\x20detailed\x20backgrounds\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2019.\x20Create\x20game\x20world\x20and\x20environment\x20description\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2020.\x20Write\x20dialogues\x20and\x20in-game\x20texts\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x206:\x20Level\x20and\x20Stage\x20Design**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2021.\x20Plan\x20overall\x20structure\x20of\x20game\x20stages\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2022.\x20Detailed\x20design\x20of\x20each\x20stage/level\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2023.\x20Determine\x20how\x20stages\x20connect\x20to\x20the\x20storyline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2024.\x20Plan\x20difficulty\x20curve\x20and\x20challenge\x20progression\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x207:\x20Audio\x20and\x20Music\x20Design**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2025.\x20Determine\x20musical\x20style\x20and\x20artistic\x20direction\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2026.\x20Plan\x20background\x20music\x20for\x20different\x20stages\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2027.\x20Design\x20sound\x20effects\x20(SFX)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2028.\x20Plan\x20voice\x20acting\x20and\x20dubbing\x20if\x20required\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x208:\x20In-Game\x20Tools\x20and\x20Systems\x20Planning**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2029.\x20Define\x20tools/weapons/items\x20and\x20their\x20properties\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2030.\x20Design\x20acquisition\x20and\x20collection\x20system\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2031.\x20Plan\x20inventory\x20and\x20equipment\x20system\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2032.\x20Design\x20additional\x20game\x20systems\x20(trading,\x20crafting,\x20etc.)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x209:\x20Prototype\x20Development**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2033.\x20Create\x20basic\x20playable\x20version\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2034.\x20Test\x20core\x20mechanics\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2035.\x20Gather\x20initial\x20feedback\x20and\x20updates\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2036.\x20Validate\x20technical\x20concept\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x2010:\x20Full\x20Development**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2037.\x20Develop\x20all\x20systems\x20and\x20content\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2038.\x20Create\x20all\x20artistic\x20assets\x20(graphics,\x20animations)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2039.\x20Record\x20and\x20produce\x20all\x20audio\x20materials\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2040.\x20Integration\x20of\x20all\x20components\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x2011:\x20Testing\x20and\x20Bug\x20Fixes**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2041.\x20Comprehensive\x20functional\x20testing\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2042.\x20Performance\x20testing\x20and\x20optimization\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2043.\x20Usability\x20testing\x20with\x20players\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2044.\x20Bug\x20fixes\x20and\x20balance\x20improvements\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x2012:\x20Launch\x20and\x20Distribution**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2045.\x20Prepare\x20for\x20marketing\x20and\x20distribution\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2046.\x20Create\x20marketing\x20materials\x20(trailers,\x20screenshots)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2047.\x20Submit\x20to\x20distribution\x20platforms\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2048.\x20Launch\x20and\x20performance\x20monitoring\x0a\x0a\x20\x20\x20\x202.\x20TASK\x20OF\x20WRITING\x20A\x20BOOK\x5cSTORY:\x0a\x20\x20\x20\x20\x20\x20\x20\x202.1.\x20The\x20agent\x20should\x20create\x20criteria\x20for\x20qualitative\x20measurement\x20of\x20a\x20book/story\x20(general\x20or\x20of\x20the\x20described\x20type)\x0a\x20\x20\x20\x20\x20\x20\x20\x202.2.\x20Development\x20of\x20the\x20central\x20idea\x20along\x20with\x20the\x20main\x20plot\x20line\x0a\x20\x20\x20\x20\x20\x20\x20\x202.3.\x20Development\x20of\x20secondary\x20plot\x20lines\x0a\x20\x20\x20\x20\x20\x20\x20\x202.4.\x20Development\x20of\x20key\x20points\x20in\x20each\x20plot,\x20central\x20dilemmas\x20and\x20unifying\x20logic\x20for\x20all\x20plots\x20-\x20if\x20there\x27s\x20a\x20need\x20to\x20change\x20or\x20adapt\x20part\x20of\x20the\x20plot\x20lines\x20at\x20this\x20stage,\x20it\x20should\x20be\x20done\x0a\x20\x20\x20\x20\x20\x20\x20\x202.5.\x20Criteria\x20should\x20be\x20written\x20for\x20developing\x20a\x20quality\x20character\x20in\x20the\x20story\x0a\x20\x20\x20\x20\x20\x20\x20\x202.6.\x20For\x20each\x20story,\x20main\x20and\x20secondary\x20characters\x20should\x20be\x20defined\x20along\x20with\x20their\x20role\x20in\x20the\x20plot\x20line\x0a\x20\x20\x20\x20\x20\x20\x20\x202.7.\x20For\x20each\x20character,\x20personal\x20background\x20and\x20living\x20environment\x20in\x20childhood\x20and\x20adulthood\x20should\x20be\x20defined,\x20including\x20beliefs,\x20significant\x20life\x20events,\x20vocabulary,\x20and\x20appearance\x20including\x20hairstyle,\x20clothing,\x20jewelry\x20if\x20any,\x20and\x20more\x20-\x20all\x20according\x20to\x20the\x20plot\x20line\x20and\x20the\x20character\x27s\x20role\x20in\x20the\x20plot\x0a\x20\x20\x20\x20\x20\x20\x20\x202.8.\x20The\x20appearance\x20of\x20each\x20character\x20should\x20be\x20saved\x20in\x20a\x20dedicated\x20place\x20with\x20great\x20detail,\x20it\x20will\x20serve\x20to\x20create\x20consistent\x20graphics\x20if\x20required\x0a\x20\x20\x20\x20\x20\x20\x20\x202.9.\x20For\x20each\x20character,\x20internet\x20research\x20should\x20be\x20conducted\x20to\x20refine\x20it\x20(clothing,\x20beliefs,\x20childhood\x20and\x20adulthood\x20events)\x20to\x20specify\x20events\x20in\x20the\x20environment\x20where\x20they\x20grew\x20up\x20or\x20draw\x20inspiration\x20from\x20areas\x20in\x20the\x20spirit\x20of\x20the\x20region\x20or\x20conditions\x20that\x20the\x20plot\x20unfolds\x0a\x20\x20\x20\x20\x20\x20\x20\x202.10.\x20Between\x20plot\x20lines,\x20intersection\x20points\x20should\x20be\x20created,\x20alternatives\x20examined\x20and\x20intersection\x20points\x20with\x20logic\x20should\x20be\x20chosen,\x20with\x20narrative\x20value\x20that\x20will\x20serve\x20the\x20story\x27s\x20purpose\x20and\x20the\x20reader\x27s\x20interest.\x20This\x20is\x20an\x20opportunity\x20to\x20refine\x20the\x20plot\x20lines,\x20twists\x20and\x20their\x20connection\x20to\x20the\x20characters.\x20This\x20is\x20an\x20opportunity\x20to\x20enrich\x20the\x20description\x20and\x20understanding\x20of\x20the\x20world\x20in\x20which\x20the\x20characters\x20live\x20before\x20actual\x20writing\x20-\x20smells,\x20emotions,\x20sights,\x20events,\x20worldviews,\x20technology,\x20communication,\x20global\x20and\x20national\x20trends\x20including\x20the\x20state\x20of\x20superpowers\x20in\x20the\x20described\x20world,\x20medical\x20and\x20scientific,\x20formative\x20historical\x20events\x20and\x20more\x20as\x20needed\x0a\x20\x20\x20\x20\x20\x20\x20\x202.11.\x20The\x20recurring\x20motifs\x20should\x20be\x20understood\x20if\x20there\x20are\x20any,\x20their\x20essence,\x20identifying\x20central\x20symbols\x20in\x20use,\x20leading\x20metaphors\x20if\x20they\x20exist\x0a\x20\x20\x20\x20\x20\x20\x20\x202.12.\x20The\x20story\x20should\x20be\x20assigned\x20to\x20a\x20genre,\x20given\x20a\x20working\x20title,\x20locate\x20a\x20worthy\x20and\x20excellent\x20author\x20whose\x20writing\x20style\x20is\x20known\x20and\x20whose\x20writings\x20are\x20accessible\x20or\x20familiar\x20to\x20the\x20model,\x20and\x20choose\x20them\x20as\x20a\x20guiding\x20line\x20for\x20the\x20writing\x20style\x20unless\x20described\x20otherwise\x20in\x20the\x20task\x20description\x0a\x20\x20\x20\x20\x20\x20\x20\x202.13.\x20Begin\x20writing\x20the\x20book\x20-\x20chapter\x20by\x20chapter,\x20stop\x20between\x20chapters\x20and\x20let\x20the\x20user\x20examine\x20the\x20story\x20that\x20was\x20written\x0a\x0a\x20\x20\x20\x203.\x20TASK\x20OF\x20RESEARCHING\x5cINFORMATION\x20GATHERING:\x0a\x20\x20\x20\x20\x20\x20\x20\x203.1.\x20If\x20the\x20user\x20is\x20interested,\x20expand\x20or\x20assist\x20in\x20refining\x20the\x20research\x20question\x20or\x20task\x0a\x20\x20\x20\x20\x20\x20\x20\x203.2.\x20The\x20desired\x20output\x20should\x20be\x20specified\x20-\x20format,\x20file\x20type,\x20and\x20more\x0a\x20\x20\x20\x20\x20\x20\x20\x203.3.\x20Attempt\x20to\x20locate\x20names\x20of\x20websites\x20and\x20sources\x20for\x20the\x20requested\x20information\x0a\x20\x20\x20\x20\x20\x20\x20\x203.4.\x20Divide\x20information\x20sources\x20into\x20sources\x20with\x20direct\x20connection\x20to\x20the\x20task\x20or\x20those\x20that\x20may\x20provide\x20supplementary\x20information\x20-\x20this\x20is\x20an\x20opportunity\x20to\x20locate\x20additional\x20sources\x0a\x20\x20\x20\x20\x20\x20\x20\x203.5.\x20Search\x20these\x20sources\x20thoroughly\x20with\x20the\x20aspiration\x20to\x20locate\x20materials\x20from\x20at\x20least\x2020\x20sources\x20for\x20the\x20general\x20public\x20and\x2020\x20from\x20academic\x20sources,\x20and\x20at\x20least\x2010\x20recent\x20ones\x20from\x20dedicated\x20professional\x20sources\x20if\x20such\x20exist\x0a\x20\x20\x20\x20\x20\x20\x20\x203.6.\x20Design\x20a\x20guiding\x20principle\x20and\x20quality\x20structure\x20for\x20the\x20article/research\x20paper\x20or\x20follow\x20the\x20guidelines\x20given\x20in\x20the\x20task\x0a\x20\x20\x20\x20\x20\x20\x20\x203.7.\x20If\x20materials\x20or\x20support\x20for\x20certain\x20claims\x20or\x20connecting\x20materials\x20are\x20missing,\x20they\x20should\x20be\x20searched\x20for\x20at\x20this\x20stage\x0a\x20\x20\x20\x20\x20\x20\x20\x203.8.\x20Update\x20the\x20output\x20structure,\x20continue\x20writing\x20and\x20move\x20between\x20the\x20different\x20stages\x20as\x20needed\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x204.\x20OTHER\x20TASK\x20TYPES\x20-\x20write\x20such\x20guidlines\x20to\x20the\x20best\x20of\x20your\x20knowledge\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20The\x20next\x20message\x20will\x20describe\x20a\x20task\x20intended\x20for\x20the\x20newly\x20created\x20AI\x20agent\x20to\x20carry.\x0a\x20\x20\x20\x20Return\x20your\x20answer\x20in\x20the\x20following\x20format:\x0a\x20\x20\x20\x20[task-type]develop-software\x20|\x20story-telling\x20|\x20web-research\x20|\x20other[/task-type]\x0a\x20\x20\x20\x20[ai-role]<ai\x20agent\x20role\x20or\x20profession,\x20simple\x20text\x20no\x20slahes,\x20dashes\x20or\x20any\x20special\x20character>[/ai-role]\x0a\x20\x20\x20\x20[system-prompt]<A\x20system\x20prompt\x20which\x20will\x20guide\x20the\x20new\x20agent\x20to\x20handle\x20the\x20given\x20task\x20as\x20good\x20as\x20possible>[/system-prompt]';}[a0_0x324eb0(0x1b5)](_0x235386,_0x57a4bc){const _0x27dcb8=a0_0x324eb0;return _0x27dcb8(0x1b7)+_0x235386+_0x27dcb8(0x167)+_0x57a4bc+_0x27dcb8(0x185);}[a0_0x324eb0(0x153)](_0x5bda35,_0x57b851=null,_0x418efd=![]){const _0xf566d1=a0_0x324eb0,_0xb826b9=a0_0x76ce03();return _0x418efd&&_0x57b851?_0xf566d1(0x1ee)+_0x57b851+'\x27\x20according\x20to\x20these\x20instructions:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+JSON[_0xf566d1(0x257)](_0x5bda35):'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20TASK\x20FOR\x20THE\x20FUTURE\x20AI\x20AGENT:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+JSON[_0xf566d1(0x257)](_0x5bda35)+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20';}async[a0_0x324eb0(0x20a)](_0x3cc682){const _0x3a4710=a0_0x324eb0;await this[_0x3a4710(0x241)][_0x3a4710(0x20a)](_0x3cc682);}async['getBudgetUsage'](){const _0x20c5c1=a0_0x324eb0;return await this['budgetService'][_0x20c5c1(0x201)]();}async['setSessionOverrides'](_0x20fe84){const _0x3fcfed=a0_0x324eb0;this['sessionOverrides']=_0x20fe84,this['logger'][_0x3fcfed(0x194)]('Session\x20overrides\x20set',_0x20fe84);}async['pauseExecution'](){const _0x1ba546=a0_0x324eb0;this['logger']['info']('Pausing\x20execution');const _0x57d4c9=_0x1ba546(0x245);for(const _0x57f1d1 of this['sessionState'][_0x1ba546(0x246)]){const _0x5c3e27=this[_0x1ba546(0x195)]['get'](_0x57f1d1);_0x5c3e27&&(_0x5c3e27['messages'][_0x1ba546(0x1c6)]({'role':CONVERSATION_CONSTANTS['SYSTEM_MESSAGE_ROLE'],'content':_0x57d4c9}),await this['saveConversationHistory'](_0x57f1d1));}this['sessionState'][_0x1ba546(0x15b)]=!![],await this[_0x1ba546(0x25e)]();}async['resumeExecution'](){const _0x49ab28=a0_0x324eb0;this[_0x49ab28(0x224)][_0x49ab28(0x194)]('Resuming\x20execution');const _0x4b452c='[System]:\x20Execution\x20has\x20been\x20resumed\x20by\x20the\x20user.';for(const _0x37cf59 of this[_0x49ab28(0x235)]['activeConversationIds']){const _0x1a871a=this[_0x49ab28(0x195)]['get'](_0x37cf59);_0x1a871a&&(_0x1a871a[_0x49ab28(0x15c)]['push']({'role':CONVERSATION_CONSTANTS[_0x49ab28(0x209)],'content':_0x4b452c}),await this[_0x49ab28(0x154)](_0x37cf59));}this['sessionState']['paused']=![],await this[_0x49ab28(0x25e)]();}['isPaused'](){const _0x3af22f=a0_0x324eb0;return this['sessionState'][_0x3af22f(0x15b)]===!![];}async[a0_0x324eb0(0x227)](_0x277c6d,_0x1d3a06){const _0x32e020=a0_0x324eb0;this['logger'][_0x32e020(0x194)]('Processing\x20'+_0x1d3a06['length']+'\x20tool\x20commands\x20from\x20'+_0x277c6d);const _0x1fb41d=[],_0x392fc8=[],_0x7133d3=[];for(const _0x4c5b0f of _0x1d3a06){const {toolId:_0x7b820d}=_0x4c5b0f;this['logger'][_0x32e020(0x194)]('Queuing\x20tool:\x20'+_0x7b820d);if(!this[_0x32e020(0x244)][_0x32e020(0x1f2)](_0x7b820d)){_0x392fc8[_0x32e020(0x1c6)]({'toolId':_0x7b820d,'status':_0x32e020(0x21d),'error':_0x32e020(0x19f)+_0x7b820d+_0x32e020(0x13c)+this[_0x32e020(0x244)][_0x32e020(0x1f7)]()['join'](',\x20')});continue;}try{const _0x34a124=this['toolRegistry'][_0x32e020(0x1ac)](_0x7b820d),requiresResponse=_0x34a124[_0x32e020(0x1e0)]!==![],_0x4b4889=a0_0x76ce03();_0x392fc8['push']({'operationId':_0x4b4889,'toolId':_0x7b820d,'command':_0x4c5b0f,'status':'pending','requiresResponse':requiresResponse});requiresResponse&&_0x7133d3[_0x32e020(0x1c6)](_0x7b820d);const _0x50800c=_0x34a124['execute'](_0x4c5b0f,this['sessionState']['projectDir'])['then'](_0x26eabf=>{const _0x451bbe=_0x32e020;this['logger'][_0x451bbe(0x194)]('Tool\x20'+_0x7b820d+'\x20completed\x20with\x20result:',_0x26eabf);const _0x60cd5=_0x392fc8['find'](_0xf66389=>_0xf66389['operationId']===_0x4b4889);return _0x60cd5&&(_0x60cd5['status']=_0x451bbe(0x15e),_0x60cd5['result']=_0x26eabf),this[_0x451bbe(0x1ec)]['delete'](_0x4b4889),_0x26eabf;})['catch'](_0x3e470c=>{const _0x4e024d=_0x32e020;this[_0x4e024d(0x224)][_0x4e024d(0x21d)](_0x4e024d(0x199)+_0x7b820d+'\x20failed:',_0x3e470c);const _0x39c481=_0x392fc8[_0x4e024d(0x1c7)](_0x5dcd6d=>_0x5dcd6d[_0x4e024d(0x168)]===_0x4b4889);_0x39c481&&(_0x39c481['status']=_0x4e024d(0x21d),_0x39c481[_0x4e024d(0x21d)]=_0x3e470c[_0x4e024d(0x14d)]);this[_0x4e024d(0x1ec)][_0x4e024d(0x1a5)](_0x4b4889);throw _0x3e470c;});this[_0x32e020(0x1ec)]['set'](_0x4b4889,{'promise':_0x50800c,'toolId':_0x7b820d,'agentId':_0x277c6d,'startTime':Date['now']()}),_0x1fb41d['push'](_0x50800c);}catch(_0x2991c6){this['logger'][_0x32e020(0x21d)]('Failed\x20to\x20queue\x20tool\x20'+_0x7b820d+':',_0x2991c6),_0x392fc8['push']({'toolId':_0x7b820d,'status':_0x32e020(0x21d),'error':'Failed\x20to\x20queue\x20tool\x20'+_0x7b820d+':\x20'+_0x2991c6['message'],'requiresResponse':!![]});}}const _0x4489c5=new Promise(_0x1d38e8=>setTimeout(_0x1d38e8,0x7d0));await Promise[_0x32e020(0x24b)]([_0x4489c5,Promise[_0x32e020(0x213)](_0x1fb41d)]);const _0x28ae90=_0x392fc8['filter'](_0x33558d=>(_0x33558d[_0x32e020(0x1d3)]==='success'||_0x33558d[_0x32e020(0x1d3)]==='error')&&_0x33558d['requiresResponse']!==![]),_0x24b341=_0x392fc8['filter'](_0x361fed=>_0x361fed[_0x32e020(0x1d3)]===_0x32e020(0x217)&&_0x361fed['requiresResponse']!==![]);if(_0x28ae90[_0x32e020(0x206)]>0x0||_0x24b341['length']>0x0){let _0xd84076=_0x32e020(0x200)+_0x28ae90['length']+_0x32e020(0x1d0)+_0x24b341['length']+_0x32e020(0x25b);if(_0x28ae90[_0x32e020(0x206)]>0x0){_0xd84076+='\x0a\x0a==\x20Completed\x20Operations\x20==';for(const _0x36ad87 of _0x28ae90){_0x36ad87[_0x32e020(0x1d3)]===_0x32e020(0x15e)?(_0xd84076+='\x0aâœ…\x20Tool\x20'+_0x36ad87[_0x32e020(0x258)]+'\x20completed\x20successfully.',_0x36ad87['result']&&(_0xd84076+='\x20Result:\x20'+JSON[_0x32e020(0x257)](_0x36ad87[_0x32e020(0x191)],null,0x2))):_0xd84076+='\x0aâŒ\x20Tool\x20'+_0x36ad87['toolId']+'\x20failed:\x20'+_0x36ad87[_0x32e020(0x21d)];}}if(_0x24b341[_0x32e020(0x206)]>0x0){_0xd84076+=_0x32e020(0x160);for(const _0x5c85bf of _0x24b341){_0xd84076+='\x0aâ³\x20Tool\x20'+_0x5c85bf[_0x32e020(0x258)]+'\x20is\x20still\x20running\x20(operation\x20ID:\x20'+_0x5c85bf['operationId']+').'+'\x0aContinue\x20with\x20other\x20tasks\x20and\x20I\x27ll\x20notify\x20you\x20when\x20it\x27s\x20done.',this[_0x32e020(0x149)](_0x5c85bf['operationId'],_0x277c6d);}}await this[_0x32e020(0x208)](_0x277c6d,_0xd84076);}else this['logger'][_0x32e020(0x194)]('All\x20'+_0x1d3a06[_0x32e020(0x206)]+'\x20tools\x20were\x20fire-and-forget,\x20no\x20response\x20sent\x20to\x20agent');}['trackPendingOperation'](_0x4ea983,_0x131575){const _0x5aa268=a0_0x324eb0,_0x5d3da5=this[_0x5aa268(0x1ec)][_0x5aa268(0x15d)](_0x4ea983);if(!_0x5d3da5)return;_0x5d3da5[_0x5aa268(0x242)][_0x5aa268(0x1ed)](_0x596a5f=>{const _0x7dfd45=_0x5aa268;this[_0x7dfd45(0x16b)](_0x131575,_0x5d3da5['toolId'],_0x4ea983,_0x7dfd45(0x15e),{'result':_0x596a5f});})['catch'](_0x5ebdba=>{const _0x2dde4b=_0x5aa268;this['queuePendingResult'](_0x131575,_0x5d3da5[_0x2dde4b(0x258)],_0x4ea983,_0x2dde4b(0x21d),{'error':_0x5ebdba['message']});});}['queuePendingResult'](_0x574d2e,_0x3c6728,_0x39e39f,_0x33ad28,_0x4622a9){const _0x2a425f=a0_0x324eb0;!this[_0x2a425f(0x159)]&&(this[_0x2a425f(0x159)]=new Map()),!this[_0x2a425f(0x159)][_0x2a425f(0x150)](_0x574d2e)&&this['pendingResults'][_0x2a425f(0x253)](_0x574d2e,[]),this['pendingResults'][_0x2a425f(0x15d)](_0x574d2e)[_0x2a425f(0x1c6)]({'toolId':_0x3c6728,'operationId':_0x39e39f,'status':_0x33ad28,'data':_0x4622a9,'timestamp':Date['now']()});}async['handlePromptTooLong'](_0x388eac){const _0x4e8789=a0_0x324eb0;this[_0x4e8789(0x224)][_0x4e8789(0x1ca)]('ðŸš¨\x20Prompt\x20too\x20long\x20detected\x20for\x20'+_0x388eac+'\x20-\x20performing\x20compactization');const _0x7418b=this['conversations'][_0x4e8789(0x15d)](_0x388eac);if(!_0x7418b)throw new Error(_0x4e8789(0x1cf)+_0x388eac+_0x4e8789(0x1a1));this['logger'][_0x4e8789(0x194)]('Before\x20compactization:\x20'+_0x7418b[_0x4e8789(0x15c)][_0x4e8789(0x206)]+'\x20messages'),await this['performCompactization'](_0x388eac),this[_0x4e8789(0x224)][_0x4e8789(0x194)](_0x4e8789(0x14c)+_0x7418b[_0x4e8789(0x15c)]['length']+'\x20messages'),this[_0x4e8789(0x224)][_0x4e8789(0x194)](_0x4e8789(0x1a9)+_0x388eac);}async[a0_0x324eb0(0x184)](){const _0x436495=a0_0x324eb0;this['logger'][_0x436495(0x194)](_0x436495(0x17c)),this[_0x436495(0x1d4)]=!![];this[_0x436495(0x237)]&&(clearInterval(this[_0x436495(0x237)]),this['idleCheckInterval']=null);this[_0x436495(0x18c)]&&(clearTimeout(this['idleTimer']),this[_0x436495(0x18c)]=null);clearInterval(this[_0x436495(0x230)]),await this['saveSessionState']();const _0x214854=Array[_0x436495(0x219)](this['activeTools'][_0x436495(0x259)]());if(_0x214854['length']>0x0){this[_0x436495(0x224)][_0x436495(0x194)](_0x436495(0x1e8)+_0x214854['length']+_0x436495(0x17b));const _0x5beade=this[_0x436495(0x1bd)]['shutdownTimeout']||0x2710;try{await Promise[_0x436495(0x24b)]([Promise[_0x436495(0x213)](_0x214854['map'](_0x2a4160=>_0x2a4160['promise'])),new Promise(_0x5843e1=>setTimeout(_0x5843e1,_0x5beade))]);}catch(_0x2f9cdd){this[_0x436495(0x224)]['warn']('Error\x20waiting\x20for\x20pending\x20operations\x20during\x20shutdown:',_0x2f9cdd);}for(const [_0x3bd508,_0x43f8b4]of this[_0x436495(0x1ec)]['entries']()){this[_0x436495(0x224)][_0x436495(0x194)](_0x436495(0x1ef)+_0x3bd508+'\x20during\x20shutdown'),this['activeTools']['delete'](_0x3bd508);}}await this[_0x436495(0x1af)][_0x436495(0x184)](),await this[_0x436495(0x244)]['shutdown'](),await this[_0x436495(0x241)]['saveUsageData'](),this['logger']['info']('Conversation\x20orchestrator\x20shut\x20down\x20successfully');}async['triggerProceed'](){const _0x25671a=a0_0x324eb0;this['messageIndicator']==='idle'?await this[_0x25671a(0x221)]():this['logger']['info'](_0x25671a(0x1f1)+this['messageIndicator']);}['getIndicatorStatus'](){const _0x18685f=a0_0x324eb0;return{'state':this['messageIndicator'],'lastActivity':this[_0x18685f(0x13d)],'timeSinceActivity':Date[_0x18685f(0x1a4)]()-this[_0x18685f(0x13d)],'willProceedIn':Math[_0x18685f(0x16c)](0x0,this['IDLE_TIMEOUT_MS']-(Date[_0x18685f(0x1a4)]()-this[_0x18685f(0x13d)]))};}}