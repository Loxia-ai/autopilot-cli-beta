function a0_0x3732(){const _0x2291b2=['z2v0qNvKz2v0vxnHz2u','icHTB2rLoIa','AwrSzunOzwnRsw50zxj2ywW','y29UDMvYC2f0Aw9UsgLZDg9YEq','z3jLzw4','BwvZC2fNzuLUzgLJyxrVCG','ignVBxbSzxrLzcb3AxrOihjLC3vSDdO','ChvZAa','w3rVB2XZlwnVBw1HBMrZxsb0ywDZihrVihvZzsb0B29SCYWGB3iGDgHLigzVBgXVD2LUzYbZEw50yxGGDg8GAw50zxjHy3qGD2L0Acb0AguGC3vWzxj2AxnPBMCGAhvTyw4GDxnLCJOGw3bYB21WDcbUyw1LpsjZB21LihbYB21WDcbKAxnWBgf5ihrPDgXLiL08ChjVBxb0ig1LC3nHz2u+w29WDgLVBL08B3b0Aw9UideGDgv4Dd5Bl29WDgLVBL0Gw29WDgLVBL08B3b0Aw9UidiGDgv4Dd5Bl29WDgLVBL0UlI5Bl3bYB21WDf0k','u3vTBwfYEsbMywLSDxjLigrLDgfPBhm6','DxrMltG','Bg9Nz2vY','B3jPz2LUywXtExn0zw1qCM9TChrZ','zxH0CMfJDfn0CNvJDhvYzwq','seLtve9swv9tvuzgsvG','y29UDgvUDc1TB2rPzMLLCG','z2v0vg9VBhnezxnJCMLWDgLVBG','q3jPDgLJywWGzxjYB3i6ienHBM5VDcbJCMvHDguGy29UDMvYC2f0Aw9Uihn1Bw1HCNKGzM9Yia','mtm4nZC0mgXmELjpBG','ignVBNzLCNnHDgLVBIbjrcbTyxbWAw5NCW','sgfUzgXPBMCGDxnLCIbWCM9TChq6ia','Dg9VBenVBw1HBMrZ','DgfNugfYC2vYu2vYDMLJzq','zxHLy3v0zq','y29UDMvYC2f0Aw9UCW','C3rHCNruAw1L','nde1wgjute9h','ugf1C2LUzYbLEgvJDxrPB24','rMfPBgvKihrVihnHDMuGC2vZC2LVBIbZDgf0ztOG','C2v0u2vZC2LVBK92zxjYAwrLCW','D2fPDgLUzY1MB3iTywDLBNq','DxbKyxrLq29UDMvYC2f0Aw9Uu3LZDgvTuhjVBxb0','zw5Oyw5Jzvn5C3rLBvbYB21WDa','ChjVy2vZC1rVB2XdB21Tyw5KCW','C3rYAw5N','surmrv9usu1ft1vux01t','C2v0qNvKz2v0tgLTAxq','w1n5C3rLBv06iev4zwn1DgLVBIbOyxmGyMvLBIbYzxn1BwvKigj5ihrOzsb1C2vYlG','ChjVBwLZzq','ufjptvbux0vor0Loruvsx0Le','cUkDJcbuB29Sia','v2fPDgLUzYbMB3iG','AxnxywL0Aw5NrM9YvxnLCKLUChv0','q2fUBM90igrPC3bSyxKGChjVBxb0ihrVihvZzxi6ie5VihbYB21WDcbOyw5KBgvYigLZihjLz2LZDgvYzwqUia','C2v0uhjVAMvJDerPCMvJDg9YEq','CM9Szq','lwHPC3rVCNKUANnVBG','Dg9mB2nHBgvmB3DLCKnHC2u','tw9KAwz5Aw5NignVBNrLBNqGAw46ia','u2vZC2LVBIbZDgf0zsbZyxzLzcbZDwnJzxnZzNvSBhKGD2L0AcbPBMrLEcbMAwXLCW','igzYB20G','Aw5PDgLHBgL6zq','AgfZvg9VBa','vg9VBcbLEgvJDxrPB24GCMvWB3j0icG','B3b0Aw9UCW','Cgf1C2vfEgvJDxrPB24','Cgf1C2vK','uMvZDw1PBMCGy29UDMvYC2f0Aw9UigzYB206ia','CMvJAxbPzw50','4PYfievYCM9YlxrYAwDNzxjLzcbJB21Wywn0AxPHDgLVBIbJB21WBgv0zwqGzM9Yia','rMLYC3qGAM9IlwrVBMuGCMvJzwL2zwqUifjLCxvLC3rPBMCGDMvYAwzPy2f0Aw9UignVBMzPCM1HDgLVBI4UlG','C3vIC3rYAw5N','nZm3mtu4yLD3EuTc','Dgv4Da','C3LZDgvTuhjVBxb0','DMfSDwvZ','rM91BMqGyw5KigXVywrLzcbJB252zxjZyxrPB24GAgLZDg9YEsbMB3iG','AgfZ','mZq5mJy4nuTAAKvJAG','DgHLBG','tM8GBwfRzxiGywDLBNqGzM91BMqGDg8GC2vUzcb1C2vYigLUChv0ihrV','C3rHDhvZ','iL08Ew91CIbJB250zw50pLSVBwvZC2fNzv0UcGOGicaGicaGienOywXSzw5Nzsb0AguGywDLBNqSigHLihDPBgWGDhj5ihrVignVDMvYigvHy2GGC3vIAMvJDc9ZDgfNzsb3AxrOAw4GysbZAw5NBguGBwvZC2fNzsWGyxnRigHPBsb0BYbZDxbWBhKGzgv0ywLSCYWGy2HHBgXLBMDLigHPCYbHC3n1Bxb0Aw9UCYWGyw5Kig1HA2uGC3vYzsbOzsDZig5VDcbMB3jNzxr0Aw5NigfUEsbPBxbVCNrHBNqGyxnWzwn0ig9MihrOzsb0yxnRlaOGicaGicaGie9UzsbZCgvJAwzPyYbLEgfTCgXLig9MigeGBwf0DgvYig9MigHPz2GGAw1WB3j0yw5JzsbPCYb0AguGDMvYAwzPy2f0Aw9Uig9MihrOzsb0yxnRignVBxbSzxrPB24GAw4GysbSyxjNzsb2yxjPzxr5ig9MihDHExmUcIaGicaGicaG','CMvTB3zLuhjVBxb0u3LUDgf4rNjVBvn5C3rLBvbYB21WDa','AM9PBG','Bg9N','xtOG','q29UDMvYC2f0Aw9UihjLC3vTzwqGC3vJy2vZC2z1BgX5lIbby3rPDMuGy29UDMvYC2f0Aw9UCZOG','icbHBMqGDgHLihn1Bw1HCNKGC2vYDMLJzsbPCYb1BMf2ywLSywjSzs4','yMvNAw4','C2vUzfbYB2nLzwrnzxnZywDL','C2v0','Dw5RBM93BG','BgfUz3vHz2vnB2rLBefNzw50swq','ywn0AxzLq29UDMvYC2f0Aw9UswrZ','BMfTzq','DNnJB2rL','Dg9mB3DLCKnHC2u','CMfJzq','C2vTAs1HDxrV','AxnqyxvZzwq','C3rHCNrjzgXLtw9UAxrVCMLUzW','zNjVBq','ChjVBxb0','BwTKAxi','cGPuB29SCYbHDMfPBgfIBguGyxjLoGO','vxnLCIbZzwXLy3rLzdOG','z2v0sw1Hz2vezxnJCMLWDgLVBG','vw5YzwnVDMvYywjSzsbLCNjVCIbKDxjPBMCGy29UDMvYC2f0Aw9Uihn1Bw1HCNKUia','CMvZDwX0','B3jPz2LUywXfCNjVCG','zMXVB3i','DxbKyxrLu3LZDgvTuhjVBxb0C0zVCK1Vzgu','C2XPy2u','mvrvy0P3ta','4PQG77IpicaQkKPpqIbdt01qtevusu9oifzfuKLgsunbveLptIbsrvfvsvjfrcOQiokAOo+4JWOkww91igrLy2XHCMvKihrOzsbQB2iGy29TCgXLDguGD2L0AdOGiG','y2f0y2G','8j+sOsbzB3vYihbYB2PLy3qGzMLSzxmGAgf2zsbIzwvUihnHDMvKigfUzcbJyw4GyMuGCMvZDw1Lzc4','y3jLyxrLu3vTBwfYEvbYB21WDa','CMvZzxrkB2jeB25Lq29UzMLYBwf0Aw9Uu3rHDgu','zMLUza','w0zYB20G','zxjYB3i','DxnLCG','y29TCgXLDgvkB2i','iIbMB3iGChjVBxb0oIa','rMfPBgvKihrVihf1zxvLihrVB2WG','jYbUB3qGzM91BMqUief2ywLSywjSzsb0B29SCZOG','icHMAwXLoIa','y3jLyxrLq29UDMvYC2f0Aw9U','icaGicbSB3HPysbTB2rPzNKGlI95B3vYlxbYB2PLy3qGiMnVBNrPBNvLigrLDMvSB3bTzw50iG','teXnihnLCNzPy2uGBM90igf2ywLSywjSzsbMB3iGAw1Hz2uGzgvZy3jPChrPB24','ihbLBMrPBMCGB3bLCMf0Aw9UCYb0BYbJB21WBgv0zsbVCIb0Aw1LB3v0','cKnVBNrPBNvLihDPDgGGB3rOzxiGDgfZA3mGyw5KieKNBgWGBM90Awz5ihLVDsb3AgvUigL0j3mGzg9Uzs4','DxbKyxrLtwvZC2fNzuLUzgLJyxrVCG','EwvSBg93','ChjVAMvJDerPCG','q29UDMvYC2f0Aw9UihjLC3vTzwq','ywn0AxzLvg9VBhm','otaYntu2oujYD2vwvG','cLrOyw5RihLVDsbMB3iGy2HVB3nPBMCGtg94AweU','CMvHzezPBgu','C2f2zvnLC3nPB25tDgf0zq','vw5RBM93BG','iIaTpIaI','cKnVBNrLEhq6ia','y29UDMvYC2f0Aw9UswrnyxbWAw5N','su5ervHFrKLmru5btuu','C2vUzePVyKrVBMvdB25MAxjTyxrPB25qCM9TChq','AgfUzgXLuhjVBxb0vg9Vtg9UzW','ms4WlJa','q29UDMvYC2f0Aw9UigHPC3rVCNKGC2f2zwqGzM9Yia','z2v0uhjVBxb0rw5NAw5LzxjtExn0zw1qCM9TChq','C2L6zq','q2fUy2vSBgLUzYbVCgvYyxrPB24G','icaZlIbpCIbTB2rPzNKGzxHPC3rPBMCGy29UDgvUDdO','yxnZAxn0yw50','q29UDMvYC2f0Aw9Uia','ihrVia','Aw50zxjHy3rPB25nB2rL','tg9HzgvKignVBNzLCNnHDgLVBIbOAxn0B3j5igzVCJOG','vg8GCMuTzw5HyMXLlcbZD2L0y2GGDg8GAw50zxjHy3rPDMuGBw9KzsbVCIbTB2rPzNKGzw5Oyw5Jzvn5C3rLBvbYB21WDcGPicOV','ugXLyxnLihvZzsbBBwvZC2fNzsb0BZ0IlI4UiL0GDgfNCYb0BYbZzw5KigeGBwvZC2fNzsb0BYbHBM90AgvYigfNzw50lca','qwXSia','ChjVy2vZC01LC3nHz2u','AgfUzgXLvxnLCLbYB21WDa','jYbHy2nVCMrPBMCGDg8GDgHLC2uGAw5ZDhj1y3rPB25ZoGOGicaGicaGicaGica','q29UDMvYC2f0Aw9UihjLC3vTzwqGD2L0Ag91DcbJB21WBgv0zsbOAxn0B3j5','q2fUBM90ihnLBMqGy29UzMLYBwf0Aw9UihbYB21WDcaTig5Vig1HA2vYigfNzw50ieLeigzVDw5K','C3LZDgvT','z2v0tgLZDe9MqxzHAwXHyMXLqwDLBNrjzhm','C2f2zunVBNzLCNnHDgLVBKHPC3rVCNK','BM93','BgfZDefJDgL2Axr5vgLTzq','Aw5MBW','C3bSAxq','Dg9VBeLK','C2HVDwXKqMXVy2TnzxnZywDL','y3jLyxrPBMCGBMv3ignVBNrLBNq','cIaGica','cIbuAgLZihnLy3rPB24GD2LSBcbIzsbZzw50igfWyxj0igzYB20GDgHLihrVB2WGAw5ZDhj1y3rPB25ZlG','u1rbvevFreLsx05btuu','Dg9ju09tDhjPBMC','zgvMyxvSDa','z2v0','x2DLDezPBgvtywzLq29UDMvYC2f0Aw9Uswq','D2fYBG','icaGicbSB3HPysbKBYaIy29UDgLUDwuGDgHLihbYzxzPB3vZihDVCMSGAw4GDgHPCYbKAxjLy3rVCNKI','cIaGicaGicaGicaGifrbu0SGrK9sifrirsbgvvrvuKuGquKGquDftLq6cIaGicaGicaGicaGia','D2HPDgu','zxHPDa','q3jPDgLJywWGy29TCgfJDgL6yxrPB24GzMfPBhvYztO','z2v0sw5KAwnHDg9YrgLZCgXHEq','CMvWzwf0','ugvYzM9YBwLUzYbJB21Wywn0AxPHDgLVBIbMB3iGy29UDMvYC2f0Aw9Uia','DhjPz2DLCLbYB2nLzwq','BwvZC2fNzxm','y29UDMvYC2f0Aw9UlwLUzgv4lMPZB24','lIbPzIb5B3uGD2LZAcb0BYbZzw5KigeGBwvZC2fNzsb0BYb0AguGDxnLCIb3Ag8GCMvXDwvZDgvKihrOAxmGDgfZAYb1C2uGDgHLifTWCM9TChrDihrVB2WGC3LUDgf4','sw5KzxGGzMLSzsbZyxzLzcb0BZOG','rxjYB3iGD2fPDgLUzYbMB3iGCgvUzgLUzYbVCgvYyxrPB25Zigr1CMLUzYbZAhv0zg93BJO','Aw5PDgLHBgL6zvDPDgHqCM9Qzwn0','yxv0BW','sM9IignVBxbSzxrLzdOG','q29TCgfJDgL6yxrPB24Gy29TCgXLDgvKigzVCIa','C2v0v2fPDgLUz0zVCLvZzxjjBNb1Da','ig1LC3nHz2vZ','qwz0zxiGy29TCgfJDgL6yxrPB246ia','C2H1DgrVD24','uM91DgLUzYbTzxnZywDLigzYB20G','AxntAhv0DgLUz0rVD24','CgvUzgLUz1jLC3vSDhm','C2f2zvvZywDLrgf0yq','rxjYB3iGC2vUzgLUzYbHDxrVlxbYB2nLzwqGBwvZC2fNztO','Dg9tDhjPBMC','oIbbz2vUDcbKB2vZig5VDcbLEgLZDa','zNjVBuvUDhjPzxm','mZnZv1rgDLe','x3nHBML0AxPLq29UDMvYC2f0Aw9UswrgB3jgAwXL','ugXLyxnLigLTCgXLBwvUDcb0AguGB25vC2vYuhjVBxb0igHHBMrSzxiGAw4GDgHLienmss4','BgvUz3rO','CMvNAxn0zxjcDwLSDeLUvg9VBhm','Dhj5tg9HzenVBNzLCNnHDgLVBKHPC3rVCNLcEvbHDhrLCM4','mJrZCwvlEva','ls1dB252zxjZyxrPB24GqMvJyw1LieXVBMCSifrOAxmGugfYDcbiyxmGqMvLBIbtDw1TyxjPEMvKls0','B25vC2vYuhjVBxb0','D3jPDgvgAwXL','y29UzMLN','CMvK','CgvYzM9YBunVBxbHy3rPEMf0Aw9U','BgfZDc1ZzxnZAw9UlMPZB24','mJGWy2vzwgnS','odm1nZG5mNjor0PlEa','CgfYC2u','BwvZC2fNzq','u1Ltvevnx01fu1nbr0vFuK9mrq','AwrSzq','x2HHBMrSzvn1Bw1HCNLgywLSDxjL','CxvLDwvqzw5KAw5NuMvZDwX0','BgXTu2vYDMLJzq','yNvKz2v0u2vYDMLJzq','z2v0u3vTBwfYEq','C2vZC2LVBLn0yxrL','twvZC2fNzsbIBg9JA2vKic0GD2fPDgLUzYbMB3iGDxnLCIbPBNb1Da','igrVzxmGBM90igv4Axn0lcbJyw5UB3qGCM91DguGBwvZC2fNzq','zw50CMLLCW','AgfUzgXLvxnLCLbYB21WDejHC2vKt25nB2rL','CMvWBgfJzq','y3jLyxrLsw5PDgLHBfbYB21WDezVCKvUz2LUzwvY','mZu0mdb1vfnPs0y','AwrSzvrPBwvY','AgfUzgXLsM9Irg9UzujHC2vKt25nB2rL','uMvZDw1PBMCGzxHLy3v0Aw9U','C2v0sw50zxjHy3rPB25nB2rL','q09nuefdveLAqvrjt05Fru5ex1bfuKnftLrbr0u','Aw5JBhvKzxm','yxr0zw1WDenVDw50','B3bLCMf0Aw9Uswq','w1n5C3rLBsbbDxrVlvjLC3bVBNnLxtOG','C2v0teXnu2vYDMLJzq','zgvIDwC','8j+AQcbqCM9TChqGDg9VigXVBMCGzgv0zwn0zwqGzM9Yicr7y29UDMvYC2f0Aw9Uswr9ic0GCgvYzM9YBwLUzYbJB21Wywn0AxPHDgLVBG','ns4Gw1vtrviGufjptvbuuYbesvnbqKXfrcbjtIbbvvrpie1prevDia','8j+uHcbutYbdt05usu5vrsbzt1vsifDpuKS6','CgvUzgLUzW','icaXlIbvC2uGDgHLihjLC3vTzsbJB21Tyw5KihrVignVBNrPBNvLihrOAxmGy29UDMvYC2f0Aw9UoG','BwfW','BgfUz3vHz2uTBw9KzwW','B25kB2jeB25L','8j+AQcbvtLjfq09wrvjbqKXfievsuK9s','cIaGicaGicaGvgHLigzVBgXVD2LUzYb0zxH0igLZigeGCgfYDcbVzIbHignVBNzLCNnHDgLVBI4GsxqGAxmGDMvYEsbSB25NlIakicaGicaGicbszxbSywnLihrOAxmGCgfYDcbVzIb0AguGy29UDMvYC2f0Aw9UihDPDgGGysbJB25JAxnLigfSDgvYBMf0AxzLihDOAwXLihbYzxnLCNzPBMCGA2v5igLUzM9YBwf0Aw9UlcbKzwnPC2LVBNmSigfUzcbJB250zxH0cIaGicaGicaGqwDLBNqGC2HVDwXKigjLigfIBguGDg8GChjVy2vLzcb3AxrOigL0CYb0yxnRigj5ihvZAw5NihrOAxmGC2HVCNrLCIbZDw1Tyxj5igLUC3rLywqGB2yGDgHLig9YAwDPBMfSigXVBMCGy29UDMvYC2f0Aw9UlGOGicaGicaGia','igr1CMLUzYbZAhv0zg93BG','y29UDMvYC2f0Aw9Ulq','ifjLC3vSDdOG','nJqZotHyCxL6u3e','yMvNAw4GBw9KAwzPy2f0Aw9Uig9MignVBNrLBNqGAw4G','tuflrvjFquDftLrFrevgqvvmvf9jra','twfWCgvKignVBNzLCNnHDgLVBIbjrcbMB3iGzMLSzsbVCgvYyxrPB25ZoIaI','lIbnzxnZywDLCYbYzwr1y2vKigzYB20G','Aw50zxjHy3rPDMu','zMLSDgvY','C2vZC2LVBI1ZDgf0zs5QC29U','AM9Irg9UzunVBMzPCM1HDgLVBLn0yxrL','BwfRzxjbz2vUDeLK','BwfRzxiTywDLBNq','q29TCgfJDgL6yxrPB246ia','z3jHEq','8j+tPcbtzw5KAw5Nigf1Dg8TChjVy2vLzcbTzxnZywDLlI4U','C3rYAw5NAwz5','vLmGq29KzsbTzxnZywDLihbYB2nLC3nLzcbZDwnJzxnZzNvSBhK','C2vUze1LC3nHz2vuB0nVBNzLCNnHDgLVBG','ignVBxbSzxrLzcbZDwnJzxnZzNvSBhKU','cGO9psbqzw5KAw5Nie9WzxjHDgLVBNmGpt0','ihDPDgGGAw5ZDhj1y3rPB25ZoIa','y3LHBG','C3vJy2vZCW','CMvNAxn0zxjqCM9TChruB29mB25NsgfUzgXLCG','Dg9VBfjLz2LZDhj5','zgvSzxrL','yMXVy2TLze1LC3nHz2vZ','CYbLBgfWC2vKks4Gt3bLCMf0Aw9UieLeoIa','Bwf4','C2vZC2LVBK92zxjYAwrLCW','u1vntufswv9nqvjlrvjFqKvhsu4','ig5VDcbMB3vUzcbMB3iGy29TCgfJDgL6yxrPB24','y29UDgv4DfDPBMrVDW','cIaGicaGicaGicaGia','q291BgqGBM90igzPBMqGAgLZDg9YEsbMB3iG','y29UDgvUDa','q2fUBM90ihnLBMqGBwvZC2fNzsb0BYa','z2v0tgfUz3vHz2vnB2rLBfn5C3rLBvbYB21WDa','Dg9VBenOzwnRsw50zxj2ywW','DxbKyxrLq29UDMvYC2f0Aw9U'];a0_0x3732=function(){return _0x2291b2;};return a0_0x3732();}const a0_0xccece6=a0_0x53eb;(function(_0x2f4cc8,_0x30ae51){const _0x5a7a73=a0_0x53eb,_0x1da0b1=_0x2f4cc8();while(!![]){try{const _0x53c741=parseInt(_0x5a7a73(0x229))/0x1*(parseInt(_0x5a7a73(0x1ff))/0x2)+-parseInt(_0x5a7a73(0x19a))/0x3*(-parseInt(_0x5a7a73(0x16f))/0x4)+-parseInt(_0x5a7a73(0x1db))/0x5*(parseInt(_0x5a7a73(0x181))/0x6)+-parseInt(_0x5a7a73(0x205))/0x7*(parseInt(_0x5a7a73(0x167))/0x8)+-parseInt(_0x5a7a73(0x113))/0x9+-parseInt(_0x5a7a73(0x1d3))/0xa+-parseInt(_0x5a7a73(0x161))/0xb*(-parseInt(_0x5a7a73(0x170))/0xc);if(_0x53c741===_0x30ae51)break;else _0x1da0b1['push'](_0x1da0b1['shift']());}catch(_0x465dd1){_0x1da0b1['push'](_0x1da0b1['shift']());}}}(a0_0x3732,0xcb3ec));import{TagParser}from'../utilities/tagParser.js';import{TagParserService}from'../services/tagParserService.js';import a0_0x26c772 from'path';function a0_0x53eb(_0xfdc3b3,_0x3b8c72){const _0x3732d3=a0_0x3732();return a0_0x53eb=function(_0x53eb01,_0x1a3ef2){_0x53eb01=_0x53eb01-0x103;let _0x2fbf82=_0x3732d3[_0x53eb01];if(a0_0x53eb['ONjEay']===undefined){var _0x67b638=function(_0x26c772){const _0x3458e1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x17b38b='',_0x2b2bed='';for(let _0x282a50=0x0,_0x3523cc,_0x4c30bc,_0x940c6=0x0;_0x4c30bc=_0x26c772['charAt'](_0x940c6++);~_0x4c30bc&&(_0x3523cc=_0x282a50%0x4?_0x3523cc*0x40+_0x4c30bc:_0x4c30bc,_0x282a50++%0x4)?_0x17b38b+=String['fromCharCode'](0xff&_0x3523cc>>(-0x2*_0x282a50&0x6)):0x0){_0x4c30bc=_0x3458e1['indexOf'](_0x4c30bc);}for(let _0x29e473=0x0,_0x38c584=_0x17b38b['length'];_0x29e473<_0x38c584;_0x29e473++){_0x2b2bed+='%'+('00'+_0x17b38b['charCodeAt'](_0x29e473)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2b2bed);};a0_0x53eb['gxLZdp']=_0x67b638,_0xfdc3b3=arguments,a0_0x53eb['ONjEay']=!![];}const _0x532910=_0x3732d3[0x0],_0x3e616e=_0x53eb01+_0x532910,_0x1d298c=_0xfdc3b3[_0x3e616e];return!_0x1d298c?(_0x2fbf82=a0_0x53eb['gxLZdp'](_0x2fbf82),_0xfdc3b3[_0x3e616e]=_0x2fbf82):_0x2fbf82=_0x1d298c,_0x2fbf82;},a0_0x53eb(_0xfdc3b3,_0x3b8c72);}import{promises as a0_0x3458e1}from'fs';import{v4 as a0_0x17b38b}from'uuid';import{LLMService}from'../services/llmService.js';import{ToolRegistry}from'../services/toolRegistry.js';import{BudgetService}from'../services/budgetService.js';import{displayOnly}from'../utilities/stringOps.js';import a0_0x2b2bed from'chalk';export const CONVERSATION_CONSTANTS={'STATE_DIR_NAME':'.loxia-state','SESSION_STATE_FILENAME':a0_0xccece6(0x1a1),'INDEX_FILENAME':a0_0xccece6(0x14d),'LAST_SESSION_FILENAME':a0_0xccece6(0x16e),'HISTORY_SUFFIX':a0_0xccece6(0x1ef),'SYSTEM_MESSAGE_ROLE':'system','USER_MESSAGE_ROLE':'user','ASSISTANT_MESSAGE_ROLE':a0_0xccece6(0x124),'COMPACTIZATION_THRESHOLD_PERCENTAGE':0.7,'COMPACTIZATION_OUTPUT_RESERVE_PERCENTAGE':0.4,'COMPACTIZATION_BEGIN_PERCENTAGE':0.15,'COMPACTIZATION_END_PERCENTAGE':0.35,'MIN_MESSAGES_TO_KEEP':0x2,'SUMMARY_MARKER_BEGIN':a0_0xccece6(0x168),'SUMMARY_MARKER_END':'--End\x20of\x20Summary--','TOOL_CALL_FREQUENCY_CHECK_MS':0x2710,'TOOL_STATUS_UPDATE_INTERVAL_MS':0x2710,'DEFAULT_CONTEXT_WINDOW_SIZE':0x186a0,'MAKER_AGENT_DEFAULT_ID':a0_0xccece6(0x1a4),'LANGUAGE_MODEL_ID':a0_0xccece6(0x193),'PROMPT_ENGINEER_ID':'prompt-engineer'};export class ConversationOrchestrator{constructor(_0x282a50,_0x3523cc){const _0x4df632=a0_0xccece6;this[_0x4df632(0x16b)]=_0x282a50,this[_0x4df632(0x1cc)]=_0x3523cc,this[_0x4df632(0x1b3)]=[],this[_0x4df632(0x1d7)]=new TagParserService(_0x3523cc),this['llmService']=new LLMService(_0x282a50,_0x3523cc),this['llmService'][_0x4df632(0x1b0)](_0x4c30bc=>this[_0x4df632(0x11d)](_0x4c30bc)),this['toolRegistry']=new ToolRegistry(_0x282a50,_0x3523cc,this['llmService']),this['budgetService']=new BudgetService(_0x282a50,_0x3523cc),this[_0x4df632(0x1d9)]=new Map(),this[_0x4df632(0x112)]=new Map(),this['conversationIdMapping']=new Map(),this[_0x4df632(0x127)]=_0x4df632(0x19f),this['originalSystemPrompts']=new Map(),this[_0x4df632(0x17a)]={'projectDir':null,'makerAgentId':null,'languageModelAgentId':null,'activeConversationIds':[],'conversationHistory':{}},this['jobDoneConfirmationState']={'pending':![],'message':null,'attemptCount':0x0,'timestamp':null},this[_0x4df632(0x1bf)]=setInterval(()=>this['checkToolExecutionStatus'](),CONVERSATION_CONSTANTS['TOOL_CALL_FREQUENCY_CHECK_MS']),this['messageIndicator']=_0x4df632(0x174),this['lastActivityTime']=Date[_0x4df632(0x134)](),this['idleTimer']=null,this[_0x4df632(0x1e4)]=0x1388,this[_0x4df632(0x15a)]=![],this[_0x4df632(0x21c)]();}async[a0_0xccece6(0x151)](_0x940c6){const _0x1c93de=a0_0xccece6;this[_0x1c93de(0x17a)]['projectDir']=_0x940c6,this[_0x1c93de(0x1b1)]['setProjectDirectory'](_0x940c6),this['logger']['info']('Conversation\x20orchestrator\x20initialized\x20with\x20project:\x20'+_0x940c6);}async['initializeWithProject'](_0x29e473){const _0x1f5db6=a0_0xccece6;this['sessionState']['projectDir']=_0x29e473,this[_0x1f5db6(0x1b1)][_0x1f5db6(0x1ed)](_0x29e473),this[_0x1f5db6(0x1cc)]['info']('Conversation\x20orchestrator\x20initialized\x20with\x20project:\x20'+_0x29e473);}[a0_0xccece6(0x1ed)](_0x38c584){const _0x47f828=a0_0xccece6;this['sessionState'][_0x47f828(0x110)]=_0x38c584,this['toolRegistry']&&this['toolRegistry'][_0x47f828(0x1ed)](_0x38c584),this[_0x47f828(0x1cc)][_0x47f828(0x136)]('Updated\x20conversation\x20orchestrator\x20project\x20directory:\x20'+_0x38c584);}async[a0_0xccece6(0x1f4)](){const _0x47f2fe=a0_0xccece6;this[_0x47f2fe(0x1b1)]=new ToolRegistry(this['config'],this[_0x47f2fe(0x1cc)]),await this[_0x47f2fe(0x1b1)][_0x47f2fe(0x165)]();}['updateProjectDirectory'](_0x1c6c00){const _0x45b41a=a0_0xccece6;this[_0x45b41a(0x1ed)](_0x1c6c00);}[a0_0xccece6(0x21c)](){this['idleCheckInterval']=setInterval(()=>{const _0xaedae=a0_0x53eb;if(this['isShuttingDown'])return;if(this['interactionMode']==='interactive')return;const _0x4eab68=Date[_0xaedae(0x134)](),_0x5eda4b=_0x4eab68-this['lastActivityTime'];this[_0xaedae(0x1c6)]===_0xaedae(0x174)&&_0x5eda4b>=this['IDLE_TIMEOUT_MS']&&this[_0xaedae(0x17a)]['makerAgentId']&&(this[_0xaedae(0x1cc)]['info']('🔄\x20Auto-proceeding\x20after\x203\x20seconds\x20of\x20idle\x20time'),this[_0xaedae(0x211)]());},0x1f4);}[a0_0xccece6(0x155)](_0x1daad3){const _0x5e42e3=a0_0xccece6,_0x30d75d=this[_0x5e42e3(0x1eb)];this[_0x5e42e3(0x1eb)]=_0x1daad3;if(_0x1daad3&&!_0x30d75d)console['log'](a0_0x2b2bed[_0x5e42e3(0x1ae)]('🔒\x20Interactive\x20mode:\x20Blocking\x20automatic\x20messages'));else!_0x1daad3&&_0x30d75d&&(console['log'](a0_0x2b2bed[_0x5e42e3(0x1c5)]('🔓\x20Interactive\x20mode:\x20Resuming\x20message\x20flow')),this[_0x5e42e3(0x1b3)]=[]);}[a0_0xccece6(0x139)](_0x46e837,_0x3727a3){const _0x3e2e85=a0_0xccece6;if(this[_0x3e2e85(0x127)]!=='interactive'||!this['isWaitingForUserInput'])return![];if(_0x3727a3['includes']('[User\x20input]:'))return![];if(_0x3727a3['includes']('(system\x20message)'))return![];return!![];}['updateMessageIndicator'](_0x3f7392){const _0x7acce5=a0_0xccece6,_0x5eb358=this['messageIndicator'];this[_0x7acce5(0x1c6)]=_0x3f7392,this[_0x7acce5(0x135)]=Date['now']();this[_0x7acce5(0x182)]&&(clearTimeout(this[_0x7acce5(0x182)]),this['idleTimer']=null);if(_0x5eb358!==_0x3f7392){const _0x49701d=this[_0x7acce5(0x148)](_0x3f7392);console['log'](a0_0x2b2bed[_0x7acce5(0x1a6)](_0x49701d+'\x20'+_0x3f7392));}}['getIndicatorDisplay'](_0x42b137){const _0x42ce33=a0_0xccece6;switch(_0x42b137){case _0x42ce33(0x1df):return a0_0x2b2bed['yellow']('⏳');case'waiting-for-llm':return a0_0x2b2bed['blue']('🤖');case'idle':return a0_0x2b2bed[_0x42ce33(0x1c5)]('✓');default:return'•';}}async['sendProceedMessage'](){const _0x3a1e6b=a0_0xccece6;if(!this['sessionState'][_0x3a1e6b(0x1a3)]||this[_0x3a1e6b(0x15a)])return;try{this['updateMessageIndicator']('waiting-for-agent'),console['log'](a0_0x2b2bed[_0x3a1e6b(0x1a6)](_0x3a1e6b(0x1a7)));const _0x426ee6=new Date()['toTimeString']()[_0x3a1e6b(0x137)]('\x20')[0x0];await this[_0x3a1e6b(0x1aa)](this[_0x3a1e6b(0x17a)][_0x3a1e6b(0x1a3)],'('+_0x426ee6+'\x20system\x20message:)\x20proceed.\x20If\x20stuck\x20for\x20too\x20long\x20use\x20tools\x20or\x20perform\x20operations\x20to\x20effectively\x20continue\x20the\x20task.');}catch(_0x1465ff){this[_0x3a1e6b(0x1cc)][_0x3a1e6b(0x231)](_0x3a1e6b(0x15d),_0x1465ff),this[_0x3a1e6b(0x10e)](_0x3a1e6b(0x174));}}[a0_0xccece6(0x185)](_0x19c6dd){const _0x342fe0=a0_0xccece6,_0x523005=this[_0x342fe0(0x127)];this['interactionMode']=_0x19c6dd,this['logger'][_0x342fe0(0x136)]('Interaction\x20mode\x20changed:\x20'+_0x523005+'\x20->\x20'+_0x19c6dd);if(_0x19c6dd==='interactive'&&_0x523005!=='interactive')this[_0x342fe0(0x155)](!![]);else _0x19c6dd!==_0x342fe0(0x19f)&&_0x523005==='interactive'&&this[_0x342fe0(0x155)](![]);this[_0x342fe0(0x227)](_0x19c6dd);}['getBlockingStatus'](){const _0x30b319=a0_0xccece6;return{'interactionMode':this[_0x30b319(0x127)],'isWaitingForUserInput':this[_0x30b319(0x1eb)],'blockedMessagesCount':this['blockedMessages']['length'],'indicatorState':this[_0x30b319(0x1c6)]};}['updateSystemPromptsForMode'](_0x1b6a59){const _0xe27c92=a0_0xccece6;for(const [_0x191de7,_0x4967b6]of this[_0xe27c92(0x1d9)]){this['updateConversationSystemPrompt'](_0x191de7,_0x1b6a59);}}['updateConversationSystemPrompt'](_0x5c005a,_0x40f38a){const _0x448d1b=a0_0xccece6,_0x215440=this['conversations']['get'](_0x5c005a);if(!_0x215440)return;!this['originalSystemPrompts'][_0x448d1b(0x204)](_0x5c005a)&&this[_0x448d1b(0x1cd)][_0x448d1b(0x212)](_0x5c005a,_0x215440['systemPrompt']);const _0x5b0d7=this[_0x448d1b(0x1cd)]['get'](_0x5c005a);let _0x166fcb;_0x40f38a==='auto'?_0x166fcb=this[_0x448d1b(0x20a)](_0x5b0d7):_0x166fcb=_0x5b0d7,_0x215440[_0x448d1b(0x201)]=_0x166fcb,this[_0x448d1b(0x177)]&&this['llmService'][_0x448d1b(0x1e0)]&&this[_0x448d1b(0x177)][_0x448d1b(0x1e0)](_0x5c005a,_0x166fcb),this[_0x448d1b(0x1cc)]['debug']('Updated\x20system\x20prompt\x20for\x20'+_0x5c005a+_0x448d1b(0x1c2)+_0x40f38a+')');}['removePromptSyntaxFromSystemPrompt'](_0x3e46a3){const _0x20b330=a0_0xccece6;let _0x56c03d=_0x3e46a3[_0x20b330(0x17f)](/5\.\s*If you need user input or a decision[^6]*/,_0x20b330(0x18e));return _0x56c03d=_0x56c03d['replace'](/\[prompt[^\]]*\][^[]*\[\/prompt\]/g,''),_0x56c03d+='\x0a\x0a/*\x20NOTE:\x20Prompt\x20syntax\x20removed\x20for\x20auto\x20mode.\x20'+_0x20b330(0x129),_0x56c03d;}[a0_0xccece6(0x1e1)](_0x45c8ca,_0x46762c,_0x125153,_0x579452){const _0x346db9=a0_0xccece6;let _0x5307e6=_0x45c8ca;return!_0x5307e6[_0x346db9(0x1f0)]()[_0x346db9(0x187)]('tools\x20available\x20are')&&(_0x5307e6+=_0x346db9(0x220)+_0x46762c),!_0x5307e6['toLocaleLowerCase']()['includes']('using\x20the\x20[message]\x20tag\x20with\x20the\x20following\x20ids')&&(_0x5307e6+='\x0a\x0aYou\x20are\x20expected\x20to\x20consult\x20your\x20LLM\x20agent\x20using\x20the\x20[message]\x20tag\x20with\x20the\x20following\x20ids:\x20'+_0x579452['join'](',\x20')+_0x346db9(0x13c)),!_0x5307e6[_0x346db9(0x187)]('conversation\x20rules\x20are')&&(_0x5307e6+='\x0a\x0aConversation\x20rules\x20are:\x0a\x20\x20\x20\x201.\x20When\x20sending\x20a\x20message\x20to\x20another\x20participant,\x20use\x20[message\x20to=\x22participant_id\x22]\x20format\x0a\x20\x20\x20\x202.\x20When\x20using\x20tools,\x20wrap\x20commands\x20in\x20[tools-commands]\x20and\x20[/tools-commands]\x20tags\x0a\x20\x20\x20\x203.\x20Each\x20tool\x20command\x20should\x20be\x20wrapped\x20in\x20[tool\x20id=\x22tool_id\x22]\x20and\x20[/tool]\x20tags\x0a\x20\x20\x20\x204.\x20You\x20must\x20follow\x20the\x20specific\x20format\x20for\x20each\x20tool\x20as\x20described\x20in\x20the\x20tools\x20section\x0a\x20\x20\x20\x205.\x20If\x20you\x20need\x20user\x20input\x20or\x20a\x20decision,\x20use\x20the\x20[prompt]\x20format(NOTICE:\x20at\x20least\x202\x20option\x20tags\x20are\x20recommended):\x20[prompt\x20name=\x22prompt\x20display\x20title\x22]the\x20message\x20the\x20user\x20will\x20see[option]option\x201\x20text[/option]\x20[option]option\x202\x20text[/option]...more\x20options\x20if\x20needed...[/prompt]\x0a\x20\x20\x20\x206.\x20when\x20you\x20have\x20finished\x20your\x20task\x20including\x20verification\x20and\x20validation\x20of\x20actual\x20content\x20as\x20written\x20on\x20disk\x20as\x20compared\x20to\x20derived\x20specs,\x20or\x20you\x27re\x20not\x20getting\x20any\x20progress\x20use\x20the\x20[job-done]<your\x20message>[/job-done]\x20special\x20instruction\x20tag.\x20preferably\x20in\x20its\x20own\x20message\x20(no\x20other\x20instructions).\x0a\x20\x20\x20\x207.\x20IMPORTANT:\x20The\x20first\x20time\x20you\x20declare\x20[job-done],\x20the\x20system\x20will\x20ask\x20you\x20to\x20verify\x20your\x20work\x20using\x20testing\x20tools.\x20Only\x20after\x20you\x20confirm\x20completion\x20with\x20a\x20second\x20[job-done]\x20will\x20the\x20task\x20be\x20marked\x20as\x20complete.\x0a\x20\x20\x20\x208.\x20never\x20announce\x20job-done\x20before\x20you\x20have\x20completed\x20all\x20stages\x20of\x20the\x20development\x20process,\x20tested\x20and\x20re-validated\x20your\x20solution\x20by\x20observing\x20the\x20created\x20files\x20and\x20artifacts.\x0a\x20\x20\x20\x20Your\x20Project\x20Root\x20Directory\x20Is:\x20'+_0x125153+_0x346db9(0x13b)),_0x5307e6;}[a0_0xccece6(0x162)](_0x4e7a85){const _0xbd9d2d=a0_0xccece6;if(!_0x4e7a85||typeof _0x4e7a85!==_0xbd9d2d(0x1e3))return'conversation-'+Date['now']();let _0x3e9320=_0x4e7a85[_0xbd9d2d(0x17f)](/\s+/g,'-')['replace'](/[^a-zA-Z0-9_-]/g,'')[_0xbd9d2d(0x17f)](/-+/g,'-')['replace'](/^-+|-+$/g,'')[_0xbd9d2d(0x218)]();if(!_0x3e9320)_0x3e9320=_0xbd9d2d(0x198)+Date['now']();else _0x3e9320['length']>0x32&&(_0x3e9320=_0x3e9320[_0xbd9d2d(0x1fe)](0x0,0x28)+'-'+Date['now']()[_0xbd9d2d(0x15e)]()['slice'](-0x8));return _0x3e9320;}[a0_0xccece6(0x141)](_0x1a3572){const _0x55e2bc=a0_0xccece6;if(this['conversationIdMapping']['has'](_0x1a3572))return this[_0x55e2bc(0x11a)][_0x55e2bc(0x140)](_0x1a3572);const _0x491a96=this[_0x55e2bc(0x162)](_0x1a3572);return this[_0x55e2bc(0x11a)]['set'](_0x1a3572,_0x491a96),_0x491a96!==_0x1a3572&&this[_0x55e2bc(0x1cc)][_0x55e2bc(0x136)](_0x55e2bc(0x19d)+_0x1a3572+_0x55e2bc(0x118)+_0x491a96+'\x22'),_0x491a96;}async['initializeServices'](){const _0x5e5b38=a0_0xccece6;this['llmService']&&this['toolRegistry']&&(this[_0x5e5b38(0x1b1)][_0x5e5b38(0x18b)](this[_0x5e5b38(0x177)]),this['logger'][_0x5e5b38(0x136)]('LLM\x20service\x20connected\x20to\x20tool\x20registry\x20for\x20vision\x20capabilities'));}async[a0_0xccece6(0x222)](_0x28117d,_0x599f18,_0x2b3143={}){const _0x8a2195=a0_0xccece6;if(!this[_0x8a2195(0x177)])throw new Error(_0x8a2195(0x10b));return await this[_0x8a2195(0x177)]['getImageDescription'](_0x28117d,_0x599f18,_0x2b3143);}async[a0_0xccece6(0x17e)](_0x2b3465,_0x2bed21){const _0x3d0a58=a0_0xccece6;this['logger'][_0x3d0a58(0x136)](_0x3d0a58(0x1d5)+_0x2bed21[_0x3d0a58(0x216)]+_0x3d0a58(0x1f3)+_0x2b3465+'\x20(mode:\x20'+this['interactionMode']+')');switch(this[_0x3d0a58(0x127)]){case'auto':const _0x49783d=_0x2bed21[_0x3d0a58(0x1f7)]&&_0x2bed21[_0x3d0a58(0x1f7)][_0x3d0a58(0x164)]>0x0?_0x2bed21[_0x3d0a58(0x1f7)][0x0]:'Continue\x20automatically';this[_0x3d0a58(0x1cc)][_0x3d0a58(0x136)]('AUTO\x20mode:\x20Auto-selected\x20\x22'+_0x49783d+_0x3d0a58(0x105)+_0x2bed21['name']),await this[_0x3d0a58(0x1aa)](_0x2b3465,_0x3d0a58(0x18a)+_0x49783d);break;case _0x3d0a58(0x21a):if(this[_0x3d0a58(0x169)]){const _0x216070=await this[_0x3d0a58(0x169)](_0x2bed21[_0x3d0a58(0x216)],_0x2bed21[_0x3d0a58(0x200)],_0x2bed21[_0x3d0a58(0x1f7)]);await this['sendMessageToConversation'](_0x2b3465,'User\x20selected:\x20'+_0x216070);}else await this['sendMessageToConversation'](_0x2b3465,_0x3d0a58(0x1ec)+'Please\x20implement\x20the\x20onUserPrompt\x20handler\x20in\x20the\x20CLI.');break;case _0x3d0a58(0x19f):default:if(this[_0x3d0a58(0x169)]){const _0x1c3ca5=await this[_0x3d0a58(0x169)](_0x2bed21[_0x3d0a58(0x216)],_0x2bed21['text'],_0x2bed21['options']);await this['sendMessageToConversation'](_0x2b3465,_0x3d0a58(0x221)+_0x1c3ca5);}else await this['sendMessageToConversation'](_0x2b3465,'Cannot\x20display\x20prompt\x20to\x20user:\x20No\x20prompt\x20handler\x20is\x20registered.\x20'+_0x3d0a58(0x163));break;}}async['handleJobDoneBasedOnMode'](_0x230bf0){const _0x3cd82c=a0_0xccece6;this['logger']['info']('Job\x20done\x20received:\x20'+_0x230bf0+_0x3cd82c(0x1c2)+this[_0x3cd82c(0x127)]+')');if(!this['jobDoneConfirmationState']['pending']){this['jobDoneConfirmationState']['pending']=!![],this['jobDoneConfirmationState'][_0x3cd82c(0x172)]=_0x230bf0,this['jobDoneConfirmationState']['attemptCount']=0x1,this[_0x3cd82c(0x1a2)]['timestamp']=new Date()['toISOString'](),this['logger']['info'](_0x3cd82c(0x1fd)),await this[_0x3cd82c(0x11c)](_0x230bf0);return;}else this[_0x3cd82c(0x1a2)][_0x3cd82c(0x188)]++,this[_0x3cd82c(0x1cc)]['info']('Job\x20confirmation\x20received\x20(attempt\x20'+this['jobDoneConfirmationState']['attemptCount']+').\x20Proceeding\x20with\x20job\x20completion...'),this['resetJobDoneConfirmationState'](),await this[_0x3cd82c(0x104)](_0x230bf0);}async[a0_0xccece6(0x11c)](_0x4c08c1){const _0xa256f2=a0_0xccece6,_0x365cf8=_0xa256f2(0x22a)+_0x4c08c1+'\x22\x0a\x0aBefore\x20I\x20can\x20mark\x20this\x20job\x20as\x20finished,\x20please\x20verify\x20you\x20have\x20completed\x20ALL\x20of\x20the\x20following:\x0a\x0a🔍\x20**TESTING\x20&\x20VALIDATION:**\x0a✅\x20Used\x20testing\x20tools\x20to\x20verify\x20functionality\x20(terminal,\x20dep-resolver,\x20import-analyzer)\x0a✅\x20Ran\x20the\x20application/code\x20to\x20ensure\x20it\x20works\x20as\x20expected\x0a✅\x20Checked\x20for\x20and\x20resolved\x20any\x20errors,\x20warnings,\x20or\x20issues\x0a✅\x20Verified\x20all\x20dependencies\x20are\x20properly\x20installed\x20and\x20compatible\x0a\x0a📁\x20**FILE\x20VERIFICATION:**\x0a✅\x20Reviewed\x20actual\x20file\x20contents\x20on\x20disk\x20to\x20confirm\x20implementation\x20matches\x20specifications\x0a✅\x20Ensured\x20all\x20required\x20files\x20have\x20been\x20created\x20and\x20are\x20in\x20correct\x20locations\x0a✅\x20Validated\x20that\x20code\x20structure\x20and\x20organization\x20follows\x20best\x20practices\x0a\x0a🎯\x20**COMPLETENESS\x20CHECK:**\x0a✅\x20All\x20original\x20requirements\x20have\x20been\x20fully\x20implemented\x0a✅\x20Edge\x20cases\x20and\x20error\x20handling\x20have\x20been\x20considered\x0a✅\x20Documentation/comments\x20are\x20adequate\x20where\x20needed\x0a✅\x20No\x20TODO\x20items\x20or\x20incomplete\x20sections\x20remain\x0a\x0aIf\x20you\x20have\x20verified\x20ALL\x20of\x20the\x20above\x20and\x20are\x20confident\x20the\x20job\x20is\x20truly\x20complete,\x20declare\x20**[job-done]**\x20again\x20to\x20confirm.\x0a\x0aIf\x20you\x20discover\x20any\x20issues\x20or\x20incomplete\x20work\x20during\x20this\x20verification,\x20please\x20continue\x20working\x20to\x20address\x20them\x20before\x20declaring\x20job-done\x20again.\x0a\x0a**Remember:**\x20Quality\x20over\x20speed.\x20A\x20thorough\x20final\x20check\x20ensures\x20a\x20professional\x20deliverable.';this['sessionState'][_0xa256f2(0x1a3)]?await this[_0xa256f2(0x1aa)](this['sessionState'][_0xa256f2(0x1a3)],_0x365cf8):this['logger'][_0xa256f2(0x231)](_0xa256f2(0x130));}async['completeJob'](_0x4fcd40){const _0x4724c6=a0_0xccece6;this[_0x4724c6(0x1cc)]['info']('Job\x20completion\x20confirmed\x20by\x20agent.\x20Proceeding\x20with\x20job\x20completion.');if(this[_0x4724c6(0x194)])await this['onJobDone'](_0x4fcd40);else switch(this[_0x4724c6(0x127)]){case _0x4724c6(0x152):this[_0x4724c6(0x1cc)][_0x4724c6(0x136)](_0x4fcd40+_0x4724c6(0x114)),process[_0x4724c6(0x146)](0x0);break;case'semi-auto':this['logger'][_0x4724c6(0x136)](_0x4724c6(0x153)+_0x4fcd40),this[_0x4724c6(0x1cc)][_0x4724c6(0x136)]('SEMI-AUTO\x20mode:\x20Task\x20completed.\x20Press\x20Ctrl+I\x20to\x20enter\x20interactive\x20mode\x20or\x20exit.');break;case _0x4724c6(0x19f):default:this['logger']['info']('Job\x20completed:\x20'+_0x4fcd40);break;}}[a0_0xccece6(0x22e)](){this['jobDoneConfirmationState']={'pending':![],'message':null,'attemptCount':0x0,'timestamp':null};}['registerJobDoneHandler'](_0x51e831){const _0x384e8f=a0_0xccece6;this[_0x384e8f(0x194)]=_0x51e831;}async['processAgentMessage'](_0x129330,_0x1bb821){const _0x29e661=a0_0xccece6;this['logger']['info']('Processing\x20message\x20from\x20'+_0x129330);const _0x495795=this[_0x29e661(0x1d7)]['parseMessage'](_0x1bb821);_0x495795['toolCommands']&&_0x495795['toolCommands'][_0x29e661(0x164)]>0x0&&await this[_0x29e661(0x1e2)](_0x129330,_0x495795[_0x29e661(0x1d6)]);_0x495795[_0x29e661(0x21e)]&&await this['handleUserPromptBasedOnMode'](_0x129330,_0x495795[_0x29e661(0x21e)]);if(_0x495795['jobDone']!=null){await this[_0x29e661(0x183)](_0x495795['jobDone']);return;}if(_0x495795['recipient']){const _0x43b3da=_0x495795[_0x29e661(0x1fb)],_0x26a0ea=_0x495795[_0x29e661(0x1bc)];await this['routeMessageToAgent'](_0x129330,_0x43b3da,_0x26a0ea),this[_0x29e661(0x1cc)][_0x29e661(0x136)]('['+displayOnly(_0x129330,0xa)+'\x20->\x20'+displayOnly(_0x43b3da,0xa)+_0x29e661(0x20d)+displayOnly(_0x26a0ea,0xff)+'\x0a');}!_0x495795['recipient']&&(!_0x495795['toolCommands']||_0x495795[_0x29e661(0x1d6)]['length']===0x0)&&!_0x495795['prompt']&&!_0x495795['jobDone']&&await this[_0x29e661(0x1aa)](_0x129330,'Your\x20message\x20didn\x27t\x20contain\x20any\x20tool\x20commands,\x20a\x20message\x20to\x20another\x20agent,\x20or\x20a\x20prompt.\x20'+_0x29e661(0x12a)+_0x29e661(0x1c9));}['parsePromptEngineerResponse'](_0x99ceea){const _0x3ed21b=a0_0xccece6,_0x46f4ae=CONVERSATION_CONSTANTS[_0x3ed21b(0x19c)],_0x5cca01='You\x20are\x20an\x20AI\x20assistant\x20tasked\x20with\x20completing\x20the\x20following:\x20';try{const _0x434e42=TagParser[_0x3ed21b(0x1ce)](_0x99ceea,{'role':'ai-role','systemPrompt':'system-prompt'});let _0x4bdd96=_0x434e42['role'];_0x4bdd96?_0x4bdd96=_0x4bdd96[_0x3ed21b(0x17f)](/[\\/]/g,''):(_0x4bdd96=_0x46f4ae,this['logger'][_0x3ed21b(0x142)]('Failed to parse role from prompt engineer response, using default'));let _0x27e529=_0x434e42[_0x3ed21b(0x201)];return!_0x27e529&&(_0x27e529=''+_0x5cca01+_0x99ceea,this[_0x3ed21b(0x1cc)]['warn']('Failed to parse system prompt from prompt engineer response, using generated one')),{'role':_0x4bdd96,'systemPrompt':_0x27e529};}catch(_0x1b0468){return this[_0x3ed21b(0x1cc)][_0x3ed21b(0x231)]('Error\x20parsing\x20prompt\x20engineer\x20response:',_0x1b0468),{'role':_0x46f4ae,'systemPrompt':''+_0x5cca01+_0x99ceea};}}async['startNewConversation'](_0x42508e,_0x37c76c,_0x44cee0,_0x1707c0){const _0x156b88=a0_0xccece6;this[_0x156b88(0x1cc)][_0x156b88(0x136)]('Starting\x20new\x20conversation\x20for\x20task:\x20'+_0x42508e),this['sessionState'][_0x156b88(0x110)]=_0x37c76c;const _0x124301=a0_0x26c772[_0x156b88(0x20b)](_0x37c76c,CONVERSATION_CONSTANTS['STATE_DIR_NAME']);await a0_0x3458e1[_0x156b88(0x21f)](_0x124301,{'recursive':!![]}),this[_0x156b88(0x17a)]={'projectDir':_0x37c76c,'makerAgentId':null,'languageModelAgentId':null,'activeConversationIds':[],'conversationHistory':{},'paused':![]};try{const _0x4b7cd5=this['getPromptEngineerSystemPrompt'](this['toolRegistry'][_0x156b88(0x1d1)]()),_0x2eafe1=CONVERSATION_CONSTANTS[_0x156b88(0x1e8)];await this['createConversation'](_0x2eafe1,_0x4b7cd5,[],_0x44cee0);const _0x3f6025=this['createInitialPromptForEngineer'](_0x42508e),_0x516a51=await this['sendMessageToConversation'](_0x2eafe1,_0x3f6025),{role:_0x24aedc,systemPrompt:_0xf8abe0}=this['parsePromptEngineerResponse'](_0x516a51),_0x327978=_0x24aedc||CONVERSATION_CONSTANTS['MAKER_AGENT_DEFAULT_ID'];this[_0x156b88(0x17a)]['makerAgentId']=_0x327978;const _0x317ebe=this['enhanceSystemPrompt'](_0xf8abe0,this['toolRegistry']['getToolsDescription'](),this['sessionState']['projectDir'],[CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID']]);await this[_0x156b88(0x109)](_0x327978,_0x317ebe,[],_0x44cee0);const _0x6cd9de=CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID'];this['sessionState'][_0x156b88(0x214)]=_0x6cd9de;const _0x351faa=this[_0x156b88(0x1be)](this[_0x156b88(0x1b1)][_0x156b88(0x1d1)](),_0x327978);await this[_0x156b88(0x109)](_0x6cd9de,_0x351faa,[],_0x44cee0),this['sessionState'][_0x156b88(0x215)]=[_0x327978,_0x6cd9de],await this[_0x156b88(0x116)](),await this['sendMessageToConversation'](_0x327978,_0x156b88(0x210)),this['logger']['info']('New\x20conversation\x20started\x20and\x20session\x20state\x20saved');}catch(_0x2a0e80){this[_0x156b88(0x1cc)]['error']('Error\x20starting\x20new\x20conversation:',_0x2a0e80);throw _0x2a0e80;}}async['loadConversationHistory'](_0x461b47,_0x1f492f){const _0x2c6411=a0_0xccece6,_0x5a2b7b=this['_getFileSafeConversationId'](_0x1f492f),_0x3caf5f=a0_0x26c772['join'](_0x461b47,''+_0x5a2b7b+CONVERSATION_CONSTANTS['HISTORY_SUFFIX']);try{const _0x4a6341=await a0_0x3458e1[_0x2c6411(0x115)](_0x3caf5f,_0x2c6411(0x1cb)),_0x18e533=JSON[_0x2c6411(0x171)](_0x4a6341),_0xfb768c=(_0x18e533[_0x2c6411(0x14c)]||[])['filter'](_0x2e7251=>_0x2e7251[_0x2c6411(0x1ee)]!=='system');await this[_0x2c6411(0x109)](_0x1f492f,_0x18e533['systemPrompt']||'Conversation\x20resumed',_0xfb768c),this[_0x2c6411(0x1cc)][_0x2c6411(0x136)](_0x2c6411(0x128)+_0x1f492f+_0x2c6411(0x108)+_0x5a2b7b+')');}catch(_0x1ccb83){this['logger']['warn']('Failed\x20to\x20load\x20conversation\x20history\x20for\x20'+_0x1f492f+':\x20'+_0x1ccb83[_0x2c6411(0x172)]),await this['tryLoadConversationHistoryByPattern'](_0x461b47,_0x1f492f);}}async[a0_0xccece6(0x166)](_0x1945b9,_0x227d01){const _0x93fafc=a0_0xccece6;try{const _0x419cff=await a0_0x3458e1['readdir'](_0x1945b9),_0x4e2920=_0x419cff[_0x93fafc(0x1a0)](_0x316c66=>_0x316c66['endsWith'](CONVERSATION_CONSTANTS[_0x93fafc(0x1cf)])),_0xac5466=this[_0x93fafc(0x141)](_0x227d01);for(const _0xc4d8b3 of _0x4e2920){const _0x4ac954=_0xc4d8b3['replace'](CONVERSATION_CONSTANTS[_0x93fafc(0x1cf)],'');if(_0x4ac954===_0xac5466||_0x4ac954['includes'](_0xac5466)||_0xac5466[_0x93fafc(0x187)](_0x4ac954))try{const _0xa28943=a0_0x26c772['join'](_0x1945b9,_0xc4d8b3),_0x2121f7=await a0_0x3458e1[_0x93fafc(0x115)](_0xa28943,'utf-8'),_0x2d9fd3=JSON['parse'](_0x2121f7),_0x544ab1=(_0x2d9fd3['messages']||[])[_0x93fafc(0x1a0)](_0x463eec=>_0x463eec['role']!==_0x93fafc(0x131));await this[_0x93fafc(0x109)](_0x227d01,_0x2d9fd3['systemPrompt']||_0x93fafc(0x111),_0x544ab1),this[_0x93fafc(0x1cc)]['info'](_0x93fafc(0x203)+_0x227d01+'\x20from\x20file\x20'+_0xc4d8b3);return;}catch(_0x3ef48b){this[_0x93fafc(0x1cc)][_0x93fafc(0x18c)]('Could\x20not\x20read/parse\x20'+_0xc4d8b3+':',_0x3ef48b);}}this[_0x93fafc(0x1cc)][_0x93fafc(0x142)](_0x93fafc(0x1bb)+_0x227d01+',\x20creating\x20empty\x20conversation'),await this['createConversation'](_0x227d01,'Conversation\x20resumed\x20without\x20history.');}catch(_0x55a265){this['logger']['error']('Error\x20searching\x20for\x20conversation\x20history:\x20'+_0x55a265['message']),await this[_0x93fafc(0x109)](_0x227d01,_0x93fafc(0x12f));}}async['saveConversationHistory'](_0x44ba4c){const _0x3b25d7=a0_0xccece6;if(!this[_0x3b25d7(0x17a)]['projectDir'])return;const _0x403003=this['conversations']['get'](_0x44ba4c);if(!_0x403003)return;const _0x2bf5f7=a0_0x26c772[_0x3b25d7(0x20b)](this['sessionState']['projectDir'],CONVERSATION_CONSTANTS[_0x3b25d7(0x13d)]);await a0_0x3458e1[_0x3b25d7(0x21f)](_0x2bf5f7,{'recursive':!![]});const _0x64127f={'id':_0x44ba4c,'originalId':_0x44ba4c,'systemPrompt':_0x403003['systemPrompt'],'messages':_0x403003['messages'],'contextWindow':_0x403003[_0x3b25d7(0x1b9)],'lastUpdated':new Date()[_0x3b25d7(0x13e)]()},_0x447180=this['_getFileSafeConversationId'](_0x44ba4c),_0x5a4ca0=a0_0x26c772[_0x3b25d7(0x20b)](_0x2bf5f7,''+_0x447180+CONVERSATION_CONSTANTS[_0x3b25d7(0x1cf)]);await a0_0x3458e1[_0x3b25d7(0x16a)](_0x5a4ca0,JSON['stringify'](_0x64127f,null,0x2),'utf-8'),this['logger'][_0x3b25d7(0x136)](_0x3b25d7(0x11f)+_0x44ba4c+'\x20(file:\x20'+_0x447180+')');}[a0_0xccece6(0x175)](_0x331c56,_0x4435be){const _0x5bcbf3=a0_0xccece6;this[_0x5bcbf3(0x116)]()['catch'](_0x339d61=>{const _0x127f89=_0x5bcbf3;this[_0x127f89(0x1cc)]['error']('Failed\x20to\x20save\x20session\x20state:',_0x339d61);}),this['logger'][_0x5bcbf3(0x231)](_0x5bcbf3(0x1d2)+_0x331c56+':',_0x4435be),console['log']('\x0a'+a0_0x2b2bed['red'](_0x5bcbf3(0x195))),console[_0x5bcbf3(0x20c)](a0_0x2b2bed[_0x5bcbf3(0x10f)]('━'[_0x5bcbf3(0x149)](0x3c))),console[_0x5bcbf3(0x20c)](a0_0x2b2bed[_0x5bcbf3(0x16c)]('✗\x20Failed\x20to\x20create\x20conversation\x20summary')),console[_0x5bcbf3(0x20c)](a0_0x2b2bed['gray']('\x20\x20This\x20can\x20happen\x20when\x20the\x20conversation\x20becomes\x20too\x20large')),console['log'](a0_0x2b2bed['gray'](_0x5bcbf3(0x20f))),console['log'](''),console[_0x5bcbf3(0x20c)](a0_0x2b2bed['bold'][_0x5bcbf3(0x1ae)](_0x5bcbf3(0x18f))),console[_0x5bcbf3(0x20c)](a0_0x2b2bed['white'](_0x5bcbf3(0x191))),console[_0x5bcbf3(0x20c)](a0_0x2b2bed['cyan']('\x20\x20\x20\x20\x20loxia\x20resume\x20./your-project-directory')),console['log'](''),console['log'](a0_0x2b2bed['white']('\x20\x202.\x20Or\x20start\x20a\x20new\x20session\x20asking\x20the\x20agent\x20to\x20continue:')),console[_0x5bcbf3(0x20c)](a0_0x2b2bed['cyan'](_0x5bcbf3(0x143))),console[_0x5bcbf3(0x20c)](''),console[_0x5bcbf3(0x20c)](a0_0x2b2bed[_0x5bcbf3(0x145)](_0x5bcbf3(0x123))),console['log'](a0_0x2b2bed['cyan'](_0x5bcbf3(0x10a))),console[_0x5bcbf3(0x20c)](''),console['log'](a0_0x2b2bed[_0x5bcbf3(0x1a6)](_0x5bcbf3(0x22c))),console[_0x5bcbf3(0x20c)](a0_0x2b2bed[_0x5bcbf3(0x10f)]('━'[_0x5bcbf3(0x149)](0x3c))),this['logger'][_0x5bcbf3(0x231)](_0x5bcbf3(0x1ca),{'conversationId':_0x331c56,'error':_0x4435be[_0x5bcbf3(0x172)],'errorType':_0x4435be['errorType']||_0x5bcbf3(0x213),'originalError':_0x4435be['originalError']||null});const _0x2165ec=new Error(_0x5bcbf3(0x223)+'Please\x20try\x20rerunning\x20the\x20CLI\x20with\x20do,\x20modify,\x20or\x20resume\x20commands\x20asking\x20the\x20agent\x20to\x20continue.');_0x2165ec['isUserFriendly']=!![],_0x2165ec[_0x5bcbf3(0x225)]=_0x4435be;throw _0x2165ec;}async[a0_0xccece6(0x116)](){const _0x2e6a88=a0_0xccece6;if(!this[_0x2e6a88(0x17a)]['projectDir']){this['logger'][_0x2e6a88(0x142)]('No\x20project\x20directory\x20set,\x20cannot\x20save\x20session\x20state');return;}try{const _0x4dc97c=a0_0x26c772['join'](this['sessionState']['projectDir'],CONVERSATION_CONSTANTS[_0x2e6a88(0x13d)]);await a0_0x3458e1[_0x2e6a88(0x21f)](_0x4dc97c,{'recursive':!![]}),this[_0x2e6a88(0x1cc)]['debug']('State\x20directory\x20created/verified:\x20'+_0x4dc97c);const _0x19ea0b=a0_0x26c772['join'](_0x4dc97c,CONVERSATION_CONSTANTS['SESSION_STATE_FILENAME']),_0x483ba7={'projectDir':this['sessionState'][_0x2e6a88(0x110)],'makerAgentId':this[_0x2e6a88(0x17a)][_0x2e6a88(0x1a3)],'languageModelAgentId':this['sessionState'][_0x2e6a88(0x214)],'activeConversationIds':this[_0x2e6a88(0x17a)][_0x2e6a88(0x215)]||[],'conversationHistory':this[_0x2e6a88(0x17a)][_0x2e6a88(0x1c4)]||{},'conversationIdMapping':Object['fromEntries'](this[_0x2e6a88(0x11a)]),'paused':this['sessionState'][_0x2e6a88(0x1f9)]||![],'lastUpdated':new Date()['toISOString'](),'version':'1.0.0'};await a0_0x3458e1['writeFile'](_0x19ea0b,JSON[_0x2e6a88(0x1a8)](_0x483ba7,null,0x2),_0x2e6a88(0x1cb)),this[_0x2e6a88(0x1cc)][_0x2e6a88(0x18c)]('Session\x20state\x20saved\x20to:\x20'+_0x19ea0b);const _0x238420=a0_0x26c772[_0x2e6a88(0x20b)](_0x4dc97c,CONVERSATION_CONSTANTS[_0x2e6a88(0x11b)]),_0x5c0b84={'projectDir':this['sessionState'][_0x2e6a88(0x110)],'lastUpdated':new Date()['toISOString'](),'makerAgentId':this[_0x2e6a88(0x17a)]['makerAgentId'],'languageModelAgentId':this['sessionState']['languageModelAgentId'],'activeConversationIds':this['sessionState']['activeConversationIds']||[],'conversationIdMapping':Object[_0x2e6a88(0x160)](this[_0x2e6a88(0x11a)]),'sessionStateFile':CONVERSATION_CONSTANTS['SESSION_STATE_FILENAME'],'version':_0x2e6a88(0x11e)};await a0_0x3458e1['writeFile'](_0x238420,JSON['stringify'](_0x5c0b84,null,0x2),'utf-8'),this[_0x2e6a88(0x1cc)]['debug'](_0x2e6a88(0x14f)+_0x238420);const _0x1f1bf3=a0_0x26c772[_0x2e6a88(0x20b)](_0x4dc97c,CONVERSATION_CONSTANTS['LAST_SESSION_FILENAME']),_0x276b70={'projectDir':this['sessionState'][_0x2e6a88(0x110)],'timestamp':new Date()['toISOString'](),'makerAgentId':this['sessionState'][_0x2e6a88(0x1a3)],'languageModelAgentId':this[_0x2e6a88(0x17a)]['languageModelAgentId'],'conversationIdMapping':Object[_0x2e6a88(0x160)](this['conversationIdMapping']),'version':'1.0.0'};await a0_0x3458e1['writeFile'](_0x1f1bf3,JSON[_0x2e6a88(0x1a8)](_0x276b70,null,0x2),'utf-8'),this['logger'][_0x2e6a88(0x18c)]('Last\x20session\x20file\x20saved\x20to:\x20'+_0x1f1bf3),this[_0x2e6a88(0x1cc)]['info'](_0x2e6a88(0x1f2));}catch(_0x3d7cd5){this['logger']['error']('Failed\x20to\x20save\x20session\x20state:',_0x3d7cd5);throw new Error(_0x2e6a88(0x1dd)+_0x3d7cd5[_0x2e6a88(0x172)]);}}async['resumeConversation'](_0x3f0055){const _0x5c0c6a=a0_0xccece6;this['logger'][_0x5c0c6a(0x136)](_0x5c0c6a(0x1fa)+_0x3f0055);try{const _0xfedd9f=a0_0x26c772['join'](_0x3f0055,CONVERSATION_CONSTANTS[_0x5c0c6a(0x13d)]);try{await a0_0x3458e1['access'](_0xfedd9f);}catch(_0x55b09c){throw new Error('State\x20directory\x20not\x20found:\x20'+_0xfedd9f+'.\x20This\x20may\x20not\x20be\x20a\x20valid\x20Loxia\x20project.');}const _0x15de52=a0_0x26c772[_0x5c0c6a(0x20b)](_0xfedd9f,CONVERSATION_CONSTANTS['SESSION_STATE_FILENAME']);let _0x1138dc;try{const _0x53a2c2=await a0_0x3458e1['readFile'](_0x15de52,_0x5c0c6a(0x1cb));_0x1138dc=JSON[_0x5c0c6a(0x171)](_0x53a2c2),_0x1138dc[_0x5c0c6a(0x11a)]&&(this[_0x5c0c6a(0x11a)]=new Map(Object['entries'](_0x1138dc[_0x5c0c6a(0x11a)])),this[_0x5c0c6a(0x1cc)][_0x5c0c6a(0x136)]('Restored\x20'+this[_0x5c0c6a(0x11a)][_0x5c0c6a(0x121)]+_0x5c0c6a(0x1d4)));}catch(_0x1c5c67){this[_0x5c0c6a(0x1cc)][_0x5c0c6a(0x142)]('Could\x20not\x20read\x20session\x20state\x20file:\x20'+_0x1c5c67[_0x5c0c6a(0x172)]);const _0x55673e=a0_0x26c772['join'](_0xfedd9f,CONVERSATION_CONSTANTS[_0x5c0c6a(0x11b)]);try{const _0x33035e=await a0_0x3458e1['readFile'](_0x55673e,'utf-8'),_0x3b5056=JSON[_0x5c0c6a(0x171)](_0x33035e);_0x1138dc={'projectDir':_0x3b5056[_0x5c0c6a(0x110)]||_0x3f0055,'makerAgentId':_0x3b5056['makerAgentId'],'languageModelAgentId':_0x3b5056[_0x5c0c6a(0x214)],'activeConversationIds':_0x3b5056['activeConversationIds']||[],'conversationHistory':{},'conversationIdMapping':_0x3b5056['conversationIdMapping']||{}},_0x3b5056['conversationIdMapping']&&(this[_0x5c0c6a(0x11a)]=new Map(Object['entries'](_0x3b5056['conversationIdMapping']))),this['logger']['info']('Recovered session state from index file');}catch(_0x14204c){throw new Error('Could\x20not\x20read\x20session\x20state\x20or\x20index\x20file:\x20'+_0x1c5c67[_0x5c0c6a(0x172)]);}}this['sessionState']={..._0x1138dc,'projectDir':_0x3f0055};const _0x2eaeb0=this[_0x5c0c6a(0x17a)]['activeConversationIds']||[];for(const _0x2c1971 of _0x2eaeb0){try{await this['loadConversationHistory'](_0xfedd9f,_0x2c1971);}catch(_0x3e3059){this[_0x5c0c6a(0x1cc)][_0x5c0c6a(0x142)]('Could\x20not\x20load\x20conversation\x20history\x20for\x20'+_0x2c1971+':\x20'+_0x3e3059[_0x5c0c6a(0x172)]),await this['createConversation'](_0x2c1971,_0x5c0c6a(0x12f));}}this[_0x5c0c6a(0x1cc)]['info'](_0x5c0c6a(0x20e)+_0x2eaeb0[_0x5c0c6a(0x164)]);}catch(_0x161192){this['logger']['error']('Failed\x20to\x20resume\x20conversation:',_0x161192);throw new Error('Failed\x20to\x20resume\x20conversation:\x20'+_0x161192['message']);}}async['modifyExistingContent'](_0x352b78,_0x55960d){const _0x181529=a0_0xccece6;this['logger']['info'](_0x181529(0x1f1)+_0x352b78+_0x181529(0x1ad)+_0x55960d),this['sessionState']['projectDir']=_0x352b78;const _0x4e0cf0=a0_0x26c772[_0x181529(0x20b)](_0x352b78,CONVERSATION_CONSTANTS['STATE_DIR_NAME']);await a0_0x3458e1[_0x181529(0x21f)](_0x4e0cf0,{'recursive':!![]});const _0x27f9e7=this['getPromptEngineerSystemPrompt'](this['toolRegistry']['getToolsDescription'](),!![]),_0x2119ef=CONVERSATION_CONSTANTS['PROMPT_ENGINEER_ID'];await this[_0x181529(0x109)](_0x2119ef,_0x27f9e7);const _0x2a3251=this['createInitialPromptForEngineer'](_0x55960d,_0x352b78,!![]),_0x388f89=await this['sendMessageToConversation'](_0x2119ef,_0x2a3251),{role:_0xc0439c,systemPrompt:_0xde271e}=this['parsePromptEngineerResponse'](_0x388f89),_0x463047=_0xc0439c||_0x181529(0x1d0);this['sessionState'][_0x181529(0x1a3)]=_0x463047;const _0x55fa5e=this['enhanceSystemPrompt'](_0xde271e,this[_0x181529(0x1b1)][_0x181529(0x1d1)](),this[_0x181529(0x17a)][_0x181529(0x110)],[CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID']]);await this[_0x181529(0x109)](_0x463047,_0x55fa5e);const _0x17b0eb=CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID'];this['sessionState'][_0x181529(0x214)]=_0x17b0eb;const _0x4ff774=this[_0x181529(0x1be)](this['toolRegistry']['getToolsDescription'](),_0x463047);await this['createConversation'](_0x17b0eb,_0x4ff774),this['sessionState'][_0x181529(0x215)]=[_0x463047,_0x17b0eb],await this[_0x181529(0x1aa)](_0x463047,_0x181529(0x19b)+_0x352b78),await this[_0x181529(0x116)]();}async[a0_0xccece6(0x12d)](_0x3032b8,_0x168f09){const _0x38c3e3=a0_0xccece6;this['logger'][_0x38c3e3(0x136)]('Handling\x20user\x20prompt:\x20'+_0x168f09['name']+_0x38c3e3(0x1f3)+_0x3032b8);if(this['onUserPrompt']){const _0x5293e=await this[_0x38c3e3(0x169)](_0x168f09[_0x38c3e3(0x216)],_0x168f09['text'],_0x168f09['options']);await this[_0x38c3e3(0x1aa)](_0x3032b8,'User\x20selected:\x20'+_0x5293e);}else await this[_0x38c3e3(0x1aa)](_0x3032b8,'Cannot\x20display\x20prompt\x20to\x20user:\x20No\x20prompt\x20handler\x20is\x20registered.\x20'+'Please\x20implement\x20the\x20onUserPrompt\x20handler\x20in\x20the\x20CLI.');}async['handlePromptTooLong'](_0x36cf90){const _0x59788e=a0_0xccece6;this[_0x59788e(0x1cc)]['warn'](_0x59788e(0x18d)),await this[_0x59788e(0x16d)](_0x36cf90);}async['sendMessageToConversation'](_0x29faf9,_0x269ff2){const _0x2ecd0e=a0_0xccece6;if(this[_0x2ecd0e(0x139)](_0x29faf9,_0x269ff2))return this[_0x2ecd0e(0x1cc)]['info']('🚫\x20Blocking\x20message\x20in\x20interactive\x20mode:\x20'+displayOnly(_0x269ff2,0x64)),this['blockedMessages']['push']({'conversationId':_0x29faf9,'message':_0x269ff2,'timestamp':Date['now']()}),_0x2ecd0e(0x17b);const _0x4ab91a=_0x29faf9===CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID'],_0x3e773f=_0x4ab91a?'waiting-for-llm':'waiting-for-agent';!this[_0x2ecd0e(0x1eb)]&&this[_0x2ecd0e(0x10e)](_0x3e773f);this['logger'][_0x2ecd0e(0x136)]('[Orchestrator]\x20Messaging\x20'+_0x29faf9+':\x0a'+displayOnly(_0x269ff2,0xff));if(!this['conversations']['has'](_0x29faf9)){!this[_0x2ecd0e(0x1eb)]&&this[_0x2ecd0e(0x10e)](_0x2ecd0e(0x174));throw new Error('Conversation\x20'+_0x29faf9+'\x20does\x20not\x20exist');}try{const _0x4da129=this[_0x2ecd0e(0x1d9)][_0x2ecd0e(0x140)](_0x29faf9),_0x1d7eff={'systemPrompt':_0x4da129[_0x2ecd0e(0x201)],'messages':_0x4da129[_0x2ecd0e(0x14c)],'id':_0x29faf9,'contextWindow':_0x4da129[_0x2ecd0e(0x1b9)]},_0x46158f=await this['llmService']['sendMessage'](_0x29faf9,_0x269ff2,_0x1d7eff);return await this['checkAndPerformCompactization'](_0x29faf9),await this[_0x2ecd0e(0x133)](_0x29faf9),this['sessionState'][_0x2ecd0e(0x215)][_0x2ecd0e(0x187)](_0x29faf9)&&await this['processAgentMessage'](_0x29faf9,_0x46158f),!this[_0x2ecd0e(0x1eb)]&&this['updateMessageIndicator']('idle'),_0x46158f;}catch(_0x5395ea){!this['isWaitingForUserInput']&&this[_0x2ecd0e(0x10e)](_0x2ecd0e(0x174));throw _0x5395ea;}}async['createConversation'](_0x2918fe,_0x5bbdcb,_0x107589=[],_0x5f0b75=null){const _0x312e74=a0_0xccece6;this[_0x312e74(0x1cc)]['info']('Creating\x20conversation:\x20'+_0x2918fe),this[_0x312e74(0x1cd)][_0x312e74(0x212)](_0x2918fe,_0x5bbdcb);const _0x4aa012=this['interactionMode']==='auto'?this['removePromptSyntaxFromSystemPrompt'](_0x5bbdcb):_0x5bbdcb;let _0x5d3f4e=[];_0x107589['length']>0x0&&(_0x5d3f4e=_0x107589[_0x312e74(0x1a0)](_0x2da905=>_0x2da905['role']!==_0x312e74(0x131)));const _0x3497b2={'id':_0x2918fe,'systemPrompt':_0x4aa012,'messages':_0x5d3f4e,'contextWindow':this['getContextWindowSize'](_0x2918fe)};this[_0x312e74(0x1d9)][_0x312e74(0x212)](_0x2918fe,_0x3497b2),await this['llmService']['registerConversation'](_0x2918fe,_0x4aa012,_0x5f0b75),_0x5d3f4e['length']>0x0&&await this[_0x312e74(0x177)][_0x312e74(0x1c0)](_0x2918fe,_0x3497b2),this['sessionState']['conversationHistory'][_0x2918fe]={'systemPrompt':_0x4aa012,'lastUpdateTime':new Date()['toISOString']()},await this['saveConversationHistory'](_0x2918fe);}[a0_0xccece6(0x132)](_0x2e1409){const _0x42ac48=a0_0xccece6,_0x164811=Array[_0x42ac48(0x21d)](this['conversations']['keys']())[_0x42ac48(0x1a0)](_0x234d42=>_0x234d42!==_0x2e1409);return _0x164811;}async['routeMessageToAgent'](_0x318241,_0x54eac7,_0x3830f9){const _0x1ba545=a0_0xccece6;this['logger'][_0x1ba545(0x136)](_0x1ba545(0x159)+_0x318241+'\x20to\x20'+_0x54eac7);if(!this[_0x1ba545(0x1d9)]['has'](_0x54eac7)){const _0x5c4a65='Agent\x20'+_0x54eac7+'\x20does\x20not\x20exist,\x20cannot\x20route\x20message.\x20Available\x20agents\x20are:\x20'+this['getListOfAvailableAgentIds'](_0x318241)[_0x1ba545(0x20b)](',\x20')+_0x1ba545(0x14e);this['logger']['warn'](_0x5c4a65),await this['sendMessageToConversation'](_0x318241,_0x5c4a65);return;}const _0x343a62='[From\x20'+_0x318241+_0x1ba545(0x20d)+_0x3830f9;await this['sendMessageToConversation'](_0x54eac7,_0x343a62);}async['routeMessageToAgent'](_0x2472d6,_0x4f16ce,_0x5e7aeb){const _0x5b2755=a0_0xccece6;this[_0x5b2755(0x1cc)]['info']('Routing\x20message\x20from\x20'+_0x2472d6+_0x5b2755(0x126)+_0x4f16ce);if(!this['conversations'][_0x5b2755(0x204)](_0x4f16ce)){this[_0x5b2755(0x1cc)]['warn']('Agent\x20'+_0x4f16ce+_0x5b2755(0x17c)),await this[_0x5b2755(0x1aa)](_0x2472d6,_0x5b2755(0x1bd)+_0x4f16ce+_0x5b2755(0x15f));return;}const _0x21124a=_0x5b2755(0x230)+_0x2472d6+_0x5b2755(0x20d)+_0x5e7aeb;await this[_0x5b2755(0x1aa)](_0x4f16ce,_0x21124a);}async['checkToolExecutionStatus'](){const _0x410e3e=a0_0xccece6;for(const [_0x4820fa,_0x1faf27]of this['activeTools'][_0x410e3e(0x17d)]()){const _0x310d8d=Date['now']()-_0x1faf27[_0x410e3e(0x1da)];_0x310d8d>CONVERSATION_CONSTANTS['TOOL_STATUS_UPDATE_INTERVAL_MS']&&(await this[_0x410e3e(0x1aa)](_0x1faf27['agentId'],'Tool\x20'+_0x1faf27[_0x410e3e(0x138)]+'\x20is\x20still\x20running\x20('+Math[_0x410e3e(0x226)](_0x310d8d/0x3e8)+_0x410e3e(0x1b4)+_0x4820fa),_0x1faf27[_0x410e3e(0x1da)]=Date['now']());}}['registerUserPromptHandler'](_0x5f1aa8){this['onUserPrompt']=_0x5f1aa8;}async['sendUserInput'](_0x1a83b6){const _0x251bea=a0_0xccece6;this['logger']['info']('Received\x20user\x20input:\x20'+_0x1a83b6),this[_0x251bea(0x155)](![]),this[_0x251bea(0x17a)][_0x251bea(0x1a3)]?await this[_0x251bea(0x1aa)](this['sessionState'][_0x251bea(0x1a3)],'[User\x20input]:\x20'+_0x1a83b6):this['logger']['warn'](_0x251bea(0x207));}async['checkAndPerformCompactization'](_0x2a30e0){const _0x2885c1=a0_0xccece6,_0x59508d=this['conversations'][_0x2885c1(0x140)](_0x2a30e0);if(!_0x59508d)return;const _0x47e8f5=await this[_0x2885c1(0x177)]['estimateTokenCount'](_0x2a30e0),_0x4c4da3=_0x59508d[_0x2885c1(0x1b9)];_0x47e8f5>_0x4c4da3*CONVERSATION_CONSTANTS['COMPACTIZATION_THRESHOLD_PERCENTAGE']&&(this[_0x2885c1(0x1cc)]['info'](_0x2885c1(0x14a)+_0x2a30e0),await this['performCompactization'](_0x2a30e0));}async['performCompactization'](_0x54be6a){const _0x31ae50=a0_0xccece6,_0x1ab09c=this['conversations']['get'](_0x54be6a);if(!_0x1ab09c||_0x1ab09c[_0x31ae50(0x14c)][_0x31ae50(0x164)]<0x4)return;const _0xf1b48e=CONVERSATION_CONSTANTS['MIN_MESSAGES_TO_KEEP'],_0x52d5dc=_0x1ab09c[_0x31ae50(0x14c)][_0x31ae50(0x228)](0x0,_0xf1b48e),_0x4b6004=_0x1ab09c[_0x31ae50(0x1b9)],_0x591a75=Math[_0x31ae50(0x226)](_0x4b6004*CONVERSATION_CONSTANTS['COMPACTIZATION_OUTPUT_RESERVE_PERCENTAGE']),_0x448d90=_0x4b6004-_0x591a75,_0x46cd86=CONVERSATION_CONSTANTS['COMPACTIZATION_BEGIN_PERCENTAGE'],_0x3359d7=CONVERSATION_CONSTANTS[_0x31ae50(0x186)],_0x54267d=Math[_0x31ae50(0x1b5)](_0xf1b48e,Math[_0x31ae50(0x226)](_0x1ab09c[_0x31ae50(0x14c)]['length']*_0x46cd86)),_0x5462b2=Math['min'](_0x1ab09c[_0x31ae50(0x14c)][_0x31ae50(0x164)]-_0x54267d,Math['floor'](_0x1ab09c['messages'][_0x31ae50(0x164)]*_0x3359d7)),_0x1d9f8e=_0x1ab09c[_0x31ae50(0x14c)]['slice'](0x0,_0x54267d),_0x46bd4f=_0x1ab09c[_0x31ae50(0x14c)]['slice'](-_0x5462b2),_0x39180=_0x1ab09c['messages'][_0x31ae50(0x228)](_0x54267d,_0x1ab09c['messages'][_0x31ae50(0x164)]-_0x5462b2);if(_0x39180[_0x31ae50(0x164)]===0x0)return;const _0x5b9cf5=this['createSummaryPrompt'](_0x39180);this['logger'][_0x31ae50(0x136)](_0x31ae50(0x1a5)+_0x54267d+'\x20begin\x20+\x20'+_0x39180[_0x31ae50(0x164)]+'\x20summarized\x20+\x20'+_0x5462b2+'\x20end\x20messages');try{const _0x1dee3a=await this[_0x31ae50(0x177)][_0x31ae50(0x179)](_0x54be6a,_0x5b9cf5),_0x4d0662={'role':CONVERSATION_CONSTANTS['SYSTEM_MESSAGE_ROLE'],'content':CONVERSATION_CONSTANTS[_0x31ae50(0x1b7)]+'\x0a'+_0x1dee3a+'\x0a'+CONVERSATION_CONSTANTS['SUMMARY_MARKER_END']};_0x1ab09c['messages']=[..._0x1d9f8e,_0x4d0662,..._0x46bd4f],await this['llmService']['updateConversation'](_0x54be6a,_0x1ab09c),this[_0x31ae50(0x1cc)][_0x31ae50(0x136)](_0x31ae50(0x154)+_0x54be6a+_0x31ae50(0x19e)+(_0x54267d+_0x39180['length']+_0x5462b2)+'\x20to\x20'+(_0x1d9f8e[_0x31ae50(0x164)]+0x1+_0x46bd4f[_0x31ae50(0x164)]));}catch(_0x1bf99b){this[_0x31ae50(0x1cc)][_0x31ae50(0x231)](_0x31ae50(0x147),_0x1bf99b),this['_handleSummaryFailure'](_0x54be6a,_0x1bf99b);}}[a0_0xccece6(0x22d)](_0x2a90d5){const _0x559fc8=a0_0xccece6;return _0x559fc8(0x196)+_0x2a90d5[_0x559fc8(0x192)](_0x4543ec=>_0x4543ec['role']+':\x20'+_0x4543ec[_0x559fc8(0x1bc)])[_0x559fc8(0x20b)]('\x0a\x0a')+'\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Provide\x20the\x20replacement\x20text.';}['getContextWindowSize'](_0x3fe8a3){const _0x16e0c2=a0_0xccece6,_0x42c678=this[_0x16e0c2(0x16b)]['models']?.[_0x16e0c2(0x13f)]?.[_0x16e0c2(0x1b9)]||CONVERSATION_CONSTANTS['DEFAULT_CONTEXT_WINDOW_SIZE'];if(_0x3fe8a3===CONVERSATION_CONSTANTS['LANGUAGE_MODEL_ID'])return this[_0x16e0c2(0x16b)]['models']?.['languageModel']?.['contextWindow']||_0x42c678;return _0x42c678;}[a0_0xccece6(0x120)](_0x55f821,_0x385347=![]){const _0x16c69d=a0_0xccece6,_0x229392=_0x385347?'modifying\x20existing\x20content':_0x16c69d(0x13a);return'\x0a\x20\x20\x20\x20You\x20are\x20a\x20prompt\x20engineering\x20expert\x20who\x20designs\x20effective\x20system\x20prompts\x20for\x20AI\x20agents.\x0a\x20\x20\x20\x20We\x20are\x20about\x20to\x20assign\x20the\x20responsibility\x20for\x20'+_0x229392+'\x20to\x20an\x20AI\x20agent.\x20\x0a\x20\x20\x20\x20For\x20that\x20we\x20need\x20to\x20write\x20a\x20comprehensive\x20SYSTEM\x20prompt\x20that\x20will\x20help\x20the\x20agent\x20make\x20smart\x20decisions.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20The\x20agent\x20will\x20need\x20to\x20know\x20the\x20task\x20and\x20the\x20tools\x20available\x20to\x20it,\x20but\x20will\x20also\x20need\x20to\x20think\x20like\x20a\x20professional\x20relevant\x20for\x20the\x20task\x20at\x20hand.\x0a\x0a\x20\x20\x20\x20Your\x20job\x20is\x20to\x20create\x20a\x20role\x20for\x20the\x20AI\x20agent\x20and\x20write\x20a\x20system\x20prompt\x20that\x20will\x20guide\x20it\x20to\x20successfully\x20complete\x20the\x20task.\x0a\x0a\x20\x20\x20\x20Embed\x20appropriate\x20guidelines\x5cprocess\x20description\x20into\x20the\x20system\x20prompt,\x20according\x20to\x20the\x20task\x20type:\x0a\x20\x20\x20\x201.\x20TASK\x20OF\x20DEVELOPING\x20CODE\x5cSOFTWARE:\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20AI\x20Agent\x20Development\x20Process\x20Guide\x0a\x20\x20\x20\x20\x20\x20\x20\x20##\x20Development\x20Stages\x20Overview\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20As\x20conversation\x20progresses,\x20context\x20window\x20will\x20be\x20filled\x20and\x20what\x20agent\x20rememebers\x20will\x20be\x20truncated/summarized.\x0a\x20\x20\x20\x20\x20\x20\x20\x20To\x20retain\x20the\x20context\x20of\x20the\x20project\x20agent\x20will\x20have\x20to\x20use\x20memory\x20tool\x20to\x20store\x20relevant\x20information\x20throughout\x20the\x20conversation.\x0a\x20\x20\x20\x20\x20\x20\x20\x20In\x20particular,\x20the\x20agent\x20should\x20store\x20a\x20summary\x20of\x20each\x20stage,\x20its\x20requirements,\x20and\x20any\x20important\x20decisions\x20made\x20during\x20the\x20development\x20process.\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x201:\x20System\x20Functional\x20Description\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Define\x20what\x20the\x20system\x20does\x20at\x20a\x20high\x20level\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Write\x20a\x20clear\x20description\x20of\x20the\x20system\x27s\x20main\x20purpose\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Identify\x20the\x20core\x20problem\x20the\x20system\x20solves\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20the\x20system\x27s\x20scope\x20and\x20boundaries\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x202:\x20Comprehensive\x20Functional\x20Requirements\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Detail\x20what\x20the\x20system\x20must\x20do\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20List\x20specific\x20features\x20and\x20capabilities\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20user\x20interactions\x20and\x20system\x20behaviors\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Specify\x20data\x20processing\x20requirements\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x203:\x20Non-Functional\x20Requirements\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Define\x20how\x20the\x20system\x20should\x20perform\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Performance\x20requirements\x20(speed,\x20response\x20time)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Security\x20requirements\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Scalability\x20needs\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Usability\x20standards\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x204:\x20System\x20Actors\x20and\x20Target\x20Devices\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Identify\x20who\x20uses\x20the\x20system\x20and\x20how\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20user\x20roles\x20and\x20permissions\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Specify\x20target\x20devices\x20(desktop,\x20mobile,\x20tablet)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Identify\x20operating\x20system\x20requirements\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20browser\x20compatibility\x20needs\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x205:\x20Use\x20Cases\x20Development\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Document\x20user\x20workflows\x20and\x20interactions\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Write\x20detailed\x20user\x20stories\x20involving\x20system\x20features\x20as\x20previously\x20defined\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Map\x20user\x20journeys\x20through\x20the\x20system\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Connect\x20features\x20to\x20specific\x20user\x20goals\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Include\x20edge\x20cases\x20and\x20error\x20scenarios\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x206:\x20UX\x20Design\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Create\x20intuitive,\x20user-friendly\x20interfaces\x20addressing\x20the\x20use\x20cases\x20and\x20features\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Apply\x20modern\x20UX/UI\x20best\x20practices\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Design\x20responsive\x20layouts\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Plan\x20user\x20flows\x20and\x20information\x20architecture\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Consider\x20accessibility\x20standards\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x207:\x20High-Level\x20Design\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Define\x20system\x20architecture\x20and\x20main\x20components\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Identify\x20core\x20system\x20components\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20component\x20responsibilities,\x20inputs,\x20and\x20outputs\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Map\x20data\x20flow\x20between\x20components\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Analyze\x20alternatives,\x20choose\x20technology\x20stack\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x208:\x20Low-Level\x20Design\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Detail\x20implementation\x20specifics\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Define\x20database\x20design\x20and\x20schemas\x20if\x20needed\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Specify\x20API\x20endpoints\x20and\x20contracts\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Detail\x20component\x20architecture\x20and\x20interfaces\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Plan\x20error\x20handling\x20strategies\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Security\x20implementation\x20plan\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20MULTI-MESSAGE\x20SESSIONS/STAGES:\x0a\x20\x20\x20\x20\x20\x20\x20\x20Stage\x209:\x20Implementation\x20according\x20to\x20previous\x20stages\x20(longest\x20and\x20most\x20important\x20stage,\x20dedicate\x20more\x20time\x20and\x20messages\x20to\x20this\x20stage)\x0a\x20\x20\x20\x20\x20\x20\x20\x20when\x20implementing\x20the\x20code,\x20make\x20sure\x20to\x20be\x20consider\x20memories\x20stored\x20in\x20memory\x20tool\x20and\x20guidelines\x20derived\x20in\x20previous\x20stages.\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Write\x20and\x20build\x20the\x20complete\x20application\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20In\x20a\x20test\x20driven\x20manner,\x20implement\x20all\x20features\x20and\x20components\x20code\x20as\x20defined\x20in\x20previous\x20stages\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Integrate\x20databases\x20if\x20needed\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Create\x20necessary\x20assets\x20(graphics,\x20icons,\x20etc.)\x20and\x20embed\x20fontawesome\x20(or\x20its\x20alternatives)\x20where\x20needed\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Implement\x20core\x20features,\x20UI\x20components\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Integrate\x20components\x20(e.g\x20frontend\x20and\x20backend)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Create\x20README.md\x20with\x20setup\x20instructions\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20at\x20this\x20point\x20INSTALL\x20DEPENDENCIES\x20and\x20run\x20project,\x20try\x20until\x20success.\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20MULTI-MESSAGE\x20SESSIONS/STAGES:\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Stage\x2010:\x20Testing\x20and\x20Quality\x20Assurance\x0a\x20\x20\x20\x20\x20\x20\x20\x20**Purpose:**\x20Ensure\x20code\x20quality\x20and\x20functionality\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Perform\x20static\x20code\x20analysis\x20-\x20REPAIR\x20UNTIL\x20NO\x20ERRORS\x20ARE\x20PRESENT\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20execute\x20unit\x20tests\x20for\x20individual\x20components\x20\x20-\x20REPAIR\x20UNTIL\x20NO\x20ERRORS\x20ARE\x20PRESENT\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Execute\x20integration\x20tests\x20for\x20component\x20interactions\x20\x20-\x20REPAIR\x20UNTIL\x20NO\x20ERRORS\x20ARE\x20PRESENT\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Perform\x20end-to-end\x20tests\x20for\x20user\x20workflows\x20\x20-\x20REPAIR\x20UNTIL\x20NO\x20ERRORS\x20ARE\x20PRESENT\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Make\x20sure\x20no\x20errors\x20or\x20bugs\x20are\x20present\x20in\x20the\x20static\x20code\x20analysis,\x20tests,\x20terminal\x20output,\x20and\x20browser\x20testing\x20(console\x20+\x20visual\x20testing\x20using\x20vision\x20capabilities)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20This\x20stage\x20HAS\x20TO\x20BE\x20REPEATED\x20AND\x20RE-CHECKED\x20until\x20all\x20components\x20launch\x20without\x20errors\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20ONLY\x20AFTER\x20THIS\x20STAGE,\x20ONCE\x20TESTING\x20IS\x20COMPLETED\x20AND\x20PROGRAM\x20WAS\x20EXECUTED\x20WITH\x20NO\x20ERRORS,\x20YOU\x20ARE\x20ALLOWED\x20TO\x20ANNOUNCE\x20JOB\x20DONE.\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20##\x20Process\x20Guidelines\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Complete\x20each\x20stage\x20thoroughly\x20before\x20moving\x20to\x20the\x20next\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20(Important!)\x20Coversation\x20Dynamics\x20(different\x20stages\x20cannot\x20take\x20part\x20in\x20same\x20message):\x0a\x20\x20\x20\x20\x20\x20\x20\x201)\x20AGENT->LLM:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20--\x20identify\x20language-model\x20recipent\x20id,\x20direct\x20a\x20message\x20to\x20him\x20explaining\x20what\x20you\x20want\x20to\x20do\x0a\x20\x20\x20\x20\x20\x20\x20\x20[tool\x20id=\x22update-user\x22]\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20...use\x20tool\x27s\x20syntax\x20to\x20update\x20the\x20supervising\x20user\x20on\x20what\x20you\x27re\x20doing\x0a\x20\x20\x20\x20\x20\x20\x20\x20[/tool]\x0a\x20\x20\x20\x20\x20\x20\x20\x20[message\x20to=\x22language-model(or\x20any\x20other\x20suitable\x20recipent\x20id)\x22]\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20tell\x20the\x20llm\x20what\x20you\x27re\x20about\x20to\x20do\x20now,\x20ask\x20for\x20recommendations\x20or\x20scoring\x20rubrics\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20that\x20would\x20assist\x20you\x20in\x20comleting\x20the\x20following\x20task\x5csub-task\x20with\x20great\x20success\x20and\x20quality\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20consult\x20about\x20challenges,\x20solutions,\x20guidelines\x20and\x20more.\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20[/message]\x0a\x20\x20\x20\x20\x20\x20\x20\x202)\x20LLM->AGENT:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20The\x20llm\x20would\x20give\x20some\x20anwer,\x20agent\x20will\x20be\x20able\x20to\x20return\x20to\x20stage\x20one\x20and\x20continue\x20conversation\x20or\x20when\x20ready\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20continuing\x20to\x20step\x203.\x0a\x20\x20\x20\x20\x20\x20\x20\x203)\x20AGENT\x20ACTION:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20if\x20agent\x20has\x20no\x20comments\x20regarding\x20llm\x20content,\x20the\x20agent\x20can\x20now\x20do\x20whatever\x20it\x20meant\x20to\x20do\x20(writing\x20content,\x20creating\x20things\x20will\x20tools\x20etc).\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20this\x20dynamic\x20acts\x20like\x20a\x20meta-thinking\x20process.\x20Think\x20with\x20your\x20llm\x20-\x20at\x20least\x201\x20message\x20epr\x20thinking,\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20act\x20-\x20with\x20the\x20use\x20of\x20tools\x20in\x20the\x20following\x20message,\x20repeat\x20this\x20process.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20always\x20start\x20a\x20message\x20by\x20updating\x20user\x20on\x20current\x20stages.\x20add\x20links\x20to\x20generated\x20files,\x20locations,\x20web\x20pages\x20when\x20needed.\x0a\x20\x20\x20\x20\x20\x20\x20\x204)\x20back\x20to\x20stage\x20one\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20###\x20Code\x20guidelines\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20No\x20magic\x20numbers,\x20use\x20constants\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Project\x20file\x20structure\x20must\x20follow\x20best\x20practices\x20and\x20serve\x20the\x20purpose\x20of\x20the\x20project\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Use\x20known\x20and\x20highly\x20maintained\x20packages\x20and\x20technologies\x20which\x20suits\x20the\x20project\x20goals)\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Use\x20SecureCoding\x20best\x20practices.\x20if\x20needed\x20install\x20external\x20scanners\x20to\x20scan\x20the\x20files\x20before\x20you\x27re\x20done\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20Identify\x20common\x20logic,\x20values\x20and\x20functionality,\x20gather\x20them\x20under\x20suitable\x20project\x20files\x20as\x20dependencies\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20when\x20creating\x20a\x20project\x20that\x20uses\x20package.json\x20or\x20package_lock.json,\x20use\x20seek\x20tool\x20to\x20search\x20for\x20import\x20lines,\x20then\x20use\x20the\x20result\x20to\x20analyze\x20needed\x20packages.\x20when\x20using\x20different\x20technologies\x20make\x20adaptations\x20to\x20acheive\x20same\x20goal.\x0a\x20\x20\x20\x20\x20\x20\x20\x20-\x20when\x20creating\x20node\x20packages,\x20prefer\x20ESM\x20over\x20CommonJS\x20(unless\x20states\x20otherwise),\x20add\x20\x22type\x22:\x22module\x22\x20to\x20the\x20package.json\x20if\x20needed.\x20\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20IF\x20THIS\x20SOFTWARE\x20IS\x20A\x20COMPUTER\x20GAME\x20COMPLEMENT\x20WITH\x20THE\x20FOLLOWING:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x201:\x20Basic\x20Concept\x20Definition**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x201.\x20Define\x20the\x20game\x27s\x20core\x20idea\x20and\x20desired\x20player\x20experience\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x202.\x20Choose\x20game\x20genre\x20(action,\x20strategy,\x20RPG,\x20puzzle,\x20etc.)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x203.\x20Define\x20target\x20audience\x20(age,\x20skill\x20level,\x20preferences)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x204.\x20Determine\x20target\x20platform\x20(PC,\x20console,\x20mobile)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x202:\x20Game\x20Mechanics\x20Design**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x205.\x20Develop\x20core\x20mechanics\x20(how\x20player\x20interacts\x20with\x20the\x20game)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x206.\x20Design\x20player\x20progression\x20system\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x207.\x20Define\x20game\x20rules,\x20limitations\x20and\x20challenges\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x208.\x20Design\x20scoring/reward\x20system\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x203:\x20Initial\x20Technical\x20Planning**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x209.\x20Choose\x20game\x20engine\x20(Unity,\x20Unreal,\x20Godot,\x20etc.)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2010.\x20Identify\x20required\x20libraries\x20and\x20tools\x20(physics,\x20networking,\x20AI)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2011.\x20Plan\x20basic\x20code\x20architecture\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2012.\x20Assess\x20hardware\x20requirements\x20and\x20performance\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x204:\x20Visual\x20and\x20Artistic\x20Design**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2013.\x20Determine\x20art\x20style\x20(realistic,\x20cartoon,\x20pixel\x20art,\x20etc.)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2014.\x20Design\x20color\x20palette\x20and\x20overall\x20atmosphere\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2015.\x20Plan\x20user\x20interface\x20(UI/UX)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2016.\x20Create\x20artistic\x20style\x20guide\x20(Art\x20Bible)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x205:\x20Story\x20and\x20Plot\x20Development**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2017.\x20Write\x20main\x20storyline\x20and\x20secondary\x20plot\x20lines\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2018.\x20Develop\x20main\x20and\x20secondary\x20characters\x20with\x20detailed\x20backgrounds\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2019.\x20Create\x20game\x20world\x20and\x20environment\x20description\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2020.\x20Write\x20dialogues\x20and\x20in-game\x20texts\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x206:\x20Level\x20and\x20Stage\x20Design**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2021.\x20Plan\x20overall\x20structure\x20of\x20game\x20stages\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2022.\x20Detailed\x20design\x20of\x20each\x20stage/level\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2023.\x20Determine\x20how\x20stages\x20connect\x20to\x20the\x20storyline\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2024.\x20Plan\x20difficulty\x20curve\x20and\x20challenge\x20progression\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x207:\x20Audio\x20and\x20Music\x20Design**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2025.\x20Determine\x20musical\x20style\x20and\x20artistic\x20direction\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2026.\x20Plan\x20background\x20music\x20for\x20different\x20stages\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2027.\x20Design\x20sound\x20effects\x20(SFX)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2028.\x20Plan\x20voice\x20acting\x20and\x20dubbing\x20if\x20required\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x208:\x20In-Game\x20Tools\x20and\x20Systems\x20Planning**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2029.\x20Define\x20tools/weapons/items\x20and\x20their\x20properties\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2030.\x20Design\x20acquisition\x20and\x20collection\x20system\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2031.\x20Plan\x20inventory\x20and\x20equipment\x20system\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2032.\x20Design\x20additional\x20game\x20systems\x20(trading,\x20crafting,\x20etc.)\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x209:\x20Prototype\x20Development**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2033.\x20Create\x20basic\x20playable\x20version\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2034.\x20Test\x20core\x20mechanics\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2035.\x20Gather\x20initial\x20feedback\x20and\x20updates\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2036.\x20Validate\x20technical\x20concept\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x2010:\x20Full\x20Development**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2037.\x20Develop\x20all\x20systems\x20and\x20content\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2038.\x20Create\x20all\x20artistic\x20assets\x20(graphics,\x20animations)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2039.\x20Record\x20and\x20produce\x20all\x20audio\x20materials\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2040.\x20Integration\x20of\x20all\x20components\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x2011:\x20Testing\x20and\x20Bug\x20Fixes**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2041.\x20Comprehensive\x20functional\x20testing\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2042.\x20Performance\x20testing\x20and\x20optimization\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2043.\x20Usability\x20testing\x20with\x20players\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2044.\x20Bug\x20fixes\x20and\x20balance\x20improvements\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20**Stage\x2012:\x20Launch\x20and\x20Distribution**\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2045.\x20Prepare\x20for\x20marketing\x20and\x20distribution\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2046.\x20Create\x20marketing\x20materials\x20(trailers,\x20screenshots)\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2047.\x20Submit\x20to\x20distribution\x20platforms\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x2048.\x20Launch\x20and\x20performance\x20monitoring\x0a\x0a\x20\x20\x20\x202.\x20TASK\x20OF\x20WRITING\x20A\x20BOOK\x5cSTORY:\x0a\x20\x20\x20\x20\x20\x20\x20\x202.1.\x20The\x20agent\x20should\x20create\x20criteria\x20for\x20qualitative\x20measurement\x20of\x20a\x20book/story\x20(general\x20or\x20of\x20the\x20described\x20type)\x0a\x20\x20\x20\x20\x20\x20\x20\x202.2.\x20Development\x20of\x20the\x20central\x20idea\x20along\x20with\x20the\x20main\x20plot\x20line\x0a\x20\x20\x20\x20\x20\x20\x20\x202.3.\x20Development\x20of\x20secondary\x20plot\x20lines\x0a\x20\x20\x20\x20\x20\x20\x20\x202.4.\x20Development\x20of\x20key\x20points\x20in\x20each\x20plot,\x20central\x20dilemmas\x20and\x20unifying\x20logic\x20for\x20all\x20plots\x20-\x20if\x20there\x27s\x20a\x20need\x20to\x20change\x20or\x20adapt\x20part\x20of\x20the\x20plot\x20lines\x20at\x20this\x20stage,\x20it\x20should\x20be\x20done\x0a\x20\x20\x20\x20\x20\x20\x20\x202.5.\x20Criteria\x20should\x20be\x20written\x20for\x20developing\x20a\x20quality\x20character\x20in\x20the\x20story\x0a\x20\x20\x20\x20\x20\x20\x20\x202.6.\x20For\x20each\x20story,\x20main\x20and\x20secondary\x20characters\x20should\x20be\x20defined\x20along\x20with\x20their\x20role\x20in\x20the\x20plot\x20line\x0a\x20\x20\x20\x20\x20\x20\x20\x202.7.\x20For\x20each\x20character,\x20personal\x20background\x20and\x20living\x20environment\x20in\x20childhood\x20and\x20adulthood\x20should\x20be\x20defined,\x20including\x20beliefs,\x20significant\x20life\x20events,\x20vocabulary,\x20and\x20appearance\x20including\x20hairstyle,\x20clothing,\x20jewelry\x20if\x20any,\x20and\x20more\x20-\x20all\x20according\x20to\x20the\x20plot\x20line\x20and\x20the\x20character\x27s\x20role\x20in\x20the\x20plot\x0a\x20\x20\x20\x20\x20\x20\x20\x202.8.\x20The\x20appearance\x20of\x20each\x20character\x20should\x20be\x20saved\x20in\x20a\x20dedicated\x20place\x20with\x20great\x20detail,\x20it\x20will\x20serve\x20to\x20create\x20consistent\x20graphics\x20if\x20required\x0a\x20\x20\x20\x20\x20\x20\x20\x202.9.\x20For\x20each\x20character,\x20internet\x20research\x20should\x20be\x20conducted\x20to\x20refine\x20it\x20(clothing,\x20beliefs,\x20childhood\x20and\x20adulthood\x20events)\x20to\x20specify\x20events\x20in\x20the\x20environment\x20where\x20they\x20grew\x20up\x20or\x20draw\x20inspiration\x20from\x20areas\x20in\x20the\x20spirit\x20of\x20the\x20region\x20or\x20conditions\x20that\x20the\x20plot\x20unfolds\x0a\x20\x20\x20\x20\x20\x20\x20\x202.10.\x20Between\x20plot\x20lines,\x20intersection\x20points\x20should\x20be\x20created,\x20alternatives\x20examined\x20and\x20intersection\x20points\x20with\x20logic\x20should\x20be\x20chosen,\x20with\x20narrative\x20value\x20that\x20will\x20serve\x20the\x20story\x27s\x20purpose\x20and\x20the\x20reader\x27s\x20interest.\x20This\x20is\x20an\x20opportunity\x20to\x20refine\x20the\x20plot\x20lines,\x20twists\x20and\x20their\x20connection\x20to\x20the\x20characters.\x20This\x20is\x20an\x20opportunity\x20to\x20enrich\x20the\x20description\x20and\x20understanding\x20of\x20the\x20world\x20in\x20which\x20the\x20characters\x20live\x20before\x20actual\x20writing\x20-\x20smells,\x20emotions,\x20sights,\x20events,\x20worldviews,\x20technology,\x20communication,\x20global\x20and\x20national\x20trends\x20including\x20the\x20state\x20of\x20superpowers\x20in\x20the\x20described\x20world,\x20medical\x20and\x20scientific,\x20formative\x20historical\x20events\x20and\x20more\x20as\x20needed\x0a\x20\x20\x20\x20\x20\x20\x20\x202.11.\x20The\x20recurring\x20motifs\x20should\x20be\x20understood\x20if\x20there\x20are\x20any,\x20their\x20essence,\x20identifying\x20central\x20symbols\x20in\x20use,\x20leading\x20metaphors\x20if\x20they\x20exist\x0a\x20\x20\x20\x20\x20\x20\x20\x202.12.\x20The\x20story\x20should\x20be\x20assigned\x20to\x20a\x20genre,\x20given\x20a\x20working\x20title,\x20locate\x20a\x20worthy\x20and\x20excellent\x20author\x20whose\x20writing\x20style\x20is\x20known\x20and\x20whose\x20writings\x20are\x20accessible\x20or\x20familiar\x20to\x20the\x20model,\x20and\x20choose\x20them\x20as\x20a\x20guiding\x20line\x20for\x20the\x20writing\x20style\x20unless\x20described\x20otherwise\x20in\x20the\x20task\x20description\x0a\x20\x20\x20\x20\x20\x20\x20\x202.13.\x20Begin\x20writing\x20the\x20book\x20-\x20chapter\x20by\x20chapter,\x20stop\x20between\x20chapters\x20and\x20let\x20the\x20user\x20examine\x20the\x20story\x20that\x20was\x20written\x0a\x0a\x20\x20\x20\x203.\x20TASK\x20OF\x20RESEARCHING\x5cINFORMATION\x20GATHERING:\x0a\x20\x20\x20\x20\x20\x20\x20\x203.1.\x20If\x20the\x20user\x20is\x20interested,\x20expand\x20or\x20assist\x20in\x20refining\x20the\x20research\x20question\x20or\x20task\x0a\x20\x20\x20\x20\x20\x20\x20\x203.2.\x20The\x20desired\x20output\x20should\x20be\x20specified\x20-\x20format,\x20file\x20type,\x20and\x20more\x0a\x20\x20\x20\x20\x20\x20\x20\x203.3.\x20Attempt\x20to\x20locate\x20names\x20of\x20websites\x20and\x20sources\x20for\x20the\x20requested\x20information\x0a\x20\x20\x20\x20\x20\x20\x20\x203.4.\x20Divide\x20information\x20sources\x20into\x20sources\x20with\x20direct\x20connection\x20to\x20the\x20task\x20or\x20those\x20that\x20may\x20provide\x20supplementary\x20information\x20-\x20this\x20is\x20an\x20opportunity\x20to\x20locate\x20additional\x20sources\x0a\x20\x20\x20\x20\x20\x20\x20\x203.5.\x20Search\x20these\x20sources\x20thoroughly\x20with\x20the\x20aspiration\x20to\x20locate\x20materials\x20from\x20at\x20least\x2020\x20sources\x20for\x20the\x20general\x20public\x20and\x2020\x20from\x20academic\x20sources,\x20and\x20at\x20least\x2010\x20recent\x20ones\x20from\x20dedicated\x20professional\x20sources\x20if\x20such\x20exist\x0a\x20\x20\x20\x20\x20\x20\x20\x203.6.\x20Design\x20a\x20guiding\x20principle\x20and\x20quality\x20structure\x20for\x20the\x20article/research\x20paper\x20or\x20follow\x20the\x20guidelines\x20given\x20in\x20the\x20task\x0a\x20\x20\x20\x20\x20\x20\x20\x203.7.\x20If\x20materials\x20or\x20support\x20for\x20certain\x20claims\x20or\x20connecting\x20materials\x20are\x20missing,\x20they\x20should\x20be\x20searched\x20for\x20at\x20this\x20stage\x0a\x20\x20\x20\x20\x20\x20\x20\x203.8.\x20Update\x20the\x20output\x20structure,\x20continue\x20writing\x20and\x20move\x20between\x20the\x20different\x20stages\x20as\x20needed\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x204.\x20OTHER\x20TASK\x20TYPES\x20-\x20write\x20such\x20guidlines\x20to\x20the\x20best\x20of\x20your\x20knowledge\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x0a\x20\x20\x20\x20The\x20next\x20message\x20will\x20describe\x20a\x20task\x20intended\x20for\x20the\x20newly\x20created\x20AI\x20agent\x20to\x20carry.\x0a\x20\x20\x20\x20Return\x20your\x20answer\x20in\x20the\x20following\x20format:\x0a\x20\x20\x20\x20[task-type]develop-software\x20|\x20story-telling\x20|\x20web-research\x20|\x20other[/task-type]\x0a\x20\x20\x20\x20[ai-role]<ai\x20agent\x20role\x20or\x20profession,\x20simple\x20text\x20no\x20slahes,\x20dashes\x20or\x20any\x20special\x20character>[/ai-role]\x0a\x20\x20\x20\x20[system-prompt]<A\x20system\x20prompt\x20which\x20will\x20guide\x20the\x20new\x20agent\x20to\x20handle\x20the\x20given\x20task\x20as\x20good\x20as\x20possible>[/system-prompt]';}['getLanguageModelSystemPrompt'](_0x1bb0c7,_0x57fb44){const _0x18750d=a0_0xccece6;return'You\x20are\x20an\x20amazing\x20state-of-the-art\x20AI\x20agent,\x20working\x20with\x20another\x20specialized\x20AI\x20agent\x20that\x20is\x20completing\x20tasks.\x20Your\x20role\x20is\x20to\x20provide\x20information,\x20answer\x20questions,\x20and\x20assist\x20the\x20agent\x20when\x20needed.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20You\x20cannot\x20directly\x20use\x20tools\x20or\x20perform\x20actions\x20on\x20the\x20computer.\x20Your\x20task\x20is\x20simply\x20to\x20provide\x20informative\x20and\x20helpful\x20responses\x20to\x20assist\x20the\x20agent\x20in\x20completing\x20their\x20task.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20When\x20the\x20agent\x20asks\x20you\x20a\x20question\x20or\x20requests\x20information,\x20provide\x20clear\x20and\x20accurate\x20information\x20to\x20the\x20best\x20of\x20your\x20ability.\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20from\x20time\x20to\x20time\x20the\x20agent\x20may\x20mistake\x20and\x20use\x20some\x20instruction\x20tag\x20[tool\x20id=\x22...\x22]...[/tool]\x20or\x20similar,\x20in\x20a\x20wrong\x20way.\x20do\x20not\x20try\x20to\x20guide\x20him,\x20you\x20can\x20notify\x20him\x20that\x20since\x20you\x27re\x20not\x20suppose\x20to\x20see\x20such\x20tags\x20(automatically\x20stripped\x20from\x20conversation),\x20there\x20is\x20a\x20possibility\x20that\x20this\x20agent\x20made\x20a\x20syntax\x20error.\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20In\x20any\x20professional\x20matter,\x20encourage\x20a\x20multistep/multimessage\x20session\x20and\x20assist\x20him,\x20suggest\x20improvements,\x20criticize\x20his\x20work,\x20detect\x20challenges\x20if\x20crucial\x20and\x20suggest\x20overcomes.\x20help\x20him\x20be\x20at\x20his\x20best.\x0a\x0a\x20\x20\x20\x20\x20\x20\x20\x20Tools\x20available\x20to\x20the\x20other\x20agent\x20are:\x20'+_0x1bb0c7+'.\x0a\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20You\x20are\x20expected\x20to\x20put\x20the\x20text\x20intended\x20for\x20the\x20other\x20agent\x20inside\x20[message\x20to=\x22'+_0x57fb44+_0x18750d(0x209);}[a0_0xccece6(0x180)](_0x2d9c2b,_0x261110=null,_0x2307b5=![]){const _0x50411b=a0_0xccece6,_0x2381ec=a0_0x17b38b();return _0x2307b5&&_0x261110?'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20The\x20task\x20is\x20to\x20modify\x20content\x20in\x20the\x20directory\x20\x27'+_0x261110+_0x50411b(0x12e)+JSON[_0x50411b(0x1a8)](_0x2d9c2b):_0x50411b(0x144)+JSON[_0x50411b(0x1a8)](_0x2d9c2b)+_0x50411b(0x1ba);}async[a0_0xccece6(0x1e5)](_0x1ea5fd){const _0x54a21d=a0_0xccece6;await this[_0x54a21d(0x178)][_0x54a21d(0x1e5)](_0x1ea5fd);}async['getBudgetUsage'](){const _0x2b7e93=a0_0xccece6;return await this[_0x2b7e93(0x178)][_0x2b7e93(0x1c1)]();}async[a0_0xccece6(0x1de)](_0x48d3a5){const _0x4cd687=a0_0xccece6;this[_0x4cd687(0x1b6)]=_0x48d3a5,this[_0x4cd687(0x1cc)]['info']('Session\x20overrides\x20set',_0x48d3a5);}async[a0_0xccece6(0x1f8)](){const _0x4e43cf=a0_0xccece6;this[_0x4e43cf(0x1cc)][_0x4e43cf(0x136)](_0x4e43cf(0x1dc));const _0x1438e4='[System]:\x20Execution\x20has\x20been\x20paused\x20by\x20the\x20user.\x20Waiting\x20to\x20resume.';for(const _0x2bdf74 of this[_0x4e43cf(0x17a)]['activeConversationIds']){const _0x263b46=this['conversations'][_0x4e43cf(0x140)](_0x2bdf74);_0x263b46&&(_0x263b46['messages'][_0x4e43cf(0x1c8)]({'role':CONVERSATION_CONSTANTS[_0x4e43cf(0x173)],'content':_0x1438e4}),await this[_0x4e43cf(0x133)](_0x2bdf74));}this[_0x4e43cf(0x17a)]['paused']=!![],await this['saveSessionState']();}async['resumeExecution'](){const _0x458c2c=a0_0xccece6;this[_0x458c2c(0x1cc)][_0x458c2c(0x136)](_0x458c2c(0x184));const _0xcf83e0=_0x458c2c(0x1e6);for(const _0x48bfe1 of this[_0x458c2c(0x17a)]['activeConversationIds']){const _0x3d19ab=this[_0x458c2c(0x1d9)]['get'](_0x48bfe1);_0x3d19ab&&(_0x3d19ab['messages']['push']({'role':CONVERSATION_CONSTANTS[_0x458c2c(0x173)],'content':_0xcf83e0}),await this['saveConversationHistory'](_0x48bfe1));}this[_0x458c2c(0x17a)]['paused']=![],await this['saveSessionState']();}[a0_0xccece6(0x21b)](){const _0x1128b5=a0_0xccece6;return this[_0x1128b5(0x17a)]['paused']===!![];}async['processToolCommands'](_0x48c226,_0x21d262){const _0x26627a=a0_0xccece6;this[_0x26627a(0x1cc)][_0x26627a(0x136)]('Processing\x20'+_0x21d262['length']+'\x20tool\x20commands\x20from\x20'+_0x48c226);const _0x5dabac=[],_0x25193c=[],_0x5ab7f0=[];for(const _0x3a6b81 of _0x21d262){const {toolId:_0x57f615}=_0x3a6b81;this[_0x26627a(0x1cc)][_0x26627a(0x136)]('Queuing\x20tool:\x20'+_0x57f615);if(!this[_0x26627a(0x1b1)][_0x26627a(0x1f5)](_0x57f615)){_0x25193c['push']({'toolId':_0x57f615,'status':_0x26627a(0x231),'error':'Tool\x20\x27'+_0x57f615+_0x26627a(0x107)+this['toolRegistry']['getToolIds']()[_0x26627a(0x20b)](',\x20')});continue;}try{const _0x128fed=this[_0x26627a(0x1b1)]['getTool'](_0x57f615),requiresResponse=_0x128fed['requiresResponse']!==![],_0x4423e5=a0_0x17b38b();_0x25193c['push']({'operationId':_0x4423e5,'toolId':_0x57f615,'command':_0x3a6b81,'status':_0x26627a(0x190),'requiresResponse':requiresResponse});requiresResponse&&_0x5ab7f0['push'](_0x57f615);const _0x33b90b=_0x128fed[_0x26627a(0x1d8)](_0x3a6b81,this['sessionState'][_0x26627a(0x110)])[_0x26627a(0x206)](_0x4ae2ff=>{const _0x44eb58=_0x26627a;this['logger']['info']('Tool\x20'+_0x57f615+_0x44eb58(0x1c7),_0x4ae2ff);const _0x3c8c97=_0x25193c[_0x44eb58(0x22f)](_0x17d5cc=>_0x17d5cc['operationId']===_0x4423e5);return _0x3c8c97&&(_0x3c8c97[_0x44eb58(0x208)]='success',_0x3c8c97[_0x44eb58(0x224)]=_0x4ae2ff),this['activeTools']['delete'](_0x4423e5),_0x4ae2ff;})[_0x26627a(0x22b)](_0x460c5f=>{const _0x3125c8=_0x26627a;this['logger'][_0x3125c8(0x231)]('Tool\x20'+_0x57f615+'\x20failed:',_0x460c5f);const _0x5c28b6=_0x25193c[_0x3125c8(0x22f)](_0x30db72=>_0x30db72[_0x3125c8(0x189)]===_0x4423e5);_0x5c28b6&&(_0x5c28b6['status']=_0x3125c8(0x231),_0x5c28b6['error']=_0x460c5f[_0x3125c8(0x172)]);this[_0x3125c8(0x112)][_0x3125c8(0x1b2)](_0x4423e5);throw _0x460c5f;});this[_0x26627a(0x112)]['set'](_0x4423e5,{'promise':_0x33b90b,'toolId':_0x57f615,'agentId':_0x48c226,'startTime':Date['now']()}),_0x5dabac[_0x26627a(0x1c8)](_0x33b90b);}catch(_0x27c4a7){this['logger']['error']('Failed\x20to\x20queue\x20tool\x20'+_0x57f615+':',_0x27c4a7),_0x25193c[_0x26627a(0x1c8)]({'toolId':_0x57f615,'status':'error','error':_0x26627a(0x106)+_0x57f615+':\x20'+_0x27c4a7['message'],'requiresResponse':!![]});}}const _0x70ab3a=new Promise(_0xcc8a81=>setTimeout(_0xcc8a81,0x7d0));await Promise[_0x26627a(0x219)]([_0x70ab3a,Promise['allSettled'](_0x5dabac)]);const _0x3094d2=_0x25193c[_0x26627a(0x1a0)](_0x298470=>(_0x298470['status']===_0x26627a(0x1af)||_0x298470[_0x26627a(0x208)]===_0x26627a(0x231))&&_0x298470['requiresResponse']!==![]),_0x24f364=_0x25193c[_0x26627a(0x1a0)](_0x580979=>_0x580979['status']==='pending'&&_0x580979['requiresResponse']!==![]);if(_0x3094d2['length']>0x0||_0x24f364[_0x26627a(0x164)]>0x0){let _0x3b7d38=_0x26627a(0x1f6)+_0x3094d2['length']+'\x20completed,\x20'+_0x24f364[_0x26627a(0x164)]+'\x20pending):';if(_0x3094d2['length']>0x0){_0x3b7d38+='\x0a\x0a==\x20Completed\x20Operations\x20==';for(const _0x504873 of _0x3094d2){_0x504873['status']===_0x26627a(0x1af)?(_0x3b7d38+='\x0a✅\x20Tool\x20'+_0x504873[_0x26627a(0x138)]+_0x26627a(0x1ab),_0x504873['result']&&(_0x3b7d38+=_0x26627a(0x199)+JSON['stringify'](_0x504873['result'],null,0x2))):_0x3b7d38+=_0x26627a(0x1e9)+_0x504873['toolId']+'\x20failed:\x20'+_0x504873[_0x26627a(0x231)];}}if(_0x24f364['length']>0x0){_0x3b7d38+=_0x26627a(0x1ac);for(const _0x313daa of _0x24f364){_0x3b7d38+='\x0a⏳\x20Tool\x20'+_0x313daa['toolId']+'\x20is\x20still\x20running\x20(operation\x20ID:\x20'+_0x313daa[_0x26627a(0x189)]+').'+_0x26627a(0x10d),this['trackPendingOperation'](_0x313daa[_0x26627a(0x189)],_0x48c226);}}await this['sendMessageToConversation'](_0x48c226,_0x3b7d38);}else this[_0x26627a(0x1cc)][_0x26627a(0x136)](_0x26627a(0x12b)+_0x21d262[_0x26627a(0x164)]+'\x20tools\x20were\x20fire-and-forget,\x20no\x20response\x20sent\x20to\x20agent');}['trackPendingOperation'](_0x3b7141,_0x21579d){const _0x9c7a10=a0_0xccece6,_0xc4621b=this['activeTools'][_0x9c7a10(0x140)](_0x3b7141);if(!_0xc4621b)return;_0xc4621b[_0x9c7a10(0x1e7)]['then'](_0x18c199=>{const _0x3da6d3=_0x9c7a10;this['queuePendingResult'](_0x21579d,_0xc4621b['toolId'],_0x3b7141,_0x3da6d3(0x1af),{'result':_0x18c199});})['catch'](_0x4d652d=>{const _0x126137=_0x9c7a10;this[_0x126137(0x176)](_0x21579d,_0xc4621b['toolId'],_0x3b7141,'error',{'error':_0x4d652d['message']});});}[a0_0xccece6(0x176)](_0x29aef5,_0x583ad9,_0x53878c,_0x4b53b5,_0x47f63c){const _0x4014be=a0_0xccece6;!this[_0x4014be(0x15b)]&&(this[_0x4014be(0x15b)]=new Map()),!this[_0x4014be(0x15b)]['has'](_0x29aef5)&&this[_0x4014be(0x15b)][_0x4014be(0x212)](_0x29aef5,[]),this['pendingResults']['get'](_0x29aef5)['push']({'toolId':_0x583ad9,'operationId':_0x53878c,'status':_0x4b53b5,'data':_0x47f63c,'timestamp':Date['now']()});}async['handlePromptTooLong'](_0x33575e){const _0xc21887=a0_0xccece6;this['logger']['warn']('🚨\x20Prompt\x20too\x20long\x20detected\x20for\x20'+_0x33575e+'\x20-\x20performing\x20compactization');const _0xd5bc3c=this[_0xc21887(0x1d9)][_0xc21887(0x140)](_0x33575e);if(!_0xd5bc3c)throw new Error(_0xc21887(0x125)+_0x33575e+_0xc21887(0x1b8));this['logger'][_0xc21887(0x136)]('Before\x20compactization:\x20'+_0xd5bc3c[_0xc21887(0x14c)][_0xc21887(0x164)]+_0xc21887(0x156)),await this[_0xc21887(0x16d)](_0x33575e),this[_0xc21887(0x1cc)]['info'](_0xc21887(0x157)+_0xd5bc3c['messages']['length']+'\x20messages'),this['logger']['info'](_0xc21887(0x1fc)+_0x33575e);}async[a0_0xccece6(0x158)](){const _0x5d07ee=a0_0xccece6;this[_0x5d07ee(0x1cc)]['info']('Shutting\x20down\x20conversation\x20orchestrator'),this[_0x5d07ee(0x15a)]=!![];this[_0x5d07ee(0x1c3)]&&(clearInterval(this[_0x5d07ee(0x1c3)]),this['idleCheckInterval']=null);this['idleTimer']&&(clearTimeout(this[_0x5d07ee(0x182)]),this['idleTimer']=null);clearInterval(this['toolCheckInterval']),await this['saveSessionState']();const _0xb371a3=Array[_0x5d07ee(0x21d)](this[_0x5d07ee(0x112)][_0x5d07ee(0x202)]());if(_0xb371a3[_0x5d07ee(0x164)]>0x0){this['logger'][_0x5d07ee(0x136)](_0x5d07ee(0x1ea)+_0xb371a3['length']+_0x5d07ee(0x10c));const _0x741683=this[_0x5d07ee(0x16b)]['shutdownTimeout']||0x2710;try{await Promise['race']([Promise['allSettled'](_0xb371a3[_0x5d07ee(0x192)](_0x1a48ac=>_0x1a48ac[_0x5d07ee(0x1e7)])),new Promise(_0x2d1f85=>setTimeout(_0x2d1f85,_0x741683))]);}catch(_0x5c5912){this['logger']['warn'](_0x5d07ee(0x150),_0x5c5912);}for(const [_0x2ca766,_0x1b1f98]of this[_0x5d07ee(0x112)]['entries']()){this['logger']['info'](_0x5d07ee(0x122)+_0x2ca766+_0x5d07ee(0x197)),this[_0x5d07ee(0x112)][_0x5d07ee(0x1b2)](_0x2ca766);}}await this['llmService'][_0x5d07ee(0x158)](),await this[_0x5d07ee(0x1b1)][_0x5d07ee(0x158)](),await this[_0x5d07ee(0x178)][_0x5d07ee(0x15c)](),this['logger'][_0x5d07ee(0x136)]('Conversation\x20orchestrator\x20shut\x20down\x20successfully');}async[a0_0xccece6(0x14b)](){const _0x59e668=a0_0xccece6;this[_0x59e668(0x1c6)]==='idle'?await this[_0x59e668(0x211)]():this['logger'][_0x59e668(0x136)]('Cannot\x20proceed:\x20current\x20state\x20is\x20'+this['messageIndicator']);}['getIndicatorStatus'](){const _0x5ed9df=a0_0xccece6;return{'state':this[_0x5ed9df(0x1c6)],'lastActivity':this['lastActivityTime'],'timeSinceActivity':Date[_0x5ed9df(0x134)]()-this['lastActivityTime'],'willProceedIn':Math['max'](0x0,this['IDLE_TIMEOUT_MS']-(Date[_0x5ed9df(0x134)]()-this['lastActivityTime']))};}async[a0_0xccece6(0x12c)](_0x1651f5,_0x5cde9a={}){const _0x42a479=a0_0xccece6;try{this['logger'][_0x42a479(0x136)]('Processing\x20VS\x20Code\x20message:',_0x1651f5);!this[_0x42a479(0x177)]&&await this['initializeServices']();const _0xaacc4a=[{'role':'system','content':'You\x20are\x20Loxia\x20AI,\x20a\x20helpful\x20coding\x20assistant.\x20You\x20are\x20integrated\x20into\x20VS\x20Code\x20and\x20can\x20help\x20with\x20code\x20analysis,\x20generation,\x20and\x20general\x20development\x20tasks.\x0a\x0aCurrent\x20workspace:\x20'+(_0x5cde9a['workspaceRoot']||_0x42a479(0x117))+_0x42a479(0x119)+(_0x5cde9a['mode']||_0x42a479(0x217))+'\x0a\x0aProvide\x20helpful,\x20concise\x20responses.\x20When\x20showing\x20code,\x20use\x20appropriate\x20language\x20identifiers\x20in\x20code\x20blocks.'},{'role':_0x42a479(0x103),'content':_0x1651f5}],_0x1c4359=await this[_0x42a479(0x177)]['sendMessage'](_0xaacc4a,{'model':_0x5cde9a['model']||null,'stream':![]});return this['logger'][_0x42a479(0x136)](_0x42a479(0x1a9)),_0x1c4359['content']||_0x1c4359;}catch(_0x2165c5){this[_0x42a479(0x1cc)]['error']('Error\x20processing\x20VS\x20Code\x20message:',_0x2165c5);throw new Error('Failed\x20to\x20process\x20message:\x20'+_0x2165c5['message']);}}}