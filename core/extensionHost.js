const a0_0x5deab7=a0_0x3098;(function(_0x32fb7b,_0x18a0cb){const _0x539d31=a0_0x3098,_0x28e30b=_0x32fb7b();while(!![]){try{const _0x3c430e=-parseInt(_0x539d31(0x1fe))/0x1*(-parseInt(_0x539d31(0x202))/0x2)+-parseInt(_0x539d31(0x212))/0x3*(parseInt(_0x539d31(0x1ea))/0x4)+-parseInt(_0x539d31(0x1ed))/0x5+-parseInt(_0x539d31(0x1fb))/0x6+parseInt(_0x539d31(0x1fd))/0x7*(parseInt(_0x539d31(0x20c))/0x8)+-parseInt(_0x539d31(0x20b))/0x9+parseInt(_0x539d31(0x1f9))/0xa*(parseInt(_0x539d31(0x213))/0xb);if(_0x3c430e===_0x18a0cb)break;else _0x28e30b['push'](_0x28e30b['shift']());}catch(_0x52fb11){_0x28e30b['push'](_0x28e30b['shift']());}}}(a0_0x594c,0xb0821));function a0_0x3098(_0x1979cf,_0x3122db){const _0x594c9f=a0_0x594c();return a0_0x3098=function(_0x30987f,_0x1b05bc){_0x30987f=_0x30987f-0x1e9;let _0x2cf736=_0x594c9f[_0x30987f];if(a0_0x3098['wuShQK']===undefined){var _0x1c5d5a=function(_0x327078){const _0x24cea8='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x315cd4='',_0x1fcb36='';for(let _0x4d8546=0x0,_0x2f632d,_0x567bfa,_0x546d94=0x0;_0x567bfa=_0x327078['charAt'](_0x546d94++);~_0x567bfa&&(_0x2f632d=_0x4d8546%0x4?_0x2f632d*0x40+_0x567bfa:_0x567bfa,_0x4d8546++%0x4)?_0x315cd4+=String['fromCharCode'](0xff&_0x2f632d>>(-0x2*_0x4d8546&0x6)):0x0){_0x567bfa=_0x24cea8['indexOf'](_0x567bfa);}for(let _0x16285f=0x0,_0x30cd9c=_0x315cd4['length'];_0x16285f<_0x30cd9c;_0x16285f++){_0x1fcb36+='%'+('00'+_0x315cd4['charCodeAt'](_0x16285f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1fcb36);};a0_0x3098['fTLsjR']=_0x1c5d5a,_0x1979cf=arguments,a0_0x3098['wuShQK']=!![];}const _0x1b0d56=_0x594c9f[0x0],_0x20df3a=_0x30987f+_0x1b0d56,_0x4f87b2=_0x1979cf[_0x20df3a];return!_0x4f87b2?(_0x2cf736=a0_0x3098['fTLsjR'](_0x2cf736),_0x1979cf[_0x20df3a]=_0x2cf736):_0x2cf736=_0x4f87b2,_0x2cf736;},a0_0x3098(_0x1979cf,_0x3122db);}import*as a0_0x327078 from'vscode';import{ConversationOrchestrator}from'./conversationOrchestrator.js';function a0_0x594c(){const _0x21df46=['BgfUz3vHz2vjza','z2v0vgv4Da','BwvZC2fNzq','Aw5MBW','zgLZCg9ZywjSzxm','ntKYndq2nLfnsNPrtW','mtaZmKnmvwHWyq','y29UzMLN','CMvNAxn0zxjwAwv3CW','q2HHDcbMywLSzwq6ia','Bg94AwfdAgf0lMzVy3vZ','C2vSzwn0Aw9U','m2PJD3LuCG','mJGZodC3rMDdwK9w','ugXLyxnLigfUywX5EMuGDgHPCYa','ndKWmZu4oevrD2DptG','y29TBwfUzhm','ChvZAa','mJG4mdC3nxzdvuPtBG','zxjYB3i','zg9JDw1LBNq','Bg94AweUy2HHDa','rxH0zw5ZAw9Usg9ZDcbPBML0AwfSAxPLzcbZDwnJzxnZzNvSBhK','cMbGya','Bg9Nz2vY','y2HHDfbYB3zPzgvY','CMvNAxn0zxjdB21Tyw5K','y29UDgv4Da','AxnfBxb0Eq','Aw5PDgLHBgL6zq','otCWALvLDK1u','zxHLy3v0zunVBw1HBMq','mJyZmdKXmfDQzMLrEq','B3jJAgvZDhjHDg9Y','ntu5nZLnvvrTs1u','mta4nJjKBMHnu3a','zgLZCg9Zzq','D2LUzg93','tM8Gywn0AxzLigvKAxrVCIbMB3vUzc4GugXLyxnLig9Wzw4GysbMAwXLihrVigfUywX5EMuU','mtzduw9tAKC','qxnRigfUExrOAw5NigfIB3v0ihLVDxiGy29Kzs4UlG','C2HVD1DHCM5PBMDnzxnZywDL','ywn0AxzLvgv4DevKAxrVCG'];a0_0x594c=function(){return _0x21df46;};return a0_0x594c();}import{ChatViewProvider}from'../vscode/chatViewProvider.js';export class ExtensionHost{constructor(_0x24cea8,_0x315cd4,_0x1fcb36){const _0x149a94=a0_0x3098;this[_0x149a94(0x1f6)]=_0x24cea8,this['config']=_0x315cd4,this['logger']=_0x1fcb36,this['orchestrator']=null,this['chatProvider']=null,this[_0x149a94(0x20a)]=[];}async[a0_0x5deab7(0x1f8)](){const _0x58c2ca=a0_0x5deab7;try{this['orchestrator']=new ConversationOrchestrator(this[_0x58c2ca(0x20d)],this['logger']),this['chatProvider']=new ChatViewProvider(this[_0x58c2ca(0x1f6)],this[_0x58c2ca(0x1fc)],this['logger']),this['registerCommands'](),this['registerViews'](),this[_0x58c2ca(0x1f3)][_0x58c2ca(0x209)](_0x58c2ca(0x1f1));}catch(_0x4d8546){this[_0x58c2ca(0x1f3)]['error']('Failed\x20to\x20initialize\x20ExtensionHost:',_0x4d8546);throw _0x4d8546;}}['registerCommands'](){const _0x1f7f31=a0_0x5deab7,_0x2f632d=a0_0x327078[_0x1f7f31(0x1eb)][_0x1f7f31(0x1f5)](_0x1f7f31(0x1f0),async()=>{const _0x147e60=_0x1f7f31;try{a0_0x327078[_0x147e60(0x1eb)][_0x147e60(0x1fa)](_0x147e60(0x210));const _0x546d94=await a0_0x327078['window']['showInputBox']({'prompt':'What\x20would\x20you\x20like\x20me\x20to\x20help\x20you\x20with?','placeHolder':_0x147e60(0x203)});_0x546d94&&await this[_0x147e60(0x1f4)]['handleUserInput'](_0x546d94);}catch(_0x16285f){this[_0x147e60(0x1f3)]['error']('Chat\x20command\x20failed:',_0x16285f),a0_0x327078['window']['showErrorMessage'](_0x147e60(0x20f)+_0x16285f[_0x147e60(0x208)]);}}),_0x567bfa=a0_0x327078['commands'][_0x1f7f31(0x1f5)]('loxia.analyze',async()=>{const _0x2947e9=_0x1f7f31;try{const _0x30cd9c=a0_0x327078[_0x2947e9(0x200)][_0x2947e9(0x205)];if(!_0x30cd9c){a0_0x327078['window'][_0x2947e9(0x204)](_0x2947e9(0x201));return;}const _0x211da2=_0x30cd9c[_0x2947e9(0x1ef)],_0x406a1c=_0x30cd9c[_0x2947e9(0x211)],_0x294e48=_0x406a1c[_0x2947e9(0x1f7)]?_0x211da2[_0x2947e9(0x207)]():_0x211da2['getText'](_0x406a1c);if(!_0x294e48['trim']()){a0_0x327078[_0x2947e9(0x200)]['showWarningMessage']('No\x20code\x20selected\x20or\x20file\x20is\x20empty.');return;}const _0xfa269c=_0x2947e9(0x1e9)+_0x211da2[_0x2947e9(0x206)]+'\x20code:\x0a\x0a```'+_0x211da2[_0x2947e9(0x206)]+'\x0a'+_0x294e48+_0x2947e9(0x1f2);await this[_0x2947e9(0x1f4)]['handleUserInput'](_0xfa269c),a0_0x327078['commands']['executeCommand'](_0x2947e9(0x210));}catch(_0x270a36){this['logger'][_0x2947e9(0x1ee)]('Analyze\x20command\x20failed:',_0x270a36),a0_0x327078[_0x2947e9(0x200)]['showErrorMessage']('Analysis\x20failed:\x20'+_0x270a36[_0x2947e9(0x208)]);}});this['disposables']['push'](_0x2f632d,_0x567bfa),this['context']['subscriptions'][_0x1f7f31(0x1ec)](...this[_0x1f7f31(0x20a)]);}[a0_0x5deab7(0x20e)](){const _0xcc66e0=a0_0x5deab7,_0x33ed12=a0_0x327078[_0xcc66e0(0x200)]['registerWebviewViewProvider']('loxiaChat',this[_0xcc66e0(0x1f4)],{'webviewOptions':{'retainContextWhenHidden':!![]}});this[_0xcc66e0(0x20a)][_0xcc66e0(0x1ec)](_0x33ed12),this['context']['subscriptions'][_0xcc66e0(0x1ec)](_0x33ed12);}['dispose'](){const _0x17f31f=a0_0x5deab7;this['logger']['info']('ExtensionHost\x20disposing...'),this['disposables']['forEach'](_0x3666a9=>{const _0x2933d2=a0_0x3098;_0x3666a9&&typeof _0x3666a9[_0x2933d2(0x1ff)]==='function'&&_0x3666a9['dispose']();}),this['disposables']=[],this[_0x17f31f(0x1f4)]&&(this['chatProvider'][_0x17f31f(0x1ff)](),this['chatProvider']=null),this[_0x17f31f(0x1fc)]=null;}}