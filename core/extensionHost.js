const a0_0x543c2a=a0_0x36e4;(function(_0x1e9186,_0x501d6f){const _0x4648e0=a0_0x36e4,_0x5b9324=_0x1e9186();while(!![]){try{const _0x22d152=-parseInt(_0x4648e0(0xda))/0x1*(-parseInt(_0x4648e0(0xdf))/0x2)+parseInt(_0x4648e0(0xf6))/0x3+parseInt(_0x4648e0(0xef))/0x4*(-parseInt(_0x4648e0(0xd7))/0x5)+parseInt(_0x4648e0(0xd4))/0x6*(parseInt(_0x4648e0(0xed))/0x7)+-parseInt(_0x4648e0(0xf0))/0x8*(-parseInt(_0x4648e0(0xf2))/0x9)+parseInt(_0x4648e0(0xeb))/0xa*(-parseInt(_0x4648e0(0xf9))/0xb)+-parseInt(_0x4648e0(0xd5))/0xc;if(_0x22d152===_0x501d6f)break;else _0x5b9324['push'](_0x5b9324['shift']());}catch(_0xa35f29){_0x5b9324['push'](_0x5b9324['shift']());}}}(a0_0x265c,0x74683));import*as a0_0x2884f3 from'vscode';import{ConversationOrchestrator}from'./conversationOrchestrator.js';import{ChatViewProvider}from'../vscode/chatViewProvider.js';function a0_0x36e4(_0x2f40e9,_0x1c9028){const _0x265cc9=a0_0x265c();return a0_0x36e4=function(_0x36e4cb,_0x239ab0){_0x36e4cb=_0x36e4cb-0xd0;let _0x3bafe4=_0x265cc9[_0x36e4cb];if(a0_0x36e4['AsNVdX']===undefined){var _0x211757=function(_0x2884f3){const _0x5459e4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2e3717='',_0x2bf367='';for(let _0x59b62d=0x0,_0x8763cf,_0x9aab56,_0x359efa=0x0;_0x9aab56=_0x2884f3['charAt'](_0x359efa++);~_0x9aab56&&(_0x8763cf=_0x59b62d%0x4?_0x8763cf*0x40+_0x9aab56:_0x9aab56,_0x59b62d++%0x4)?_0x2e3717+=String['fromCharCode'](0xff&_0x8763cf>>(-0x2*_0x59b62d&0x6)):0x0){_0x9aab56=_0x5459e4['indexOf'](_0x9aab56);}for(let _0x29ff5a=0x0,_0x1ba425=_0x2e3717['length'];_0x29ff5a<_0x1ba425;_0x29ff5a++){_0x2bf367+='%'+('00'+_0x2e3717['charCodeAt'](_0x29ff5a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x2bf367);};a0_0x36e4['Kwyodh']=_0x211757,_0x2f40e9=arguments,a0_0x36e4['AsNVdX']=!![];}const _0x54d6fe=_0x265cc9[0x0],_0x18fbfd=_0x36e4cb+_0x54d6fe,_0x279d52=_0x2f40e9[_0x18fbfd];return!_0x279d52?(_0x3bafe4=a0_0x36e4['Kwyodh'](_0x3bafe4),_0x2f40e9[_0x18fbfd]=_0x3bafe4):_0x3bafe4=_0x279d52,_0x3bafe4;},a0_0x36e4(_0x2f40e9,_0x1c9028);}export class ExtensionHost{constructor(_0x5459e4,_0x2e3717,_0x2bf367){const _0x51af10=a0_0x36e4;this['context']=_0x5459e4,this[_0x51af10(0xe3)]=_0x2e3717,this[_0x51af10(0xe5)]=_0x2bf367,this[_0x51af10(0xfa)]=null,this['chatProvider']=null,this[_0x51af10(0xee)]=[];}async[a0_0x543c2a(0xfe)](){const _0x41e066=a0_0x543c2a;try{this['orchestrator']=new ConversationOrchestrator(this[_0x41e066(0xe3)],this[_0x41e066(0xe5)]),this[_0x41e066(0xd6)]=new ChatViewProvider(this[_0x41e066(0xf3)],this['orchestrator'],this[_0x41e066(0xe5)]),this[_0x41e066(0xe6)](),this['registerViews'](),this['logger'][_0x41e066(0xdb)](_0x41e066(0xf4));}catch(_0x59b62d){this['logger'][_0x41e066(0xd8)]('Failed\x20to\x20initialize\x20ExtensionHost:',_0x59b62d);throw _0x59b62d;}}[a0_0x543c2a(0xe6)](){const _0x18c4e6=a0_0x543c2a,_0x8763cf=a0_0x2884f3[_0x18c4e6(0xec)][_0x18c4e6(0xf5)](_0x18c4e6(0xf1),async()=>{const _0x15b79e=_0x18c4e6;try{a0_0x2884f3[_0x15b79e(0xec)][_0x15b79e(0xfc)](_0x15b79e(0xfb));const _0x359efa=await a0_0x2884f3['window'][_0x15b79e(0xf8)]({'prompt':'What\x20would\x20you\x20like\x20me\x20to\x20help\x20you\x20with?','placeHolder':'Ask\x20anything\x20about\x20your\x20code...'});_0x359efa&&await this[_0x15b79e(0xd6)]['handleUserInput'](_0x359efa);}catch(_0x29ff5a){this[_0x15b79e(0xe5)][_0x15b79e(0xd8)](_0x15b79e(0xde),_0x29ff5a),a0_0x2884f3['window'][_0x15b79e(0xd3)]('Chat\x20failed:\x20'+_0x29ff5a['message']);}}),_0x9aab56=a0_0x2884f3[_0x18c4e6(0xec)]['registerCommand'](_0x18c4e6(0xd0),async()=>{const _0xda299f=_0x18c4e6;try{const _0x1ba425=a0_0x2884f3[_0xda299f(0xe2)]['activeTextEditor'];if(!_0x1ba425){a0_0x2884f3[_0xda299f(0xe2)][_0xda299f(0xdc)](_0xda299f(0xe8));return;}const _0xf4a327=_0x1ba425['document'],_0x225c05=_0x1ba425[_0xda299f(0xe7)],_0x4ec359=_0x225c05[_0xda299f(0xfd)]?_0xf4a327['getText']():_0xf4a327[_0xda299f(0xdd)](_0x225c05);if(!_0x4ec359['trim']()){a0_0x2884f3[_0xda299f(0xe2)]['showWarningMessage']('No\x20code\x20selected\x20or\x20file\x20is\x20empty.');return;}const _0x422aba=_0xda299f(0xe0)+_0xf4a327[_0xda299f(0xd9)]+'\x20code:\x0a\x0a```'+_0xf4a327['languageId']+'\x0a'+_0x4ec359+_0xda299f(0xf7);await this['chatProvider']['handleUserInput'](_0x422aba),a0_0x2884f3[_0xda299f(0xec)]['executeCommand']('loxiaChat.focus');}catch(_0x361d7b){this['logger']['error']('Analyze\x20command\x20failed:',_0x361d7b),a0_0x2884f3[_0xda299f(0xe2)][_0xda299f(0xd3)]('Analysis\x20failed:\x20'+_0x361d7b['message']);}});this[_0x18c4e6(0xee)][_0x18c4e6(0xe4)](_0x8763cf,_0x9aab56),this[_0x18c4e6(0xf3)][_0x18c4e6(0xd1)][_0x18c4e6(0xe4)](...this[_0x18c4e6(0xee)]);}[a0_0x543c2a(0xd2)](){const _0x34c35d=a0_0x543c2a,_0x267ce3=a0_0x2884f3['window']['registerWebviewViewProvider']('loxiaChat',this[_0x34c35d(0xd6)],{'webviewOptions':{'retainContextWhenHidden':!![]}});this['disposables'][_0x34c35d(0xe4)](_0x267ce3),this['context'][_0x34c35d(0xd1)]['push'](_0x267ce3);}['dispose'](){const _0x1248c8=a0_0x543c2a;this['logger'][_0x1248c8(0xdb)]('ExtensionHost\x20disposing...'),this[_0x1248c8(0xee)][_0x1248c8(0xe1)](_0x2f3286=>{const _0x404642=_0x1248c8;_0x2f3286&&typeof _0x2f3286[_0x404642(0xea)]===_0x404642(0xe9)&&_0x2f3286[_0x404642(0xea)]();}),this[_0x1248c8(0xee)]=[],this['chatProvider']&&(this[_0x1248c8(0xd6)][_0x1248c8(0xea)](),this[_0x1248c8(0xd6)]=null),this[_0x1248c8(0xfa)]=null;}}function a0_0x265c(){const _0x471974=['cMbGya','C2HVD0LUChv0qM94','nJeYnZbADuzxBve','B3jJAgvZDhjHDg9Y','Bg94AwfdAgf0lMzVy3vZ','zxHLy3v0zunVBw1HBMq','AxnfBxb0Eq','Aw5PDgLHBgL6zq','Bg94AweUyw5HBhL6zq','C3vIC2nYAxb0Aw9UCW','CMvNAxn0zxjwAwv3CW','C2HVD0vYCM9YtwvZC2fNzq','nZHgA3bStuC','odu5mtaXnLLVvfDvBG','y2HHDfbYB3zPzgvY','mJe5mdvgrvrdseq','zxjYB3i','BgfUz3vHz2vjza','mxjHBMLkqG','Aw5MBW','C2HVD1DHCM5PBMDnzxnZywDL','z2v0vgv4Da','q2HHDcbJB21Tyw5KigzHAwXLzdO','mtm4nZa1nhrdvNPZuW','ugXLyxnLigfUywX5EMuGDgHPCYa','zM9YrwfJAa','D2LUzg93','y29UzMLN','ChvZAa','Bg9Nz2vY','CMvNAxn0zxjdB21Tyw5KCW','C2vSzwn0Aw9U','tM8Gywn0AxzLigvKAxrVCIbMB3vUzc4GugXLyxnLig9Wzw4GysbMAwXLihrVigfUywX5EMuU','zNvUy3rPB24','zgLZCg9Zzq','nJqWugnTBffQ','y29TBwfUzhm','mJeWnZiXDLPMywn2','zgLZCg9ZywjSzxm','ndq4EM5zB3zw','nti1nNjIANjqEG','Bg94AweUy2HHDa','nJKWm0TusNHhDa','y29UDgv4Da','rxH0zw5ZAw9Usg9ZDcbPBML0AwfSAxPLzcbZDwnJzxnZzNvSBhK','CMvNAxn0zxjdB21Tyw5K','mtm1mZi2nhrxDNn1qq'];a0_0x265c=function(){return _0x471974;};return a0_0x265c();}