const a0_0x4334a3=a0_0x1f1f;(function(_0x1ab270,_0x496850){const _0x5d88b3=a0_0x1f1f,_0xcb3381=_0x1ab270();while(!![]){try{const _0x5c626b=parseInt(_0x5d88b3(0x19e))/0x1+-parseInt(_0x5d88b3(0x1ab))/0x2*(-parseInt(_0x5d88b3(0x1ba))/0x3)+parseInt(_0x5d88b3(0x1c1))/0x4*(parseInt(_0x5d88b3(0x1b2))/0x5)+-parseInt(_0x5d88b3(0x1b8))/0x6+parseInt(_0x5d88b3(0x1ae))/0x7+-parseInt(_0x5d88b3(0x1b1))/0x8*(-parseInt(_0x5d88b3(0x1c9))/0x9)+-parseInt(_0x5d88b3(0x1a0))/0xa*(parseInt(_0x5d88b3(0x1b5))/0xb);if(_0x5c626b===_0x496850)break;else _0xcb3381['push'](_0xcb3381['shift']());}catch(_0x5b5e3e){_0xcb3381['push'](_0xcb3381['shift']());}}}(a0_0x254d,0xf000f));function a0_0x1f1f(_0x57aeea,_0x32a8ed){const _0x254d70=a0_0x254d();return a0_0x1f1f=function(_0x1f1f97,_0x3a204d){_0x1f1f97=_0x1f1f97-0x19c;let _0x4d727f=_0x254d70[_0x1f1f97];if(a0_0x1f1f['CLhkpT']===undefined){var _0xc7a0a0=function(_0x17db41){const _0x15b223='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x42bc8d='',_0x248cf2='';for(let _0x1253ae=0x0,_0x2057dd,_0x3d5ca4,_0x4cb3a8=0x0;_0x3d5ca4=_0x17db41['charAt'](_0x4cb3a8++);~_0x3d5ca4&&(_0x2057dd=_0x1253ae%0x4?_0x2057dd*0x40+_0x3d5ca4:_0x3d5ca4,_0x1253ae++%0x4)?_0x42bc8d+=String['fromCharCode'](0xff&_0x2057dd>>(-0x2*_0x1253ae&0x6)):0x0){_0x3d5ca4=_0x15b223['indexOf'](_0x3d5ca4);}for(let _0x2c76d6=0x0,_0x5b9763=_0x42bc8d['length'];_0x2c76d6<_0x5b9763;_0x2c76d6++){_0x248cf2+='%'+('00'+_0x42bc8d['charCodeAt'](_0x2c76d6)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x248cf2);};a0_0x1f1f['nRvasW']=_0xc7a0a0,_0x57aeea=arguments,a0_0x1f1f['CLhkpT']=!![];}const _0x43031c=_0x254d70[0x0],_0x506afe=_0x1f1f97+_0x43031c,_0x67469=_0x57aeea[_0x506afe];return!_0x67469?(_0x4d727f=a0_0x1f1f['nRvasW'](_0x4d727f),_0x57aeea[_0x506afe]=_0x4d727f):_0x4d727f=_0x67469,_0x4d727f;},a0_0x1f1f(_0x57aeea,_0x32a8ed);}import*as a0_0x17db41 from'vscode';import{ConversationOrchestrator}from'./conversationOrchestrator.js';function a0_0x254d(){const _0x38be7f=['mJu1A0f0yKrj','BgfUz3vHz2vjza','z2v0vgv4Da','CMvNAxn0zxjdB21Tyw5K','Bg9Nz2vY','CMvNAxn0zxjwAwv3CW','zgLZCg9ZywjSzxm','nJy1mZaWCxvWy25t','CMvNAxn0zxjxzwj2Awv3vMLLD1bYB3zPzgvY','tM8Gy29KzsbZzwXLy3rLzcbVCIbMAwXLigLZigvTChr5lG','y29UDgv4Da','C3vIC2nYAxb0Aw9UCW','DhjPBq','C2HVD1DHCM5PBMDnzxnZywDL','y29UzMLN','mZKZm25rqw9bwq','zNvUy3rPB24','y29TBwfUzhm','mtq3ntu4nuH4Auj0ua','C2HVD0vYCM9YtwvZC2fNzq','mteYmdmWmeHbrwD2Eq','q2HHDcbJB21Tyw5KigzHAwXLzdO','y2HHDfbYB3zPzgvY','Aw5MBW','Bg94AwfdAgf0','CMvNAxn0zxjdB21Tyw5KCW','qw5HBhLZAxmGzMfPBgvKoIa','Bg94AweUyw5HBhL6zq','zgLZCg9Zzq','Bg94AwfdAgf0lMzVy3vZ','qw5HBhL6zsbJB21Tyw5KigzHAwXLzdO','mta0mJj3CvrZALe','zxHLy3v0zunVBw1HBMq','AgfUzgXLvxnLCKLUChv0','odiYntq5n0fbBvDZsW','ChvZAa','B3jJAgvZDhjHDg9Y','mZu5nZz3sencs08','ntbfy050twC','zxjYB3i','Bg94AweUy2HHDa','ndK1tfjxtKPN','D2LUzg93','rMfPBgvKihrVigLUAxrPywXPEMuGrxH0zw5ZAw9Usg9ZDdO','nde4ntC1mgPhA0r1Cq','zg9JDw1LBNq'];a0_0x254d=function(){return _0x38be7f;};return a0_0x254d();}import{ChatViewProvider}from'../vscode/chatViewProvider.js';export class ExtensionHost{constructor(_0x15b223,_0x42bc8d,_0x248cf2){const _0x19b5c6=a0_0x1f1f;this['context']=_0x15b223,this['config']=_0x42bc8d,this[_0x19b5c6(0x1be)]=_0x248cf2,this[_0x19b5c6(0x1b0)]=null,this[_0x19b5c6(0x1a2)]=null,this['disposables']=[];}async['initialize'](){const _0xd5f169=a0_0x1f1f;try{this['orchestrator']=new ConversationOrchestrator(this[_0xd5f169(0x1c8)],this['logger']),this[_0xd5f169(0x1a2)]=new ChatViewProvider(this[_0xd5f169(0x1c4)],this['orchestrator'],this['logger']),this['registerCommands'](),this['registerViews'](),this[_0xd5f169(0x1be)][_0xd5f169(0x1a3)]('ExtensionHost\x20initialized\x20successfully');}catch(_0x1253ae){this[_0xd5f169(0x1be)][_0xd5f169(0x1b3)](_0xd5f169(0x1b7),_0x1253ae);throw _0x1253ae;}}[a0_0x4334a3(0x1a5)](){const _0x5dc395=a0_0x4334a3,_0x2057dd=a0_0x17db41[_0x5dc395(0x19d)][_0x5dc395(0x1bd)](_0x5dc395(0x1b4),async()=>{const _0x2a9b3d=_0x5dc395;try{a0_0x17db41[_0x2a9b3d(0x19d)][_0x2a9b3d(0x1ac)]('loxiaChat.focus');const _0x4cb3a8=await a0_0x17db41[_0x2a9b3d(0x1b6)]['showInputBox']({'prompt':'What\x20would\x20you\x20like\x20me\x20to\x20help\x20you\x20with?','placeHolder':'Ask\x20anything\x20about\x20your\x20code...'});_0x4cb3a8&&await this[_0x2a9b3d(0x1a2)][_0x2a9b3d(0x1ad)](_0x4cb3a8);}catch(_0x2c76d6){this['logger']['error'](_0x2a9b3d(0x1a1),_0x2c76d6),a0_0x17db41['window'][_0x2a9b3d(0x19f)]('Chat\x20failed:\x20'+_0x2c76d6['message']);}}),_0x3d5ca4=a0_0x17db41[_0x5dc395(0x19d)]['registerCommand'](_0x5dc395(0x1a7),async()=>{const _0x27e7c7=_0x5dc395;try{const _0x5b9763=a0_0x17db41[_0x27e7c7(0x1b6)]['activeTextEditor'];if(!_0x5b9763){a0_0x17db41[_0x27e7c7(0x1b6)][_0x27e7c7(0x1c7)]('No\x20active\x20editor\x20found.\x20Please\x20open\x20a\x20file\x20to\x20analyze.');return;}const _0x12dc40=_0x5b9763[_0x27e7c7(0x1b9)],_0x5b6393=_0x5b9763['selection'],_0x4b3e13=_0x5b6393['isEmpty']?_0x12dc40['getText']():_0x12dc40[_0x27e7c7(0x1bc)](_0x5b6393);if(!_0x4b3e13[_0x27e7c7(0x1c6)]()){a0_0x17db41[_0x27e7c7(0x1b6)][_0x27e7c7(0x1c7)](_0x27e7c7(0x1c3));return;}const _0x4693c5='Please\x20analyze\x20this\x20'+_0x12dc40[_0x27e7c7(0x1bb)]+'\x20code:\x0a\x0a```'+_0x12dc40[_0x27e7c7(0x1bb)]+'\x0a'+_0x4b3e13+'\x0a```';await this[_0x27e7c7(0x1a2)]['handleUserInput'](_0x4693c5),a0_0x17db41[_0x27e7c7(0x19d)]['executeCommand'](_0x27e7c7(0x1a9));}catch(_0x2950b5){this[_0x27e7c7(0x1be)][_0x27e7c7(0x1b3)](_0x27e7c7(0x1aa),_0x2950b5),a0_0x17db41['window'][_0x27e7c7(0x19f)](_0x27e7c7(0x1a6)+_0x2950b5['message']);}});this['disposables'][_0x5dc395(0x1af)](_0x2057dd,_0x3d5ca4),this[_0x5dc395(0x1c4)][_0x5dc395(0x1c5)][_0x5dc395(0x1af)](...this[_0x5dc395(0x1c0)]);}[a0_0x4334a3(0x1bf)](){const _0x11f3a6=a0_0x4334a3,_0x3ef38b=a0_0x17db41['window'][_0x11f3a6(0x1c2)](_0x11f3a6(0x1a4),this['chatProvider'],{'webviewOptions':{'retainContextWhenHidden':!![]}});this[_0x11f3a6(0x1c0)]['push'](_0x3ef38b),this[_0x11f3a6(0x1c4)][_0x11f3a6(0x1c5)]['push'](_0x3ef38b);}[a0_0x4334a3(0x1a8)](){const _0x2e982b=a0_0x4334a3;this[_0x2e982b(0x1be)][_0x2e982b(0x1a3)]('ExtensionHost\x20disposing...'),this['disposables']['forEach'](_0x3e2e74=>{const _0x165985=_0x2e982b;_0x3e2e74&&typeof _0x3e2e74['dispose']===_0x165985(0x19c)&&_0x3e2e74['dispose']();}),this[_0x2e982b(0x1c0)]=[],this['chatProvider']&&(this[_0x2e982b(0x1a2)]['dispose'](),this[_0x2e982b(0x1a2)]=null),this['orchestrator']=null;}}