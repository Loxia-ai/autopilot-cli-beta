const a0_0x1081ae=a0_0x4e55;(function(_0x5cd3e6,_0x1c2eb9){const _0x4accb1=a0_0x4e55,_0x12a082=_0x5cd3e6();while(!![]){try{const _0x2c7b2d=-parseInt(_0x4accb1(0x17f))/0x1*(parseInt(_0x4accb1(0x17b))/0x2)+parseInt(_0x4accb1(0x172))/0x3*(-parseInt(_0x4accb1(0x18a))/0x4)+parseInt(_0x4accb1(0x195))/0x5*(-parseInt(_0x4accb1(0x17a))/0x6)+-parseInt(_0x4accb1(0x18b))/0x7+-parseInt(_0x4accb1(0x170))/0x8+parseInt(_0x4accb1(0x16b))/0x9*(-parseInt(_0x4accb1(0x198))/0xa)+parseInt(_0x4accb1(0x185))/0xb*(parseInt(_0x4accb1(0x16d))/0xc);if(_0x2c7b2d===_0x1c2eb9)break;else _0x12a082['push'](_0x12a082['shift']());}catch(_0x36786a){_0x12a082['push'](_0x12a082['shift']());}}}(a0_0x2ba3,0x46ffe));function a0_0x2ba3(){const _0x3e31d0=['CMvNAxn0zxjwAwv3CW','Aw5MBW','C2vSzwn0Aw9U','tM8Gywn0AxzLigvKAxrVCIbMB3vUzc4GugXLyxnLig9Wzw4GysbMAwXLihrVigfUywX5EMuU','mty5ntm3nJfereTsvK4','zxjYB3i','D2LUzg93','cMbGya','zM9YrwfJAa','mJi1mdaYohblyMDLAq','ntK5ntiYuMTfvvf1','Bg94AweUyw5HBhL6zq','z2v0vgv4Da','C3vIC2nYAxb0Aw9UCW','y2HHDfbYB3zPzgvY','CMvNAxn0zxjdB21Tyw5K','C2HVD0vYCM9YtwvZC2fNzq','BgfUz3vHz2vjza','q2HHDcbMywLSzwq6ia','zNvUy3rPB24','mty5mevsD2LIza','v2HHDcb3B3vSzcb5B3uGBgLRzsbTzsb0BYbOzwXWihLVDsb3AxrOpW','qw5HBhL6zsbJB21Tyw5KigzHAwXLzdO','mti2mJbLzfjhrLy','nda1qLLNtxzo','rxH0zw5ZAw9Usg9ZDcbKAxnWB3nPBMCUlI4','mtjKz01ovNu','BwvZC2fNzq','ugXLyxnLigfUywX5EMuGDgHPCYa','mJmXotC2ohjszwX6Ba','y29TBwfUzhm','m0Xnzhrzvq','B3jJAgvZDhjHDg9Y','zgLZCg9ZywjSzxm','y29UDgv4Da','zxHLy3v0zunVBw1HBMq','DhjPBq','zgLZCg9Zzq','AxnfBxb0Eq','mJy0me5qAvLWDa','nLLpuwXeAW','CMvNAxn0zxjdB21Tyw5KCW','y29UzMLN','ChvZAa','mZu2mdf6BxbjsMy','Bg9Nz2vY'];a0_0x2ba3=function(){return _0x3e31d0;};return a0_0x2ba3();}function a0_0x4e55(_0xb16adf,_0x109aa9){const _0x2ba3fe=a0_0x2ba3();return a0_0x4e55=function(_0x4e5527,_0x4cabb0){_0x4e5527=_0x4e5527-0x16b;let _0x5a17db=_0x2ba3fe[_0x4e5527];if(a0_0x4e55['NywfHb']===undefined){var _0x1eb255=function(_0x2dac3){const _0x4388fd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x51387b='',_0x4c8ba4='';for(let _0x241d0c=0x0,_0x54f87c,_0x1c8642,_0x40be74=0x0;_0x1c8642=_0x2dac3['charAt'](_0x40be74++);~_0x1c8642&&(_0x54f87c=_0x241d0c%0x4?_0x54f87c*0x40+_0x1c8642:_0x1c8642,_0x241d0c++%0x4)?_0x51387b+=String['fromCharCode'](0xff&_0x54f87c>>(-0x2*_0x241d0c&0x6)):0x0){_0x1c8642=_0x4388fd['indexOf'](_0x1c8642);}for(let _0x457936=0x0,_0x2f73a4=_0x51387b['length'];_0x457936<_0x2f73a4;_0x457936++){_0x4c8ba4+='%'+('00'+_0x51387b['charCodeAt'](_0x457936)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4c8ba4);};a0_0x4e55['PpYipY']=_0x1eb255,_0xb16adf=arguments,a0_0x4e55['NywfHb']=!![];}const _0x1a793f=_0x2ba3fe[0x0],_0x2f86a6=_0x4e5527+_0x1a793f,_0x55b46d=_0xb16adf[_0x2f86a6];return!_0x55b46d?(_0x5a17db=a0_0x4e55['PpYipY'](_0x5a17db),_0xb16adf[_0x2f86a6]=_0x5a17db):_0x5a17db=_0x55b46d,_0x5a17db;},a0_0x4e55(_0xb16adf,_0x109aa9);}import*as a0_0x2dac3 from'vscode';import{ConversationOrchestrator}from'./conversationOrchestrator.js';import{ChatViewProvider}from'../vscode/chatViewProvider.js';export class ExtensionHost{constructor(_0x4388fd,_0x51387b,_0x4c8ba4){const _0x525d32=a0_0x4e55;this[_0x525d32(0x175)]=_0x4388fd,this[_0x525d32(0x17d)]=_0x51387b,this['logger']=_0x4c8ba4,this['orchestrator']=null,this['chatProvider']=null,this[_0x525d32(0x174)]=[];}async['initialize'](){const _0x1a24ef=a0_0x4e55;try{this[_0x1a24ef(0x173)]=new ConversationOrchestrator(this[_0x1a24ef(0x17d)],this[_0x1a24ef(0x180)]),this[_0x1a24ef(0x18f)]=new ChatViewProvider(this[_0x1a24ef(0x175)],this[_0x1a24ef(0x173)],this['logger']),this[_0x1a24ef(0x17c)](),this[_0x1a24ef(0x181)](),this['logger'][_0x1a24ef(0x182)]('ExtensionHost\x20initialized\x20successfully');}catch(_0x241d0c){this['logger']['error']('Failed\x20to\x20initialize\x20ExtensionHost:',_0x241d0c);throw _0x241d0c;}}['registerCommands'](){const _0x3e7299=a0_0x4e55,_0x54f87c=a0_0x2dac3['commands'][_0x3e7299(0x190)]('loxia.chat',async()=>{const _0x2ec610=_0x3e7299;try{a0_0x2dac3['commands'][_0x2ec610(0x176)]('loxiaChat.focus');const _0x40be74=await a0_0x2dac3['window']['showInputBox']({'prompt':_0x2ec610(0x196),'placeHolder':'Ask\x20anything\x20about\x20your\x20code...'});_0x40be74&&await this[_0x2ec610(0x18f)]['handleUserInput'](_0x40be74);}catch(_0x457936){this[_0x2ec610(0x180)]['error']('Chat\x20command\x20failed:',_0x457936),a0_0x2dac3[_0x2ec610(0x187)][_0x2ec610(0x191)](_0x2ec610(0x193)+_0x457936[_0x2ec610(0x16e)]);}}),_0x1c8642=a0_0x2dac3['commands'][_0x3e7299(0x190)](_0x3e7299(0x18c),async()=>{const _0x4a2261=_0x3e7299;try{const _0x2f73a4=a0_0x2dac3['window']['activeTextEditor'];if(!_0x2f73a4){a0_0x2dac3[_0x4a2261(0x187)]['showWarningMessage'](_0x4a2261(0x184));return;}const _0x31edc9=_0x2f73a4['document'],_0x58d61f=_0x2f73a4[_0x4a2261(0x183)],_0x45ba45=_0x58d61f[_0x4a2261(0x179)]?_0x31edc9[_0x4a2261(0x18d)]():_0x31edc9[_0x4a2261(0x18d)](_0x58d61f);if(!_0x45ba45[_0x4a2261(0x177)]()){a0_0x2dac3['window']['showWarningMessage']('No\x20code\x20selected\x20or\x20file\x20is\x20empty.');return;}const _0x370ab5=_0x4a2261(0x16f)+_0x31edc9[_0x4a2261(0x192)]+'\x20code:\x0a\x0a```'+_0x31edc9[_0x4a2261(0x192)]+'\x0a'+_0x45ba45+_0x4a2261(0x188);await this['chatProvider']['handleUserInput'](_0x370ab5),a0_0x2dac3[_0x4a2261(0x171)][_0x4a2261(0x176)]('loxiaChat.focus');}catch(_0x894d88){this[_0x4a2261(0x180)][_0x4a2261(0x186)](_0x4a2261(0x197),_0x894d88),a0_0x2dac3['window'][_0x4a2261(0x191)]('Analysis\x20failed:\x20'+_0x894d88['message']);}});this['disposables']['push'](_0x54f87c,_0x1c8642),this[_0x3e7299(0x175)][_0x3e7299(0x18e)]['push'](...this[_0x3e7299(0x174)]);}['registerViews'](){const _0x555220=a0_0x4e55,_0xe21b2a=a0_0x2dac3[_0x555220(0x187)]['registerWebviewViewProvider']('loxiaChat',this[_0x555220(0x18f)],{'webviewOptions':{'retainContextWhenHidden':!![]}});this['disposables'][_0x555220(0x17e)](_0xe21b2a),this[_0x555220(0x175)]['subscriptions']['push'](_0xe21b2a);}[a0_0x1081ae(0x178)](){const _0x3cd9fc=a0_0x1081ae;this['logger'][_0x3cd9fc(0x182)](_0x3cd9fc(0x16c)),this['disposables'][_0x3cd9fc(0x189)](_0x1efbe9=>{const _0x3d8306=_0x3cd9fc;_0x1efbe9&&typeof _0x1efbe9['dispose']===_0x3d8306(0x194)&&_0x1efbe9['dispose']();}),this['disposables']=[],this['chatProvider']&&(this['chatProvider']['dispose'](),this['chatProvider']=null),this['orchestrator']=null;}}