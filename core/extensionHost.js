function a0_0x5b7e(_0x147e08,_0x175307){const _0x2ce66a=a0_0x2ce6();return a0_0x5b7e=function(_0x5b7ebc,_0xe4602c){_0x5b7ebc=_0x5b7ebc-0x115;let _0x593495=_0x2ce66a[_0x5b7ebc];if(a0_0x5b7e['MpfRYj']===undefined){var _0x2fc9e9=function(_0x8b1cbc){const _0x5ec6c7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x48d6e2='',_0x694cc2='';for(let _0x485d7c=0x0,_0x2573c1,_0x378261,_0x4493a8=0x0;_0x378261=_0x8b1cbc['charAt'](_0x4493a8++);~_0x378261&&(_0x2573c1=_0x485d7c%0x4?_0x2573c1*0x40+_0x378261:_0x378261,_0x485d7c++%0x4)?_0x48d6e2+=String['fromCharCode'](0xff&_0x2573c1>>(-0x2*_0x485d7c&0x6)):0x0){_0x378261=_0x5ec6c7['indexOf'](_0x378261);}for(let _0x2dc569=0x0,_0x411821=_0x48d6e2['length'];_0x2dc569<_0x411821;_0x2dc569++){_0x694cc2+='%'+('00'+_0x48d6e2['charCodeAt'](_0x2dc569)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x694cc2);};a0_0x5b7e['MTSwKk']=_0x2fc9e9,_0x147e08=arguments,a0_0x5b7e['MpfRYj']=!![];}const _0x577a20=_0x2ce66a[0x0],_0x1e3f0e=_0x5b7ebc+_0x577a20,_0x30fe5f=_0x147e08[_0x1e3f0e];return!_0x30fe5f?(_0x593495=a0_0x5b7e['MTSwKk'](_0x593495),_0x147e08[_0x1e3f0e]=_0x593495):_0x593495=_0x30fe5f,_0x593495;},a0_0x5b7e(_0x147e08,_0x175307);}(function(_0x23043f,_0x320b5c){const _0x59a642=a0_0x5b7e,_0x53e22b=_0x23043f();while(!![]){try{const _0x1d4923=parseInt(_0x59a642(0x123))/0x1+-parseInt(_0x59a642(0x13e))/0x2*(parseInt(_0x59a642(0x127))/0x3)+-parseInt(_0x59a642(0x13b))/0x4*(-parseInt(_0x59a642(0x116))/0x5)+-parseInt(_0x59a642(0x130))/0x6+-parseInt(_0x59a642(0x121))/0x7+parseInt(_0x59a642(0x126))/0x8+parseInt(_0x59a642(0x129))/0x9*(parseInt(_0x59a642(0x115))/0xa);if(_0x1d4923===_0x320b5c)break;else _0x53e22b['push'](_0x53e22b['shift']());}catch(_0x57bcbc){_0x53e22b['push'](_0x53e22b['shift']());}}}(a0_0x2ce6,0x18ada));import*as a0_0x8b1cbc from'vscode';import{ConversationOrchestrator}from'./conversationOrchestrator.js';import{ChatViewProvider}from'../vscode/chatViewProvider.js';export class ExtensionHost{constructor(_0x5ec6c7,_0x48d6e2,_0x694cc2){const _0xf45936=a0_0x5b7e;this[_0xf45936(0x12f)]=_0x5ec6c7,this[_0xf45936(0x13c)]=_0x48d6e2,this[_0xf45936(0x133)]=_0x694cc2,this['orchestrator']=null,this['chatProvider']=null,this[_0xf45936(0x11a)]=[];}async['initialize'](){const _0x5ba197=a0_0x5b7e;try{this[_0x5ba197(0x12e)]=new ConversationOrchestrator(this['config'],this[_0x5ba197(0x133)]),this[_0x5ba197(0x124)]=new ChatViewProvider(this['context'],this[_0x5ba197(0x12e)],this[_0x5ba197(0x133)]),this[_0x5ba197(0x13d)](),this['registerViews'](),this['logger'][_0x5ba197(0x13a)](_0x5ba197(0x135));}catch(_0x485d7c){this[_0x5ba197(0x133)]['error']('Failed\x20to\x20initialize\x20ExtensionHost:',_0x485d7c);throw _0x485d7c;}}['registerCommands'](){const _0x254508=a0_0x5b7e,_0x2573c1=a0_0x8b1cbc['commands']['registerCommand'](_0x254508(0x11b),async()=>{const _0x5b3d68=_0x254508;try{a0_0x8b1cbc[_0x5b3d68(0x132)]['executeCommand'](_0x5b3d68(0x120));const _0x4493a8=await a0_0x8b1cbc[_0x5b3d68(0x139)][_0x5b3d68(0x13f)]({'prompt':_0x5b3d68(0x117),'placeHolder':'Ask\x20anything\x20about\x20your\x20code...'});_0x4493a8&&await this[_0x5b3d68(0x124)]['handleUserInput'](_0x4493a8);}catch(_0x2dc569){this['logger'][_0x5b3d68(0x12a)](_0x5b3d68(0x119),_0x2dc569),a0_0x8b1cbc[_0x5b3d68(0x139)][_0x5b3d68(0x11c)]('Chat\x20failed:\x20'+_0x2dc569[_0x5b3d68(0x122)]);}}),_0x378261=a0_0x8b1cbc[_0x254508(0x132)]['registerCommand']('loxia.analyze',async()=>{const _0xf6a4b=_0x254508;try{const _0x411821=a0_0x8b1cbc[_0xf6a4b(0x139)]['activeTextEditor'];if(!_0x411821){a0_0x8b1cbc[_0xf6a4b(0x139)][_0xf6a4b(0x11d)]('No\x20active\x20editor\x20found.\x20Please\x20open\x20a\x20file\x20to\x20analyze.');return;}const _0x331f6e=_0x411821[_0xf6a4b(0x138)],_0x234149=_0x411821[_0xf6a4b(0x11f)],_0xfce164=_0x234149['isEmpty']?_0x331f6e['getText']():_0x331f6e[_0xf6a4b(0x134)](_0x234149);if(!_0xfce164['trim']()){a0_0x8b1cbc['window']['showWarningMessage']('No\x20code\x20selected\x20or\x20file\x20is\x20empty.');return;}const _0x165f5c=_0xf6a4b(0x12c)+_0x331f6e['languageId']+_0xf6a4b(0x12d)+_0x331f6e['languageId']+'\x0a'+_0xfce164+_0xf6a4b(0x118);await this['chatProvider']['handleUserInput'](_0x165f5c),a0_0x8b1cbc[_0xf6a4b(0x132)][_0xf6a4b(0x137)]('loxiaChat.focus');}catch(_0x5bceb4){this['logger']['error']('Analyze\x20command\x20failed:',_0x5bceb4),a0_0x8b1cbc[_0xf6a4b(0x139)]['showErrorMessage']('Analysis\x20failed:\x20'+_0x5bceb4[_0xf6a4b(0x122)]);}});this[_0x254508(0x11a)]['push'](_0x2573c1,_0x378261),this[_0x254508(0x12f)]['subscriptions']['push'](...this['disposables']);}['registerViews'](){const _0x5cc80a=a0_0x5b7e,_0x169288=a0_0x8b1cbc[_0x5cc80a(0x139)]['registerWebviewViewProvider'](_0x5cc80a(0x125),this['chatProvider'],{'webviewOptions':{'retainContextWhenHidden':!![]}});this['disposables'][_0x5cc80a(0x136)](_0x169288),this[_0x5cc80a(0x12f)][_0x5cc80a(0x131)][_0x5cc80a(0x136)](_0x169288);}['dispose'](){const _0xe48f72=a0_0x5b7e;this[_0xe48f72(0x133)][_0xe48f72(0x13a)](_0xe48f72(0x12b)),this['disposables']['forEach'](_0x14e59e=>{const _0x306f4a=_0xe48f72;_0x14e59e&&typeof _0x14e59e['dispose']===_0x306f4a(0x128)&&_0x14e59e[_0x306f4a(0x11e)]();}),this['disposables']=[],this[_0xe48f72(0x124)]&&(this[_0xe48f72(0x124)][_0xe48f72(0x11e)](),this['chatProvider']=null),this[_0xe48f72(0x12e)]=null;}}function a0_0x2ce6(){const _0x30d941=['mtG0ohjZBMrLyG','y29UzMLN','CMvNAxn0zxjdB21Tyw5KCW','otGZmtrXAvz4y2O','C2HVD0LUChv0qM94','otq2odKWzfzrz3zg','odq1EfPus21A','v2HHDcb3B3vSzcb5B3uGBgLRzsbTzsb0BYbOzwXWihLVDsb3AxrOpW','cMbGya','q2HHDcbJB21Tyw5KigzHAwXLzdO','zgLZCg9ZywjSzxm','Bg94AweUy2HHDa','C2HVD0vYCM9YtwvZC2fNzq','C2HVD1DHCM5PBMDnzxnZywDL','zgLZCg9Zzq','C2vSzwn0Aw9U','Bg94AwfdAgf0lMzVy3vZ','ndu2odq4r1fmEK50','BwvZC2fNzq','ody4ntDyuhLsvuW','y2HHDfbYB3zPzgvY','Bg94AwfdAgf0','mZm2otiWBvLtqwj5','ouDfDxvusa','zNvUy3rPB24','mtH5uezlyuW','zxjYB3i','rxH0zw5ZAw9Usg9ZDcbKAxnWB3nPBMCUlI4','ugXLyxnLigfUywX5EMuGDgHPCYa','ignVzgu6cGPGyga','B3jJAgvZDhjHDg9Y','y29UDgv4Da','ndK1nJy2uw9rAfD2','C3vIC2nYAxb0Aw9UCW','y29TBwfUzhm','Bg9Nz2vY','z2v0vgv4Da','rxH0zw5ZAw9Usg9ZDcbPBML0AwfSAxPLzcbZDwnJzxnZzNvSBhK','ChvZAa','zxHLy3v0zunVBw1HBMq','zg9JDw1LBNq','D2LUzg93','Aw5MBW'];a0_0x2ce6=function(){return _0x30d941;};return a0_0x2ce6();}