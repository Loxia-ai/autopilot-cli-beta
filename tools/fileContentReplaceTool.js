function a0_0x4535(_0x20e3df,_0x4756db){const _0x1c988c=a0_0x1c98();return a0_0x4535=function(_0x4535d5,_0x2766ba){_0x4535d5=_0x4535d5-0x168;let _0x3bf7de=_0x1c988c[_0x4535d5];if(a0_0x4535['QtBEFS']===undefined){var _0x361b04=function(_0x37448f){const _0x50f0f2='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1d5d35='',_0x28d820='';for(let _0x147bb6=0x0,_0x28066d,_0x5e4762,_0xde3f26=0x0;_0x5e4762=_0x37448f['charAt'](_0xde3f26++);~_0x5e4762&&(_0x28066d=_0x147bb6%0x4?_0x28066d*0x40+_0x5e4762:_0x5e4762,_0x147bb6++%0x4)?_0x1d5d35+=String['fromCharCode'](0xff&_0x28066d>>(-0x2*_0x147bb6&0x6)):0x0){_0x5e4762=_0x50f0f2['indexOf'](_0x5e4762);}for(let _0x3c25ef=0x0,_0xfc70fd=_0x1d5d35['length'];_0x3c25ef<_0xfc70fd;_0x3c25ef++){_0x28d820+='%'+('00'+_0x1d5d35['charCodeAt'](_0x3c25ef)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x28d820);};a0_0x4535['wHDTjO']=_0x361b04,_0x20e3df=arguments,a0_0x4535['QtBEFS']=!![];}const _0x184da3=_0x1c988c[0x0],_0x3c65a9=_0x4535d5+_0x184da3,_0x4b7e83=_0x20e3df[_0x3c65a9];return!_0x4b7e83?(_0x3bf7de=a0_0x4535['wHDTjO'](_0x3bf7de),_0x20e3df[_0x3c65a9]=_0x3bf7de):_0x3bf7de=_0x4b7e83,_0x3bf7de;},a0_0x4535(_0x20e3df,_0x4756db);}function a0_0x1c98(){const _0x4a15bf=['Aw5MBW','BwvZC2fNzq','mtu2qwD5uvnP','ihjLCgXHy2vTzw50','yxbWBhLuCMLTtw9Kzq','Cgf0Aa','nZeWnJq0sunVBffl','ywn0Aw9U','y29UDgvUDa','rMLSzsb0ywCGBwLZC2LUzYbWyxrOigf0DhjPyNv0zq','zw5KC1DPDgG','rxjYB3iGCgfYC2LUzYbMAwXLignVBNrLBNqGCMvWBgfJzsbWyxjHBwv0zxjZoG','BMv3lwnVBNrLBNq','BMv3q29UDgvUDa','z2v0rgvZy3jPChrPB24','Bg9Nz2vY','mtiYmZeXnxbjte9Pyq','D2fYBG','rMLSzsa','AgfZ','zMLSzvbHDgG','D3jPDgvgAwXL','BM9Uzq','lMjHAW','CMvWBgfJzq','DhjPBq','uMvWBgfJzsb0ywCGBwLZC2LUzYbVBgqTy29UDgvUDa','CMvZB2X2zvbHDgG','BgvUz3rO','mJy1mZe0EKP6Eg9n','DxrMltG','ywrK','ng9Mz1ftzW','oti1ndm1quzltLvZ','y29TBwfUzhm','ChvZAa','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','xcqM','rxjYB3iGCMvHzgLUzYbMAwXLia','nJK2mJeWywXcwKz1','mtf1yvvXugy','rgLMzIaOBgLUzxmG','Aw5JBhvKzxm','Bwf4','zxnJyxbLuMvNrxHW','BgLUzxnmAw1PDa','ugfYC2LUzYbMAwXLignVBNrLBNqGCMvWBgfJzsbWyxjHBwv0zxjZihDPDgGGvgfNugfYC2vY','ugvYzM9YBwLUzYbSAw5LlwXPBwL0zwqGCMvWBgfJzw1LBNqGAw4GBgLUzxm6ia','CgfYC2vmAw5LuMfUz2vZ','tM8GzMLSzsbJB250zw50ihjLCgXHy2uGy29TBwfUzhmGC3bLy2LMAwvK','mti2ndG0nZbMEMrfB1u','vw5RBM93BIbMAwXLignVBNrLBNqGCMvWBgfJzsbJB21Tyw5KoIa','rMfPBgvKihrVignYzwf0zsbIywnRDxaGzMLSztOG','C3bSAxq','mtu4ntuYmgX1z0DKua','mZzLrxPkBMi','zNjVBq','ihrVia'];a0_0x1c98=function(){return _0x4a15bf;};return a0_0x1c98();}const a0_0x2e2412=a0_0x4535;(function(_0x3b7074,_0x535217){const _0x556731=a0_0x4535,_0x209301=_0x3b7074();while(!![]){try{const _0x489cf3=-parseInt(_0x556731(0x197))/0x1+parseInt(_0x556731(0x17e))/0x2+-parseInt(_0x556731(0x1a1))/0x3+-parseInt(_0x556731(0x177))/0x4*(parseInt(_0x556731(0x178))/0x5)+-parseInt(_0x556731(0x193))/0x6*(-parseInt(_0x556731(0x174))/0x7)+-parseInt(_0x556731(0x18d))/0x8*(parseInt(_0x556731(0x18e))/0x9)+parseInt(_0x556731(0x189))/0xa*(parseInt(_0x556731(0x17f))/0xb);if(_0x489cf3===_0x535217)break;else _0x209301['push'](_0x209301['shift']());}catch(_0xfde8ed){_0x209301['push'](_0x209301['shift']());}}}(a0_0x1c98,0x7a9c0));import{promises as a0_0x37448f}from'fs';import a0_0x50f0f2 from'path';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class FileContentReplaceTool extends BaseTool{constructor(_0x1d5d35,_0x28d820){super(_0x1d5d35,_0x28d820);}[a0_0x2e2412(0x19f)](){return'\x0aFile\x20Content\x20Replace\x20Tool:\x20Allows\x20you\x20to\x20replace\x20specific\x20content\x20within\x20files\x20(use\x20after\x20searching\x20strings\x20with\x20the\x20seek\x20tool).\x0a\x0aUsage:\x0a[tool\x20id=\x22file-content-replace\x22]\x0a[file\x20path=\x22path/to/file.js\x22]\x0a[replace\x20lines-limit=\x223,5,7-9\x22\x20mode=\x22trim|newlines|none\x22]\x0a[old-content]\x0acontent\x20to\x20replace\x0a[/old-content]\x0a[new-content]\x0areplacement\x20content\x0a[/new-content]\x0a[/replace]\x0a[/file]\x0a[/tool]\x0a\x0aParameters:\x0a-\x20path:\x20Path\x20to\x20the\x20file\x20to\x20modify\x0a-\x20lines-limit:\x20Optional\x20comma-separated\x20list\x20of\x20line\x20numbers\x20or\x20ranges\x20to\x20limit\x20the\x20replacement.\x20Examples:\x20\x223,5,7-9\x22\x20will\x20only\x20replace\x20in\x20lines\x203,\x205,\x20and\x207\x20through\x209.\x0a-\x20mode:\x20Optional\x20trim\x20mode\x20for\x20old-content\x20and\x20new-content\x20strings:\x0a\x20\x20*\x20\x22trim\x22\x20(default,\x20recommended):\x20Trim\x20whitespace\x20from\x20both\x20ends\x20of\x20old-content\x20and\x20new-content\x0a\x20\x20*\x20\x22newlines\x22:\x20Only\x20trim\x20newline\x20characters\x20from\x20both\x20ends\x0a\x20\x20*\x20\x22none\x22:\x20Use\x20content\x20as-is\x20without\x20any\x20trimming\x0a-\x20old-content\x20(tag):\x20The\x20string\x20we\x20want\x20to\x20replace\x0a-\x20new-content\x20(tag):\x20The\x20new\x20string\x20we\x20want\x20to\x20put\x20instead\x20of\x20the\x20above\x0a\x0aExamples:\x0a1.\x20Replace\x20content\x20with\x20default\x20trimming:\x0a[tool\x20id=\x22file-content-replace\x22]\x0a[file\x20path=\x22src/components/Button.js\x22]\x0a[replace]\x0a[old-content]\x0a\x20\x20const\x20handleClick\x20=\x20(event)\x20=>\x20{\x0a\x20\x20\x20\x20console.log(\x27Button\x20clicked\x27);\x0a\x20\x20}\x0a[/old-content]\x0a[new-content]\x0a\x20\x20const\x20handleClick\x20=\x20(event)\x20=>\x20{\x0a\x20\x20\x20\x20console.log(\x27Button\x20clicked\x27);\x0a\x20\x20\x20\x20props.onClick\x20&&\x20props.onClick(event);\x0a\x20\x20}\x0a[/new-content]\x0a[/replace]\x0a[/file]\x0a[/tool]\x0a\x0a2.\x20Replace\x20content\x20without\x20any\x20trimming:\x0a[tool\x20id=\x22file-content-replace\x22]\x0a[file\x20path=\x22src/App.js\x22]\x0a[replace\x20mode=\x22none\x22]\x0a[old-content]\x0a\x20\x20return\x20(\x0a\x20\x20\x20\x20<div>Hello</div>\x0a\x20\x20);\x0a[/old-content]\x0a[new-content]\x0a\x20\x20return\x20(\x0a\x20\x20\x20\x20<div>Hello\x20World</div>\x0a\x20\x20);\x0a[/new-content]\x0a[/replace]\x0a[/file]\x0a[/tool]\x0a\x0aNotes:\x0a-\x20The\x20replacement\x20can\x20change\x20multiple\x20lines\x20at\x20once\x0a-\x20Default\x20behavior\x20trims\x20whitespace\x20from\x20old-content\x20and\x20new-content\x20for\x20easier\x20matching\x0a-\x20Use\x20mode=\x22none\x22\x20when\x20exact\x20whitespace\x20matching\x20is\x20required\x0a-\x20The\x20tool\x20will\x20create\x20a\x20backup\x20of\x20the\x20original\x20file\x20before\x20making\x20changes\x0a\x20\x20\x20\x20';}[a0_0x2e2412(0x195)](_0x147bb6,_0x28066d=a0_0x2e2412(0x170)){const _0x908ecc=a0_0x2e2412;switch(_0x28066d){case'newlines':return _0x147bb6['replace'](/^\n+|\n+$/g,'');case _0x908ecc(0x16d):return _0x147bb6;case _0x908ecc(0x170):default:return _0x147bb6['trim']();}}['parseParameters'](_0x5e4762){const _0x83790d=a0_0x2e2412;this['logger']['info'](_0x83790d(0x185));const _0xde3f26={'commands':[]};try{const _0x3c25ef=TagParser['query'](_0x5e4762,'file');for(const _0xfc70fd of _0x3c25ef){const _0x526621=_0xfc70fd['attributes'][_0x83790d(0x196)];if(!_0x526621){this[_0x83790d(0x1a0)]['warn'](_0x83790d(0x19a));continue;}const _0x18eb4c=TagParser['query'](_0xfc70fd['content'],'replace');for(const _0x5b4d74 of _0x18eb4c){const _0x316cdd=_0x5b4d74['attributes']['lines-limit'],_0x18c55a=_0x5b4d74['attributes']['mode']||'trim',_0x40f291=TagParser['query'](_0x5b4d74[_0x83790d(0x199)],'old-content');if(_0x40f291[_0x83790d(0x173)]===0x0){this['logger'][_0x83790d(0x168)](_0x83790d(0x171));continue;}const _0x317e3b=this[_0x83790d(0x195)](_0x40f291[0x0][_0x83790d(0x199)],_0x18c55a),_0x46495c=TagParser['query'](_0x5b4d74['content'],_0x83790d(0x19d));if(_0x46495c[_0x83790d(0x173)]===0x0){this[_0x83790d(0x1a0)][_0x83790d(0x168)]('Replace\x20tag\x20missing\x20new-content');continue;}const _0x5bef2f=this[_0x83790d(0x195)](_0x46495c[0x0][_0x83790d(0x199)],_0x18c55a);let _0x197b8e=null;_0x316cdd&&(_0x197b8e=this['parseLineRanges'](_0x316cdd)),_0xde3f26['commands']['push']({'action':_0x83790d(0x16f),'filePath':_0x526621,'linesLimit':_0x197b8e,'oldContent':_0x317e3b,'newContent':_0x5bef2f,'mode':_0x18c55a});}}return _0xde3f26;}catch(_0x378581){return this['logger']['error'](_0x83790d(0x19c),_0x378581),{'commands':[]};}}[a0_0x2e2412(0x187)](_0x4ecc1a){const _0x59603d=a0_0x2e2412,_0x121f04=new Set();if(!_0x4ecc1a||_0x4ecc1a['trim']()==='')return _0x121f04;const _0x697a79=_0x4ecc1a[_0x59603d(0x18c)](',');for(const _0x360c92 of _0x697a79){const _0x2e3d5c=_0x360c92['trim']();if(_0x2e3d5c==='')continue;if(_0x2e3d5c['includes']('-')){const [_0xdacdd,_0x50867c]=_0x2e3d5c[_0x59603d(0x18c)]('-')['map'](_0x54475a=>parseInt(_0x54475a[_0x59603d(0x170)](),0xa));if(!isNaN(_0xdacdd)&&!isNaN(_0x50867c))for(let _0x3b0293=_0xdacdd;_0x3b0293<=_0x50867c;_0x3b0293++){_0x121f04[_0x59603d(0x176)](_0x3b0293);}}else{const _0x5a84e7=parseInt(_0x2e3d5c,0xa);!isNaN(_0x5a84e7)&&_0x121f04['add'](_0x5a84e7);}}return _0x121f04;}async[a0_0x2e2412(0x17b)](_0x141b14,_0x297b6d){const _0x2610c5=a0_0x2e2412;this['logger'][_0x2610c5(0x191)]('Executing\x20file\x20content\x20replace\x20command\x20with\x20parameters:',_0x141b14);const _0x30a745=[];if(!_0x141b14[_0x2610c5(0x179)]||_0x141b14['commands']['length']===0x0)throw new Error(_0x2610c5(0x188));for(const _0x17ee88 of _0x141b14[_0x2610c5(0x179)]){try{switch(_0x17ee88[_0x2610c5(0x198)]){case _0x2610c5(0x16f):_0x30a745[_0x2610c5(0x17a)](await this['replaceContent'](_0x17ee88[_0x2610c5(0x16b)],_0x17ee88['oldContent'],_0x17ee88[_0x2610c5(0x19e)],_0x17ee88[_0x2610c5(0x184)],_0x297b6d,_0x17ee88['mode']));break;default:throw new Error(_0x2610c5(0x18a)+_0x17ee88[_0x2610c5(0x198)]);}}catch(_0x391a49){this[_0x2610c5(0x1a0)]['error']('Error\x20executing\x20file\x20content\x20replace\x20command\x20'+_0x17ee88[_0x2610c5(0x198)]+':',_0x391a49),_0x30a745[_0x2610c5(0x17a)]({'action':_0x17ee88[_0x2610c5(0x198)],'filePath':_0x17ee88[_0x2610c5(0x16b)],'success':![],'error':_0x391a49[_0x2610c5(0x192)]});}}return{'results':_0x30a745};}async['replaceContent'](_0x59e26c,_0x3a6bac,_0x31c4ba,_0x40fb62,_0x43d478,_0x2ee62c='trim'){const _0x21eca0=a0_0x2e2412;this['logger'][_0x21eca0(0x191)]('Replacing\x20content\x20in\x20file:\x20'+_0x59e26c+'\x20(mode:\x20'+_0x2ee62c+')');const _0x1c3d05=this['resolvePath'](_0x59e26c,_0x43d478);try{await a0_0x37448f['access'](_0x1c3d05);}catch(_0x1d67b1){throw new Error(_0x21eca0(0x169)+_0x59e26c+'\x20not\x20found:\x20'+_0x1d67b1[_0x21eca0(0x192)]);}let _0x2d0718;try{_0x2d0718=await a0_0x37448f['readFile'](_0x1c3d05,_0x21eca0(0x175));}catch(_0x3e0156){throw new Error(_0x21eca0(0x17d)+_0x59e26c+':\x20'+_0x3e0156[_0x21eca0(0x192)]);}const _0x471e98=_0x1c3d05+_0x21eca0(0x16e);try{await a0_0x37448f[_0x21eca0(0x16c)](_0x471e98,_0x2d0718);}catch(_0x33ecf4){this['logger']['warn'](_0x21eca0(0x18b)+_0x33ecf4[_0x21eca0(0x192)]);}const _0xfb2255=_0x2d0718['split']('\x0a');let _0x52474f=0x0,_0x1b3025=[];if(_0x40fb62){this[_0x21eca0(0x1a0)]['info'](_0x21eca0(0x186)+Array[_0x21eca0(0x18f)](_0x40fb62)['join'](',\x20'));let _0x335e56='',_0x5ddfd3=0x0;while(_0x5ddfd3<_0xfb2255['length']){const _0x23e6f8=_0x5ddfd3+0x1;if(_0x40fb62[_0x21eca0(0x16a)](_0x23e6f8)){const _0x319a44=[];let _0x1a9351=_0x5ddfd3;while(_0x1a9351<_0xfb2255['length']&&_0x40fb62[_0x21eca0(0x16a)](_0x1a9351+0x1)){_0x319a44['push'](_0xfb2255[_0x1a9351]),_0x1a9351++;}const _0x3bb50b=_0x319a44['join']('\x0a'),_0x38bae4=_0x3bb50b[_0x21eca0(0x181)](_0x3a6bac)?_0x3bb50b['replace'](new RegExp(this['escapeRegExp'](_0x3a6bac),'g'),_0x31c4ba):_0x3bb50b,_0x15477e=_0x3bb50b===_0x38bae4?0x0:(_0x3bb50b['match'](new RegExp(this['escapeRegExp'](_0x3a6bac),'g'))||[])[_0x21eca0(0x173)];_0x52474f+=_0x15477e,_0x335e56['length']>0x0&&!_0x335e56[_0x21eca0(0x19b)]('\x0a')&&(_0x335e56+='\x0a'),_0x335e56+=_0x38bae4,_0x5ddfd3=_0x1a9351;}else _0x335e56['length']>0x0&&!_0x335e56[_0x21eca0(0x19b)]('\x0a')&&(_0x335e56+='\x0a'),_0x335e56+=_0xfb2255[_0x5ddfd3],_0x5ddfd3++;}_0x52474f>0x0&&await a0_0x37448f[_0x21eca0(0x16c)](_0x1c3d05,_0x335e56),_0x1b3025=_0x335e56[_0x21eca0(0x18c)]('\x0a');}else{this[_0x21eca0(0x1a0)]['info']('Performing\x20replacement\x20in\x20the\x20entire\x20file');if(!_0x2d0718['includes'](_0x3a6bac))return{'action':_0x21eca0(0x16f),'filePath':_0x59e26c,'resolvedPath':_0x1c3d05,'success':!![],'replacementCount':0x0,'mode':_0x2ee62c,'message':'Old\x20content\x20not\x20found\x20in\x20file,\x20no\x20changes\x20made'};_0x52474f=(_0x2d0718['match'](new RegExp(this[_0x21eca0(0x183)](_0x3a6bac),'g'))||[])['length'];const _0x6013c1=_0x2d0718[_0x21eca0(0x16f)](new RegExp(this[_0x21eca0(0x183)](_0x3a6bac),'g'),_0x31c4ba);await a0_0x37448f[_0x21eca0(0x16c)](_0x1c3d05,_0x6013c1),_0x1b3025=_0x6013c1['split']('\x0a');}const _0x5c2c29=this['generateDiffReport'](_0xfb2255,_0x1b3025);return{'action':_0x21eca0(0x16f),'filePath':_0x59e26c,'resolvedPath':_0x1c3d05,'success':!![],'replacementCount':_0x52474f,'linesLimit':_0x40fb62?Array[_0x21eca0(0x18f)](_0x40fb62):null,'backupPath':_0x471e98,'diffReport':_0x5c2c29,'mode':_0x2ee62c,'message':_0x52474f>0x0?'Made\x20'+_0x52474f+_0x21eca0(0x194)+(_0x52474f>0x1?'s':'')+'\x20in\x20file\x20'+_0x59e26c+'\x20(mode:\x20'+_0x2ee62c+')':'No\x20replacements\x20made,\x20old\x20content\x20not\x20found\x20in\x20the\x20specified\x20lines'};}['generateDiffReport'](_0x216dad,_0x478300){const _0x1a01a9=a0_0x2e2412;let _0x39a1ed='',_0x182f4b=-0x1,_0x44dcfb=-0x1;const _0x76bb1d=Math[_0x1a01a9(0x182)](_0x216dad[_0x1a01a9(0x173)],_0x478300[_0x1a01a9(0x173)]);for(let _0x53f965=0x0;_0x53f965<_0x76bb1d;_0x53f965++){const _0x499bbc=_0x53f965<_0x216dad[_0x1a01a9(0x173)]?_0x216dad[_0x53f965]:null,_0x222ebe=_0x53f965<_0x478300[_0x1a01a9(0x173)]?_0x478300[_0x53f965]:null;_0x499bbc!==_0x222ebe&&(_0x182f4b===-0x1&&(_0x182f4b=_0x53f965),_0x44dcfb=_0x53f965);}if(_0x182f4b===-0x1)return'No\x20differences\x20found';const _0x5973cc=0x2,_0x4ceaf5=Math[_0x1a01a9(0x182)](0x0,_0x182f4b-_0x5973cc),_0xcb36f0=Math['min'](_0x76bb1d-0x1,_0x44dcfb+_0x5973cc);_0x39a1ed+=_0x1a01a9(0x180)+(_0x4ceaf5+0x1)+_0x1a01a9(0x190)+(_0xcb36f0+0x1)+'):\x0a\x0a';for(let _0x3f400e=_0x4ceaf5;_0x3f400e<=_0xcb36f0;_0x3f400e++){const _0x22f0b9=_0x3f400e<_0x216dad[_0x1a01a9(0x173)]?_0x216dad[_0x3f400e]:'',_0x3a0869=_0x3f400e<_0x478300['length']?_0x478300[_0x3f400e]:'';_0x22f0b9===_0x3a0869?_0x39a1ed+='\x20\x20'+(_0x3f400e+0x1)+':\x20'+_0x22f0b9+'\x0a':(_0x39a1ed+='-\x20'+(_0x3f400e+0x1)+':\x20'+_0x22f0b9+'\x0a',_0x39a1ed+='+\x20'+(_0x3f400e+0x1)+':\x20'+_0x3a0869+'\x0a');}return _0x39a1ed;}[a0_0x2e2412(0x183)](_0x5ccebd){const _0x3ed9ff=a0_0x2e2412;return _0x5ccebd[_0x3ed9ff(0x16f)](/[.*+?^${}()|[\]\\]/g,_0x3ed9ff(0x17c));}[a0_0x2e2412(0x172)](_0x3b2871,_0x2a5daa){if(a0_0x50f0f2['isAbsolute'](_0x3b2871))return _0x3b2871;return a0_0x50f0f2['resolve'](_0x2a5daa,_0x3b2871);}}