const a0_0x5c5d36=a0_0x2d26;(function(_0x48a0b3,_0x258e73){const _0x3b125d=a0_0x2d26,_0x5cbe5c=_0x48a0b3();while(!![]){try{const _0x56201d=-parseInt(_0x3b125d(0x10a))/0x1+parseInt(_0x3b125d(0x13e))/0x2*(-parseInt(_0x3b125d(0x134))/0x3)+-parseInt(_0x3b125d(0x117))/0x4+-parseInt(_0x3b125d(0x116))/0x5+parseInt(_0x3b125d(0x145))/0x6+parseInt(_0x3b125d(0x122))/0x7+parseInt(_0x3b125d(0x119))/0x8;if(_0x56201d===_0x258e73)break;else _0x5cbe5c['push'](_0x5cbe5c['shift']());}catch(_0x199f3a){_0x5cbe5c['push'](_0x5cbe5c['shift']());}}}(a0_0x4bea,0x6a0cf));import{promises as a0_0x48c100}from'fs';import a0_0xc069b6 from'path';import{TagParser}from'../utilities/tagParser.js';function a0_0x4bea(){const _0x3bd924=['mtCWnJy3nuPQsK9Nra','mZmYote4nhPdEhzVAq','lYOUANn4','mtiXotm5mJHSsxLzEe8','BgLUzu51BwjLCG','CgfYC2vqyxjHBwv0zxjZ','DgvZDa','CxvLCNK','CMvHzezPBgu','zgLYBMfTzq','zM91BMq','AxneAxjLy3rVCNK','nZy4ndq2yxHKruDj','C3rHDa','BM90rM91BMq','zxH0BMfTzq','yMfZzw5HBwu','vgHLigzVBgXVD2LUzYbMAwXLCYb3zxjLig5VDcbMB3vUzdOk','BgvUz3rO','Aw4TzMLSzxm','tM8GC2vHCMnOihrLCM1ZihnWzwnPzMLLza','vw5RBM93BIbZzwvRignVBw1HBMq6ia','y29TBwfUzhm','Aw5JBhvKzxm','AxngAwXL','Bwf0y2HLC1DPBgrJyxjK','C2vHCMnOvgvYBxm','BgLUzunVBNrLBNq','rxjYB3iGC2vHCMnOAw5NigLUigzPBguG','BwfW','mJa5n0zkD0Lqra','zMLSDgvY','icHUB3qGysbKAxjLy3rVCNKP','DgvYBq','Aw5MBW','AxnbyNnVBhv0zq','tM8GzMLSzxmGzM91BMqGBwf0y2HPBMCGDgHLihnWzwnPzMLLzcbWyxr0zxjUCW','CMvHzgrPCG','zMLSzvbHDgG','lcbSAw5Licm','mte4meHQtNrMtG','tM8GzMLSzxmGC3bLy2LMAwvKigzVCIbZzwfYy2G','DhjPBq','ywn0Aw9U','BwvZC2fNzq','C2vHCMnOlxrLCM1Z','y29UDgvUDa','mZm3nZCZnNrsDuLjwG','zMLSzvbHDgHZ','iIbMB3vUzcbHDdOk','C3bSAxq','icHUBYbTyxrJAgLUzYbMAwXLCYK','zhvTBxK','rxjYB3jZig9Jy3vYCMvKihDOzw4GC2vHCMnOAw5NihrOzsbMB2XSB3DPBMCGzMLSzxm6cG','ChvZAa','zxnJyxbLuMvNrxHW','zxjYB3i','mtC2ntuXD0fhCNvi','zw5KC1DPDgG','DxrMltG','Bg9Nz2vY','igzPBgvZ','D2fYBG','AM9PBG','rxjYB3iGzxHLy3v0Aw5NihnLzwSGy29TBwfUzca','rxjYB3iGChjVy2vZC2LUzYa','C2vHCMnO','zMLUzezPBgvZuMvJDxjZAxzLBhK','rxHLy3v0Aw5NihnLzwSGy29TBwfUzcb3AxrOihbHCMfTzxrLCNm6'];a0_0x4bea=function(){return _0x3bd924;};return a0_0x4bea();}import{BaseTool}from'./baseTool.js';function a0_0x2d26(_0x52f0be,_0x1be4ac){const _0x4beaa9=a0_0x4bea();return a0_0x2d26=function(_0x2d2604,_0x3b66a4){_0x2d2604=_0x2d2604-0x101;let _0x4d35a3=_0x4beaa9[_0x2d2604];if(a0_0x2d26['grmGDj']===undefined){var _0x15b0d3=function(_0x48c100){const _0xc069b6='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xa5b9d4='',_0x32b207='';for(let _0x1bab1d=0x0,_0x579980,_0x27a623,_0x7be79e=0x0;_0x27a623=_0x48c100['charAt'](_0x7be79e++);~_0x27a623&&(_0x579980=_0x1bab1d%0x4?_0x579980*0x40+_0x27a623:_0x27a623,_0x1bab1d++%0x4)?_0xa5b9d4+=String['fromCharCode'](0xff&_0x579980>>(-0x2*_0x1bab1d&0x6)):0x0){_0x27a623=_0xc069b6['indexOf'](_0x27a623);}for(let _0x5db87a=0x0,_0x2c2b8b=_0xa5b9d4['length'];_0x5db87a<_0x2c2b8b;_0x5db87a++){_0x32b207+='%'+('00'+_0xa5b9d4['charCodeAt'](_0x5db87a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x32b207);};a0_0x2d26['JiYXmk']=_0x15b0d3,_0x52f0be=arguments,a0_0x2d26['grmGDj']=!![];}const _0x2f7d6f=_0x4beaa9[0x0],_0x5b9128=_0x2d2604+_0x2f7d6f,_0x16c5b7=_0x52f0be[_0x5b9128];return!_0x16c5b7?(_0x4d35a3=a0_0x2d26['JiYXmk'](_0x4d35a3),_0x52f0be[_0x5b9128]=_0x4d35a3):_0x4d35a3=_0x16c5b7,_0x4d35a3;},a0_0x2d26(_0x52f0be,_0x1be4ac);}export class SeekTool extends BaseTool{constructor(_0xa5b9d4,_0x32b207){super(_0xa5b9d4,_0x32b207);}['getDescription'](){return'\x0aSeek\x20Tool:\x20Allows\x20you\x20to\x20search\x20for\x20specific\x20content\x20within\x20project\x20files.\x20highly\x20recommended\x20for\x20verifying\x20imports\x20(includes\x20etc)\x20between\x20files.\x0a\x0aUsage:\x0a[tool\x20id=\x22seek\x22]\x0a[in-files]\x0afile/path/one.js\x0afile/path/two.js\x0apath/to/directory/*.js\x0a[/in-files]\x0a[search-terms]\x0a[t]search\x20phrase\x20one[/t]\x0a[t]search\x20phrase\x20two[/t]\x0a[t]search\x20phrase\x20three[/t]\x0a[/search-terms]\x0a[/tool]\x0a\x0aExamples:\x0a1.\x20Search\x20for\x20specific\x20functions\x20in\x20JavaScript\x20files:\x0a[tool\x20id=\x22seek\x22]\x0a[in-files]\x0asrc/components/*.js\x0asrc/utils/helpers.js\x0a[/in-files]\x0a[search-terms]\x0a[t]function\x20handleSubmit[/t]\x0a[t]useState([/t]\x0a[/search-terms]\x0a[/tool]\x0a\x0a2.\x20Find\x20usages\x20of\x20a\x20specific\x20variable:\x0a[tool\x20id=\x22seek\x22]\x0a[in-files]\x0asrc/**/*.js\x0a[/in-files]\x0a[search-terms]\x0a[t]apiClient[/t]\x0a[/search-terms]\x0a[/tool]\x0a\x0a3.\x20Look\x20for\x20specific\x20imports:\x0a[tool\x20id=\x22seek\x22]\x0a[in-files]\x0asrc/components/Header.js\x0asrc/components/Footer.js\x0a[/in-files]\x0a[search-terms]\x0a[t]import\x20React[/t]\x0a[t]import\x20{\x20useState\x20}[/t]\x0a[/search-terms]\x0a[/tool]\x0a\x0aThe\x20tool\x20will\x20search\x20every\x20file\x20mentioned\x20in\x20the\x20[in-files]\x20tag.\x0aIn\x20each\x20file,\x20it\x20will\x20search\x20for\x20lines\x20containing\x20at\x20least\x20one\x20of\x20the\x20phrases\x20in\x20[search-terms].\x0aGlob\x20patterns\x20(like\x20*.js)\x20are\x20supported\x20in\x20file\x20paths.\x0aThe\x20tool\x20will\x20clearly\x20indicate\x20which\x20files\x20could\x20not\x20be\x20found\x20or\x20had\x20errors\x20during\x20the\x20search.\x0a\x20\x20\x20\x20';}[a0_0x5c5d36(0x11b)](_0x1bab1d){const _0x4411bd=a0_0x5c5d36;this['logger'][_0x4411bd(0x138)]('Parsing\x20seek\x20parameters\x20with\x20TagParser');const _0x579980={'commands':[]};try{const _0x27a623=TagParser[_0x4411bd(0x11d)](_0x1bab1d,_0x4411bd(0x129));let _0x7be79e=[];_0x27a623[_0x4411bd(0x128)]>0x0&&(_0x7be79e=_0x27a623[0x0]['content'][_0x4411bd(0x103)]('\x0a')[_0x4411bd(0x133)](_0x1d7464=>_0x1d7464['trim']())[_0x4411bd(0x135)](_0x5f44c2=>_0x5f44c2[_0x4411bd(0x128)]>0x0));const _0x5db87a=TagParser[_0x4411bd(0x11d)](_0x1bab1d,_0x4411bd(0x143));let _0x2c2b8b=[];if(_0x5db87a['length']>0x0){const _0xc8fa44=TagParser['query'](_0x5db87a[0x0][_0x4411bd(0x144)],'t');_0x2c2b8b=_0xc8fa44['map'](_0x5ec278=>_0x5ec278['content']['trim']())[_0x4411bd(0x135)](_0x4960f9=>_0x4960f9[_0x4411bd(0x128)]>0x0);}return _0x579980['commands'][_0x4411bd(0x107)]({'action':'search','filePaths':_0x7be79e,'searchTerms':_0x2c2b8b}),_0x579980;}catch(_0x22715e){return this['logger'][_0x4411bd(0x109)]('Error\x20parsing\x20seek\x20parameters:',_0x22715e),{'commands':[]};}}async['executeWithParameters'](_0x266bec,_0x3f484d){const _0x5563cd=a0_0x5c5d36;this[_0x5563cd(0x10d)][_0x5563cd(0x138)](_0x5563cd(0x115),_0x266bec);const _0x23bee4=[];if(!_0x266bec['commands']||_0x266bec[_0x5563cd(0x12c)]['length']===0x0)throw new Error('No\x20seek\x20commands\x20specified');for(const _0x156abb of _0x266bec['commands']){try{switch(_0x156abb['action']){case _0x5563cd(0x113):_0x23bee4['push'](await this['searchFiles'](_0x156abb[_0x5563cd(0x101)],_0x156abb[_0x5563cd(0x130)],_0x3f484d));break;default:throw new Error(_0x5563cd(0x12b)+_0x156abb[_0x5563cd(0x141)]);}}catch(_0x23a91d){this[_0x5563cd(0x10d)][_0x5563cd(0x109)](_0x5563cd(0x111)+_0x156abb[_0x5563cd(0x141)]+':',_0x23a91d),_0x23bee4['push']({'action':_0x156abb[_0x5563cd(0x141)],'success':![],'error':_0x23a91d['message']});}}return{'results':_0x23bee4};}async['searchFiles'](_0x4cf940,_0x5eb732,_0x3a623b){const _0x1926db=a0_0x5c5d36;this[_0x1926db(0x10d)][_0x1926db(0x138)]('Searching\x20for\x20'+_0x5eb732[_0x1926db(0x128)]+'\x20terms\x20in\x20'+_0x4cf940[_0x1926db(0x128)]+_0x1926db(0x10e));if(_0x4cf940[_0x1926db(0x128)]===0x0)throw new Error(_0x1926db(0x13f));if(_0x5eb732[_0x1926db(0x128)]===0x0)throw new Error(_0x1926db(0x12a));const _0xc01a36=await this['resolveFilePaths'](_0x4cf940,_0x3a623b),_0x3b6962=_0xc01a36['found'],_0x5719f3=_0xc01a36[_0x1926db(0x124)];if(_0x3b6962['length']===0x0)return{'action':_0x1926db(0x113),'success':!![],'message':_0x1926db(0x13a),'notFoundFiles':_0x5719f3,'matches':[]};const _0x24f877=[],_0x46f5b1=[];for(const _0x2c9e26 of _0x3b6962){try{const _0x1256ac=await this['searchInFile'](_0x2c9e26,_0x5eb732);_0x24f877[_0x1926db(0x107)](..._0x1256ac);}catch(_0x196ce9){this[_0x1926db(0x10d)][_0x1926db(0x10f)](_0x1926db(0x132)+_0x2c9e26+':\x20'+_0x196ce9['message']),_0x46f5b1[_0x1926db(0x107)]({'filePath':_0x2c9e26,'error':_0x196ce9[_0x1926db(0x142)]});}}const _0xce86ee={};for(const _0x453e86 of _0x24f877){!_0xce86ee[_0x453e86[_0x1926db(0x137)]]&&(_0xce86ee[_0x453e86['term']]=[]),_0xce86ee[_0x453e86[_0x1926db(0x137)]][_0x1926db(0x107)]({'filePath':_0x453e86['filePath'],'lineNumber':_0x453e86['lineNumber'],'lineContent':_0x453e86['lineContent']});}let _0x273fea='';if(_0x5719f3['length']>0x0){_0x273fea+=_0x1926db(0x127);for(const _0x5edfca of _0x5719f3){_0x273fea+='-\x20'+_0x5edfca+'\x0a';}_0x273fea+='\x0a';}if(_0x46f5b1['length']>0x0){_0x273fea+=_0x1926db(0x106);for(const _0x57cdfb of _0x46f5b1){_0x273fea+='-\x20'+_0x57cdfb['filePath']+':\x20'+_0x57cdfb['error']+'\x0a';}_0x273fea+='\x0a';}if(Object['keys'](_0xce86ee)[_0x1926db(0x128)]===0x0)_0x273fea+='No\x20matches\x20found\x20for\x20the\x20specified\x20search\x20terms\x20in\x20the\x20available\x20files.\x0a';else for(const [_0x1a19c4,_0x2560ae]of Object['entries'](_0xce86ee)){_0x273fea+='Search\x20string\x20\x22'+_0x1a19c4+_0x1926db(0x102);for(const _0xeb157a of _0x2560ae){_0x273fea+='-\x20'+_0xeb157a[_0x1926db(0x13c)]+_0x1926db(0x13d)+_0xeb157a[_0x1926db(0x11a)]+',\x20line\x20content:\x20\x22'+_0xeb157a[_0x1926db(0x131)][_0x1926db(0x140)]()+'\x22\x0a';}_0x273fea+='\x0a';}return{'action':'search','success':!![],'filesSearched':_0x3b6962[_0x1926db(0x128)],'filesNotFound':_0x5719f3['length'],'filesWithErrors':_0x46f5b1['length'],'matchCount':_0x24f877['length'],'formattedResults':_0x273fea['trim'](),'matchesByTerm':_0xce86ee,'notFoundFiles':_0x5719f3,'errorFiles':_0x46f5b1};}async['resolveFilePaths'](_0x5a904a,_0xb0a9ab){const _0x2e1ec5=a0_0x5c5d36,_0x11bbaa={'found':[],'notFound':[]};for(const _0x207f1e of _0x5a904a){const _0x1b4b2f=a0_0xc069b6['isAbsolute'](_0x207f1e)?_0x207f1e:a0_0xc069b6['join'](_0xb0a9ab,_0x207f1e);try{if(_0x207f1e['includes']('*')){if(_0x207f1e[_0x2e1ec5(0x10b)]('/*.js')||_0x207f1e[_0x2e1ec5(0x10b)](_0x2e1ec5(0x118))||_0x207f1e['endsWith']('/*.ts')||_0x207f1e['endsWith']('/*.tsx')||_0x207f1e[_0x2e1ec5(0x10b)]('/*.css')||_0x207f1e['endsWith']('/*.html')||_0x207f1e[_0x2e1ec5(0x10b)]('/*.json')){const _0x3705d0=a0_0xc069b6['dirname'](_0x1b4b2f),_0x10e372=a0_0xc069b6[_0x2e1ec5(0x125)](a0_0xc069b6['basename'](_0x207f1e)['replace']('*',_0x2e1ec5(0x105)));try{const _0x57db11=await a0_0x48c100['stat'](_0x3705d0);if(_0x57db11['isDirectory']()){const _0x496be5=await a0_0x48c100['readdir'](_0x3705d0);let _0x51f161=![];for(const _0x142041 of _0x496be5){_0x142041[_0x2e1ec5(0x10b)](_0x10e372)&&(_0x11bbaa['found']['push'](a0_0xc069b6['join'](_0x3705d0,_0x142041)),_0x51f161=!![]);}!_0x51f161&&_0x11bbaa[_0x2e1ec5(0x124)]['push'](_0x207f1e+_0x2e1ec5(0x104));}else _0x11bbaa['notFound'][_0x2e1ec5(0x107)](_0x207f1e+_0x2e1ec5(0x136));}catch(_0x30bfe3){_0x11bbaa['notFound']['push'](_0x207f1e+'\x20('+_0x30bfe3['code']+')');}}else{if(_0x207f1e['includes']('/**/*.')){const [_0x953bc6,_0x3651ed]=_0x207f1e[_0x2e1ec5(0x103)]('/**/*.'),_0x4415de=a0_0xc069b6[_0x2e1ec5(0x139)](_0x953bc6)?_0x953bc6:a0_0xc069b6['join'](_0xb0a9ab,_0x953bc6);try{const _0x23004e=await a0_0x48c100['stat'](_0x4415de);if(_0x23004e[_0x2e1ec5(0x121)]()){const _0x206009=[];await this[_0x2e1ec5(0x114)](_0x4415de,'.'+_0x3651ed,_0x206009),_0x206009['length']>0x0?_0x11bbaa[_0x2e1ec5(0x120)][_0x2e1ec5(0x107)](..._0x206009):_0x11bbaa['notFound']['push'](_0x207f1e+'\x20(no\x20matching\x20files)');}else _0x11bbaa['notFound'][_0x2e1ec5(0x107)](_0x207f1e+_0x2e1ec5(0x136));}catch(_0x1d06ff){_0x11bbaa[_0x2e1ec5(0x124)][_0x2e1ec5(0x107)](_0x207f1e+'\x20('+_0x1d06ff['code']+')');}}else{const _0x14f2bd=a0_0xc069b6[_0x2e1ec5(0x11f)](_0x1b4b2f),_0x486723=a0_0xc069b6[_0x2e1ec5(0x126)](_0x207f1e),_0x461f64=_0x486723['includes']('.')?_0x486723['substring'](_0x486723['lastIndexOf']('.')):'';try{const _0x5a5a32=await a0_0x48c100[_0x2e1ec5(0x123)](_0x14f2bd);if(_0x5a5a32[_0x2e1ec5(0x121)]()){const _0x2e6a27=await a0_0x48c100['readdir'](_0x14f2bd);let _0x15ba67=![];for(const _0x33b6d3 of _0x2e6a27){this[_0x2e1ec5(0x12f)](_0x33b6d3,_0x486723)&&(_0x11bbaa[_0x2e1ec5(0x120)][_0x2e1ec5(0x107)](a0_0xc069b6['join'](_0x14f2bd,_0x33b6d3)),_0x15ba67=!![]);}!_0x15ba67&&_0x11bbaa['notFound']['push'](_0x207f1e+'\x20(no\x20matching\x20files)');}else _0x11bbaa['notFound'][_0x2e1ec5(0x107)](_0x207f1e+_0x2e1ec5(0x136));}catch(_0x35a6f2){_0x11bbaa[_0x2e1ec5(0x124)]['push'](_0x207f1e+'\x20('+_0x35a6f2['code']+')');}}}}else try{const _0x58f80f=await a0_0x48c100['stat'](_0x1b4b2f);_0x58f80f[_0x2e1ec5(0x12e)]()?_0x11bbaa['found']['push'](_0x1b4b2f):_0x11bbaa['notFound'][_0x2e1ec5(0x107)](_0x207f1e+'\x20(not\x20a\x20file)');}catch(_0x210686){_0x11bbaa[_0x2e1ec5(0x124)]['push'](_0x207f1e+'\x20('+_0x210686['code']+')');}}catch(_0x3e10a7){this[_0x2e1ec5(0x10d)][_0x2e1ec5(0x10f)]('Error\x20resolving\x20path\x20'+_0x207f1e+':\x20'+_0x3e10a7['message']),_0x11bbaa[_0x2e1ec5(0x124)][_0x2e1ec5(0x107)](_0x207f1e+'\x20('+_0x3e10a7[_0x2e1ec5(0x142)]+')');}}return _0x11bbaa;}async['findFilesRecursively'](_0x1e35fe,_0x452df8,_0x271871){const _0x2e1a0a=a0_0x5c5d36;try{const _0x4f929f=await a0_0x48c100[_0x2e1a0a(0x13b)](_0x1e35fe,{'withFileTypes':!![]});for(const _0x2bff71 of _0x4f929f){const _0x4952e1=a0_0xc069b6[_0x2e1a0a(0x110)](_0x1e35fe,_0x2bff71['name']);try{if(_0x2bff71[_0x2e1a0a(0x121)]())await this['findFilesRecursively'](_0x4952e1,_0x452df8,_0x271871);else _0x2bff71['isFile']()&&_0x2bff71['name']['endsWith'](_0x452df8)&&_0x271871['push'](_0x4952e1);}catch(_0x1cba85){this['logger']['warn'](_0x2e1a0a(0x112)+_0x4952e1+':\x20'+_0x1cba85[_0x2e1a0a(0x142)]);}}}catch(_0x5ab4d7){this[_0x2e1a0a(0x10d)]['warn']('Error\x20reading\x20directory\x20'+_0x1e35fe+':\x20'+_0x5ab4d7['message']);}}[a0_0x5c5d36(0x12f)](_0x197dde,_0x5677d8){const _0x4155ac=a0_0x5c5d36,_0x1d8b59=new RegExp('^'+_0x5677d8['split']('*')['map'](_0xc6c913=>this[_0x4155ac(0x108)](_0xc6c913))[_0x4155ac(0x110)]('.*')+'$');return _0x1d8b59[_0x4155ac(0x11c)](_0x197dde);}[a0_0x5c5d36(0x108)](_0xe11d4){return _0xe11d4['replace'](/[.*+?^${}()|[\]\\]/g,'\x5c$&');}async['searchInFile'](_0x297cc8,_0x156e69){const _0xf52c66=a0_0x5c5d36,_0x14e563=await a0_0x48c100[_0xf52c66(0x11e)](_0x297cc8,_0xf52c66(0x10c)),_0x5dcb34=_0x14e563[_0xf52c66(0x103)]('\x0a'),_0x47730a=[];for(let _0x30afe7=0x0;_0x30afe7<_0x5dcb34['length'];_0x30afe7++){const _0x54449e=_0x5dcb34[_0x30afe7];for(const _0x418efb of _0x156e69){if(_0x54449e[_0xf52c66(0x12d)](_0x418efb)){_0x47730a['push']({'term':_0x418efb,'filePath':_0x297cc8,'lineNumber':_0x30afe7+0x1,'lineContent':_0x54449e});continue;}}}return _0x47730a;}}