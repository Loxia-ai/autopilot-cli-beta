const a0_0xf57036=a0_0x524c;function a0_0x524c(_0x3b9e20,_0x50f736){const _0x4edd9a=a0_0x4edd();return a0_0x524c=function(_0x524c8d,_0xeb2c4a){_0x524c8d=_0x524c8d-0x75;let _0x54b4e7=_0x4edd9a[_0x524c8d];if(a0_0x524c['JdBaxp']===undefined){var _0x54a38e=function(_0x549952){const _0x565dcd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x522269='',_0x1dc365='';for(let _0x3d3cc8=0x0,_0x33a919,_0x4ca945,_0x29d7cb=0x0;_0x4ca945=_0x549952['charAt'](_0x29d7cb++);~_0x4ca945&&(_0x33a919=_0x3d3cc8%0x4?_0x33a919*0x40+_0x4ca945:_0x4ca945,_0x3d3cc8++%0x4)?_0x522269+=String['fromCharCode'](0xff&_0x33a919>>(-0x2*_0x3d3cc8&0x6)):0x0){_0x4ca945=_0x565dcd['indexOf'](_0x4ca945);}for(let _0xa09804=0x0,_0x34a7cf=_0x522269['length'];_0xa09804<_0x34a7cf;_0xa09804++){_0x1dc365+='%'+('00'+_0x522269['charCodeAt'](_0xa09804)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1dc365);};a0_0x524c['zYtwlc']=_0x54a38e,_0x3b9e20=arguments,a0_0x524c['JdBaxp']=!![];}const _0x1809f0=_0x4edd9a[0x0],_0x4e025a=_0x524c8d+_0x1809f0,_0x151698=_0x3b9e20[_0x4e025a];return!_0x151698?(_0x54b4e7=a0_0x524c['zYtwlc'](_0x54b4e7),_0x3b9e20[_0x4e025a]=_0x54b4e7):_0x54b4e7=_0x151698,_0x54b4e7;},a0_0x524c(_0x3b9e20,_0x50f736);}(function(_0x19aea8,_0x9f8c0a){const _0x5059b0=a0_0x524c,_0x1bc749=_0x19aea8();while(!![]){try{const _0x2e0514=parseInt(_0x5059b0(0x89))/0x1+-parseInt(_0x5059b0(0x75))/0x2*(parseInt(_0x5059b0(0xa2))/0x3)+parseInt(_0x5059b0(0xa1))/0x4+-parseInt(_0x5059b0(0x8e))/0x5+parseInt(_0x5059b0(0xb4))/0x6*(-parseInt(_0x5059b0(0x7f))/0x7)+-parseInt(_0x5059b0(0x7c))/0x8*(-parseInt(_0x5059b0(0x96))/0x9)+parseInt(_0x5059b0(0x85))/0xa*(parseInt(_0x5059b0(0xb6))/0xb);if(_0x2e0514===_0x9f8c0a)break;else _0x1bc749['push'](_0x1bc749['shift']());}catch(_0x271c7f){_0x1bc749['push'](_0x1bc749['shift']());}}}(a0_0x4edd,0x4fac5));function a0_0x4edd(){const _0x28506e=['rxjYB3iGC2vHCMnOAw5NigLUigzPBguG','mtCXEwDTvKj3','BM90rM91BMq','C3rHDa','ChvZAa','Bg9Nz2vY','ugfYC2LUzYbZzwvRihbHCMfTzxrLCNmGD2L0AcbuywDqyxjZzxi','DgvYBq','AM9PBG','ywn0Aw9U','BwvZC2fNzq','CMvHzgrPCG','nZeZnti0zMzkwwXS','nZqXAeTMuwX0','C2vHCMnO','BwfW','zMLSDgvY','lYOUANm','CMvZB2X2zuzPBgvqyxrOCW','tM8GzMLSzxmGzM91BMqGBwf0y2HPBMCGDgHLihnWzwnPzMLLzcbWyxr0zxjUCW','DxrMltG','Aw4TzMLSzxm','lcbSAw5LignVBNrLBNq6ici','icHUBYbTyxrJAgLUzYbMAwXLCYK','vw5RBM93BIbZzwvRignVBw1HBMq6ia','y29UDgvUDa','C2vHCMnOrMLSzxm','ihrLCM1ZigLUia','zhvTBxK','y29TBwfUzhm','A2v5CW','nNPWwNLWrG','AxnbyNnVBhv0zq','mte1ndy4ndntt3Lmru0','lcbSAw5Licm','tM8GC2vLAYbJB21Tyw5KCYbZCgvJAwzPzwq','lYOUANnVBG','rxjYB3iGChjVy2vZC2LUzYa','Aw5JBhvKzxm','rxHLy3v0Aw5NihnLzwSGy29TBwfUzcb3AxrOihbHCMfTzxrLCNm6','iIbMB3vUzcbHDdOk','zM91BMq','rxjYB3iGCMvHzgLUzYbKAxjLy3rVCNKG','icHUB3qGysbKAxjLy3rVCNKP','DhjPBq','igzPBgvZ','zMLSzvbHDgG','Bwf0y2HLC1DPBgrJyxjK','mZe2nfPHr256CG','C3bSAxq','zxnJyxbLuMvNrxHW','D2fYBG','CxvLCNK','BgvUz3rO','rxjYB3jZig9Jy3vYCMvKihDOzw4GC2vHCMnOAw5NihrOzsbMB2XSB3DPBMCGzMLSzxm6cG','mtmXmtC2yKPdrhDi','u2vHCMnOihn0CMLUzYaI','tM8GC2vHCMnOihrLCM1ZihnWzwnPzMLLza','ndi3mJuWnLrcrhzfCa','lYOQlYOU','zMLUzezPBgvZuMvJDxjZAxzLBhK','y29Kzq','BgfZDeLUzgv4t2y','zxjYB3i','mtbeqMrcwgm','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','BgLUzu51BwjLCG','AxneAxjLy3rVCNK','mJuZntCZtLLvwMH0','BMfTzq','CMvWBgfJzq','xcqM','zgLYBMfTzq','mJmYodC4nxfnCfHHBW','zw5KC1DPDgG','BgLUzunVBNrLBNq','C2vHCMnOsw5gAwXL','lYOUAhrTBa','vgHLigzVBgXVD2LUzYbMAwXLCYb3zxjLig5VDcbMB3vUzdOk','C2vHCMnOlxrLCM1Z'];a0_0x4edd=function(){return _0x28506e;};return a0_0x4edd();}import{promises as a0_0x549952}from'fs';import a0_0x565dcd from'path';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class SeekTool extends BaseTool{constructor(_0x522269,_0x1dc365){super(_0x522269,_0x1dc365);}['getDescription'](){return'\x0aSeek\x20Tool:\x20Allows\x20you\x20to\x20search\x20for\x20specific\x20content\x20within\x20project\x20files.\x20highly\x20recommended\x20for\x20verifying\x20imports\x20(includes\x20etc)\x20between\x20files.\x0a\x0aUsage:\x0a[tool\x20id=\x22seek\x22]\x0a[in-files]\x0afile/path/one.js\x0afile/path/two.js\x0apath/to/directory/*.js\x0a[/in-files]\x0a[search-terms]\x0a[t]search\x20phrase\x20one[/t]\x0a[t]search\x20phrase\x20two[/t]\x0a[t]search\x20phrase\x20three[/t]\x0a[/search-terms]\x0a[/tool]\x0a\x0aExamples:\x0a1.\x20Search\x20for\x20specific\x20functions\x20in\x20JavaScript\x20files:\x0a[tool\x20id=\x22seek\x22]\x0a[in-files]\x0asrc/components/*.js\x0asrc/utils/helpers.js\x0a[/in-files]\x0a[search-terms]\x0a[t]function\x20handleSubmit[/t]\x0a[t]useState([/t]\x0a[/search-terms]\x0a[/tool]\x0a\x0a2.\x20Find\x20usages\x20of\x20a\x20specific\x20variable:\x0a[tool\x20id=\x22seek\x22]\x0a[in-files]\x0asrc/**/*.js\x0a[/in-files]\x0a[search-terms]\x0a[t]apiClient[/t]\x0a[/search-terms]\x0a[/tool]\x0a\x0a3.\x20Look\x20for\x20specific\x20imports:\x0a[tool\x20id=\x22seek\x22]\x0a[in-files]\x0asrc/components/Header.js\x0asrc/components/Footer.js\x0a[/in-files]\x0a[search-terms]\x0a[t]import\x20React[/t]\x0a[t]import\x20{\x20useState\x20}[/t]\x0a[/search-terms]\x0a[/tool]\x0a\x0aThe\x20tool\x20will\x20search\x20every\x20file\x20mentioned\x20in\x20the\x20[in-files]\x20tag.\x0aIn\x20each\x20file,\x20it\x20will\x20search\x20for\x20lines\x20containing\x20at\x20least\x20one\x20of\x20the\x20phrases\x20in\x20[search-terms].\x0aGlob\x20patterns\x20(like\x20*.js)\x20are\x20supported\x20in\x20file\x20paths.\x0aThe\x20tool\x20will\x20clearly\x20indicate\x20which\x20files\x20could\x20not\x20be\x20found\x20or\x20had\x20errors\x20during\x20the\x20search.\x0a\x20\x20\x20\x20';}['parseParameters'](_0x3d3cc8){const _0x5d5643=a0_0x524c;this[_0x5d5643(0x9a)]['info'](_0x5d5643(0x9b));const _0x33a919={'commands':[]};try{const _0x4ca945=TagParser['query'](_0x3d3cc8,_0x5d5643(0xaa));let _0x29d7cb=[];_0x4ca945['length']>0x0&&(_0x29d7cb=_0x4ca945[0x0][_0x5d5643(0xae)][_0x5d5643(0x76)]('\x0a')['map'](_0x134f4c=>_0x134f4c[_0x5d5643(0xc1)]())[_0x5d5643(0xa5)](_0x40cbb8=>_0x40cbb8[_0x5d5643(0x7a)]>0x0));const _0xa09804=TagParser['query'](_0x3d3cc8,_0x5d5643(0x94));let _0x34a7cf=[];if(_0xa09804[_0x5d5643(0x7a)]>0x0){const _0x8ea2c3=TagParser[_0x5d5643(0x79)](_0xa09804[0x0][_0x5d5643(0xae)],'t');_0x34a7cf=_0x8ea2c3['map'](_0x4de29a=>_0x4de29a[_0x5d5643(0xae)]['trim']())[_0x5d5643(0xa5)](_0x48b9af=>_0x48b9af['length']>0x0);}return _0x33a919[_0x5d5643(0xb2)][_0x5d5643(0x99)]({'action':'search','filePaths':_0x29d7cb,'searchTerms':_0x34a7cf}),_0x33a919;}catch(_0x5afed9){return this['logger']['error']('Error\x20parsing\x20seek\x20parameters:',_0x5afed9),{'commands':[]};}}async[a0_0xf57036(0x86)](_0x5323bb,_0x12687e){const _0x3312c0=a0_0xf57036;this['logger']['info'](_0x3312c0(0xbc),_0x5323bb);const _0x162e5e=[];if(!_0x5323bb[_0x3312c0(0xb2)]||_0x5323bb['commands']['length']===0x0)throw new Error(_0x3312c0(0xb8));for(const _0x39f983 of _0x5323bb[_0x3312c0(0xb2)]){try{switch(_0x39f983['action']){case'search':_0x162e5e['push'](await this[_0x3312c0(0xaf)](_0x39f983['filePaths'],_0x39f983['searchTerms'],_0x12687e));break;default:throw new Error(_0x3312c0(0xad)+_0x39f983[_0x3312c0(0x9e)]);}}catch(_0x208354){this[_0x3312c0(0x9a)][_0x3312c0(0x84)]('Error\x20executing\x20seek\x20command\x20'+_0x39f983['action']+':',_0x208354),_0x162e5e['push']({'action':_0x39f983['action'],'success':![],'error':_0x208354[_0x3312c0(0x9f)]});}}return{'results':_0x162e5e};}async[a0_0xf57036(0xaf)](_0x2c41c3,_0x400a7d,_0x37f592){const _0x284801=a0_0xf57036;this[_0x284801(0x9a)]['info']('Searching\x20for\x20'+_0x400a7d[_0x284801(0x7a)]+_0x284801(0xb0)+_0x2c41c3[_0x284801(0x7a)]+_0x284801(0xc2));if(_0x2c41c3['length']===0x0)throw new Error('No\x20files\x20specified\x20for\x20search');if(_0x400a7d['length']===0x0)throw new Error(_0x284801(0x7e));const _0x671450=await this[_0x284801(0xa7)](_0x2c41c3,_0x37f592),_0x40c784=_0x671450[_0x284801(0xbe)],_0x3358bd=_0x671450[_0x284801(0x97)];if(_0x40c784['length']===0x0)return{'action':'search','success':!![],'message':_0x284801(0xa8),'notFoundFiles':_0x3358bd,'matches':[]};const _0x4bc656=[],_0x510760=[];for(const _0x33fe66 of _0x40c784){try{const _0x1d1700=await this[_0x284801(0x91)](_0x33fe66,_0x400a7d);_0x4bc656[_0x284801(0x99)](..._0x1d1700);}catch(_0x5694a3){this[_0x284801(0x9a)][_0x284801(0x78)](_0x284801(0x95)+_0x33fe66+':\x20'+_0x5694a3[_0x284801(0x9f)]),_0x510760['push']({'filePath':_0x33fe66,'error':_0x5694a3['message']});}}const _0x55f4df={};for(const _0x52db0 of _0x4bc656){!_0x55f4df[_0x52db0[_0x284801(0x9c)]]&&(_0x55f4df[_0x52db0[_0x284801(0x9c)]]=[]),_0x55f4df[_0x52db0['term']]['push']({'filePath':_0x52db0['filePath'],'lineNumber':_0x52db0['lineNumber'],'lineContent':_0x52db0[_0x284801(0x90)]});}let _0x290c50='';if(_0x3358bd['length']>0x0){_0x290c50+=_0x284801(0x93);for(const _0x144ce9 of _0x3358bd){_0x290c50+='-\x20'+_0x144ce9+'\x0a';}_0x290c50+='\x0a';}if(_0x510760[_0x284801(0x7a)]>0x0){_0x290c50+=_0x284801(0x7b);for(const _0x4da36e of _0x510760){_0x290c50+='-\x20'+_0x4da36e[_0x284801(0xc3)]+':\x20'+_0x4da36e[_0x284801(0x84)]+'\x0a';}_0x290c50+='\x0a';}if(Object[_0x284801(0xb3)](_0x55f4df)[_0x284801(0x7a)]===0x0)_0x290c50+='No\x20matches\x20found\x20for\x20the\x20specified\x20search\x20terms\x20in\x20the\x20available\x20files.\x0a';else for(const [_0x167578,_0x4dba34]of Object['entries'](_0x55f4df)){_0x290c50+=_0x284801(0x7d)+_0x167578+_0x284801(0xbd);for(const _0x2f1eb9 of _0x4dba34){_0x290c50+='-\x20'+_0x2f1eb9['filePath']+_0x284801(0xb7)+_0x2f1eb9[_0x284801(0x87)]+_0x284801(0xab)+_0x2f1eb9['lineContent']['trim']()+'\x22\x0a';}_0x290c50+='\x0a';}return{'action':_0x284801(0xa3),'success':!![],'filesSearched':_0x40c784[_0x284801(0x7a)],'filesNotFound':_0x3358bd[_0x284801(0x7a)],'filesWithErrors':_0x510760[_0x284801(0x7a)],'matchCount':_0x4bc656[_0x284801(0x7a)],'formattedResults':_0x290c50['trim'](),'matchesByTerm':_0x55f4df,'notFoundFiles':_0x3358bd,'errorFiles':_0x510760};}async[a0_0xf57036(0xa7)](_0x5434cb,_0x3dba3b){const _0x502956=a0_0xf57036,_0x2bf9a9={'found':[],'notFound':[]};for(const _0x4a3ed9 of _0x5434cb){const _0x3eb897=a0_0x565dcd[_0x502956(0xb5)](_0x4a3ed9)?_0x4a3ed9:a0_0x565dcd[_0x502956(0x9d)](_0x3dba3b,_0x4a3ed9);try{if(_0x4a3ed9[_0x502956(0xbb)]('*')){if(_0x4a3ed9['endsWith'](_0x502956(0xa6))||_0x4a3ed9[_0x502956(0x8f)]('/*.jsx')||_0x4a3ed9['endsWith']('/*.ts')||_0x4a3ed9['endsWith']('/*.tsx')||_0x4a3ed9[_0x502956(0x8f)]('/*.css')||_0x4a3ed9['endsWith'](_0x502956(0x92))||_0x4a3ed9[_0x502956(0x8f)](_0x502956(0xb9))){const _0x5593f5=a0_0x565dcd['dirname'](_0x3eb897),_0x410264=a0_0x565dcd['extname'](a0_0x565dcd['basename'](_0x4a3ed9)[_0x502956(0x8b)]('*',_0x502956(0xb1)));try{const _0x59fa8e=await a0_0x549952['stat'](_0x5593f5);if(_0x59fa8e[_0x502956(0x88)]()){const _0x4e4e3a=await a0_0x549952['readdir'](_0x5593f5);let _0x1a4387=![];for(const _0xdcd6d3 of _0x4e4e3a){_0xdcd6d3['endsWith'](_0x410264)&&(_0x2bf9a9[_0x502956(0xbe)][_0x502956(0x99)](a0_0x565dcd[_0x502956(0x9d)](_0x5593f5,_0xdcd6d3)),_0x1a4387=!![]);}!_0x1a4387&&_0x2bf9a9[_0x502956(0x97)][_0x502956(0x99)](_0x4a3ed9+'\x20(no\x20matching\x20files)');}else _0x2bf9a9[_0x502956(0x97)]['push'](_0x4a3ed9+_0x502956(0xc0));}catch(_0xab77a7){_0x2bf9a9[_0x502956(0x97)][_0x502956(0x99)](_0x4a3ed9+'\x20('+_0xab77a7[_0x502956(0x82)]+')');}}else{if(_0x4a3ed9['includes'](_0x502956(0x80))){const [_0x50f604,_0x233425]=_0x4a3ed9['split'](_0x502956(0x80)),_0x33d86f=a0_0x565dcd[_0x502956(0xb5)](_0x50f604)?_0x50f604:a0_0x565dcd[_0x502956(0x9d)](_0x3dba3b,_0x50f604);try{const _0x2210cd=await a0_0x549952[_0x502956(0x98)](_0x33d86f);if(_0x2210cd[_0x502956(0x88)]()){const _0x1cecb1=[];await this['findFilesRecursively'](_0x33d86f,'.'+_0x233425,_0x1cecb1),_0x1cecb1['length']>0x0?_0x2bf9a9['found']['push'](..._0x1cecb1):_0x2bf9a9['notFound'][_0x502956(0x99)](_0x4a3ed9+_0x502956(0xac));}else _0x2bf9a9['notFound']['push'](_0x4a3ed9+'\x20(not\x20a\x20directory)');}catch(_0x3e2f77){_0x2bf9a9[_0x502956(0x97)]['push'](_0x4a3ed9+'\x20('+_0x3e2f77['code']+')');}}else{const _0x365bbb=a0_0x565dcd[_0x502956(0x8d)](_0x3eb897),_0x549384=a0_0x565dcd['basename'](_0x4a3ed9),_0x145a23=_0x549384[_0x502956(0xbb)]('.')?_0x549384['substring'](_0x549384[_0x502956(0x83)]('.')):'';try{const _0x115015=await a0_0x549952[_0x502956(0x98)](_0x365bbb);if(_0x115015[_0x502956(0x88)]()){const _0x6e11f5=await a0_0x549952[_0x502956(0xa0)](_0x365bbb);let _0x7c5b92=![];for(const _0x44e74e of _0x6e11f5){this[_0x502956(0xc4)](_0x44e74e,_0x549384)&&(_0x2bf9a9[_0x502956(0xbe)]['push'](a0_0x565dcd[_0x502956(0x9d)](_0x365bbb,_0x44e74e)),_0x7c5b92=!![]);}!_0x7c5b92&&_0x2bf9a9[_0x502956(0x97)][_0x502956(0x99)](_0x4a3ed9+_0x502956(0xac));}else _0x2bf9a9[_0x502956(0x97)][_0x502956(0x99)](_0x4a3ed9+_0x502956(0xc0));}catch(_0x35ae2d){_0x2bf9a9[_0x502956(0x97)]['push'](_0x4a3ed9+'\x20('+_0x35ae2d[_0x502956(0x82)]+')');}}}}else try{const _0xc2644a=await a0_0x549952[_0x502956(0x98)](_0x3eb897);_0xc2644a['isFile']()?_0x2bf9a9[_0x502956(0xbe)][_0x502956(0x99)](_0x3eb897):_0x2bf9a9[_0x502956(0x97)][_0x502956(0x99)](_0x4a3ed9+'\x20(not\x20a\x20file)');}catch(_0x22a2bb){_0x2bf9a9['notFound'][_0x502956(0x99)](_0x4a3ed9+'\x20('+_0x22a2bb['code']+')');}}catch(_0x7645f9){this[_0x502956(0x9a)]['warn']('Error\x20resolving\x20path\x20'+_0x4a3ed9+':\x20'+_0x7645f9[_0x502956(0x9f)]),_0x2bf9a9[_0x502956(0x97)]['push'](_0x4a3ed9+'\x20('+_0x7645f9[_0x502956(0x9f)]+')');}}return _0x2bf9a9;}async[a0_0xf57036(0x81)](_0xe150fc,_0x4dbeaa,_0x84f923){const _0x55d2eb=a0_0xf57036;try{const _0x51d9ae=await a0_0x549952[_0x55d2eb(0xa0)](_0xe150fc,{'withFileTypes':!![]});for(const _0xa75c99 of _0x51d9ae){const _0x3dc33d=a0_0x565dcd['join'](_0xe150fc,_0xa75c99['name']);try{if(_0xa75c99[_0x55d2eb(0x88)]())await this[_0x55d2eb(0x81)](_0x3dc33d,_0x4dbeaa,_0x84f923);else _0xa75c99['isFile']()&&_0xa75c99[_0x55d2eb(0x8a)]['endsWith'](_0x4dbeaa)&&_0x84f923['push'](_0x3dc33d);}catch(_0x4a492f){this['logger'][_0x55d2eb(0x78)](_0x55d2eb(0xba)+_0x3dc33d+':\x20'+_0x4a492f[_0x55d2eb(0x9f)]);}}}catch(_0x32eb26){this[_0x55d2eb(0x9a)]['warn'](_0x55d2eb(0xbf)+_0xe150fc+':\x20'+_0x32eb26['message']);}}['matchesWildcard'](_0xc6a038,_0x2633df){const _0x59f503=a0_0xf57036,_0x1f418f=new RegExp('^'+_0x2633df[_0x59f503(0x76)]('*')[_0x59f503(0xa4)](_0x99df75=>this[_0x59f503(0x77)](_0x99df75))['join']('.*')+'$');return _0x1f418f['test'](_0xc6a038);}['escapeRegExp'](_0x5d7aa3){const _0x3d31bd=a0_0xf57036;return _0x5d7aa3['replace'](/[.*+?^${}()|[\]\\]/g,_0x3d31bd(0x8c));}async['searchInFile'](_0x32e41e,_0x4d1cbe){const _0x2e65a4=a0_0xf57036,_0x3aead4=await a0_0x549952['readFile'](_0x32e41e,_0x2e65a4(0xa9)),_0x4273c9=_0x3aead4[_0x2e65a4(0x76)]('\x0a'),_0x273b75=[];for(let _0x2bedef=0x0;_0x2bedef<_0x4273c9[_0x2e65a4(0x7a)];_0x2bedef++){const _0x4715a1=_0x4273c9[_0x2bedef];for(const _0x50f9b4 of _0x4d1cbe){if(_0x4715a1['includes'](_0x50f9b4)){_0x273b75['push']({'term':_0x50f9b4,'filePath':_0x32e41e,'lineNumber':_0x2bedef+0x1,'lineContent':_0x4715a1});continue;}}}return _0x273b75;}}