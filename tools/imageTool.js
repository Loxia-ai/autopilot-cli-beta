const a0_0x5a40ce=a0_0x1aca;(function(_0x53998a,_0x266c95){const _0x1ca822=a0_0x1aca,_0x220540=_0x53998a();while(!![]){try{const _0x4d4dec=parseInt(_0x1ca822(0x21e))/0x1+-parseInt(_0x1ca822(0x1fc))/0x2+-parseInt(_0x1ca822(0x1ca))/0x3+-parseInt(_0x1ca822(0x215))/0x4*(-parseInt(_0x1ca822(0x1ef))/0x5)+parseInt(_0x1ca822(0x229))/0x6*(-parseInt(_0x1ca822(0x1b0))/0x7)+parseInt(_0x1ca822(0x1da))/0x8*(-parseInt(_0x1ca822(0x1e1))/0x9)+parseInt(_0x1ca822(0x23a))/0xa*(parseInt(_0x1ca822(0x1f7))/0xb);if(_0x4d4dec===_0x266c95)break;else _0x220540['push'](_0x220540['shift']());}catch(_0x57844c){_0x220540['push'](_0x220540['shift']());}}}(a0_0x10f9,0x87804));const a0_0xde5278=(function(){const _0x43f0b6=a0_0x1aca,_0x4e896f={};_0x4e896f['ONmPW']=function(_0x90389,_0x13a986){return _0x90389===_0x13a986;},_0x4e896f[_0x43f0b6(0x233)]=_0x43f0b6(0x1af),_0x4e896f[_0x43f0b6(0x230)]='VqdaH',_0x4e896f[_0x43f0b6(0x20e)]=function(_0x23ff54,_0x7603f9){return _0x23ff54!==_0x7603f9;};const _0x260298=_0x4e896f;let _0x46a9f4=!![];return function(_0x59641f,_0x3c7f0e){const _0x1f3143=_0x43f0b6,_0x107628={'AkOBt':_0x1f3143(0x22a),'pQrhy':function(_0x95c716,_0xeed78){const _0x186384=_0x1f3143;return _0x260298[_0x186384(0x220)](_0x95c716,_0xeed78);},'dxFJs':'pending','Jmavb':_0x260298['afDWg'],'yZEJZ':_0x260298['uFfQK'],'ULtQy':function(_0xda4218,_0x34a228){return _0x260298['XezKb'](_0xda4218,_0x34a228);},'isizV':_0x1f3143(0x1bb),'HODMW':_0x1f3143(0x1c5)},_0x54aa30=_0x46a9f4?function(){const _0x23ee62=_0x1f3143;if(_0x107628['yZEJZ']!==_0x107628[_0x23ee62(0x21c)]){this['logger'][_0x23ee62(0x1e8)](_0x107628[_0x23ee62(0x206)]);for(const [_0x1113a6,_0x31ca89]of this['pendingGenerations']['entries']()){_0x107628[_0x23ee62(0x1fa)](_0x31ca89[_0x23ee62(0x21a)],_0x107628['dxFJs'])&&(_0x31ca89[_0x23ee62(0x21a)]=_0x107628[_0x23ee62(0x242)],this[_0x23ee62(0x207)][_0x23ee62(0x226)](_0x1113a6,_0x31ca89));}}else{if(_0x3c7f0e){if(_0x107628['ULtQy'](_0x107628[_0x23ee62(0x1fe)],_0x107628[_0x23ee62(0x1d0)])){const _0x3d19a6=_0x3c7f0e[_0x23ee62(0x1b5)](_0x59641f,arguments);return _0x3c7f0e=null,_0x3d19a6;}else{const _0x27bf39=_0x2902d2[_0x23ee62(0x1b5)](_0x46c965,arguments);return _0x2f4179=null,_0x27bf39;}}}}:function(){};return _0x46a9f4=![],_0x54aa30;};}()),a0_0x29f35b=a0_0xde5278(this,function(){const _0x196c1c=a0_0x1aca;return a0_0x29f35b[_0x196c1c(0x222)]()[_0x196c1c(0x1be)](_0x196c1c(0x236))[_0x196c1c(0x222)]()[_0x196c1c(0x240)](a0_0x29f35b)['search'](_0x196c1c(0x236));});function a0_0x10f9(){const _0x11a969=['weXUuum','DMn1vuq','q2PsrLe','DhjPBq','ChjVDg90ExbL','qwTpqNq','CgvUzgLUz0DLBMvYyxrPB25Z','t1bftKfjx0fqsv9lrvK','ALfqs1K','y29UzMLN','rKPtqKW','z2v0','DhjHy2u','wgv6s2i','CxvLCNK','DgfIBgu','q3fszKO','ChjVBxb0','BwvZC2fNzq','seHOAei','ntzLwujRuvm','ywn0Aw9U','C2H1DgrVD24','zgLYBMfTzq','zgfSBc1Lltm','C3rHDhvZ','D2fYBG','EvPfsLO','yvHHsuq','nZC4ndu1t1HtsuLx','CKnSq3q','t05TufC','sw1Hz2uGC2f2zwqGDg86ia','Dg9tDhjPBMC','tvjADu0','C2vYDMLJzxm','zw52','C2v0','rxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzcb3AxrOihbHCMfTzxrLCNm6','CMv0DxjUicHMDw5JDgLVBIGPia','mZq1odreC0HIy3K','u2H1DhrPBMCGzg93BIbPBwfNzsb0B29S','sMvKCLK','B3v0Chv0ugf0Aa','tKzLr1C','ruHluwm','EMHuufm','DuzMuuS','BgvUz3rO','zgXJuNu','ywzev2C','yJy0x2PZB24','BwTKAxi','kcGOlISPkYKRksSK','yMLUza','qLvWt0S','z2nkwKy','mJeZmtCWChLRvgDd','B3bLBMfP','rxjYB3iGzxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzca','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','tNjTyve','Bw9KzwW','y29UC3rYDwn0B3i','rufUEe0','sM1HDMi','ChjVz3jLC3m','C3vJy2vZCW','rLnKCfm','ChvZAa','zgf0yq','zNjVBq','suf2uxG','sNLIwuC','y2fUy2vSBgvK','otHmDMT3qxm','AM9Iswq','BhnsA0m','Cgf0Aa','zgnOteO','yxbWBhK','uw9TDge','sLPgyNG','Ag9Iv28','BfzrAw8','reXZvNK','s253ree','twDrs0S','C0nRENu','C2vHCMnO','q2fUBM90ignHBMnLBcbQB2iGD2L0AcbZDgf0Dxm6ia','wMjqA0e','Dg9VBhm','r2vUzxjHDgLUzYbPBwfNzsb3AxrOihbYB21WDdOG','BhL4rvq','z2vUzxjHDgu','DgD5Eg0','zfbQt0u','EK5mvve','suDwzNu','CgvUzgLUzW','mJC5odm3ovjQBwPUDq','sNH3v0G','AgfZ','y29UDgvUDa','Bg9Nz2vY','ufrMD3a','se9etvC','y05hzwq','yxr0CMLIDxrLCW','CMfUzg9T','B3v0Chv0lxbHDgG','D3jPDgvgAwXL','y29TCgXLDgvK','sLvXreG','tM8GAw1Hz2uGz2vUzxjHDgLVBIbJB21Tyw5KCYbZCgvJAwzPzwq','EvvAvM8','ogPmC2DVrW','Bw9lvM4','Bu1vuuO','zM9JtMe','y2fUy2vS','CMvJDxjZAxzL','Aw1Hz2vhzw4','ota2ntyXoxzKB1Dezq','z2vUzxjHDgvjBwfNzq','vw5RBM93BIbPBwfNzsbNzw5LCMf0Aw9UignVBw1HBMq6ia','CMvZDwX0CW','u1rtDg0','zxHPC3rZ','Bg9N','Aw5MBW','rMfPBgvKihrVigDLBMvYyxrLigLTywDLoIa','y29TBwfUzhm','y29UC29Szq','x19WCM90B19F','zxjYB3i','BNnqyNu','ody4nZbnDwjVuu4','r2vUzxjHDgLVBIbQB2iGBM90igzVDw5K','r0XWvNq','cKLTywDLieDLBMvYyxrPB24Gvg9VBdOGqwXSB3DZihLVDsb0BYbNzw5LCMf0zsbPBwfNzxmGDxnPBMCGquKGBw9KzwXZlGOkvxnHz2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iNjLBgf0AxzLl3bHDgGVDg8VC2f2zs9PBwfNzs5WBMCIxqPezxrHAwXLzcbKzxnJCMLWDgLVBIbVzIb0AguGAw1Hz2uGEw91ihDHBNqGDg8Gz2vUzxjHDgukwY9Nzw5LCMf0zv0kwY90B29SxqOkrxHHBxbSzxm6cJeUieDLBMvYyxrLigeGC2LTCgXLigLTywDLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVBw91BNrHAw5ZlNbUzYjDcKeGyMvHDxrPzNvSig1VDw50ywLUigXHBMrZy2fWzsb3AxrOihnUB3CTy2fWCgvKihbLywTZlcbHignSzwfYigjSDwuGC2T5lcbHBMqGysbMB3jLC3qGyxqGDgHLigjHC2uGB2yGDgHLig1VDw50ywLUCY4kwY9Nzw5LCMf0zv0kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcbPBwfNzsb3AxrOihnWzwnPzMLJihn0EwXLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVCM9IB3qUCg5NiL0kqsbMDxr1CMLZDgLJihjVyM90igLUigeGy3LIzxjWDw5RignPDhKGyxqGBMLNAhqUifrOzsbYB2jVDcbOyxmGz2XVD2LUzYbIBhvLigv5zxmGyw5KigLZihn0yw5KAw5NihvUzgvYigeGBMvVBIbZAwDUlIbtDhLSztOGzgLNAxrHBcbHCNqSigrLDgfPBgvKlcbOAwDOignVBNrYyxn0lGPBl2DLBMvYyxrLxqPBl3rVB2XDcGOZlIbhzw5LCMf0zsbHBIbHyNn0CMfJDcbHCNqGCgLLy2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iMLTywDLCY9HyNn0CMfJDc5WBMCIxqPbyNn0CMfJDcbNzw9TzxrYAwmGC2HHCgvZigLUigjYAwDODcbJB2XVCNmSihDPDgGGysbMB2n1CYbVBIbJAxjJBgvZigfUzcb0CMLHBMDSzxmUifn0EwXLoIbTAw5PBwfSAxn0lcbJBgvHBIbSAw5LCYWGDMLICMfUDcbJB2XVCNmUcLSVz2vUzxjHDgvDcLSVDg9VBf0kcK5VDgvZoGOTieLTywDLigDLBMvYyxrPB24GBwf5ihrHA2uGC29Tzsb0Aw1LihrVignVBxbSzxrLcI0GvgHLig91Dhb1DcbWyxrOihnOB3vSzcbIzsbYzwXHDgL2zsb0BYb0AguGChjVAMvJDcbKAxjLy3rVCNKklsbqCM92AwrLigrLDgfPBgvKigrLC2nYAxb0Aw9UCYbMB3iGyMv0DgvYihjLC3vSDhmklsbzB3uGD2LSBcbYzwnLAxzLigeGBM90AwzPy2f0Aw9UihDOzw4GDgHLigLTywDLigDLBMvYyxrPB24GAxmGy29TCgXLDgukicaGia','z2v0r2vUzxjHDgLVBLn0yxr1CW','mtaYnhGXmdi0','ufPgseW','C3vIC3rYAw5N','mte3n2jWuermCW','Ewnyr0G','rxjYB3iGCgfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNm6','CffYAhK','wLLwq3C','mtq1mZyZnKHAEfL0zG','vNfWq08','AxnPELy','r1j6vum','r01LCvy'];a0_0x10f9=function(){return _0x11a969;};return a0_0x10f9();}a0_0x29f35b();const a0_0xec86cb=(function(){const _0x98a257=a0_0x1aca,_0x24551a={};_0x24551a[_0x98a257(0x203)]=_0x98a257(0x1d4),_0x24551a['cNGed']=_0x98a257(0x1c4),_0x24551a[_0x98a257(0x1b8)]=function(_0x3f7827,_0x146feb){return _0x3f7827!==_0x146feb;},_0x24551a['MRZuM']=_0x98a257(0x1d9),_0x24551a[_0x98a257(0x1bd)]=function(_0x422752,_0x273e3d){return _0x422752!==_0x273e3d;},_0x24551a[_0x98a257(0x209)]=_0x98a257(0x1c7);const _0x1212ef=_0x24551a;let _0x597e3e=!![];return function(_0x5e2fee,_0x27cb0b){const _0x10ecdb=_0x597e3e?function(){const _0x2f08da=a0_0x1aca,_0x2e6b04={};_0x2e6b04[_0x2f08da(0x1ad)]=_0x1212ef[_0x2f08da(0x203)],_0x2e6b04['GMeqV']=_0x1212ef[_0x2f08da(0x1d1)];const _0x584b87=_0x2e6b04;if(_0x1212ef[_0x2f08da(0x1b8)](_0x1212ef[_0x2f08da(0x223)],_0x2f08da(0x1d9)))_0x226102[_0x2f08da(0x1ea)]['push']({'action':_0x2f08da(0x1c4),'path':_0x52079a,'prompt':_0x4c9471[_0x2f08da(0x1cd)]['trim']()});else{if(_0x27cb0b){if(_0x1212ef[_0x2f08da(0x1bd)](_0x1212ef[_0x2f08da(0x209)],_0x2f08da(0x1c7))){const _0x40a4cf=_0x20af1b[_0x2f08da(0x1d2)][_0x584b87['IAvQx']];_0x40a4cf&&_0x4ef3d0[_0x2f08da(0x1ea)][_0x2f08da(0x1aa)]({'action':_0x584b87[_0x2f08da(0x200)],'path':_0x40a4cf,'prompt':_0x5531d2[_0x2f08da(0x1cd)][_0x2f08da(0x204)]()});}else{const _0x2b0eb7=_0x27cb0b[_0x2f08da(0x1b5)](_0x5e2fee,arguments);return _0x27cb0b=null,_0x2b0eb7;}}}}:function(){};return _0x597e3e=![],_0x10ecdb;};}()),a0_0x1c7eb5=a0_0xec86cb(this,function(){const _0x1e4dbe=a0_0x1aca,_0x45cc91={'GLpVt':function(_0x3b831e,_0x33be77){return _0x3b831e(_0x33be77);},'PZFHL':function(_0x4a0714,_0x214a43){return _0x4a0714+_0x214a43;},'Qomta':'{}.constructor(\x22return\x20this\x22)(\x20)','HHhhB':function(_0x2da790){return _0x2da790();},'zhTPS':_0x1e4dbe(0x1e7),'dlcRu':_0x1e4dbe(0x21b),'BUpOK':_0x1e4dbe(0x1e8),'OBYMR':_0x1e4dbe(0x1ed),'ZYVCw':_0x1e4dbe(0x210),'moKVn':_0x1e4dbe(0x20d)};let _0x2dc911;try{const _0x1beaee=_0x45cc91[_0x1e4dbe(0x1f1)](Function,_0x45cc91[_0x1e4dbe(0x1f5)](_0x45cc91[_0x1e4dbe(0x1f5)](_0x1e4dbe(0x228),_0x45cc91[_0x1e4dbe(0x1b6)]),');'));_0x2dc911=_0x45cc91[_0x1e4dbe(0x214)](_0x1beaee);}catch(_0x4f586d){_0x2dc911=window;}const _0xb53127=_0x2dc911[_0x1e4dbe(0x1eb)]=_0x2dc911['console']||{},_0x2a2388=[_0x45cc91[_0x1e4dbe(0x22f)],_0x45cc91[_0x1e4dbe(0x232)],_0x45cc91[_0x1e4dbe(0x238)],_0x45cc91['OBYMR'],'exception',_0x45cc91[_0x1e4dbe(0x1fb)],_0x45cc91[_0x1e4dbe(0x1db)]];for(let _0x8e5687=0x0;_0x8e5687<_0x2a2388['length'];_0x8e5687++){const _0xc1b606=a0_0xec86cb['constructor'][_0x1e4dbe(0x205)][_0x1e4dbe(0x237)](a0_0xec86cb),_0x404980=_0x2a2388[_0x8e5687],_0x14de6c=_0xb53127[_0x404980]||_0xc1b606;_0xc1b606[_0x1e4dbe(0x1ec)]=a0_0xec86cb['bind'](a0_0xec86cb),_0xc1b606[_0x1e4dbe(0x222)]=_0x14de6c[_0x1e4dbe(0x222)]['bind'](_0x14de6c),_0xb53127[_0x404980]=_0xc1b606;}});function a0_0x1aca(_0x3c53c8,_0x216b64){const _0x1353aa=a0_0x10f9();return a0_0x1aca=function(_0x1c7eb5,_0xec86cb){_0x1c7eb5=_0x1c7eb5-0x1a9;let _0x2d0070=_0x1353aa[_0x1c7eb5];if(a0_0x1aca['hmIkfW']===undefined){var _0x1e4dda=function(_0x1aca78){const _0x26a46d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4a4293='',_0x29b775='',_0x4e5b60=_0x4a4293+_0x1e4dda;for(let _0x3ba964=0x0,_0x31b5fb,_0x1193ff,_0x2b0468=0x0;_0x1193ff=_0x1aca78['charAt'](_0x2b0468++);~_0x1193ff&&(_0x31b5fb=_0x3ba964%0x4?_0x31b5fb*0x40+_0x1193ff:_0x1193ff,_0x3ba964++%0x4)?_0x4a4293+=_0x4e5b60['charCodeAt'](_0x2b0468+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x31b5fb>>(-0x2*_0x3ba964&0x6)):_0x3ba964:0x0){_0x1193ff=_0x26a46d['indexOf'](_0x1193ff);}for(let _0x3fa25c=0x0,_0x5c44d9=_0x4a4293['length'];_0x3fa25c<_0x5c44d9;_0x3fa25c++){_0x29b775+='%'+('00'+_0x4a4293['charCodeAt'](_0x3fa25c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x29b775);};a0_0x1aca['RcVWHb']=_0x1e4dda,_0x3c53c8=arguments,a0_0x1aca['hmIkfW']=!![];}const _0x29f35b=_0x1353aa[0x0],_0xde5278=_0x1c7eb5+_0x29f35b,_0x10f90b=_0x3c53c8[_0xde5278];if(!_0x10f90b){const _0x4edae4=function(_0x14e362){this['epyCFv']=_0x14e362,this['hTYTDA']=[0x1,0x0,0x0],this['GHLPSC']=function(){return'newState';},this['duKkHn']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['VwNncT']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4edae4['prototype']['IdIvig']=function(){const _0x52d717=new RegExp(this['duKkHn']+this['VwNncT']),_0xd38eab=_0x52d717['test'](this['GHLPSC']['toString']())?--this['hTYTDA'][0x1]:--this['hTYTDA'][0x0];return this['WSviVS'](_0xd38eab);},_0x4edae4['prototype']['WSviVS']=function(_0x46bcb0){if(!Boolean(~_0x46bcb0))return _0x46bcb0;return this['RUCXUT'](this['epyCFv']);},_0x4edae4['prototype']['RUCXUT']=function(_0x5932a5){for(let _0x4e7214=0x0,_0x3e4cb5=this['hTYTDA']['length'];_0x4e7214<_0x3e4cb5;_0x4e7214++){this['hTYTDA']['push'](Math['round'](Math['random']())),_0x3e4cb5=this['hTYTDA']['length'];}return _0x5932a5(this['hTYTDA'][0x0]);},new _0x4edae4(a0_0x1aca)['IdIvig'](),_0x2d0070=a0_0x1aca['RcVWHb'](_0x2d0070),_0x3c53c8[_0xde5278]=_0x2d0070;}else _0x2d0070=_0x10f90b;return _0x2d0070;},a0_0x1aca(_0x3c53c8,_0x216b64);}a0_0x1c7eb5();import a0_0x2d9748 from'path';import{promises as a0_0x1460bb}from'fs';import{OpenAI}from'openai';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class ImageTool extends BaseTool{constructor(_0x18edf9,_0x4bc2e0){const _0x483552=a0_0x1aca;super(_0x18edf9,_0x4bc2e0),this['openai']=new OpenAI({'apiKey':this['config'][_0x483552(0x224)]?.[_0x483552(0x23b)]?.['apiKey']||process[_0x483552(0x225)][_0x483552(0x208)]}),this['pendingGenerations']=new Map();}['getDescription'](){const _0x5aaf55=a0_0x1aca;return _0x5aaf55(0x1f2);}['parseParameters'](_0x4ac3c4){const _0xcdbe3b=a0_0x1aca,_0x15c717={};_0x15c717[_0xcdbe3b(0x1ae)]=_0xcdbe3b(0x1c4),_0x15c717[_0xcdbe3b(0x1ee)]=_0xcdbe3b(0x1d4),_0x15c717[_0xcdbe3b(0x22e)]=_0xcdbe3b(0x1f9);const _0x487d1e=_0x15c717;this['logger']['info']('Parsing\x20image\x20generation\x20parameters\x20with\x20TagParser');const _0x1018d4={};_0x1018d4[_0xcdbe3b(0x1ea)]=[];const _0x36c5a5=_0x1018d4;try{const _0x2be336=TagParser[_0xcdbe3b(0x20f)](_0x4ac3c4,_0x487d1e['JybYG']);for(const _0x3104ad of _0x2be336){const _0x39c04e=_0x3104ad[_0xcdbe3b(0x1d2)][_0x487d1e[_0xcdbe3b(0x1ee)]];_0x39c04e&&_0x36c5a5[_0xcdbe3b(0x1ea)][_0xcdbe3b(0x1aa)]({'action':_0xcdbe3b(0x1c4),'path':_0x39c04e,'prompt':_0x3104ad[_0xcdbe3b(0x1cd)]['trim']()});}return _0x36c5a5;}catch(_0x44a380){this[_0xcdbe3b(0x1ce)]['error'](_0x487d1e[_0xcdbe3b(0x22e)],_0x44a380);const _0x3a724d={};return _0x3a724d[_0xcdbe3b(0x1ea)]=[],_0x3a724d;}}async[a0_0x5a40ce(0x23d)](_0x383e33,_0x102f82){const _0x2c96e5=a0_0x5a40ce,_0x15a894={};_0x15a894[_0x2c96e5(0x1b7)]=function(_0x2ab476,_0x47c3b6){return _0x2ab476===_0x47c3b6;},_0x15a894['dPjOE']=_0x2c96e5(0x1d8),_0x15a894[_0x2c96e5(0x1bc)]=_0x2c96e5(0x1c4);const _0x58ecec=_0x15a894;this[_0x2c96e5(0x1ce)]['info'](_0x2c96e5(0x227),_0x383e33);const _0x5e4a78=[];if(!_0x383e33[_0x2c96e5(0x1ea)]||_0x58ecec[_0x2c96e5(0x1b7)](_0x383e33['commands'][_0x2c96e5(0x231)],0x0))throw new Error(_0x58ecec[_0x2c96e5(0x1c6)]);for(const _0x5c28f7 of _0x383e33['commands']){try{switch(_0x5c28f7[_0x2c96e5(0x216)]){case _0x58ecec[_0x2c96e5(0x1bc)]:const _0x109469=await this[_0x2c96e5(0x1e2)](_0x5c28f7[_0x2c96e5(0x212)],_0x5c28f7[_0x2c96e5(0x1b3)],_0x102f82);_0x5e4a78[_0x2c96e5(0x1aa)](_0x109469);break;default:throw new Error(_0x2c96e5(0x1e3)+_0x5c28f7[_0x2c96e5(0x216)]);}}catch(_0x1c8c27){this[_0x2c96e5(0x1ce)][_0x2c96e5(0x1ed)](_0x2c96e5(0x23c)+_0x5c28f7[_0x2c96e5(0x216)]+':',_0x1c8c27);const _0xb687e4={};_0xb687e4[_0x2c96e5(0x216)]=_0x5c28f7[_0x2c96e5(0x216)],_0xb687e4[_0x2c96e5(0x244)]=![],_0xb687e4['error']=_0x1c8c27[_0x2c96e5(0x213)],_0x5e4a78['push'](_0xb687e4);}}const _0x573bc3={};return _0x573bc3[_0x2c96e5(0x1e4)]=_0x5e4a78,_0x573bc3;}async[a0_0x5a40ce(0x1e2)](_0xf0efa4,_0x3bbc33,_0x182985){const _0x3849b3=a0_0x5a40ce,_0x46a37d={};_0x46a37d[_0x3849b3(0x1dc)]=function(_0x15620f,_0x18f45d){return _0x15620f+_0x18f45d;},_0x46a37d[_0x3849b3(0x241)]=_0x3849b3(0x219),_0x46a37d[_0x3849b3(0x1b9)]=_0x3849b3(0x234),_0x46a37d[_0x3849b3(0x1f8)]='base64',_0x46a37d['ysLfO']=_0x3849b3(0x1c4),_0x46a37d[_0x3849b3(0x1a9)]=function(_0x5414ba,_0x21bb7f){return _0x5414ba!==_0x21bb7f;},_0x46a37d['focNa']=_0x3849b3(0x23e);const _0x1cffe8=_0x46a37d;this[_0x3849b3(0x1ce)]['info'](_0x3849b3(0x1c2)+_0xf0efa4);const _0x38eb3f=a0_0x2d9748['isAbsolute'](_0x3bbc33)?_0x3bbc33:a0_0x2d9748['resolve'](_0x182985,_0x3bbc33),_0x612263=a0_0x2d9748[_0x3849b3(0x218)](_0x38eb3f),_0x388b5d={};_0x388b5d[_0x3849b3(0x1df)]=!![],await a0_0x1460bb[_0x3849b3(0x235)](_0x612263,_0x388b5d);const _0x403f70=_0x1cffe8['mMUQJ'](Date['now']()[_0x3849b3(0x222)](0x24),Math[_0x3849b3(0x1d3)]()[_0x3849b3(0x222)](0x24)[_0x3849b3(0x1f6)](0x2,0x9));try{const _0x376ae9=this['config'][_0x3849b3(0x1c1)]?.[_0x3849b3(0x1e0)]?.[_0x3849b3(0x23f)]||_0x1cffe8['EAnxM'];this['logger'][_0x3849b3(0x1e8)]('Sending\x20image\x20generation\x20request\x20to\x20OpenAI\x20with\x20model:\x20'+_0x376ae9);const _0x536ef7=await this[_0x3849b3(0x23b)]['images']['generate']({'model':_0x376ae9,'prompt':_0xf0efa4,'n':0x1,'size':this[_0x3849b3(0x20a)][_0x3849b3(0x1c1)]?.[_0x3849b3(0x1e0)]?.['size']||_0x3849b3(0x1f4),'response_format':_0x1cffe8[_0x3849b3(0x1b9)]}),_0x49e993=_0x536ef7[_0x3849b3(0x1ab)][0x0][_0x3849b3(0x234)],_0x495a41=Buffer[_0x3849b3(0x1ac)](_0x49e993,_0x1cffe8['ycXGH']);await a0_0x1460bb[_0x3849b3(0x1d5)](_0x38eb3f,_0x495a41),this[_0x3849b3(0x1ce)][_0x3849b3(0x1e8)](_0x3849b3(0x221)+_0x38eb3f);const _0x37d6d1={};return _0x37d6d1[_0x3849b3(0x216)]=_0x1cffe8['ysLfO'],_0x37d6d1[_0x3849b3(0x1b1)]=_0x403f70,_0x37d6d1[_0x3849b3(0x212)]=_0xf0efa4,_0x37d6d1['outputPath']=_0x3bbc33,_0x37d6d1['resolvedOutputPath']=_0x38eb3f,_0x37d6d1['success']=!![],_0x37d6d1[_0x3849b3(0x21a)]=_0x3849b3(0x1d6),_0x37d6d1;}catch(_0x398aa8){if(_0x1cffe8[_0x3849b3(0x1a9)](_0x1cffe8[_0x3849b3(0x1dd)],_0x3849b3(0x1cb)))throw new Error(_0x3849b3(0x1e9)+_0x398aa8['message']);else{const _0x4b20b0=_0x1a0231?function(){const _0x4f2939=_0x3849b3;if(_0x4ce0ca){const _0x27d6fe=_0x25408a[_0x4f2939(0x1b5)](_0xc20887,arguments);return _0x15e7ad=null,_0x27d6fe;}}:function(){};return _0x24da94=![],_0x4b20b0;}}}async[a0_0x5a40ce(0x1f3)](_0x58b0fc){const _0x4c39b0=a0_0x5a40ce,_0x12537f={};_0x12537f[_0x4c39b0(0x20b)]=_0x4c39b0(0x1de),_0x12537f[_0x4c39b0(0x1e5)]='Generation\x20job\x20not\x20found',_0x12537f['ZbPkA']=function(_0x62fd69,_0x46e358){return _0x62fd69===_0x46e358;},_0x12537f['dndEv']=_0x4c39b0(0x1c9),_0x12537f[_0x4c39b0(0x1ff)]='cancelled',_0x12537f['VqpCO']=_0x4c39b0(0x21f),_0x12537f[_0x4c39b0(0x1cf)]=_0x4c39b0(0x22b),_0x12537f['JUqDH']='not_found';const _0x1b597e=_0x12537f;if(!this[_0x4c39b0(0x207)][_0x4c39b0(0x1cc)](_0x58b0fc)){if(_0x1b597e[_0x4c39b0(0x1c0)](_0x1b597e[_0x4c39b0(0x1fd)],_0x1b597e[_0x4c39b0(0x1cf)])){if(!this[_0x4c39b0(0x207)][_0x4c39b0(0x1cc)](_0x35e322)){const _0x42f1a1={};return _0x42f1a1[_0x4c39b0(0x216)]=_0x1b597e[_0x4c39b0(0x20b)],_0x42f1a1['jobId']=_0x182f9f,_0x42f1a1[_0x4c39b0(0x244)]=![],_0x42f1a1[_0x4c39b0(0x1ed)]=_0x1b597e['STStm'],_0x42f1a1;}const _0x205097=this[_0x4c39b0(0x207)][_0x4c39b0(0x20c)](_0x5e51df);if(_0x1b597e['ZbPkA'](_0x205097[_0x4c39b0(0x21a)],_0x1b597e['dndEv'])){_0x205097[_0x4c39b0(0x21a)]=_0x1b597e[_0x4c39b0(0x1ff)],this[_0x4c39b0(0x207)][_0x4c39b0(0x226)](_0x1e51ef,_0x205097);const _0x1968cc={};return _0x1968cc['action']=_0x1b597e[_0x4c39b0(0x20b)],_0x1968cc['jobId']=_0x2cd56b,_0x1968cc[_0x4c39b0(0x244)]=!![],_0x1968cc;}const _0x3e4b51={};return _0x3e4b51[_0x4c39b0(0x216)]=_0x1b597e[_0x4c39b0(0x20b)],_0x3e4b51[_0x4c39b0(0x1b1)]=_0x96ab95,_0x3e4b51[_0x4c39b0(0x244)]=![],_0x3e4b51[_0x4c39b0(0x1ed)]='Cannot\x20cancel\x20job\x20with\x20status:\x20'+_0x205097[_0x4c39b0(0x21a)],_0x3e4b51;}else{const _0xd8c892={};return _0xd8c892[_0x4c39b0(0x1b1)]=_0x58b0fc,_0xd8c892['exists']=![],_0xd8c892['status']=_0x1b597e[_0x4c39b0(0x1d7)],_0xd8c892;}}const _0x3643bd=this[_0x4c39b0(0x207)]['get'](_0x58b0fc),_0x588336={};return _0x588336[_0x4c39b0(0x1b1)]=_0x58b0fc,_0x588336[_0x4c39b0(0x1e6)]=!![],_0x588336[_0x4c39b0(0x21a)]=_0x3643bd[_0x4c39b0(0x21a)],_0x588336[_0x4c39b0(0x243)]=_0x3643bd[_0x4c39b0(0x243)],_0x588336[_0x4c39b0(0x212)]=_0x3643bd['prompt'],_0x588336[_0x4c39b0(0x22c)]=_0x3643bd[_0x4c39b0(0x22c)],_0x588336;}async['cancelGeneration'](_0x3b6572){const _0x207297=a0_0x5a40ce,_0x5827cc={};_0x5827cc[_0x207297(0x1c3)]=_0x207297(0x1c4),_0x5827cc[_0x207297(0x1ba)]='output-path',_0x5827cc[_0x207297(0x1b2)]=function(_0x13d560,_0x375116){return _0x13d560===_0x375116;},_0x5827cc[_0x207297(0x1c8)]=_0x207297(0x1c9),_0x5827cc['OByBQ']=function(_0x1daf38,_0x41f81b){return _0x1daf38!==_0x41f81b;},_0x5827cc[_0x207297(0x21d)]=_0x207297(0x22d),_0x5827cc['imDrZ']=_0x207297(0x1af),_0x5827cc['dchLJ']=_0x207297(0x1de);const _0x25885b=_0x5827cc;if(!this[_0x207297(0x207)][_0x207297(0x1cc)](_0x3b6572)){const _0x3ba777={};return _0x3ba777[_0x207297(0x216)]='cancel',_0x3ba777[_0x207297(0x1b1)]=_0x3b6572,_0x3ba777[_0x207297(0x244)]=![],_0x3ba777[_0x207297(0x1ed)]=_0x207297(0x1f0),_0x3ba777;}const _0x369c03=this[_0x207297(0x207)][_0x207297(0x20c)](_0x3b6572);if(_0x25885b[_0x207297(0x1b2)](_0x369c03[_0x207297(0x21a)],_0x25885b['IGVfu'])){if(_0x25885b['OByBQ'](_0x25885b['aXaID'],_0x25885b[_0x207297(0x21d)])){const _0x316033=_0x2be3fb[_0x207297(0x20f)](_0x890b99,_0x25885b[_0x207297(0x1c3)]);for(const _0xc49f39 of _0x316033){const _0x508f0e=_0xc49f39['attributes'][_0x25885b[_0x207297(0x1ba)]];_0x508f0e&&_0x18273b[_0x207297(0x1ea)][_0x207297(0x1aa)]({'action':_0x25885b[_0x207297(0x1c3)],'path':_0x508f0e,'prompt':_0xc49f39[_0x207297(0x1cd)][_0x207297(0x204)]()});}return _0x3e64ad;}else{_0x369c03[_0x207297(0x21a)]=_0x25885b['imDrZ'],this[_0x207297(0x207)]['set'](_0x3b6572,_0x369c03);const _0x1d936f={};return _0x1d936f[_0x207297(0x216)]=_0x25885b[_0x207297(0x1b4)],_0x1d936f[_0x207297(0x1b1)]=_0x3b6572,_0x1d936f[_0x207297(0x244)]=!![],_0x1d936f;}}const _0x209743={};return _0x209743[_0x207297(0x216)]=_0x25885b[_0x207297(0x1b4)],_0x209743['jobId']=_0x3b6572,_0x209743[_0x207297(0x244)]=![],_0x209743[_0x207297(0x1ed)]=_0x207297(0x1bf)+_0x369c03[_0x207297(0x21a)],_0x209743;}async[a0_0x5a40ce(0x217)](){const _0x4fb8e9=a0_0x5a40ce,_0x2f5b70={};_0x2f5b70[_0x4fb8e9(0x239)]=_0x4fb8e9(0x22a),_0x2f5b70['vcuUD']=function(_0xa846a6,_0x13e4d4){return _0xa846a6===_0x13e4d4;},_0x2f5b70[_0x4fb8e9(0x201)]=_0x4fb8e9(0x1c9),_0x2f5b70[_0x4fb8e9(0x211)]=_0x4fb8e9(0x1af);const _0x217d3f=_0x2f5b70;this[_0x4fb8e9(0x1ce)]['info'](_0x217d3f[_0x4fb8e9(0x239)]);for(const [_0x13ca0e,_0x5d46e5]of this[_0x4fb8e9(0x207)]['entries']()){_0x217d3f[_0x4fb8e9(0x202)](_0x5d46e5[_0x4fb8e9(0x21a)],_0x217d3f[_0x4fb8e9(0x201)])&&(_0x5d46e5[_0x4fb8e9(0x21a)]=_0x217d3f['CqRfJ'],this['pendingGenerations'][_0x4fb8e9(0x226)](_0x13ca0e,_0x5d46e5));}}}