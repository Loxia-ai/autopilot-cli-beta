const a0_0x1b3014=a0_0x2476;(function(_0x119082,_0x3a767e){const _0x5f6796=a0_0x2476,_0x307426=_0x119082();while(!![]){try{const _0x3f04fa=parseInt(_0x5f6796(0x205))/0x1*(parseInt(_0x5f6796(0x180))/0x2)+parseInt(_0x5f6796(0x1d0))/0x3*(-parseInt(_0x5f6796(0x1ad))/0x4)+parseInt(_0x5f6796(0x17c))/0x5*(parseInt(_0x5f6796(0x20a))/0x6)+-parseInt(_0x5f6796(0x1f8))/0x7+-parseInt(_0x5f6796(0x232))/0x8*(-parseInt(_0x5f6796(0x1c7))/0x9)+-parseInt(_0x5f6796(0x1bb))/0xa*(-parseInt(_0x5f6796(0x19f))/0xb)+-parseInt(_0x5f6796(0x20e))/0xc*(-parseInt(_0x5f6796(0x1de))/0xd);if(_0x3f04fa===_0x3a767e)break;else _0x307426['push'](_0x307426['shift']());}catch(_0x581661){_0x307426['push'](_0x307426['shift']());}}}(a0_0x2043,0xef27e));const a0_0x11f7a6=(function(){const _0x142bff=a0_0x2476,_0x307ff6={};_0x307ff6[_0x142bff(0x19d)]=function(_0x2a227d,_0x4b7859){return _0x2a227d!==_0x4b7859;},_0x307ff6[_0x142bff(0x1c2)]=_0x142bff(0x1ff),_0x307ff6[_0x142bff(0x22b)]=function(_0x3dcfbd,_0x530fd2){return _0x3dcfbd===_0x530fd2;},_0x307ff6[_0x142bff(0x1f0)]=_0x142bff(0x215),_0x307ff6[_0x142bff(0x1f4)]=_0x142bff(0x181),_0x307ff6[_0x142bff(0x1ab)]=_0x142bff(0x1c5),_0x307ff6[_0x142bff(0x1a0)]=_0x142bff(0x1e7);const _0x3f88e6=_0x307ff6;let _0x434ede=!![];return function(_0x2d2630,_0x28785f){const _0x19662e=_0x142bff,_0x57e7b6={'Irvlz':function(_0x346c04,_0x1f9e84){const _0xe62424=a0_0x2476;return _0x3f88e6[_0xe62424(0x19d)](_0x346c04,_0x1f9e84);},'qWLSV':_0x3f88e6[_0x19662e(0x1c2)],'Xedbt':function(_0x42d42a,_0x360ed8){const _0x2b5c37=_0x19662e;return _0x3f88e6[_0x2b5c37(0x22b)](_0x42d42a,_0x360ed8);},'ECxgY':_0x3f88e6[_0x19662e(0x1f0)],'irofl':_0x3f88e6[_0x19662e(0x1f4)]};if(_0x3f88e6['LYZGY']===_0x3f88e6[_0x19662e(0x1a0)]){this[_0x19662e(0x18c)][_0x19662e(0x1db)]('Error\x20executing\x20image\x20generation\x20command\x20'+_0x306ca9[_0x19662e(0x199)]+':',_0xe4a00);const _0x3fef83={};_0x3fef83[_0x19662e(0x199)]=_0x2b8943[_0x19662e(0x199)],_0x3fef83[_0x19662e(0x202)]=![],_0x3fef83['error']=_0x115cba[_0x19662e(0x19b)],_0x722709[_0x19662e(0x22f)](_0x3fef83);}else{const _0x3ce652=_0x434ede?function(){const _0x475360=_0x19662e;if(_0x57e7b6[_0x475360(0x1c1)]('TnzYg',_0x57e7b6[_0x475360(0x184)]))_0x54878a=_0x420b95;else{if(_0x28785f){if(_0x57e7b6[_0x475360(0x231)](_0x57e7b6[_0x475360(0x1e2)],_0x57e7b6['irofl'])){const _0x31df50=_0x5b13f3[_0x475360(0x1df)](_0x3ab27d,arguments);return _0x5aeb0b=null,_0x31df50;}else{const _0x30b9f3=_0x28785f['apply'](_0x2d2630,arguments);return _0x28785f=null,_0x30b9f3;}}}}:function(){};return _0x434ede=![],_0x3ce652;}};}()),a0_0x113580=a0_0x11f7a6(this,function(){const _0x3dfe85=a0_0x2476,_0x3cf423={};_0x3cf423['KuoDa']=_0x3dfe85(0x1da);const _0x117642=_0x3cf423;return a0_0x113580['toString']()[_0x3dfe85(0x182)](_0x117642['KuoDa'])[_0x3dfe85(0x21d)]()['constructor'](a0_0x113580)['search'](_0x3dfe85(0x1da));});a0_0x113580();const a0_0x7d26a9=(function(){const _0x12462e=a0_0x2476,_0x4e3299={};_0x4e3299['Hcwle']=function(_0x2d8859,_0x847bb5){return _0x2d8859===_0x847bb5;},_0x4e3299[_0x12462e(0x21c)]=_0x12462e(0x21b);const _0x38fc13=_0x4e3299;let _0xedabae=!![];return function(_0x44cefd,_0x152c00){const _0x352857=_0x12462e,_0x4c0c3d={'ltLRL':function(_0x16f709,_0xfbfc10){const _0x515120=a0_0x2476;return _0x38fc13[_0x515120(0x1fe)](_0x16f709,_0xfbfc10);},'uJFIB':_0x38fc13[_0x352857(0x21c)]},_0x2e939f=_0xedabae?function(){const _0x4bd8ef=_0x352857;if(_0x4c0c3d[_0x4bd8ef(0x17f)](_0x4c0c3d[_0x4bd8ef(0x1bc)],_0x4c0c3d[_0x4bd8ef(0x1bc)])){if(_0x152c00){const _0x1af83e=_0x152c00['apply'](_0x44cefd,arguments);return _0x152c00=null,_0x1af83e;}}else{if(_0x392c53){const _0x21cf9a=_0x2ebf9c['apply'](_0x5f3293,arguments);return _0x237b56=null,_0x21cf9a;}}}:function(){};return _0xedabae=![],_0x2e939f;};}()),a0_0x4d48e7=a0_0x7d26a9(this,function(){const _0x447190=a0_0x2476,_0xff34fa={'btZLN':'No\x20image\x20generation\x20commands\x20specified','ulrZG':_0x447190(0x19a),'xRlXN':function(_0xf9aa51,_0x1f1ca7){return _0xf9aa51===_0x1f1ca7;},'JTeEc':_0x447190(0x1ca),'pPPBj':_0x447190(0x217),'QDpMU':function(_0x5dad31,_0x3f9ca6){return _0x5dad31!==_0x3f9ca6;},'APokl':_0x447190(0x1f9),'gwJep':_0x447190(0x22c),'yfenL':function(_0x3b4395,_0x212dcf){return _0x3b4395(_0x212dcf);},'ztoHY':function(_0x39a450,_0x487c69){return _0x39a450+_0x487c69;},'AXRIX':_0x447190(0x1ef),'MEXBz':_0x447190(0x214),'XdymX':function(_0x59860d){return _0x59860d();},'sgyTG':'warn','WSejb':'info','yYrBG':_0x447190(0x1db),'sppIg':'exception','mdDDS':_0x447190(0x191),'ODmQX':_0x447190(0x18e),'fLQOP':function(_0x4815f7,_0x17e158){return _0x4815f7<_0x17e158;}},_0x53b884=function(){const _0x1e217b=_0x447190,_0x4817a5={'mhohg':_0x1e217b(0x1af),'cNaQg':_0xff34fa[_0x1e217b(0x204)],'uPhRt':function(_0x1a4593,_0x3486df){const _0x330fe6=_0x1e217b;return _0xff34fa[_0x330fe6(0x1cf)](_0x1a4593,_0x3486df);},'yHBRJ':_0xff34fa[_0x1e217b(0x19c)],'aexDw':_0x1e217b(0x212)};if(_0xff34fa['xRlXN']('vRPPS',_0xff34fa[_0x1e217b(0x1cd)])){let _0x457bbe;try{if(_0xff34fa[_0x1e217b(0x18a)](_0xff34fa[_0x1e217b(0x17b)],_0xff34fa[_0x1e217b(0x17d)]))_0x457bbe=_0xff34fa[_0x1e217b(0x220)](Function,_0xff34fa[_0x1e217b(0x1d6)](_0xff34fa['AXRIX'],_0xff34fa['MEXBz'])+');')();else throw new _0x41042b(_0xff34fa[_0x1e217b(0x1a3)]);}catch(_0x508d92){_0x457bbe=window;}return _0x457bbe;}else{if(!this[_0x1e217b(0x216)][_0x1e217b(0x224)](_0x2cbcba)){const _0x2a6aec={};return _0x2a6aec[_0x1e217b(0x199)]=_0x4817a5[_0x1e217b(0x20c)],_0x2a6aec[_0x1e217b(0x1e9)]=_0x13a1c0,_0x2a6aec[_0x1e217b(0x202)]=![],_0x2a6aec[_0x1e217b(0x1db)]=_0x4817a5['cNaQg'],_0x2a6aec;}const _0x6955b5=this['pendingGenerations']['get'](_0x4887b8);if(_0x4817a5['uPhRt'](_0x6955b5[_0x1e217b(0x1d7)],_0x4817a5[_0x1e217b(0x201)])){_0x6955b5[_0x1e217b(0x1d7)]=_0x4817a5[_0x1e217b(0x200)],this[_0x1e217b(0x216)][_0x1e217b(0x197)](_0x5654fc,_0x6955b5);const _0x585a29={};return _0x585a29['action']='cancel',_0x585a29[_0x1e217b(0x1e9)]=_0x2c181b,_0x585a29[_0x1e217b(0x202)]=!![],_0x585a29;}const _0x556827={};return _0x556827[_0x1e217b(0x199)]=_0x1e217b(0x1af),_0x556827['jobId']=_0x40ef0e,_0x556827[_0x1e217b(0x202)]=![],_0x556827[_0x1e217b(0x1db)]=_0x1e217b(0x1b7)+_0x6955b5[_0x1e217b(0x1d7)],_0x556827;}},_0x5bd97e=_0xff34fa[_0x447190(0x1ee)](_0x53b884),_0x11efa7=_0x5bd97e[_0x447190(0x207)]=_0x5bd97e[_0x447190(0x207)]||{},_0x27b85d=[_0x447190(0x1ec),_0xff34fa['sgyTG'],_0xff34fa[_0x447190(0x189)],_0xff34fa[_0x447190(0x1bd)],_0xff34fa['sppIg'],_0xff34fa[_0x447190(0x211)],_0xff34fa[_0x447190(0x1c6)]];for(let _0x4d19dc=0x0;_0xff34fa['fLQOP'](_0x4d19dc,_0x27b85d[_0x447190(0x1ac)]);_0x4d19dc++){const _0x506a32=a0_0x7d26a9[_0x447190(0x1b1)][_0x447190(0x1c8)][_0x447190(0x1e6)](a0_0x7d26a9),_0x101dc1=_0x27b85d[_0x4d19dc],_0x42ec4c=_0x11efa7[_0x101dc1]||_0x506a32;_0x506a32[_0x447190(0x1ba)]=a0_0x7d26a9[_0x447190(0x1e6)](a0_0x7d26a9),_0x506a32[_0x447190(0x21d)]=_0x42ec4c[_0x447190(0x21d)][_0x447190(0x1e6)](_0x42ec4c),_0x11efa7[_0x101dc1]=_0x506a32;}});a0_0x4d48e7();import a0_0x548435 from'path';function a0_0x2476(_0x1896e8,_0x5a9880){const _0x319072=a0_0x2043();return a0_0x2476=function(_0x4d48e7,_0x7d26a9){_0x4d48e7=_0x4d48e7-0x179;let _0x3dd774=_0x319072[_0x4d48e7];if(a0_0x2476['KEXosd']===undefined){var _0x2a9dc8=function(_0x24761c){const _0x5bbcbd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x16704c='',_0x1a0bf5='',_0x46157c=_0x16704c+_0x2a9dc8;for(let _0x2b72d1=0x0,_0x2b86e0,_0x543b0a,_0x29d4fb=0x0;_0x543b0a=_0x24761c['charAt'](_0x29d4fb++);~_0x543b0a&&(_0x2b86e0=_0x2b72d1%0x4?_0x2b86e0*0x40+_0x543b0a:_0x543b0a,_0x2b72d1++%0x4)?_0x16704c+=_0x46157c['charCodeAt'](_0x29d4fb+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x2b86e0>>(-0x2*_0x2b72d1&0x6)):_0x2b72d1:0x0){_0x543b0a=_0x5bbcbd['indexOf'](_0x543b0a);}for(let _0x39ab60=0x0,_0xe44f64=_0x16704c['length'];_0x39ab60<_0xe44f64;_0x39ab60++){_0x1a0bf5+='%'+('00'+_0x16704c['charCodeAt'](_0x39ab60)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1a0bf5);};a0_0x2476['yBtFUC']=_0x2a9dc8,_0x1896e8=arguments,a0_0x2476['KEXosd']=!![];}const _0x113580=_0x319072[0x0],_0x11f7a6=_0x4d48e7+_0x113580,_0x20436=_0x1896e8[_0x11f7a6];if(!_0x20436){const _0x123167=function(_0x2c392a){this['jSWQOR']=_0x2c392a,this['ybYgWs']=[0x1,0x0,0x0],this['gKEhLB']=function(){return'newState';},this['nRyutb']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['SfAEDY']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x123167['prototype']['ikuUGy']=function(){const _0x524907=new RegExp(this['nRyutb']+this['SfAEDY']),_0x41fe5c=_0x524907['test'](this['gKEhLB']['toString']())?--this['ybYgWs'][0x1]:--this['ybYgWs'][0x0];return this['eFdqWV'](_0x41fe5c);},_0x123167['prototype']['eFdqWV']=function(_0xfc751c){if(!Boolean(~_0xfc751c))return _0xfc751c;return this['ruVUkM'](this['jSWQOR']);},_0x123167['prototype']['ruVUkM']=function(_0x58dd44){for(let _0x97989f=0x0,_0x23158d=this['ybYgWs']['length'];_0x97989f<_0x23158d;_0x97989f++){this['ybYgWs']['push'](Math['round'](Math['random']())),_0x23158d=this['ybYgWs']['length'];}return _0x58dd44(this['ybYgWs'][0x0]);},new _0x123167(a0_0x2476)['ikuUGy'](),_0x3dd774=a0_0x2476['yBtFUC'](_0x3dd774),_0x1896e8[_0x11f7a6]=_0x3dd774;}else _0x3dd774=_0x20436;return _0x3dd774;},a0_0x2476(_0x1896e8,_0x5a9880);}import{promises as a0_0x4a7e89}from'fs';import{OpenAI}from'openai';import{TagParser}from'../utilities/tagParser.js';function a0_0x2043(){const _0x92c02=['ywn0Aw9U','r2vUzxjHDgLVBIbQB2iGBM90igzVDw5K','BwvZC2fNzq','sLrLrwm','y1v1Dg0','C2L6zq','mteZmdmWnxb1vLrbCa','AhjKu2i','BuH4v2u','yMfZzty0','yNrAte4','yuLJt2O','y29TBwfUzhm','rg9PDee','D3jPDgvgAwXL','DhjPBq','wNrmqvK','ChjVBxb0','tfLAr1K','BgvUz3rO','nZKZnZa4qKXlr3zO','wgLgufm','y2fUy2vS','CgfYC2vqyxjHBwv0zxjZ','y29UC3rYDwn0B3i','rxjYB3iGzxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzca','z2vUzxjHDgvjBwfNzq','Dg9VBhm','D1PLzLu','qLP1qMe','q2fUBM90ignHBMnLBcbQB2iGD2L0AcbZDgf0Dxm6ia','tM8GAw1Hz2uGz2vUzxjHDgLVBIbJB21Tyw5KCYbZCgvJAwzPzwq','C1rnvvm','x19WCM90B19F','mtbxywfksgS','DuPgsui','EvLYqKC','zw52','z2vUzxjHDgu','yxr0CMLIDxrLCW','sxj2BhO','t1zXCgG','q2TbtNu','tvjoBu4','tuXyshG','t0rTuvG','mtCXowrbvgPpra','ChjVDg90ExbL','BM93','CgvUzgLUzW','r1nkChG','B3v0Chv0lxbHDgG','CfbqqMO','z2v0rgvZy3jPChrPB24','EfjSwe4','mtvUugH2DLq','u0PVCg4','rxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzcb3AxrOihbHCMfTzxrLCNm6','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','ChjVz3jLC3m','t1bftKfjx0fqsv9lrvK','ENrVsfK','C3rHDhvZ','qNzmv1q','AxnbyNnVBhv0zq','kcGOlISPkYKRksSK','zxjYB3i','zxHPC3rZ','wxbYs00','mJK5AgvhD1vf','yxbWBhK','CMvZDwX0CW','A2DjDNu','run4z1K','B3bLBMfP','CxvLCNK','y29UzMLN','yMLUza','Cw15wuW','y2fkzM8','AM9Iswq','ALf0vwC','uu1KENK','Bg9N','rg9Mru8','wgr5BvG','CMv0DxjUicHMDw5JDgLVBIGPia','zhLIA1y','EMTrBfu','ugfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNmGD2L0AcbuywDqyxjZzxi','CMfUzg9T','C1zMAha','u2H1DhrPBMCGzg93BIbPBwfNzsb0B29S','Bw9KzwW','Cgf0Aa','nJG2mtC3muXereDxrW','q3vAzMe','BM90x2zVDw5K','sw1Hz2uGC2f2zwqGDg86ia','C2H1DgrVD24','ANjiBuC','sgn3Bgu','vg56wwC','ywv4rhC','EuHcuKO','C3vJy2vZCW','BwTKAxi','DwXYwKC','ntGYmtndzMXhwxa','zffbsMu','y29UC29Szq','BMftAuC','rgPvEeO','odyWmJHXtg9Vrfy','cKLTywDLieDLBMvYyxrPB24Gvg9VBdOGqwXSB3DZihLVDsb0BYbNzw5LCMf0zsbPBwfNzxmGDxnPBMCGquKGBw9KzwXZlGOkvxnHz2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iNjLBgf0AxzLl3bHDgGVDg8VC2f2zs9PBwfNzs5WBMCIxqPezxrHAwXLzcbKzxnJCMLWDgLVBIbVzIb0AguGAw1Hz2uGEw91ihDHBNqGDg8Gz2vUzxjHDgukwY9Nzw5LCMf0zv0kwY90B29SxqOkrxHHBxbSzxm6cJeUieDLBMvYyxrLigeGC2LTCgXLigLTywDLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVBw91BNrHAw5ZlNbUzYjDcKeGyMvHDxrPzNvSig1VDw50ywLUigXHBMrZy2fWzsb3AxrOihnUB3CTy2fWCgvKihbLywTZlcbHignSzwfYigjSDwuGC2T5lcbHBMqGysbMB3jLC3qGyxqGDgHLigjHC2uGB2yGDgHLig1VDw50ywLUCY4kwY9Nzw5LCMf0zv0kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcbPBwfNzsb3AxrOihnWzwnPzMLJihn0EwXLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVCM9IB3qUCg5NiL0kqsbMDxr1CMLZDgLJihjVyM90igLUigeGy3LIzxjWDw5RignPDhKGyxqGBMLNAhqUifrOzsbYB2jVDcbOyxmGz2XVD2LUzYbIBhvLigv5zxmGyw5KigLZihn0yw5KAw5NihvUzgvYigeGBMvVBIbZAwDUlIbtDhLSztOGzgLNAxrHBcbHCNqSigrLDgfPBgvKlcbOAwDOignVBNrYyxn0lGPBl2DLBMvYyxrLxqPBl3rVB2XDcGOZlIbhzw5LCMf0zsbHBIbHyNn0CMfJDcbHCNqGCgLLy2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iMLTywDLCY9HyNn0CMfJDc5WBMCIxqPbyNn0CMfJDcbNzw9TzxrYAwmGC2HHCgvZigLUigjYAwDODcbJB2XVCNmSihDPDgGGysbMB2n1CYbVBIbJAxjJBgvZigfUzcb0CMLHBMDSzxmUifn0EwXLoIbTAw5PBwfSAxn0lcbJBgvHBIbSAw5LCYWGDMLICMfUDcbJB2XVCNmUcLSVz2vUzxjHDgvDcLSVDg9VBf0kcK5VDgvZoGOTieLTywDLigDLBMvYyxrPB24GBwf5ihrHA2uGC29Tzsb0Aw1LihrVignVBxbSzxrLcI0GvgHLig91Dhb1DcbWyxrOihnOB3vSzcbIzsbYzwXHDgL2zsb0BYb0AguGChjVAMvJDcbKAxjLy3rVCNKklsbqCM92AwrLigrLDgfPBgvKigrLC2nYAxb0Aw9UCYbMB3iGyMv0DgvYihjLC3vSDhmklsbzB3uGD2LSBcbYzwnLAxzLigeGBM90AwzPy2f0Aw9UihDOzw4GDgHLigLTywDLigDLBMvYyxrPB24GAxmGy29TCgXLDgukicaGia','BwHVAgC','z2v0','mJi4D21Hufnh','q1rKywK','Egjbsxi','Bwrerfm','y2fUy2vSBgvK','shLzywS','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','vhPLrLC','CgvUzgLUz0DLBMvYyxrPB25Z','DLjqufm','y29UDgvUDa','vKnMtNO','ueDPqNa','y216CMW','zw1srM8','Dg9tDhjPBMC','u2zKywG','C2vYDMLJzxm','EwzLBKW','CMvJDxjZAxzL','Ahf0D3C','mtaYnhGXmdi0','AgfZ','zgnVvNm','wu9dwNi','rxjYB3iGCgfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNm6','y2fUy2vSr2vUzxjHDgLVBG','DffpqKG','yJy0x2PZB24','v0XwswW','C09HqMS','Aw5MBW','AxzJuwG','ChvZAa','zgf0yq','wgvKyNq','ote5mM9dCwLyyq','z2v0r2vUzxjHDgLVBLn0yxr1CW','uKHHtw8','Aw1Hz2vZ','qvbVA2W','nduWzNLvwxvb','z3Dkzxa','EKDkA1a','BhrmuKW','ndzOEwThtvu','DvjiBu0','C2vHCMnO','wxPPsvm','CvDmu1y','v25WELC','vMjgEwO','B3v0Chv0ugf0Aa','vwTSy0u','v1nLAMi','uurWtvu','s1fQAhC','Bg9Nz2vY','txzUCvO','DhjHy2u','CMvZB2X2zq','tMzUA0W','DgfIBgu','AgLyAui','CvLYuKy','zw50CMLLCW','A3vLDhy','q0fVDvu','C2v0','yxbPs2v5'];a0_0x2043=function(){return _0x92c02;};return a0_0x2043();}import{BaseTool}from'./baseTool.js';export class ImageTool extends BaseTool{constructor(_0x3ba4da,_0x1056f0){const _0x2c3aeb=a0_0x2476;super(_0x3ba4da,_0x1056f0),this[_0x2c3aeb(0x1e3)]=new OpenAI({'apiKey':this[_0x2c3aeb(0x1e5)][_0x2c3aeb(0x21f)]?.[_0x2c3aeb(0x1e3)]?.[_0x2c3aeb(0x198)]||process[_0x2c3aeb(0x1be)][_0x2c3aeb(0x1d5)]}),this[_0x2c3aeb(0x216)]=new Map();}[a0_0x1b3014(0x1ce)](){const _0x19539e=a0_0x1b3014;return _0x19539e(0x20b);}[a0_0x1b3014(0x1b0)](_0x1d9a82){const _0x59a508=a0_0x1b3014,_0x1a310f={};_0x1a310f['zkQlU']=function(_0x18eb3f,_0x5b47bf){return _0x18eb3f===_0x5b47bf;},_0x1a310f[_0x59a508(0x1dd)]=_0x59a508(0x1ca),_0x1a310f[_0x59a508(0x196)]=_0x59a508(0x212),_0x1a310f['Sfdah']='WeHYa',_0x1a310f['wgpCt']=_0x59a508(0x1cc),_0x1a310f['HyYak']=_0x59a508(0x1ae),_0x1a310f[_0x59a508(0x1a6)]=_0x59a508(0x1bf),_0x1a310f['QMdzy']=_0x59a508(0x227);const _0x5337e6=_0x1a310f;this[_0x59a508(0x18c)][_0x59a508(0x22d)](_0x59a508(0x1f2));const _0x5d8667={};_0x5d8667[_0x59a508(0x1a5)]=[];const _0xa526e0=_0x5d8667;try{if(_0x5337e6['zkQlU'](_0x5337e6['Sfdah'],_0x5337e6[_0x59a508(0x21e)])){const _0x4a8079=TagParser[_0x59a508(0x1e4)](_0x1d9a82,_0x59a508(0x1bf));for(const _0x1f2608 of _0x4a8079){const _0x292161=_0x1f2608[_0x59a508(0x1c0)][_0x5337e6['wgpCt']];if(_0x292161){if(_0x5337e6[_0x59a508(0x1f1)](_0x5337e6[_0x59a508(0x213)],'qUwLS')){const _0x252bbb=_0xcb1fdf[_0x59a508(0x1b1)]['prototype'][_0x59a508(0x1e6)](_0x4edd59),_0x1f7210=_0x26401a[_0x5b6c33],_0xf7e423=_0xff5857[_0x1f7210]||_0x252bbb;_0x252bbb[_0x59a508(0x1ba)]=_0x468999[_0x59a508(0x1e6)](_0x135f83),_0x252bbb[_0x59a508(0x21d)]=_0xf7e423[_0x59a508(0x21d)]['bind'](_0xf7e423),_0x2ab205[_0x1f7210]=_0x252bbb;}else _0xa526e0['commands'][_0x59a508(0x22f)]({'action':_0x5337e6[_0x59a508(0x1a6)],'path':_0x292161,'prompt':_0x1f2608[_0x59a508(0x218)][_0x59a508(0x1a8)]()});}}return _0xa526e0;}else{this[_0x59a508(0x18c)][_0x59a508(0x22d)](_0x59a508(0x1f5));for(const [_0x5a5289,_0x1289e9]of this[_0x59a508(0x216)][_0x59a508(0x194)]()){_0x5337e6[_0x59a508(0x1f1)](_0x1289e9[_0x59a508(0x1d7)],_0x5337e6[_0x59a508(0x1dd)])&&(_0x1289e9['status']=_0x5337e6['CAouU'],this['pendingGenerations'][_0x59a508(0x197)](_0x5a5289,_0x1289e9));}}}catch(_0x1bfbfb){this[_0x59a508(0x18c)]['error'](_0x5337e6[_0x59a508(0x1eb)],_0x1bfbfb);const _0x1a6393={};return _0x1a6393[_0x59a508(0x1a5)]=[],_0x1a6393;}}async[a0_0x1b3014(0x1d3)](_0x12641e,_0x152ae5){const _0x503aa3=a0_0x1b3014,_0x3a5bbf={};_0x3a5bbf['aIcOj']=function(_0x454bf1,_0x19c86d){return _0x454bf1+_0x19c86d;},_0x3a5bbf['hiXiB']=_0x503aa3(0x214),_0x3a5bbf[_0x503aa3(0x21a)]='cancelled',_0x3a5bbf['DjUxJ']=_0x503aa3(0x1af),_0x3a5bbf['PxRBE']=_0x503aa3(0x1d2),_0x3a5bbf[_0x503aa3(0x195)]=function(_0x588e55,_0x4331da){return _0x588e55!==_0x4331da;},_0x3a5bbf[_0x503aa3(0x17e)]=_0x503aa3(0x1e1),_0x3a5bbf[_0x503aa3(0x1a9)]=_0x503aa3(0x1b8),_0x3a5bbf[_0x503aa3(0x1c4)]=_0x503aa3(0x1bf),_0x3a5bbf['GSJpx']=function(_0x6d70cf,_0x196bfd){return _0x6d70cf!==_0x196bfd;},_0x3a5bbf[_0x503aa3(0x179)]=_0x503aa3(0x1b5),_0x3a5bbf['CkANu']='cmoxZ';const _0x123953=_0x3a5bbf;this[_0x503aa3(0x18c)][_0x503aa3(0x22d)](_0x123953['PxRBE'],_0x12641e);const _0x4bba0b=[];if(!_0x12641e[_0x503aa3(0x1a5)]||_0x12641e[_0x503aa3(0x1a5)][_0x503aa3(0x1ac)]===0x0){if(_0x123953[_0x503aa3(0x195)](_0x123953['zGJkP'],_0x123953[_0x503aa3(0x17e)]))_0x2f8415=_0x333b5f(efEeTa['aIcOj'](efEeTa[_0x503aa3(0x1a4)]('return\x20(function()\x20',efEeTa[_0x503aa3(0x192)]),');'))();else throw new Error(_0x123953[_0x503aa3(0x1a9)]);}for(const _0x29de2f of _0x12641e['commands']){try{switch(_0x29de2f[_0x503aa3(0x199)]){case _0x123953[_0x503aa3(0x1c4)]:const _0x5adb2d=await this[_0x503aa3(0x1b3)](_0x29de2f[_0x503aa3(0x1aa)],_0x29de2f[_0x503aa3(0x1f7)],_0x152ae5);_0x4bba0b[_0x503aa3(0x22f)](_0x5adb2d);break;default:throw new Error('Unknown\x20image\x20generation\x20command:\x20'+_0x29de2f[_0x503aa3(0x199)]);}}catch(_0x26afa3){if(_0x123953[_0x503aa3(0x1cb)](_0x123953[_0x503aa3(0x179)],_0x123953[_0x503aa3(0x1c3)])){this[_0x503aa3(0x18c)][_0x503aa3(0x1db)](_0x503aa3(0x1b2)+_0x29de2f[_0x503aa3(0x199)]+':',_0x26afa3);const _0x1b8470={};_0x1b8470[_0x503aa3(0x199)]=_0x29de2f[_0x503aa3(0x199)],_0x1b8470['success']=![],_0x1b8470[_0x503aa3(0x1db)]=_0x26afa3['message'],_0x4bba0b[_0x503aa3(0x22f)](_0x1b8470);}else{_0x3cd426[_0x503aa3(0x1d7)]=_0x123953['PGiBp'],this['pendingGenerations'][_0x503aa3(0x197)](_0x535a33,_0x464763);const _0x5a9dea={};return _0x5a9dea[_0x503aa3(0x199)]=_0x123953[_0x503aa3(0x209)],_0x5a9dea[_0x503aa3(0x1e9)]=_0x2a2e42,_0x5a9dea[_0x503aa3(0x202)]=!![],_0x5a9dea;}}}const _0x56a348={};return _0x56a348[_0x503aa3(0x1e0)]=_0x4bba0b,_0x56a348;}async[a0_0x1b3014(0x1b3)](_0x2cabd4,_0x21cfd9,_0x2152c2){const _0x3fb462=a0_0x1b3014,_0x2f5bd7={};_0x2f5bd7[_0x3fb462(0x208)]=function(_0x533f6c,_0x2ddb95){return _0x533f6c+_0x2ddb95;},_0x2f5bd7[_0x3fb462(0x226)]=function(_0x304a47,_0x484b16){return _0x304a47===_0x484b16;},_0x2f5bd7[_0x3fb462(0x1e8)]='mpees',_0x2f5bd7[_0x3fb462(0x183)]='JkKkN',_0x2f5bd7[_0x3fb462(0x18d)]='dall-e-3',_0x2f5bd7[_0x3fb462(0x1d1)]=_0x3fb462(0x223),_0x2f5bd7[_0x3fb462(0x225)]=_0x3fb462(0x22a),_0x2f5bd7[_0x3fb462(0x188)]=_0x3fb462(0x1a2),_0x2f5bd7[_0x3fb462(0x190)]=_0x3fb462(0x1bf);const _0x3ac31d=_0x2f5bd7;this[_0x3fb462(0x18c)][_0x3fb462(0x22d)]('Generating\x20image\x20with\x20prompt:\x20'+_0x2cabd4);const _0x20f805=a0_0x548435[_0x3fb462(0x1d9)](_0x21cfd9)?_0x21cfd9:a0_0x548435[_0x3fb462(0x18f)](_0x2152c2,_0x21cfd9),_0x2a0b15=a0_0x548435['dirname'](_0x20f805),_0x117b86={};_0x117b86[_0x3fb462(0x221)]=!![],await a0_0x4a7e89[_0x3fb462(0x203)](_0x2a0b15,_0x117b86);const _0xa6a67d=_0x3ac31d['naSiG'](Date[_0x3fb462(0x1c9)]()[_0x3fb462(0x21d)](0x24),Math[_0x3fb462(0x1f3)]()['toString'](0x24)['substring'](0x2,0x9));try{if(_0x3ac31d[_0x3fb462(0x226)](_0x3ac31d['caJfo'],_0x3ac31d[_0x3fb462(0x183)])){const _0x5be130=_0x5d8a55?function(){if(_0x24b0f0){const _0x5b5ffe=_0x390e5c['apply'](_0xaf622a,arguments);return _0x2d4601=null,_0x5b5ffe;}}:function(){};return _0x29dfb5=![],_0x5be130;}else{const _0x263d98=this['config']['tools']?.['imageGen']?.[_0x3fb462(0x1f6)]||_0x3ac31d[_0x3fb462(0x18d)];this[_0x3fb462(0x18c)][_0x3fb462(0x22d)]('Sending\x20image\x20generation\x20request\x20to\x20OpenAI\x20with\x20model:\x20'+_0x263d98);const _0x213b6c=await this[_0x3fb462(0x1e3)][_0x3fb462(0x17a)][_0x3fb462(0x1bf)]({'model':_0x263d98,'prompt':_0x2cabd4,'n':0x1,'size':this['config'][_0x3fb462(0x1b4)]?.['imageGen']?.[_0x3fb462(0x19e)]||_0x3ac31d[_0x3fb462(0x1d1)],'response_format':_0x3ac31d[_0x3fb462(0x225)]}),_0x2ef682=_0x213b6c[_0x3fb462(0x230)][0x0][_0x3fb462(0x22a)],_0x109a87=Buffer['from'](_0x2ef682,_0x3ac31d['UklcE']);await a0_0x4a7e89[_0x3fb462(0x1a7)](_0x20f805,_0x109a87),this[_0x3fb462(0x18c)][_0x3fb462(0x22d)](_0x3fb462(0x1fb)+_0x20f805);const _0x1cd3a8={};return _0x1cd3a8[_0x3fb462(0x199)]=_0x3ac31d[_0x3fb462(0x190)],_0x1cd3a8[_0x3fb462(0x1e9)]=_0xa6a67d,_0x1cd3a8[_0x3fb462(0x1aa)]=_0x2cabd4,_0x1cd3a8[_0x3fb462(0x187)]=_0x21cfd9,_0x1cd3a8['resolvedOutputPath']=_0x20f805,_0x1cd3a8[_0x3fb462(0x202)]=!![],_0x1cd3a8[_0x3fb462(0x1d7)]='completed',_0x1cd3a8;}}catch(_0x430141){throw new Error('Failed\x20to\x20generate\x20image:\x20'+_0x430141['message']);}}async[a0_0x1b3014(0x233)](_0x4506e9){const _0x39b804=a0_0x1b3014,_0x515f82={};_0x515f82['VCfNz']=function(_0xc41a67,_0x23cb06){return _0xc41a67===_0x23cb06;},_0x515f82['coOjF']=_0x39b804(0x1d8),_0x515f82['dQAJe']=_0x39b804(0x210);const _0x309502=_0x515f82;if(!this[_0x39b804(0x216)][_0x39b804(0x224)](_0x4506e9)){if(_0x309502[_0x39b804(0x219)](_0x309502['coOjF'],_0x309502[_0x39b804(0x206)])){const _0x5de2d1={};return _0x5de2d1[_0x39b804(0x1e9)]=_0xd7bff3,_0x5de2d1[_0x39b804(0x1dc)]=![],_0x5de2d1[_0x39b804(0x1d7)]='not_found',_0x5de2d1;}else{const _0x27a24c={};return _0x27a24c[_0x39b804(0x1e9)]=_0x4506e9,_0x27a24c['exists']=![],_0x27a24c['status']=_0x39b804(0x1fa),_0x27a24c;}}const _0x180993=this[_0x39b804(0x216)][_0x39b804(0x20d)](_0x4506e9),_0xa93b53={};return _0xa93b53[_0x39b804(0x1e9)]=_0x4506e9,_0xa93b53['exists']=!![],_0xa93b53[_0x39b804(0x1d7)]=_0x180993[_0x39b804(0x1d7)],_0xa93b53[_0x39b804(0x1d4)]=_0x180993[_0x39b804(0x1d4)],_0xa93b53[_0x39b804(0x1aa)]=_0x180993[_0x39b804(0x1aa)],_0xa93b53[_0x39b804(0x187)]=_0x180993[_0x39b804(0x187)],_0xa93b53;}async[a0_0x1b3014(0x228)](_0x42e9b2){const _0xff859c=a0_0x1b3014,_0x5d512f={};_0x5d512f['jrHmG']=_0xff859c(0x1af),_0x5d512f[_0xff859c(0x18b)]=_0xff859c(0x19a),_0x5d512f['BZuBa']=_0xff859c(0x1ca);const _0x57daac=_0x5d512f;if(!this[_0xff859c(0x216)]['has'](_0x42e9b2)){const _0x268e6b={};return _0x268e6b[_0xff859c(0x199)]=_0x57daac[_0xff859c(0x1fd)],_0x268e6b[_0xff859c(0x1e9)]=_0x42e9b2,_0x268e6b[_0xff859c(0x202)]=![],_0x268e6b[_0xff859c(0x1db)]=_0x57daac[_0xff859c(0x18b)],_0x268e6b;}const _0x557c54=this[_0xff859c(0x216)]['get'](_0x42e9b2);if(_0x557c54[_0xff859c(0x1d7)]===_0x57daac[_0xff859c(0x1b6)]){_0x557c54[_0xff859c(0x1d7)]=_0xff859c(0x212),this['pendingGenerations'][_0xff859c(0x197)](_0x42e9b2,_0x557c54);const _0x58d2ab={};return _0x58d2ab[_0xff859c(0x199)]=_0x57daac[_0xff859c(0x1fd)],_0x58d2ab[_0xff859c(0x1e9)]=_0x42e9b2,_0x58d2ab['success']=!![],_0x58d2ab;}const _0x4f09b1={};return _0x4f09b1[_0xff859c(0x199)]=_0x57daac[_0xff859c(0x1fd)],_0x4f09b1[_0xff859c(0x1e9)]=_0x42e9b2,_0x4f09b1['success']=![],_0x4f09b1['error']=_0xff859c(0x1b7)+_0x557c54[_0xff859c(0x1d7)],_0x4f09b1;}async[a0_0x1b3014(0x1fc)](){const _0x5a4ea8=a0_0x1b3014,_0x2416d1={};_0x2416d1[_0x5a4ea8(0x22e)]=_0x5a4ea8(0x1af),_0x2416d1[_0x5a4ea8(0x1ed)]='Generation\x20job\x20not\x20found',_0x2416d1[_0x5a4ea8(0x222)]=_0x5a4ea8(0x1f5),_0x2416d1[_0x5a4ea8(0x1a1)]=_0x5a4ea8(0x20f),_0x2416d1['WnpzW']='IlesH',_0x2416d1[_0x5a4ea8(0x193)]=function(_0x532e89,_0x520054){return _0x532e89===_0x520054;},_0x2416d1[_0x5a4ea8(0x186)]=_0x5a4ea8(0x1ca),_0x2416d1[_0x5a4ea8(0x229)]=_0x5a4ea8(0x1b9),_0x2416d1[_0x5a4ea8(0x1ea)]=_0x5a4ea8(0x212);const _0x322983=_0x2416d1;this['logger'][_0x5a4ea8(0x22d)](_0x322983[_0x5a4ea8(0x222)]);for(const [_0x14d2d7,_0x1625af]of this[_0x5a4ea8(0x216)]['entries']()){if(_0x322983[_0x5a4ea8(0x1a1)]!==_0x322983[_0x5a4ea8(0x185)]){if(_0x322983[_0x5a4ea8(0x193)](_0x1625af['status'],_0x322983['VbFyj'])){if(_0x322983[_0x5a4ea8(0x193)](_0x322983[_0x5a4ea8(0x229)],_0x322983[_0x5a4ea8(0x229)]))_0x1625af[_0x5a4ea8(0x1d7)]=_0x322983[_0x5a4ea8(0x1ea)],this[_0x5a4ea8(0x216)]['set'](_0x14d2d7,_0x1625af);else{const _0x40b7f8={};return _0x40b7f8[_0x5a4ea8(0x199)]=_0x322983[_0x5a4ea8(0x22e)],_0x40b7f8[_0x5a4ea8(0x1e9)]=_0x55f24e,_0x40b7f8[_0x5a4ea8(0x202)]=![],_0x40b7f8[_0x5a4ea8(0x1db)]=_0x322983[_0x5a4ea8(0x1ed)],_0x40b7f8;}}}else{const _0x36cab1=_0x524907?function(){const _0x37b687=_0x5a4ea8;if(_0x21615b){const _0xe674c4=_0xaa4da0[_0x37b687(0x1df)](_0x19789e,arguments);return _0x52b3e1=null,_0xe674c4;}}:function(){};return _0x23158d=![],_0x36cab1;}}}}