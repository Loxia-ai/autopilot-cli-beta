const a0_0x12a76a=a0_0x1a2d;(function(_0x517930,_0x499418){const _0x1f5f0d=a0_0x1a2d,_0x1a8603=_0x517930();while(!![]){try{const _0x175ac0=-parseInt(_0x1f5f0d(0xf2))/0x1+parseInt(_0x1f5f0d(0x106))/0x2+-parseInt(_0x1f5f0d(0x10c))/0x3*(parseInt(_0x1f5f0d(0x12b))/0x4)+parseInt(_0x1f5f0d(0xad))/0x5+-parseInt(_0x1f5f0d(0xfb))/0x6*(-parseInt(_0x1f5f0d(0x130))/0x7)+-parseInt(_0x1f5f0d(0xf7))/0x8*(parseInt(_0x1f5f0d(0xbf))/0x9)+parseInt(_0x1f5f0d(0x104))/0xa;if(_0x175ac0===_0x499418)break;else _0x1a8603['push'](_0x1a8603['shift']());}catch(_0x527b50){_0x1a8603['push'](_0x1a8603['shift']());}}}(a0_0x5800,0x61b18));function a0_0x1a2d(_0x9ca9d6,_0x3f248d){const _0x23036d=a0_0x5800();return a0_0x1a2d=function(_0x1ca9db,_0x3bac89){_0x1ca9db=_0x1ca9db-0xa7;let _0x1c37b7=_0x23036d[_0x1ca9db];if(a0_0x1a2d['EUeciG']===undefined){var _0xa3bb7d=function(_0x1a2d0b){const _0x5ddf23='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x37d648='',_0xc9b372='',_0x52282f=_0x37d648+_0xa3bb7d;for(let _0x20c77c=0x0,_0x51fc96,_0xc2fa7,_0x11006c=0x0;_0xc2fa7=_0x1a2d0b['charAt'](_0x11006c++);~_0xc2fa7&&(_0x51fc96=_0x20c77c%0x4?_0x51fc96*0x40+_0xc2fa7:_0xc2fa7,_0x20c77c++%0x4)?_0x37d648+=_0x52282f['charCodeAt'](_0x11006c+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x51fc96>>(-0x2*_0x20c77c&0x6)):_0x20c77c:0x0){_0xc2fa7=_0x5ddf23['indexOf'](_0xc2fa7);}for(let _0x361d78=0x0,_0x6b0dea=_0x37d648['length'];_0x361d78<_0x6b0dea;_0x361d78++){_0xc9b372+='%'+('00'+_0x37d648['charCodeAt'](_0x361d78)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xc9b372);};a0_0x1a2d['jzQTkN']=_0xa3bb7d,_0x9ca9d6=arguments,a0_0x1a2d['EUeciG']=!![];}const _0x4538b2=_0x23036d[0x0],_0x53a727=_0x1ca9db+_0x4538b2,_0x5800ad=_0x9ca9d6[_0x53a727];if(!_0x5800ad){const _0x39c37c=function(_0x4f2309){this['YhOwjS']=_0x4f2309,this['fjtVfD']=[0x1,0x0,0x0],this['BmFjgw']=function(){return'newState';},this['kUHWPB']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['xWbhFE']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x39c37c['prototype']['DhMuMX']=function(){const _0x269cf5=new RegExp(this['kUHWPB']+this['xWbhFE']),_0x3205ce=_0x269cf5['test'](this['BmFjgw']['toString']())?--this['fjtVfD'][0x1]:--this['fjtVfD'][0x0];return this['TlpYrl'](_0x3205ce);},_0x39c37c['prototype']['TlpYrl']=function(_0x1080e0){if(!Boolean(~_0x1080e0))return _0x1080e0;return this['SgBogI'](this['YhOwjS']);},_0x39c37c['prototype']['SgBogI']=function(_0x3504bf){for(let _0x17ab7f=0x0,_0x248565=this['fjtVfD']['length'];_0x17ab7f<_0x248565;_0x17ab7f++){this['fjtVfD']['push'](Math['round'](Math['random']())),_0x248565=this['fjtVfD']['length'];}return _0x3504bf(this['fjtVfD'][0x0]);},new _0x39c37c(a0_0x1a2d)['DhMuMX'](),_0x1c37b7=a0_0x1a2d['jzQTkN'](_0x1c37b7),_0x9ca9d6[_0x53a727]=_0x1c37b7;}else _0x1c37b7=_0x5800ad;return _0x1c37b7;},a0_0x1a2d(_0x9ca9d6,_0x3f248d);}function a0_0x5800(){const _0x722c27=['ugfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNmGD2L0AcbuywDqyxjZzxi','C01hDuG','B3bLBMfP','B3v0Chv0lxbHDgG','u2jQAwq','Dg9VBhm','ENDIA0G','Aw1Hz2vhzw4','DhjPBq','u2H1DhrPBMCGzg93BIbPBwfNzsb0B29S','sxfJAu8','rKjvt2m','y2fUy2vSBgvK','r2vUzxjHDgLUzYbPBwfNzsb3AxrOihbYB21WDdOG','y29UC3rYDwn0B3i','AgfZ','y0HPq2u','zxHJzxb0Aw9U','Eurbwvu','yJy0x2PZB24','DKPxq2O','DhjHy2u','sw1Hz2uGC2f2zwqGDg86ia','AK92CLm','zwf0z3O','Aw5MBW','quvpr2u','DgfIBgu','CxvLCNK','yuHby2G','rxjYB3iGCgfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNm6','rgXYz0e','AM9Iswq','CvnTANC','z2vUzxjHDgvjBwfNzq','y2fUy2vS','DxLKs2m','z2v0','z01hy1G','CMv0DxjUicHMDw5JDgLVBIGPia','BgvUz3rO','CgfYC2vqyxjHBwv0zxjZ','C0nes2O','mJmXmdeWuw5qs0Xj','zxjYB3i','y29TCgXLDgvK','DxzZzMO','Aw5Xzve','oejqvezsyq','A3ngwxm','z2v0rgvZy3jPChrPB24','EKfXte0','odKYoeLPyvrcwa','ChjVDg90ExbL','qNvArgu','D1j5Ewi','zMXyqMy','BwTKAxi','Euvbv2m','C3vJy2vZCW','AePABMe','otq4ody3mgT3tMn0tW','yxbWBhK','mty3mdm0rxbIy2LV','zNjVBq','CgvUzgLUzW','u25dCw0','thjfr0e','y29UDgvUDa','nZe4ntGXwxPsv1bq','wuP4BKS','rfvsvLa','C2v0','y29UC29Szq','yNDgAwW','CMvJDxjZAxzL','y29TBwfUzhm','u1LZB2i','A1beBuW','C2vHCMnO','DLvrqKK','Bg9N','zw50CMLLCW','CMfUzg9T','BM90x2zVDw5K','ywn0Aw9U','yufrzuC','sxHwA0u','y1n2sge','C2L6zq','AfHgBfi','yMLUza','weP3DeS','B0zxsgO','ChvZAa','y29UzMLN','tg9dC1q','BwvZC2fNzq','u0LQB1K','uLLfAxm','mtjKDvjvAeK','C3rHDhvZ','s2v3yNi','uMfsrKG','yMfZzty0','mta5mMX5tNnSwq','whb5sKK','cKLTywDLieDLBMvYyxrPB24Gvg9VBdOGqwXSB3DZihLVDsb0BYbNzw5LCMf0zsbPBwfNzxmGDxnPBMCGquKGBw9KzwXZlGOkvxnHz2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iNjLBgf0AxzLl3bHDgGVDg8VC2f2zs9PBwfNzs5WBMCIxqPezxrHAwXLzcbKzxnJCMLWDgLVBIbVzIb0AguGAw1Hz2uGEw91ihDHBNqGDg8Gz2vUzxjHDgukwY9Nzw5LCMf0zv0kwY90B29SxqOkrxHHBxbSzxm6cJeUieDLBMvYyxrLigeGC2LTCgXLigLTywDLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVBw91BNrHAw5ZlNbUzYjDcKeGyMvHDxrPzNvSig1VDw50ywLUigXHBMrZy2fWzsb3AxrOihnUB3CTy2fWCgvKihbLywTZlcbHignSzwfYigjSDwuGC2T5lcbHBMqGysbMB3jLC3qGyxqGDgHLigjHC2uGB2yGDgHLig1VDw50ywLUCY4kwY9Nzw5LCMf0zv0kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcbPBwfNzsb3AxrOihnWzwnPzMLJihn0EwXLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVCM9IB3qUCg5NiL0kqsbMDxr1CMLZDgLJihjVyM90igLUigeGy3LIzxjWDw5RignPDhKGyxqGBMLNAhqUifrOzsbYB2jVDcbOyxmGz2XVD2LUzYbIBhvLigv5zxmGyw5KigLZihn0yw5KAw5NihvUzgvYigeGBMvVBIbZAwDUlIbtDhLSztOGzgLNAxrHBcbHCNqSigrLDgfPBgvKlcbOAwDOignVBNrYyxn0lGPBl2DLBMvYyxrLxqPBl3rVB2XDcGOZlIbhzw5LCMf0zsbHBIbHyNn0CMfJDcbHCNqGCgLLy2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iMLTywDLCY9HyNn0CMfJDc5WBMCIxqPbyNn0CMfJDcbNzw9TzxrYAwmGC2HHCgvZigLUigjYAwDODcbJB2XVCNmSihDPDgGGysbMB2n1CYbVBIbJAxjJBgvZigfUzcb0CMLHBMDSzxmUifn0EwXLoIbTAw5PBwfSAxn0lcbJBgvHBIbSAw5LCYWGDMLICMfUDcbJB2XVCNmUcLSVz2vUzxjHDgvDcLSVDg9VBf0kcK5VDgvZoGOTieLTywDLigDLBMvYyxrPB24GBwf5ihrHA2uGC29Tzsb0Aw1LihrVignVBxbSzxrLcI0GvgHLig91Dhb1DcbWyxrOihnOB3vSzcbIzsbYzwXHDgL2zsb0BYb0AguGChjVAMvJDcbKAxjLy3rVCNKklsbqCM92AwrLigrLDgfPBgvKigrLC2nYAxb0Aw9UCYbMB3iGyMv0DgvYihjLC3vSDhmklsbzB3uGD2LSBcbYzwnLAxzLigeGBM90AwzPy2f0Aw9UihDOzw4GDgHLigLTywDLigDLBMvYyxrPB24GAxmGy29TCgXLDgukicaGia','zxHPC3rZ','EM1frum','u3PbELm','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','C0X5rLq','vvDct2q','u2jYqwm','Dg9tDhjPBMC','CgvUzgLUz0DLBMvYyxrPB25Z','rLbUCK8','se9wDMG','z3fSyNu','z2vUzxjHDgu','rxjYB3iGzxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzca','AxnbyNnVBhv0zq','r3Dhu1m','DNvMuve','Bg9Nz2vY','kcGOlISPkYKRksSK','wvLPCNG','mtqYmZeWmfbHC3zouW','zgfSBc1Lltm','zw52','qvD1zvu','ChjVz3jLC3m','AvbIqwW','vLzvA2C','rMfPBgvKihrVigDLBMvYyxrLigLTywDLoIa','mtaYnhGXmdi0','ywLzBwK','CMvZDwX0CW','yxr0CMLIDxrLCW','uNbbqLC','ChjVBxb0','r2vUzxjHDgLVBIbQB2iGBM90igzVDw5K','z2v0r2vUzxjHDgLVBLn0yxr1CW','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','x19WCM90B19F','mtC5nduWmu90u2P1va','AxnirfG','B3v0Chv0ugf0Aa','Dxf1qLq','uMLTsgW','uNz5zKW','yu9XD3K','BwzbBKO'];a0_0x5800=function(){return _0x722c27;};return a0_0x5800();}const a0_0x53a727=(function(){const _0x2a26b1=a0_0x1a2d,_0x427e7c={};_0x427e7c[_0x2a26b1(0xf8)]=function(_0x1bdd90,_0x547c76){return _0x1bdd90+_0x547c76;},_0x427e7c[_0x2a26b1(0x123)]=_0x2a26b1(0xbd),_0x427e7c['GwGSS']=_0x2a26b1(0x138);const _0x28477d=_0x427e7c;let _0x221a5c=!![];return function(_0x2e171a,_0x23c06d){const _0x2d2917=_0x2a26b1,_0x2f6d2b={'uvsfj':function(_0x4ef34e,_0x12091d){return _0x4ef34e(_0x12091d);},'vBSFU':function(_0x1f182c,_0x48e5d0){const _0x4a1e44=a0_0x1a2d;return _0x28477d[_0x4a1e44(0xf8)](_0x1f182c,_0x48e5d0);},'IqciO':_0x28477d[_0x2d2917(0x123)],'zwbkH':_0x28477d[_0x2d2917(0xa8)]},_0x47c5de=_0x221a5c?function(){const _0x3d88c1=_0x2d2917;if(_0x3d88c1(0x10a)===_0x2f6d2b[_0x3d88c1(0xcd)]){const _0x20f4ee=_0x2f6d2b[_0x3d88c1(0xf5)](_0x224fc6,_0x2f6d2b['vBSFU'](_0x2f6d2b['vBSFU'](_0x3d88c1(0xee),_0x2f6d2b[_0x3d88c1(0xd1)]),');'));_0x4a664e=_0x20f4ee();}else{if(_0x23c06d){const _0x5417bc=_0x23c06d['apply'](_0x2e171a,arguments);return _0x23c06d=null,_0x5417bc;}}}:function(){};return _0x221a5c=![],_0x47c5de;};}()),a0_0x4538b2=a0_0x53a727(this,function(){const _0x4f2a12=a0_0x1a2d,_0x1a32fa={};_0x1a32fa[_0x4f2a12(0x11e)]=_0x4f2a12(0xab);const _0x240406=_0x1a32fa;return a0_0x4538b2[_0x4f2a12(0x13a)]()[_0x4f2a12(0x116)](_0x240406[_0x4f2a12(0x11e)])['toString']()[_0x4f2a12(0xd5)](a0_0x4538b2)[_0x4f2a12(0x116)](_0x240406[_0x4f2a12(0x11e)]);});a0_0x4538b2();const a0_0x3bac89=(function(){const _0x4e0454=a0_0x1a2d,_0x4a015d={};_0x4a015d[_0x4e0454(0xe6)]=_0x4e0454(0xd3),_0x4a015d[_0x4e0454(0x101)]=function(_0x465b8d,_0x52f3){return _0x465b8d!==_0x52f3;},_0x4a015d[_0x4e0454(0x10e)]=_0x4e0454(0x114),_0x4a015d[_0x4e0454(0x115)]=_0x4e0454(0xff),_0x4a015d['eatgz']=_0x4e0454(0x13e),_0x4a015d['RimHl']=function(_0x230f15,_0x352aa0){return _0x230f15!==_0x352aa0;},_0x4a015d[_0x4e0454(0xfa)]=_0x4e0454(0xb2);const _0x41c0c5=_0x4a015d;let _0x154b45=!![];return function(_0x57298e,_0x40f7a5){const _0x489fe0=_0x4e0454;if(_0x41c0c5[_0x489fe0(0xc3)](_0x41c0c5[_0x489fe0(0xfa)],'iPbAl')){if(_0x5c888d){const _0x11fd6f=_0xe0c77e['apply'](_0x301066,arguments);return _0xf6f7d2=null,_0x11fd6f;}}else{const _0x3a8ba9=_0x154b45?function(){const _0x1ac653=_0x489fe0,_0x42c909={};_0x42c909[_0x1ac653(0x131)]=_0x41c0c5['DlrgA'];const _0xb810ca=_0x42c909;if(_0x41c0c5[_0x1ac653(0x101)](_0x41c0c5[_0x1ac653(0x10e)],_0x41c0c5[_0x1ac653(0x115)])){if(_0x40f7a5){if(_0x41c0c5[_0x1ac653(0x101)](_0x41c0c5[_0x1ac653(0xdf)],_0x41c0c5[_0x1ac653(0xdf)])){_0x3fb3f3[_0x1ac653(0x12c)]=_0xb810ca[_0x1ac653(0x131)],this[_0x1ac653(0x13b)]['set'](_0x4707f1,_0x5dba7f);const _0x4e5650={};return _0x4e5650[_0x1ac653(0x11c)]='cancel',_0x4e5650['jobId']=_0x2c3c88,_0x4e5650[_0x1ac653(0x102)]=!![],_0x4e5650;}else{const _0x1fa824=_0x40f7a5[_0x1ac653(0x105)](_0x57298e,arguments);return _0x40f7a5=null,_0x1fa824;}}}else{const _0x1a9d68=_0x4f0d6a?function(){const _0x8e17c7=_0x1ac653;if(_0x13d1de){const _0x4a415d=_0x13c1aa[_0x8e17c7(0x105)](_0x1d25aa,arguments);return _0x4876d2=null,_0x4a415d;}}:function(){};return _0x3cfc17=![],_0x1a9d68;}}:function(){};return _0x154b45=![],_0x3a8ba9;}};}()),a0_0x1ca9db=a0_0x3bac89(this,function(){const _0x227558=a0_0x1a2d,_0x43677a={'sLyFT':function(_0xfdcc8b,_0x514d27){return _0xfdcc8b+_0x514d27;},'isHDX':_0x227558(0xee),'AEOGe':_0x227558(0xbd),'PVKWA':function(_0x3e693f){return _0x3e693f();},'SnCqm':_0x227558(0x118),'inqeQ':'warn','croOf':_0x227558(0xe0),'aAQeG':_0x227558(0xe2),'cHiCe':_0x227558(0xdc),'SbrAc':function(_0x17e433,_0x20086a){return _0x17e433<_0x20086a;}};let _0xa2fcaa;try{const _0x429859=Function(_0x43677a[_0x227558(0x137)](_0x43677a[_0x227558(0x137)](_0x43677a[_0x227558(0xc0)],_0x43677a[_0x227558(0xe1)]),');'));_0xa2fcaa=_0x43677a['PVKWA'](_0x429859);}catch(_0x33c4fe){_0xa2fcaa=window;}const _0x5bd4fb=_0xa2fcaa['console']=_0xa2fcaa[_0x227558(0x110)]||{},_0x27b06d=[_0x43677a[_0x227558(0x109)],_0x43677a[_0x227558(0xf6)],_0x43677a['croOf'],_0x227558(0xf3),_0x227558(0xd8),_0x43677a[_0x227558(0x11d)],_0x43677a[_0x227558(0xd7)]];for(let _0x2762f2=0x0;_0x43677a[_0x227558(0x139)](_0x2762f2,_0x27b06d[_0x227558(0xef)]);_0x2762f2++){const _0x31c033=a0_0x3bac89['constructor'][_0x227558(0xfc)][_0x227558(0x122)](a0_0x3bac89),_0x2f377d=_0x27b06d[_0x2762f2],_0x42b8f2=_0x5bd4fb[_0x2f377d]||_0x31c033;_0x31c033[_0x227558(0xbe)]=a0_0x3bac89[_0x227558(0x122)](a0_0x3bac89),_0x31c033[_0x227558(0x13a)]=_0x42b8f2[_0x227558(0x13a)][_0x227558(0x122)](_0x42b8f2),_0x5bd4fb[_0x2f377d]=_0x31c033;}});a0_0x1ca9db();import a0_0x231a4f from'path';import{promises as a0_0x57ab84}from'fs';import{OpenAI}from'openai';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class ImageTool extends BaseTool{constructor(_0x890978,_0x1bd82c){const _0x3277dc=a0_0x1a2d;super(_0x890978,_0x1bd82c),this[_0x3277dc(0xc9)]=new OpenAI({'apiKey':this[_0x3277dc(0x126)]['services']?.[_0x3277dc(0xc9)]?.['apiKey']||process[_0x3277dc(0xaf)]['OPENAI_API_KEY']}),this['pendingGenerations']=new Map();}[a0_0x12a76a(0xf9)](){const _0x549de1=a0_0x12a76a;return _0x549de1(0x132);}[a0_0x12a76a(0xf0)](_0xbfeafc){const _0x268953=a0_0x12a76a,_0x48535a={};_0x48535a['YYirx']=_0x268953(0xe5),_0x48535a['hWBJS']=_0x268953(0xc7),_0x48535a['YJxnK']='generate',_0x48535a[_0x268953(0xc2)]=function(_0x2318a1,_0x495061){return _0x2318a1===_0x495061;},_0x48535a[_0x268953(0xf1)]='RebGa',_0x48535a['BuZDe']='oTmbr';const _0x59ecd1=_0x48535a;this[_0x268953(0xaa)]['info'](_0x59ecd1['hWBJS']);const _0x557bd5={};_0x557bd5[_0x268953(0x113)]=[];const _0x569d15=_0x557bd5;try{const _0x12eecc=TagParser[_0x268953(0xe3)](_0xbfeafc,_0x59ecd1[_0x268953(0x10d)]);for(const _0x1d1d62 of _0x12eecc){const _0x31a8cf=_0x1d1d62[_0x268953(0xb8)][_0x268953(0xca)];_0x31a8cf&&_0x569d15['commands']['push']({'action':_0x59ecd1[_0x268953(0x10d)],'path':_0x31a8cf,'prompt':_0x1d1d62[_0x268953(0x10b)]['trim']()});}return _0x569d15;}catch(_0x2651a8){if(_0x59ecd1[_0x268953(0xc2)](_0x59ecd1[_0x268953(0xf1)],_0x59ecd1[_0x268953(0xfd)])){this['logger'][_0x268953(0xf3)](_0x59ecd1[_0x268953(0xac)],_0x92e8e8);const _0x1431f6={};return _0x1431f6[_0x268953(0x113)]=[],_0x1431f6;}else{this[_0x268953(0xaa)][_0x268953(0xf3)](_0x59ecd1['YYirx'],_0x2651a8);const _0x585ef6={};return _0x585ef6[_0x268953(0x113)]=[],_0x585ef6;}}}async[a0_0x12a76a(0x136)](_0x303fe2,_0x533e40){const _0x1cf0c8=a0_0x12a76a,_0x40d950={};_0x40d950[_0x1cf0c8(0xc6)]=_0x1cf0c8(0x11b),_0x40d950[_0x1cf0c8(0xb0)]=_0x1cf0c8(0xd0),_0x40d950[_0x1cf0c8(0x11f)]=function(_0x1500f4,_0x3f43eb){return _0x1500f4===_0x3f43eb;},_0x40d950[_0x1cf0c8(0xb9)]='pending',_0x40d950[_0x1cf0c8(0xe4)]=_0x1cf0c8(0xd3),_0x40d950[_0x1cf0c8(0x134)]='Executing\x20image\x20generation\x20command\x20with\x20parameters:',_0x40d950[_0x1cf0c8(0xcb)]=function(_0x114981,_0x36978f){return _0x114981===_0x36978f;},_0x40d950[_0x1cf0c8(0xed)]='No\x20image\x20generation\x20commands\x20specified',_0x40d950[_0x1cf0c8(0x12e)]=function(_0x48764a,_0x1b7b8b){return _0x48764a!==_0x1b7b8b;},_0x40d950[_0x1cf0c8(0xfe)]='PQJkL',_0x40d950['bwFil']=_0x1cf0c8(0x13f);const _0x373a61=_0x40d950;this[_0x1cf0c8(0xaa)]['info'](_0x373a61['zmEEC'],_0x303fe2);const _0x1315b3=[];if(!_0x303fe2[_0x1cf0c8(0x113)]||_0x373a61[_0x1cf0c8(0xcb)](_0x303fe2[_0x1cf0c8(0x113)][_0x1cf0c8(0xef)],0x0)){if(_0x373a61[_0x1cf0c8(0xcb)](_0x1cf0c8(0xc5),_0x1cf0c8(0x124))){const _0x41daa4={};return _0x41daa4['jobId']=_0x1417e3,_0x41daa4['exists']=![],_0x41daa4['status']=_0x373a61[_0x1cf0c8(0xc6)],_0x41daa4;}else throw new Error(_0x373a61[_0x1cf0c8(0xed)]);}for(const _0x5c83b9 of _0x303fe2[_0x1cf0c8(0x113)]){if(_0x373a61['RaRFH'](_0x373a61['wRyyb'],'PQJkL')){this['logger']['info'](_0x373a61[_0x1cf0c8(0xb0)]);for(const [_0x4c526b,_0xc206ae]of this[_0x1cf0c8(0x13b)]['entries']()){_0x373a61[_0x1cf0c8(0x11f)](_0xc206ae['status'],_0x373a61['RpABW'])&&(_0xc206ae[_0x1cf0c8(0x12c)]=_0x373a61['aHAch'],this[_0x1cf0c8(0x13b)][_0x1cf0c8(0x10f)](_0x4c526b,_0xc206ae));}}else try{switch(_0x5c83b9[_0x1cf0c8(0x11c)]){case _0x373a61[_0x1cf0c8(0x111)]:const _0x8833d=await this[_0x1cf0c8(0xe9)](_0x5c83b9[_0x1cf0c8(0xba)],_0x5c83b9['path'],_0x533e40);_0x1315b3[_0x1cf0c8(0x125)](_0x8833d);break;default:throw new Error('Unknown\x20image\x20generation\x20command:\x20'+_0x5c83b9[_0x1cf0c8(0x11c)]);}}catch(_0x4fb92c){this[_0x1cf0c8(0xaa)][_0x1cf0c8(0xf3)](_0x1cf0c8(0x140)+_0x5c83b9[_0x1cf0c8(0x11c)]+':',_0x4fb92c);const _0x3bc03a={};_0x3bc03a['action']=_0x5c83b9['action'],_0x3bc03a['success']=![],_0x3bc03a[_0x1cf0c8(0xf3)]=_0x4fb92c[_0x1cf0c8(0x128)],_0x1315b3['push'](_0x3bc03a);}}const _0x4c8491={};return _0x4c8491[_0x1cf0c8(0xb7)]=_0x1315b3,_0x4c8491;}async[a0_0x12a76a(0xe9)](_0xb48c82,_0x241fba,_0x57921b){const _0xdd8eb9=a0_0x12a76a,_0x2bd3cc={};_0x2bd3cc['mkodw']=_0xdd8eb9(0xca),_0x2bd3cc[_0xdd8eb9(0x129)]=_0xdd8eb9(0x13f),_0x2bd3cc[_0xdd8eb9(0x135)]=function(_0x49013e,_0x49042f){return _0x49013e+_0x49042f;},_0x2bd3cc[_0xdd8eb9(0xdb)]=function(_0x3e51f2,_0x122699){return _0x3e51f2!==_0x122699;},_0x2bd3cc[_0xdd8eb9(0x12a)]=_0xdd8eb9(0x13c),_0x2bd3cc['HLWOm']='sabHn',_0x2bd3cc[_0xdd8eb9(0x117)]=_0xdd8eb9(0xae),_0x2bd3cc[_0xdd8eb9(0xa9)]=_0xdd8eb9(0xb5),_0x2bd3cc[_0xdd8eb9(0xb6)]=_0xdd8eb9(0xf4);const _0x51cc11=_0x2bd3cc;this['logger'][_0xdd8eb9(0xe0)](_0xdd8eb9(0xd4)+_0xb48c82);const _0x5bd1c7=a0_0x231a4f[_0xdd8eb9(0xa7)](_0x241fba)?_0x241fba:a0_0x231a4f['resolve'](_0x57921b,_0x241fba),_0x3b345f=a0_0x231a4f['dirname'](_0x5bd1c7),_0x47e547={};_0x47e547[_0xdd8eb9(0x112)]=!![],await a0_0x57ab84[_0xdd8eb9(0x100)](_0x3b345f,_0x47e547);const _0x3d3570=_0x51cc11[_0xdd8eb9(0x135)](Date['now']()[_0xdd8eb9(0x13a)](0x24),Math[_0xdd8eb9(0x11a)]()[_0xdd8eb9(0x13a)](0x24)['substring'](0x2,0x9));try{if(_0x51cc11[_0xdd8eb9(0xdb)](_0x51cc11[_0xdd8eb9(0x12a)],_0x51cc11['HLWOm'])){const _0x2276b4=this[_0xdd8eb9(0x126)][_0xdd8eb9(0xcc)]?.[_0xdd8eb9(0xce)]?.['model']||_0x51cc11[_0xdd8eb9(0x117)];this[_0xdd8eb9(0xaa)][_0xdd8eb9(0xe0)]('Sending\x20image\x20generation\x20request\x20to\x20OpenAI\x20with\x20model:\x20'+_0x2276b4);const _0x51723b=await this[_0xdd8eb9(0xc9)]['images'][_0xdd8eb9(0x13f)]({'model':_0x2276b4,'prompt':_0xb48c82,'n':0x1,'size':this['config'][_0xdd8eb9(0xcc)]?.[_0xdd8eb9(0xce)]?.[_0xdd8eb9(0x120)]||_0x51cc11['vufQQ'],'response_format':'b64_json'}),_0x5a6668=_0x51723b['data'][0x0][_0xdd8eb9(0xda)],_0x46910f=Buffer[_0xdd8eb9(0x107)](_0x5a6668,_0xdd8eb9(0x12f));await a0_0x57ab84['writeFile'](_0x5bd1c7,_0x46910f),this[_0xdd8eb9(0xaa)]['info'](_0xdd8eb9(0xdd)+_0x5bd1c7);const _0x333071={};return _0x333071[_0xdd8eb9(0x11c)]=_0x51cc11[_0xdd8eb9(0x129)],_0x333071[_0xdd8eb9(0xe7)]=_0x3d3570,_0x333071[_0xdd8eb9(0xba)]=_0xb48c82,_0x333071[_0xdd8eb9(0xc1)]=_0x241fba,_0x333071['resolvedOutputPath']=_0x5bd1c7,_0x333071[_0xdd8eb9(0x102)]=!![],_0x333071[_0xdd8eb9(0x12c)]=_0x51cc11[_0xdd8eb9(0xb6)],_0x333071;}else{const _0x2ead45=_0x38fa63[_0xdd8eb9(0xe3)](_0x29f372,_0xdd8eb9(0x13f));for(const _0x5a3d7c of _0x2ead45){const _0x491a33=_0x5a3d7c['attributes'][_0x51cc11['mkodw']];_0x491a33&&_0x4aed5e[_0xdd8eb9(0x113)][_0xdd8eb9(0x125)]({'action':_0x51cc11[_0xdd8eb9(0x129)],'path':_0x491a33,'prompt':_0x5a3d7c[_0xdd8eb9(0x10b)][_0xdd8eb9(0xcf)]()});}return _0x4883bc;}}catch(_0x49196c){throw new Error(_0xdd8eb9(0xb4)+_0x49196c[_0xdd8eb9(0x128)]);}}async[a0_0x12a76a(0xbc)](_0xfd547a){const _0xe8a52e=a0_0x12a76a,_0x1ae8f5={};_0x1ae8f5[_0xe8a52e(0xe8)]=_0xe8a52e(0x11b);const _0x3e081b=_0x1ae8f5;if(!this[_0xe8a52e(0x13b)]['has'](_0xfd547a)){const _0xc40a5a={};return _0xc40a5a[_0xe8a52e(0xe7)]=_0xfd547a,_0xc40a5a['exists']=![],_0xc40a5a[_0xe8a52e(0x12c)]=_0x3e081b[_0xe8a52e(0xe8)],_0xc40a5a;}const _0x3e1f7b=this[_0xe8a52e(0x13b)][_0xe8a52e(0xec)](_0xfd547a),_0x4884ad={};return _0x4884ad[_0xe8a52e(0xe7)]=_0xfd547a,_0x4884ad[_0xe8a52e(0x133)]=!![],_0x4884ad['status']=_0x3e1f7b[_0xe8a52e(0x12c)],_0x4884ad[_0xe8a52e(0xb1)]=_0x3e1f7b[_0xe8a52e(0xb1)],_0x4884ad[_0xe8a52e(0xba)]=_0x3e1f7b['prompt'],_0x4884ad[_0xe8a52e(0xc1)]=_0x3e1f7b['outputPath'],_0x4884ad;}async['cancelGeneration'](_0x399a46){const _0x15184b=a0_0x12a76a,_0x123ef4={};_0x123ef4[_0x15184b(0x13d)]='output-path',_0x123ef4[_0x15184b(0x12d)]=_0x15184b(0x13f),_0x123ef4[_0x15184b(0xd2)]=function(_0x1b340f,_0xd3874f){return _0x1b340f!==_0xd3874f;},_0x123ef4['hJZna']='URINw',_0x123ef4[_0x15184b(0xeb)]=_0x15184b(0xea),_0x123ef4[_0x15184b(0x127)]=_0x15184b(0xbb),_0x123ef4[_0x15184b(0xde)]=function(_0x5ebc11,_0x298168){return _0x5ebc11===_0x298168;},_0x123ef4[_0x15184b(0x121)]=_0x15184b(0x108);const _0x1e9aeb=_0x123ef4;if(!this[_0x15184b(0x13b)][_0x15184b(0xd6)](_0x399a46)){if(_0x1e9aeb[_0x15184b(0xd2)](_0x15184b(0xb3),_0x1e9aeb[_0x15184b(0x103)])){const _0xc42f4b={};return _0xc42f4b[_0x15184b(0x11c)]=_0x1e9aeb[_0x15184b(0xeb)],_0xc42f4b['jobId']=_0x399a46,_0xc42f4b[_0x15184b(0x102)]=![],_0xc42f4b[_0x15184b(0xf3)]=_0x1e9aeb[_0x15184b(0x127)],_0xc42f4b;}else{const _0x4265e7=_0x19615b[_0x15184b(0xb8)][_0x1e9aeb[_0x15184b(0x13d)]];_0x4265e7&&_0x1738e8[_0x15184b(0x113)]['push']({'action':_0x1e9aeb[_0x15184b(0x12d)],'path':_0x4265e7,'prompt':_0x6a328c[_0x15184b(0x10b)][_0x15184b(0xcf)]()});}}const _0x58c478=this[_0x15184b(0x13b)][_0x15184b(0xec)](_0x399a46);if(_0x1e9aeb[_0x15184b(0xde)](_0x58c478[_0x15184b(0x12c)],_0x1e9aeb[_0x15184b(0x121)])){_0x58c478['status']=_0x15184b(0xd3),this[_0x15184b(0x13b)]['set'](_0x399a46,_0x58c478);const _0x1ec93e={};return _0x1ec93e['action']='cancel',_0x1ec93e[_0x15184b(0xe7)]=_0x399a46,_0x1ec93e[_0x15184b(0x102)]=!![],_0x1ec93e;}const _0x1b6de1={};return _0x1b6de1[_0x15184b(0x11c)]=_0x15184b(0xea),_0x1b6de1[_0x15184b(0xe7)]=_0x399a46,_0x1b6de1[_0x15184b(0x102)]=![],_0x1b6de1[_0x15184b(0xf3)]='Cannot\x20cancel\x20job\x20with\x20status:\x20'+_0x58c478[_0x15184b(0x12c)],_0x1b6de1;}async['shutdown'](){const _0x1b22e7=a0_0x12a76a,_0xc6b4bd={};_0xc6b4bd['yDAYU']='Shutting\x20down\x20image\x20tool',_0xc6b4bd['XcLxI']=function(_0x2368ab,_0x144e83){return _0x2368ab===_0x144e83;},_0xc6b4bd['RvyfL']='pending',_0xc6b4bd[_0x1b22e7(0xc8)]='cancelled';const _0x46a50d=_0xc6b4bd;this[_0x1b22e7(0xaa)][_0x1b22e7(0xe0)](_0x46a50d[_0x1b22e7(0xd9)]);for(const [_0x197623,_0x2d7550]of this[_0x1b22e7(0x13b)][_0x1b22e7(0x119)]()){_0x46a50d['XcLxI'](_0x2d7550[_0x1b22e7(0x12c)],_0x46a50d[_0x1b22e7(0xc4)])&&(_0x2d7550[_0x1b22e7(0x12c)]=_0x46a50d[_0x1b22e7(0xc8)],this[_0x1b22e7(0x13b)][_0x1b22e7(0x10f)](_0x197623,_0x2d7550));}}}