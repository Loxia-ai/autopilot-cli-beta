const a0_0x2db2d0=a0_0x10c7;(function(_0x1fea74,_0x512e60){const _0x3e9ec7=a0_0x10c7,_0xb819a4=_0x1fea74();while(!![]){try{const _0x29f629=parseInt(_0x3e9ec7(0x147))/0x1*(-parseInt(_0x3e9ec7(0x12f))/0x2)+-parseInt(_0x3e9ec7(0x17f))/0x3+-parseInt(_0x3e9ec7(0x195))/0x4+parseInt(_0x3e9ec7(0x175))/0x5+parseInt(_0x3e9ec7(0x17a))/0x6*(parseInt(_0x3e9ec7(0x138))/0x7)+parseInt(_0x3e9ec7(0x139))/0x8+parseInt(_0x3e9ec7(0x192))/0x9;if(_0x29f629===_0x512e60)break;else _0xb819a4['push'](_0xb819a4['shift']());}catch(_0x5ae5d8){_0xb819a4['push'](_0xb819a4['shift']());}}}(a0_0xc238,0x39fdb));const a0_0x4fc95c=(function(){let _0x524c2a=!![];return function(_0x55a0b7,_0x4aabc4){const _0x563000=_0x524c2a?function(){if(_0x4aabc4){const _0x17d8e2=_0x4aabc4['apply'](_0x55a0b7,arguments);return _0x4aabc4=null,_0x17d8e2;}}:function(){};return _0x524c2a=![],_0x563000;};}()),a0_0x319c00=a0_0x4fc95c(this,function(){const _0x31ecee=a0_0x10c7,_0x579af3={};_0x579af3[_0x31ecee(0x144)]=_0x31ecee(0x1ae);const _0x59db3f=_0x579af3;return a0_0x319c00[_0x31ecee(0x141)]()[_0x31ecee(0x190)](_0x59db3f[_0x31ecee(0x144)])[_0x31ecee(0x141)]()[_0x31ecee(0x1b1)](a0_0x319c00)[_0x31ecee(0x190)](_0x59db3f['qDncz']);});a0_0x319c00();const a0_0x2f9675=(function(){let _0x5d26a3=!![];return function(_0x1c2849,_0x852b98){const _0x102683=_0x5d26a3?function(){const _0xa0ce6=a0_0x10c7;if(_0x852b98){const _0xda35cc=_0x852b98[_0xa0ce6(0x13a)](_0x1c2849,arguments);return _0x852b98=null,_0xda35cc;}}:function(){};return _0x5d26a3=![],_0x102683;};}()),a0_0x370e2b=a0_0x2f9675(this,function(){const _0x4c6eb2=a0_0x10c7,_0x32736a={'GEcWI':function(_0x38f3bb,_0x3c3ce3){return _0x38f3bb===_0x3c3ce3;},'Kwbpm':function(_0x4ccfab,_0x3ade4a){return _0x4ccfab+_0x3ade4a;},'UHoBP':'return\x20(function()\x20','ycxVv':_0x4c6eb2(0x132),'hBktx':function(_0x539b4d){return _0x539b4d();},'SXocy':_0x4c6eb2(0x18c),'XhGFd':_0x4c6eb2(0x1b2),'JdwUb':_0x4c6eb2(0x1a6),'VkbgF':_0x4c6eb2(0x19d),'uIPce':_0x4c6eb2(0x182),'Auvcp':function(_0x2d79a4,_0xf76a63){return _0x2d79a4<_0xf76a63;}},_0x39bc87=function(){const _0x482416=_0x4c6eb2;let _0x5a67bb;try{if(_0x32736a[_0x482416(0x150)](_0x482416(0x14c),'QwOiq')){const _0x16535d=_0x288e4c[_0x482416(0x1b1)][_0x482416(0x156)][_0x482416(0x165)](_0x44c5a2),_0x3cd1c3=_0xaed23a[_0x291b2d],_0x265d46=_0x2ad1c1[_0x3cd1c3]||_0x16535d;_0x16535d[_0x482416(0x19e)]=_0x15bb55[_0x482416(0x165)](_0x5e82f9),_0x16535d[_0x482416(0x141)]=_0x265d46[_0x482416(0x141)][_0x482416(0x165)](_0x265d46),_0x1aaf3c[_0x3cd1c3]=_0x16535d;}else _0x5a67bb=Function(_0x32736a[_0x482416(0x15d)](_0x32736a[_0x482416(0x15d)](_0x32736a[_0x482416(0x166)],_0x32736a[_0x482416(0x13f)]),');'))();}catch(_0x30c1eb){_0x5a67bb=window;}return _0x5a67bb;},_0x208660=_0x32736a[_0x4c6eb2(0x13b)](_0x39bc87),_0x3e68e4=_0x208660[_0x4c6eb2(0x13d)]=_0x208660['console']||{},_0x5c3195=[_0x32736a['SXocy'],_0x32736a[_0x4c6eb2(0x12e)],_0x32736a[_0x4c6eb2(0x185)],_0x4c6eb2(0x148),_0x4c6eb2(0x1af),_0x32736a['VkbgF'],_0x32736a['uIPce']];for(let _0x158ddf=0x0;_0x32736a[_0x4c6eb2(0x1b9)](_0x158ddf,_0x5c3195[_0x4c6eb2(0x187)]);_0x158ddf++){const _0x2bf0d8=a0_0x2f9675[_0x4c6eb2(0x1b1)][_0x4c6eb2(0x156)][_0x4c6eb2(0x165)](a0_0x2f9675),_0x54adf1=_0x5c3195[_0x158ddf],_0x33ccf0=_0x3e68e4[_0x54adf1]||_0x2bf0d8;_0x2bf0d8['__proto__']=a0_0x2f9675['bind'](a0_0x2f9675),_0x2bf0d8[_0x4c6eb2(0x141)]=_0x33ccf0['toString'][_0x4c6eb2(0x165)](_0x33ccf0),_0x3e68e4[_0x54adf1]=_0x2bf0d8;}});a0_0x370e2b();import a0_0x538556 from'path';function a0_0xc238(){const _0x1759e7=['CLvxCNy','CgvUzgLUz0DLBMvYyxrPB25Z','DhbsBu8','cKLTywDLieDLBMvYyxrPB24Gvg9VBdOGqwXSB3DZihLVDsb0BYbNzw5LCMf0zsbPBwfNzxmGDxnPBMCGquKGBw9KzwXZlGOkvxnHz2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iNjLBgf0AxzLl3bHDgGVDg8VC2f2zs9PBwfNzs5WBMCIxqPezxrHAwXLzcbKzxnJCMLWDgLVBIbVzIb0AguGAw1Hz2uGEw91ihDHBNqGDg8Gz2vUzxjHDgukwY9Nzw5LCMf0zv0kwY90B29SxqOkrxHHBxbSzxm6cJeUieDLBMvYyxrLigeGC2LTCgXLigLTywDLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVBw91BNrHAw5ZlNbUzYjDcKeGyMvHDxrPzNvSig1VDw50ywLUigXHBMrZy2fWzsb3AxrOihnUB3CTy2fWCgvKihbLywTZlcbHignSzwfYigjSDwuGC2T5lcbHBMqGysbMB3jLC3qGyxqGDgHLigjHC2uGB2yGDgHLig1VDw50ywLUCY4kwY9Nzw5LCMf0zv0kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcbPBwfNzsb3AxrOihnWzwnPzMLJihn0EwXLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVCM9IB3qUCg5NiL0kqsbMDxr1CMLZDgLJihjVyM90igLUigeGy3LIzxjWDw5RignPDhKGyxqGBMLNAhqUifrOzsbYB2jVDcbOyxmGz2XVD2LUzYbIBhvLigv5zxmGyw5KigLZihn0yw5KAw5NihvUzgvYigeGBMvVBIbZAwDUlIbtDhLSztOGzgLNAxrHBcbHCNqSigrLDgfPBgvKlcbOAwDOignVBNrYyxn0lGPBl2DLBMvYyxrLxqPBl3rVB2XDcGOZlIbhzw5LCMf0zsbHBIbHyNn0CMfJDcbHCNqGCgLLy2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iMLTywDLCY9HyNn0CMfJDc5WBMCIxqPbyNn0CMfJDcbNzw9TzxrYAwmGC2HHCgvZigLUigjYAwDODcbJB2XVCNmSihDPDgGGysbMB2n1CYbVBIbJAxjJBgvZigfUzcb0CMLHBMDSzxmUifn0EwXLoIbTAw5PBwfSAxn0lcbJBgvHBIbSAw5LCYWGDMLICMfUDcbJB2XVCNmUcLSVz2vUzxjHDgvDcLSVDg9VBf0kcK5VDgvZoGOTieLTywDLigDLBMvYyxrPB24GBwf5ihrHA2uGC29Tzsb0Aw1LihrVignVBxbSzxrLcI0GvgHLig91Dhb1DcbWyxrOihnOB3vSzcbIzsbYzwXHDgL2zsb0BYb0AguGChjVAMvJDcbKAxjLy3rVCNKklsbqCM92AwrLigrLDgfPBgvKigrLC2nYAxb0Aw9UCYbMB3iGyMv0DgvYihjLC3vSDhmklsbzB3uGD2LSBcbYzwnLAxzLigeGBM90AwzPy2f0Aw9UihDOzw4GDgHLigLTywDLigDLBMvYyxrPB24GAxmGy29TCgXLDgukicaGia','y29UzMLN','y2fUy2vSr2vUzxjHDgLVBG','Aw5MBW','venlyxq','ChjVBxb0','CMvJDxjZAxzL','CMDYuvm','yJy0x2PZB24','C3rHDhvZ','Cgrswhq','kcGOlISPkYKRksSK','zxHJzxb0Aw9U','D2DABfm','y29UC3rYDwn0B3i','D2fYBG','rhrqsNm','Dg9VBhm','ANvdwvK','wMn6sK4','AxnbyNnVBhv0zq','B3v0Chv0ugf0Aa','qxv2y3a','EuvnEvi','AM9Iswq','wgHhrMq','mK9rBfHQrG','u2vUzgLUzYbPBwfNzsbNzw5LCMf0Aw9UihjLCxvLC3qGDg8Gt3bLBKfjihDPDgGGBw9KzwW6ia','B3v0Chv0lxbHDgG','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','mtaYnhGXmdi0','C2L6zq','z2v0r2vUzxjHDgLVBLn0yxr1CW','D3jPDgvgAwXL','zNLyz0m','mtC0odzjv2jqy1m','ntm2oteYrLb5uLf5','yxbWBhK','AejRDhG','rLfkuey','y29UC29Szq','ChjVz3jLC3m','Ewn4vNy','BM90x2zVDw5K','Dg9tDhjPBMC','z2vUzxjHDgu','wKvPEva','CurUy3O','whPrrLe','C3vIC3rYAw5N','mtaZnZe3q3rYCvrj','zxjYB3i','zg9kzLi','s05jC1y','Aw1Hz2vhzw4','z3LbrM8','ru5myK4','Aw1Hz2vZ','tM8GAw1Hz2uGz2vUzxjHDgLVBIbJB21Tyw5KCYbZCgvJAwzPzwq','r0vJv0K','r2vUzxjHDgLVBIbQB2iGBM90igzVDw5K','sxnVDNa','CgvUzgLUzW','CMvZDwX0CW','y2fUy2vSBgvK','ChjVDg90ExbL','AvjXEKy','rMfPBgvKihrVigDLBMvYyxrLigLTywDLoIa','vvfxrfe','AgfZ','y29TBwfUzhm','q2Tyz1y','s3DICg0','Bfngyxm','Bg9Nz2vY','z2v0rgvZy3jPChrPB24','CgfYC2vqyxjHBwv0zxjZ','yxr0CMLIDxrLCW','Cgf0Aa','wuPUsxi','yMLUza','vuHVqLa','rxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzcb3AxrOihbHCMfTzxrLCNm6','zw52','BwvZC2fNzq','B3bLBMfP','C3vJy2vZCW','CMvZB2X2zq','Bw9KzwW','y29TCgXLDgvK','u2H1DhrPBMCGzg93BIbPBwfNzsb0B29S','t1bftKfjx0fqsv9lrvK','BwTKAxi','s05sDKS','C1zTz3e','zgf0yq','mZm0mZq1BgzQwMXz','teDZAwq','rxjYB3iGzxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzca','t3z6y0W','y29UDgvUDa','ntu4vMfrvfrP','vw5RBM93BIbPBwfNzsbNzw5LCMf0Aw9UignVBw1HBMq6ia','uNLTsLq','BM93','y3jSvM4','ndi2mdiXBfrXAwXY','C2v0','zxHPC3rZ','DhjHy2u','C3zwD0S','yureyKy','sMr3vwi','ywn0Aw9U','BgvUz3rO','swvKr24','yxbPs2v5','y2fUy2vS','z2vUzxjHDgvjBwfNzq','Bg9N','s0XXDhi','AMDNrwq','ugfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNmGD2L0AcbuywDqyxjZzxi','C2vHCMnO','Eg5Mt3i','nte5nZe1oevru0DMDq','zgfSBc1Lltm','yMrusum','mtG0mJaXnNniALDyCG','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','ChvZAa','BwrbvhG','DhjPBq','yMfZzty0','q2fUBM90ignHBMnLBcbQB2iGD2L0AcbZDgf0Dxm6ia','z2v0','DgfIBgu','x19WCM90B19F','v0rAEei'];a0_0xc238=function(){return _0x1759e7;};return a0_0xc238();}import{promises as a0_0x37784e}from'fs';import{OpenAI}from'openai';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';function a0_0x10c7(_0x3a0925,_0xe6252d){const _0x4af4ba=a0_0xc238();return a0_0x10c7=function(_0x370e2b,_0x2f9675){_0x370e2b=_0x370e2b-0x12e;let _0x3461f2=_0x4af4ba[_0x370e2b];if(a0_0x10c7['NPtbai']===undefined){var _0x2fce3f=function(_0x10c70a){const _0x578e09='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x330ccb='',_0x4899fc='',_0x379f4b=_0x330ccb+_0x2fce3f;for(let _0x6b8b48=0x0,_0x126447,_0x5e7107,_0x2bf837=0x0;_0x5e7107=_0x10c70a['charAt'](_0x2bf837++);~_0x5e7107&&(_0x126447=_0x6b8b48%0x4?_0x126447*0x40+_0x5e7107:_0x5e7107,_0x6b8b48++%0x4)?_0x330ccb+=_0x379f4b['charCodeAt'](_0x2bf837+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x126447>>(-0x2*_0x6b8b48&0x6)):_0x6b8b48:0x0){_0x5e7107=_0x578e09['indexOf'](_0x5e7107);}for(let _0x1e97f5=0x0,_0x266133=_0x330ccb['length'];_0x1e97f5<_0x266133;_0x1e97f5++){_0x4899fc+='%'+('00'+_0x330ccb['charCodeAt'](_0x1e97f5)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4899fc);};a0_0x10c7['kGvqYc']=_0x2fce3f,_0x3a0925=arguments,a0_0x10c7['NPtbai']=!![];}const _0x319c00=_0x4af4ba[0x0],_0x4fc95c=_0x370e2b+_0x319c00,_0xc23804=_0x3a0925[_0x4fc95c];if(!_0xc23804){const _0x546102=function(_0x18120d){this['rQadfD']=_0x18120d,this['ulpRhx']=[0x1,0x0,0x0],this['NyBfyP']=function(){return'newState';},this['pXiTiG']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['bOSvvh']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x546102['prototype']['kArskU']=function(){const _0x2abc3e=new RegExp(this['pXiTiG']+this['bOSvvh']),_0x4ab2e5=_0x2abc3e['test'](this['NyBfyP']['toString']())?--this['ulpRhx'][0x1]:--this['ulpRhx'][0x0];return this['oAusTC'](_0x4ab2e5);},_0x546102['prototype']['oAusTC']=function(_0xf1c895){if(!Boolean(~_0xf1c895))return _0xf1c895;return this['ahXfog'](this['rQadfD']);},_0x546102['prototype']['ahXfog']=function(_0x43f361){for(let _0x111e6d=0x0,_0xf86500=this['ulpRhx']['length'];_0x111e6d<_0xf86500;_0x111e6d++){this['ulpRhx']['push'](Math['round'](Math['random']())),_0xf86500=this['ulpRhx']['length'];}return _0x43f361(this['ulpRhx'][0x0]);},new _0x546102(a0_0x10c7)['kArskU'](),_0x3461f2=a0_0x10c7['kGvqYc'](_0x3461f2),_0x3a0925[_0x4fc95c]=_0x3461f2;}else _0x3461f2=_0xc23804;return _0x3461f2;},a0_0x10c7(_0x3a0925,_0xe6252d);}export class ImageTool extends BaseTool{constructor(_0x1308c8,_0x21c22d){const _0xaa4a3c=a0_0x10c7;super(_0x1308c8,_0x21c22d),this[_0xaa4a3c(0x16a)]=new OpenAI({'apiKey':this[_0xaa4a3c(0x1a4)]['services']?.[_0xaa4a3c(0x16a)]?.[_0xaa4a3c(0x189)]||process[_0xaa4a3c(0x168)][_0xaa4a3c(0x170)]}),this[_0xaa4a3c(0x1a1)]=new Map();}[a0_0x2db2d0(0x160)](){const _0x4d7f30=a0_0x2db2d0;return _0x4d7f30(0x1a3);}[a0_0x2db2d0(0x161)](_0x279089){const _0x327c07=a0_0x2db2d0,_0xc90a3b={};_0xc90a3b[_0x327c07(0x1b6)]=_0x327c07(0x131),_0xc90a3b[_0x327c07(0x184)]=_0x327c07(0x18f),_0xc90a3b[_0x327c07(0x159)]='generate',_0xc90a3b[_0x327c07(0x191)]=function(_0x306e42,_0x248b43){return _0x306e42===_0x248b43;},_0xc90a3b[_0x327c07(0x172)]=_0x327c07(0x173);const _0x8c8143=_0xc90a3b;this['logger'][_0x327c07(0x1a6)](_0x8c8143[_0x327c07(0x184)]);const _0x476085={};_0x476085['commands']=[];const _0x1fa85e=_0x476085;try{const _0x48f073=TagParser['query'](_0x279089,_0x8c8143[_0x327c07(0x159)]);for(const _0x76888 of _0x48f073){if(_0x8c8143[_0x327c07(0x191)](_0x8c8143['KNRvK'],_0x327c07(0x194))){const _0x2c4f64=_0x22ec88[_0x327c07(0x162)][_0x8c8143[_0x327c07(0x1b6)]];_0x2c4f64&&_0x1d24dc[_0x327c07(0x15b)][_0x327c07(0x197)]({'action':_0x327c07(0x142),'path':_0x2c4f64,'prompt':_0x711820[_0x327c07(0x179)][_0x327c07(0x199)]()});}else{const _0x16179f=_0x76888[_0x327c07(0x162)][_0x327c07(0x131)];_0x16179f&&_0x1fa85e[_0x327c07(0x15b)][_0x327c07(0x197)]({'action':_0x327c07(0x142),'path':_0x16179f,'prompt':_0x76888[_0x327c07(0x179)][_0x327c07(0x199)]()});}}return _0x1fa85e;}catch(_0x496618){this['logger'][_0x327c07(0x148)]('Error\x20parsing\x20image\x20generation\x20parameters:',_0x496618);const _0x2dcc88={};return _0x2dcc88[_0x327c07(0x15b)]=[],_0x2dcc88;}}async[a0_0x2db2d0(0x196)](_0x132e7d,_0x20b535){const _0x4364c7=a0_0x2db2d0,_0x573656={};_0x573656[_0x4364c7(0x188)]=_0x4364c7(0x18a),_0x573656[_0x4364c7(0x19f)]=_0x4364c7(0x151),_0x573656[_0x4364c7(0x15c)]=_0x4364c7(0x167),_0x573656[_0x4364c7(0x178)]=function(_0x2fd365,_0x5837ce){return _0x2fd365===_0x5837ce;},_0x573656[_0x4364c7(0x14a)]=_0x4364c7(0x14f),_0x573656[_0x4364c7(0x17e)]=_0x4364c7(0x143),_0x573656['uRvKK']=_0x4364c7(0x157);const _0xd80f0=_0x573656;this[_0x4364c7(0x15f)][_0x4364c7(0x1a6)](_0xd80f0['CkXgV'],_0x132e7d);const _0x4febdb=[];if(!_0x132e7d[_0x4364c7(0x15b)]||_0xd80f0['OvzcL'](_0x132e7d[_0x4364c7(0x15b)][_0x4364c7(0x187)],0x0))throw new Error(_0xd80f0[_0x4364c7(0x14a)]);for(const _0x2cad92 of _0x132e7d[_0x4364c7(0x15b)]){if(_0xd80f0['OvzcL'](_0x4364c7(0x13c),_0xd80f0[_0x4364c7(0x17e)])){if(_0x37262d){const _0x4af71b=_0x15fbb3['apply'](_0x2cbf7e,arguments);return _0x1c1a38=null,_0x4af71b;}}else try{switch(_0x2cad92[_0x4364c7(0x186)]){case'generate':const _0x556acb=await this[_0x4364c7(0x18b)](_0x2cad92[_0x4364c7(0x1a8)],_0x2cad92[_0x4364c7(0x163)],_0x20b535);_0x4febdb[_0x4364c7(0x197)](_0x556acb);break;default:throw new Error(_0x4364c7(0x17b)+_0x2cad92[_0x4364c7(0x186)]);}}catch(_0xc140bf){if('iRqzF'===_0xd80f0['uRvKK']){this['logger'][_0x4364c7(0x148)](_0x4364c7(0x177)+_0x2cad92[_0x4364c7(0x186)]+':',_0xc140bf);const _0x2aaf27={};_0x2aaf27['action']=_0x2cad92[_0x4364c7(0x186)],_0x2aaf27['success']=![],_0x2aaf27[_0x4364c7(0x148)]=_0xc140bf[_0x4364c7(0x169)],_0x4febdb[_0x4364c7(0x197)](_0x2aaf27);}else{const _0x5409ea={};return _0x5409ea[_0x4364c7(0x186)]=_0xd80f0[_0x4364c7(0x188)],_0x5409ea[_0x4364c7(0x1bb)]=_0x5885c9,_0x5409ea[_0x4364c7(0x16b)]=![],_0x5409ea[_0x4364c7(0x148)]=_0xd80f0[_0x4364c7(0x19f)],_0x5409ea;}}}const _0x26bce7={};return _0x26bce7[_0x4364c7(0x154)]=_0x4febdb,_0x26bce7;}async[a0_0x2db2d0(0x18b)](_0x36990f,_0x263153,_0x45b0bc){const _0x3ac334=a0_0x2db2d0,_0x267a5e={};_0x267a5e[_0x3ac334(0x17c)]=_0x3ac334(0x140),_0x267a5e[_0x3ac334(0x164)]=function(_0x39df79,_0x5eb0c5){return _0x39df79+_0x5eb0c5;},_0x267a5e[_0x3ac334(0x1ba)]=_0x3ac334(0x193),_0x267a5e[_0x3ac334(0x137)]=_0x3ac334(0x133),_0x267a5e['mOSUd']=_0x3ac334(0x19a),_0x267a5e[_0x3ac334(0x152)]=_0x3ac334(0x142),_0x267a5e[_0x3ac334(0x145)]=_0x3ac334(0x16e),_0x267a5e[_0x3ac334(0x15e)]=function(_0x3239a5,_0x49c1b0){return _0x3239a5===_0x49c1b0;},_0x267a5e[_0x3ac334(0x1aa)]='wXAEu',_0x267a5e[_0x3ac334(0x1a7)]=_0x3ac334(0x149);const _0x3278ff=_0x267a5e;this[_0x3ac334(0x15f)]['info']('Generating\x20image\x20with\x20prompt:\x20'+_0x36990f);const _0x26ea33=a0_0x538556[_0x3ac334(0x1b7)](_0x263153)?_0x263153:a0_0x538556[_0x3ac334(0x16c)](_0x45b0bc,_0x263153),_0x25f101=a0_0x538556['dirname'](_0x26ea33),_0x593893={};_0x593893[_0x3ac334(0x1a9)]=!![],await a0_0x37784e[_0x3ac334(0x171)](_0x25f101,_0x593893);const _0x3902a6=_0x3278ff[_0x3ac334(0x164)](Date[_0x3ac334(0x17d)]()['toString'](0x24),Math['random']()[_0x3ac334(0x141)](0x24)[_0x3ac334(0x146)](0x2,0x9));try{const _0x240f2f=this[_0x3ac334(0x1a4)][_0x3ac334(0x1b4)]?.[_0x3ac334(0x14b)]?.[_0x3ac334(0x16d)]||_0x3278ff[_0x3ac334(0x1ba)];this[_0x3ac334(0x15f)][_0x3ac334(0x1a6)](_0x3ac334(0x130)+_0x240f2f);const _0x1267df=await this['openai'][_0x3ac334(0x14e)][_0x3ac334(0x142)]({'model':_0x240f2f,'prompt':_0x36990f,'n':0x1,'size':this[_0x3ac334(0x1a4)][_0x3ac334(0x1b4)]?.[_0x3ac334(0x14b)]?.[_0x3ac334(0x134)]||_0x3278ff['fyXgC'],'response_format':_0x3ac334(0x1ab)}),_0x3a2e2f=_0x1267df[_0x3ac334(0x174)][0x0]['b64_json'],_0x19f51b=Buffer['from'](_0x3a2e2f,_0x3278ff['mOSUd']);await a0_0x37784e[_0x3ac334(0x136)](_0x26ea33,_0x19f51b),this[_0x3ac334(0x15f)][_0x3ac334(0x1a6)]('Image\x20saved\x20to:\x20'+_0x26ea33);const _0x5f57c3={};return _0x5f57c3['action']=_0x3278ff['Isovp'],_0x5f57c3['jobId']=_0x3902a6,_0x5f57c3[_0x3ac334(0x1a8)]=_0x36990f,_0x5f57c3[_0x3ac334(0x1b8)]=_0x263153,_0x5f57c3['resolvedOutputPath']=_0x26ea33,_0x5f57c3[_0x3ac334(0x16b)]=!![],_0x5f57c3['status']=_0x3278ff[_0x3ac334(0x145)],_0x5f57c3;}catch(_0x224410){if(_0x3278ff['lSFas'](_0x3278ff[_0x3ac334(0x1aa)],_0x3278ff[_0x3ac334(0x1a7)])){const _0x596f9a={};return _0x596f9a['jobId']=_0x17c947,_0x596f9a[_0x3ac334(0x181)]=![],_0x596f9a[_0x3ac334(0x1ac)]=_0x3278ff[_0x3ac334(0x17c)],_0x596f9a;}else throw new Error(_0x3ac334(0x158)+_0x224410['message']);}}async[a0_0x2db2d0(0x135)](_0x596ecb){const _0x2632d2=a0_0x2db2d0,_0x9fa76c={};_0x9fa76c[_0x2632d2(0x1b5)]=_0x2632d2(0x140);const _0x591913=_0x9fa76c;if(!this['pendingGenerations']['has'](_0x596ecb)){const _0x4e88bf={};return _0x4e88bf[_0x2632d2(0x1bb)]=_0x596ecb,_0x4e88bf[_0x2632d2(0x181)]=![],_0x4e88bf[_0x2632d2(0x1ac)]=_0x591913['juCYY'],_0x4e88bf;}const _0xab5f23=this['pendingGenerations'][_0x2632d2(0x19c)](_0x596ecb),_0xbe2228={};return _0xbe2228[_0x2632d2(0x1bb)]=_0x596ecb,_0xbe2228[_0x2632d2(0x181)]=!![],_0xbe2228['status']=_0xab5f23[_0x2632d2(0x1ac)],_0xbe2228[_0x2632d2(0x13e)]=_0xab5f23['progress'],_0xbe2228[_0x2632d2(0x1a8)]=_0xab5f23[_0x2632d2(0x1a8)],_0xbe2228[_0x2632d2(0x1b8)]=_0xab5f23[_0x2632d2(0x1b8)],_0xbe2228;}async[a0_0x2db2d0(0x1a5)](_0x943104){const _0x172725=a0_0x2db2d0,_0x1f7452={};_0x1f7452[_0x172725(0x18e)]=function(_0x262862,_0x3f04f3){return _0x262862===_0x3f04f3;},_0x1f7452['DtPJs']='pending',_0x1f7452['KLqtr']=_0x172725(0x176),_0x1f7452['mdATx']=_0x172725(0x14d),_0x1f7452[_0x172725(0x1ad)]=_0x172725(0x155),_0x1f7452[_0x172725(0x1a0)]=_0x172725(0x18a);const _0xbaed6e=_0x1f7452;if(!this[_0x172725(0x1a1)][_0x172725(0x15a)](_0x943104)){const _0x27e2da={};return _0x27e2da['action']='cancel',_0x27e2da['jobId']=_0x943104,_0x27e2da[_0x172725(0x16b)]=![],_0x27e2da[_0x172725(0x148)]=_0x172725(0x151),_0x27e2da;}const _0x490171=this[_0x172725(0x1a1)]['get'](_0x943104);if(_0x490171['status']===_0xbaed6e['DtPJs']){if(_0xbaed6e[_0x172725(0x18e)](_0xbaed6e[_0x172725(0x18d)],_0xbaed6e[_0x172725(0x198)]))_0xbaed6e[_0x172725(0x18e)](_0x2a0f50[_0x172725(0x1ac)],_0xbaed6e[_0x172725(0x1b3)])&&(_0x4b631c[_0x172725(0x1ac)]=_0x172725(0x155),this[_0x172725(0x1a1)][_0x172725(0x180)](_0x26003f,_0x33066d));else{_0x490171[_0x172725(0x1ac)]=_0xbaed6e['pdRXt'],this[_0x172725(0x1a1)][_0x172725(0x180)](_0x943104,_0x490171);const _0x413cd5={};return _0x413cd5[_0x172725(0x186)]=_0xbaed6e[_0x172725(0x1a0)],_0x413cd5[_0x172725(0x1bb)]=_0x943104,_0x413cd5[_0x172725(0x16b)]=!![],_0x413cd5;}}const _0x30d8b5={};return _0x30d8b5[_0x172725(0x186)]=_0x172725(0x18a),_0x30d8b5[_0x172725(0x1bb)]=_0x943104,_0x30d8b5[_0x172725(0x16b)]=![],_0x30d8b5[_0x172725(0x148)]=_0x172725(0x19b)+_0x490171[_0x172725(0x1ac)],_0x30d8b5;}async['shutdown'](){const _0x5a755=a0_0x2db2d0,_0x19bea8={};_0x19bea8[_0x5a755(0x1a2)]=_0x5a755(0x16f),_0x19bea8[_0x5a755(0x1b0)]=_0x5a755(0x153),_0x19bea8[_0x5a755(0x183)]='cancelled';const _0x584658=_0x19bea8;this[_0x5a755(0x15f)][_0x5a755(0x1a6)](_0x584658[_0x5a755(0x1a2)]);for(const [_0x57e39a,_0x2474ca]of this[_0x5a755(0x1a1)]['entries']()){_0x2474ca[_0x5a755(0x1ac)]===_0x584658['wgZlS']&&(_0x2474ca[_0x5a755(0x1ac)]=_0x584658[_0x5a755(0x183)],this[_0x5a755(0x1a1)][_0x5a755(0x180)](_0x57e39a,_0x2474ca));}}}