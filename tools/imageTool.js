const a0_0x5212a8=a0_0x2bef;(function(_0x2fa9a6,_0x4d9118){const _0x3e0e99=a0_0x2bef,_0x13bd10=_0x2fa9a6();while(!![]){try{const _0xaf7aa=parseInt(_0x3e0e99(0x10b))/0x1+-parseInt(_0x3e0e99(0x12e))/0x2+parseInt(_0x3e0e99(0xfb))/0x3+-parseInt(_0x3e0e99(0xaf))/0x4*(-parseInt(_0x3e0e99(0xe6))/0x5)+-parseInt(_0x3e0e99(0xae))/0x6+-parseInt(_0x3e0e99(0xc3))/0x7*(-parseInt(_0x3e0e99(0xdd))/0x8)+-parseInt(_0x3e0e99(0x12c))/0x9;if(_0xaf7aa===_0x4d9118)break;else _0x13bd10['push'](_0x13bd10['shift']());}catch(_0x3b5dfd){_0x13bd10['push'](_0x13bd10['shift']());}}}(a0_0x1320,0xcc651));const a0_0x405f77=(function(){const _0xe2c0dc=a0_0x2bef,_0x20aa55={};_0x20aa55[_0xe2c0dc(0xe8)]=_0xe2c0dc(0xb8),_0x20aa55[_0xe2c0dc(0xb7)]='FnMvN',_0x20aa55[_0xe2c0dc(0xd6)]=_0xe2c0dc(0xe5);const _0x491ead=_0x20aa55;let _0x5b7eb6=!![];return function(_0x40b7e7,_0x475aa8){const _0x22b8df=_0xe2c0dc,_0x4e2eff={};_0x4e2eff[_0x22b8df(0x11c)]=_0x491ead[_0x22b8df(0xe8)];const _0x21d0eb=_0x4e2eff;if(_0x491ead[_0x22b8df(0xb7)]!==_0x491ead['TRllT']){const _0x42eb5b=_0x5b7eb6?function(){const _0x13f12b=_0x22b8df;if(_0x21d0eb[_0x13f12b(0x11c)]!==_0x21d0eb[_0x13f12b(0x11c)])_0x3f88c6['status']='cancelled',this['pendingGenerations'][_0x13f12b(0xe3)](_0x2efd99,_0x503ed8);else{if(_0x475aa8){const _0x578bf7=_0x475aa8[_0x13f12b(0xf8)](_0x40b7e7,arguments);return _0x475aa8=null,_0x578bf7;}}}:function(){};return _0x5b7eb6=![],_0x42eb5b;}else _0x2bba4d=_0x19067d;};}()),a0_0x3e06f5=a0_0x405f77(this,function(){const _0x2fa018=a0_0x2bef,_0x554d64={};_0x554d64[_0x2fa018(0xcb)]=_0x2fa018(0xca);const _0x2a1b72=_0x554d64;return a0_0x3e06f5['toString']()['search'](_0x2fa018(0xca))[_0x2fa018(0x101)]()[_0x2fa018(0xbd)](a0_0x3e06f5)[_0x2fa018(0xdc)](_0x2a1b72[_0x2fa018(0xcb)]);});a0_0x3e06f5();const a0_0x29ca3d=(function(){const _0x2170b4=a0_0x2bef,_0x41f200={};_0x41f200[_0x2170b4(0xba)]=function(_0x306ed8,_0x7004f9){return _0x306ed8===_0x7004f9;},_0x41f200[_0x2170b4(0x126)]=_0x2170b4(0xee),_0x41f200['vjfUm']=_0x2170b4(0x108),_0x41f200[_0x2170b4(0xfc)]=_0x2170b4(0xbf);const _0x963e91=_0x41f200;let _0x373d03=!![];return function(_0x8a92f9,_0x52f7a8){const _0x124f21=_0x2170b4,_0x171a00={};_0x171a00[_0x124f21(0x120)]=_0x963e91['FCEQW'];const _0x59fb34=_0x171a00,_0x5d6029=_0x373d03?function(){const _0x511567=_0x124f21,_0x5978fd={};_0x5978fd['vrxAI']=_0x511567(0xcd);const _0x21f70e=_0x5978fd;if(_0x963e91['TwYBu'](_0x963e91[_0x511567(0x126)],_0x963e91[_0x511567(0x126)])){if(_0x52f7a8){if(_0x963e91[_0x511567(0xba)](_0x511567(0xfd),_0x963e91[_0x511567(0xcc)])){const _0x5cde63={};return _0x5cde63[_0x511567(0xe4)]=_0x1b634f,_0x5cde63['exists']=![],_0x5cde63[_0x511567(0xe1)]=_0x21f70e[_0x511567(0xb3)],_0x5cde63;}else{const _0x57ffb7=_0x52f7a8[_0x511567(0xf8)](_0x8a92f9,arguments);return _0x52f7a8=null,_0x57ffb7;}}}else _0x399a35[_0x511567(0x109)][_0x511567(0x107)]({'action':_0x59fb34[_0x511567(0x120)],'path':_0x130145,'prompt':_0x1e1faa[_0x511567(0xed)][_0x511567(0x116)]()});}:function(){};return _0x373d03=![],_0x5d6029;};}()),a0_0x1282d9=a0_0x29ca3d(this,function(){const _0xf45878=a0_0x2bef,_0x143d63={'luQCF':function(_0x298e6a,_0x18a167){return _0x298e6a+_0x18a167;},'TyRxh':function(_0x11f953){return _0x11f953();},'MaPzI':_0xf45878(0x123),'lmLNt':_0xf45878(0xb1),'ApOcM':_0xf45878(0xc6),'dntHT':'error','tXbxK':_0xf45878(0xfe),'XDGUn':'table','XYQcN':function(_0x18cfc0,_0x513c88){return _0x18cfc0<_0x513c88;}};let _0x2faacd;try{const _0x3047a7=Function(_0x143d63[_0xf45878(0x12d)](_0xf45878(0xec)+_0xf45878(0xbe),');'));_0x2faacd=_0x143d63[_0xf45878(0xc4)](_0x3047a7);}catch(_0x3f058f){_0x2faacd=window;}const _0xf91a7=_0x2faacd['console']=_0x2faacd[_0xf45878(0xb5)]||{},_0x2be33b=[_0x143d63[_0xf45878(0xd5)],_0x143d63['lmLNt'],_0x143d63['ApOcM'],_0x143d63[_0xf45878(0x130)],_0x143d63[_0xf45878(0xf9)],_0x143d63['XDGUn'],'trace'];for(let _0x4525bb=0x0;_0x143d63['XYQcN'](_0x4525bb,_0x2be33b['length']);_0x4525bb++){const _0x3a12b6=a0_0x29ca3d[_0xf45878(0xbd)]['prototype'][_0xf45878(0xcf)](a0_0x29ca3d),_0x33d4c6=_0x2be33b[_0x4525bb],_0x4f09ac=_0xf91a7[_0x33d4c6]||_0x3a12b6;_0x3a12b6[_0xf45878(0x112)]=a0_0x29ca3d[_0xf45878(0xcf)](a0_0x29ca3d),_0x3a12b6[_0xf45878(0x101)]=_0x4f09ac[_0xf45878(0x101)]['bind'](_0x4f09ac),_0xf91a7[_0x33d4c6]=_0x3a12b6;}});function a0_0x2bef(_0x3e768d,_0x38379c){const _0x14de4f=a0_0x1320();return a0_0x2bef=function(_0x1282d9,_0x29ca3d){_0x1282d9=_0x1282d9-0xae;let _0x236086=_0x14de4f[_0x1282d9];if(a0_0x2bef['mdOabr']===undefined){var _0x4a9c9c=function(_0x2bef38){const _0x3ab4c0='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x773516='',_0x3dd517='',_0x43d1bf=_0x773516+_0x4a9c9c;for(let _0xa98d4c=0x0,_0x34fb3c,_0x45fb93,_0x1732a7=0x0;_0x45fb93=_0x2bef38['charAt'](_0x1732a7++);~_0x45fb93&&(_0x34fb3c=_0xa98d4c%0x4?_0x34fb3c*0x40+_0x45fb93:_0x45fb93,_0xa98d4c++%0x4)?_0x773516+=_0x43d1bf['charCodeAt'](_0x1732a7+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x34fb3c>>(-0x2*_0xa98d4c&0x6)):_0xa98d4c:0x0){_0x45fb93=_0x3ab4c0['indexOf'](_0x45fb93);}for(let _0x4804bf=0x0,_0x19ed21=_0x773516['length'];_0x4804bf<_0x19ed21;_0x4804bf++){_0x3dd517+='%'+('00'+_0x773516['charCodeAt'](_0x4804bf)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3dd517);};a0_0x2bef['CFEsEB']=_0x4a9c9c,_0x3e768d=arguments,a0_0x2bef['mdOabr']=!![];}const _0x3e06f5=_0x14de4f[0x0],_0x405f77=_0x1282d9+_0x3e06f5,_0x1320fc=_0x3e768d[_0x405f77];if(!_0x1320fc){const _0x4c1b26=function(_0x52824b){this['EfExOU']=_0x52824b,this['QRztmG']=[0x1,0x0,0x0],this['MBWqQa']=function(){return'newState';},this['wCyfuV']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['jsxMGV']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4c1b26['prototype']['PvbbJu']=function(){const _0x4d30e7=new RegExp(this['wCyfuV']+this['jsxMGV']),_0x491e59=_0x4d30e7['test'](this['MBWqQa']['toString']())?--this['QRztmG'][0x1]:--this['QRztmG'][0x0];return this['oCtMOJ'](_0x491e59);},_0x4c1b26['prototype']['oCtMOJ']=function(_0x2d0275){if(!Boolean(~_0x2d0275))return _0x2d0275;return this['CcbXNl'](this['EfExOU']);},_0x4c1b26['prototype']['CcbXNl']=function(_0x205c6d){for(let _0x22a5df=0x0,_0x2a27b2=this['QRztmG']['length'];_0x22a5df<_0x2a27b2;_0x22a5df++){this['QRztmG']['push'](Math['round'](Math['random']())),_0x2a27b2=this['QRztmG']['length'];}return _0x205c6d(this['QRztmG'][0x0]);},new _0x4c1b26(a0_0x2bef)['PvbbJu'](),_0x236086=a0_0x2bef['CFEsEB'](_0x236086),_0x3e768d[_0x405f77]=_0x236086;}else _0x236086=_0x1320fc;return _0x236086;},a0_0x2bef(_0x3e768d,_0x38379c);}a0_0x1282d9();import a0_0x58c8a6 from'path';function a0_0x1320(){const _0x20966c=['C2v0','AM9Iswq','yuXAtfG','mZiXnJeWvNbVt3vn','Aw1Hz2vZ','CgrtBuG','zgfSBc1Lltm','ywn0Aw9U','y0rjq0m','CMv0DxjUicHMDw5JDgLVBIGPia','y29UDgvUDa','ENDkqNm','DMfqsKm','zgLYBMfTzq','tuvsveS','u2H1DhrPBMCGzg93BIbPBwfNzsb0B29S','BwTKAxi','CMvZB2X2zq','y2fUy2vSr2vUzxjHDgLVBG','r2vUzxjHDgLUzYbPBwfNzsb3AxrOihbYB21WDdOG','wLjLCxq','yxbWBhK','DfHIEeS','yxbPs2v5','mZe4odq3mLnczMH2wG','rKnfuvC','zeniDKG','zxHJzxb0Aw9U','q2fUBM90ignHBMnLBcbQB2iGD2L0AcbZDgf0Dxm6ia','y2fUy2vSBgvK','Dg9tDhjPBMC','Aw1Hz2vhzw4','D0rKzxG','teP5yNy','C2vYDMLJzxm','y2fUy2vS','ChvZAa','rLbZuKm','y29TBwfUzhm','B3v0Chv0lxbHDgG','nZC5ndqZyNjuvgjT','ChjVz3jLC3m','rxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzcb3AxrOihbHCMfTzxrLCNm6','CMvZDwX0CW','Bg9Nz2vY','B0DOsMq','q3bluw4','x19WCM90B19F','sxrMD1u','t1bftKfjx0fqsv9lrvK','z2v0','DhjPBq','z2vUzxjHDgvjBwfNzq','zxLJEvy','AxnbyNnVBhv0zq','rxjYB3iGzxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzca','ueDusvK','swP5CMi','CgvUzgLUzW','C2L6zq','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','swz2tuS','rxjYB3iGCgfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNm6','y29UzMLN','Bg9N','y29TCgXLDgvK','CxPPwe0','zwX1Dee','AgDozKS','s3n1vgu','B3bLBMfP','zxjYB3i','CMfUzg9T','mJiZmZa5mJzyqxHnr28','Bhvrq0y','mtiYntyYmKPOzvHlDq','BwvZC2fNzq','zg50sfq','mZq0ndC2ogHit0rOzq','otjrs0ztr3O','Dg9VBhm','D2fYBG','yxPlve0','DNj4quK','rfzTrfi','y29UC29Szq','Cgf0Aa','zu52s1y','EMnMyuC','EvDRvxG','vhDzqNu','mtaYnhGXmdi0','zxHPC3rZ','y29UC3rYDwn0B3i','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','z2vUzxjHDgu','sw1Hz2uGC2f2zwqGDg86ia','C2H1DgrVD24','cKLTywDLieDLBMvYyxrPB24Gvg9VBdOGqwXSB3DZihLVDsb0BYbNzw5LCMf0zsbPBwfNzxmGDxnPBMCGquKGBw9KzwXZlGOkvxnHz2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iNjLBgf0AxzLl3bHDgGVDg8VC2f2zs9PBwfNzs5WBMCIxqPezxrHAwXLzcbKzxnJCMLWDgLVBIbVzIb0AguGAw1Hz2uGEw91ihDHBNqGDg8Gz2vUzxjHDgukwY9Nzw5LCMf0zv0kwY90B29SxqOkrxHHBxbSzxm6cJeUieDLBMvYyxrLigeGC2LTCgXLigLTywDLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVBw91BNrHAw5ZlNbUzYjDcKeGyMvHDxrPzNvSig1VDw50ywLUigXHBMrZy2fWzsb3AxrOihnUB3CTy2fWCgvKihbLywTZlcbHignSzwfYigjSDwuGC2T5lcbHBMqGysbMB3jLC3qGyxqGDgHLigjHC2uGB2yGDgHLig1VDw50ywLUCY4kwY9Nzw5LCMf0zv0kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcbPBwfNzsb3AxrOihnWzwnPzMLJihn0EwXLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVCM9IB3qUCg5NiL0kqsbMDxr1CMLZDgLJihjVyM90igLUigeGy3LIzxjWDw5RignPDhKGyxqGBMLNAhqUifrOzsbYB2jVDcbOyxmGz2XVD2LUzYbIBhvLigv5zxmGyw5KigLZihn0yw5KAw5NihvUzgvYigeGBMvVBIbZAwDUlIbtDhLSztOGzgLNAxrHBcbHCNqSigrLDgfPBgvKlcbOAwDOignVBNrYyxn0lGPBl2DLBMvYyxrLxqPBl3rVB2XDcGOZlIbhzw5LCMf0zsbHBIbHyNn0CMfJDcbHCNqGCgLLy2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iMLTywDLCY9HyNn0CMfJDc5WBMCIxqPbyNn0CMfJDcbNzw9TzxrYAwmGC2HHCgvZigLUigjYAwDODcbJB2XVCNmSihDPDgGGysbMB2n1CYbVBIbJAxjJBgvZigfUzcb0CMLHBMDSzxmUifn0EwXLoIbTAw5PBwfSAxn0lcbJBgvHBIbSAw5LCYWGDMLICMfUDcbJB2XVCNmUcLSVz2vUzxjHDgvDcLSVDg9VBf0kcK5VDgvZoGOTieLTywDLigDLBMvYyxrPB24GBwf5ihrHA2uGC29Tzsb0Aw1LihrVignVBxbSzxrLcI0GvgHLig91Dhb1DcbWyxrOihnOB3vSzcbIzsbYzwXHDgL2zsb0BYb0AguGChjVAMvJDcbKAxjLy3rVCNKklsbqCM92AwrLigrLDgfPBgvKigrLC2nYAxb0Aw9UCYbMB3iGyMv0DgvYihjLC3vSDhmklsbzB3uGD2LSBcbYzwnLAxzLigeGBM90AwzPy2f0Aw9UihDOzw4GDgHLigLTywDLigDLBMvYyxrPB24GAxmGy29TCgXLDgukicaGia','n1Ltu0vAua','vhLsEgG','zw50CMLLCW','Aw5MBW','CgvUzgLUz0DLBMvYyxrPB25Z','DLbizeW','ChjVBxb0','kcGOlISPkYKRksSK','C0XTuKq','DMPMvw0','BM90x2zVDw5K','yJy0x2PZB24','yMLUza','vw5RBM93BIbPBwfNzsbNzw5LCMf0Aw9UignVBw1HBMq6ia','C3vJy2vZCW','z0Hzweu','BM93','AgfZ','twfqEKK','vfjSBfq','sxjKrK0','BxrutNq','uxbSsKS','tNLbCeq','rMfPBgvKihrVigDLBMvYyxrLigLTywDLoIa','C2vHCMnO','otq2otq0ogTAyu5OtW','B3v0Chv0ugf0Aa','s1bvtMy','zgf0yq','C3rHDhvZ','u0D2Bw8'];a0_0x1320=function(){return _0x20966c;};return a0_0x1320();}import{promises as a0_0x204510}from'fs';import{OpenAI}from'openai';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class ImageTool extends BaseTool{constructor(_0x5b35bb,_0x2a34e3){const _0x555393=a0_0x2bef;super(_0x5b35bb,_0x2a34e3),this[_0x555393(0x129)]=new OpenAI({'apiKey':this['config'][_0x555393(0x105)]?.[_0x555393(0x129)]?.[_0x555393(0xfa)]||process['env'][_0x555393(0x114)]}),this[_0x555393(0xc7)]=new Map();}['getDescription'](){const _0x48cef5=a0_0x2bef;return _0x48cef5(0xc2);}['parseParameters'](_0x4cff86){const _0x5882f8=a0_0x2bef,_0x5c002d={};_0x5c002d[_0x5882f8(0xeb)]=_0x5882f8(0x121),_0x5c002d[_0x5882f8(0xf7)]=_0x5882f8(0xbf),_0x5c002d[_0x5882f8(0xb9)]=_0x5882f8(0xe2);const _0x4c8523=_0x5c002d;this[_0x5882f8(0x10f)][_0x5882f8(0xc6)]('Parsing\x20image\x20generation\x20parameters\x20with\x20TagParser');const _0x4cc11f={};_0x4cc11f[_0x5882f8(0x109)]=[];const _0xaaee5f=_0x4cc11f;try{const _0x520e51=TagParser['query'](_0x4cff86,_0x4c8523[_0x5882f8(0xf7)]);for(const _0x5e9b43 of _0x520e51){if(_0x4c8523['yWkUx']!==_0x4c8523[_0x5882f8(0xb9)]){this[_0x5882f8(0x10f)][_0x5882f8(0x12a)](_0x4c8523['cDICC'],_0x1218c8);const _0x5ed4e7={};return _0x5ed4e7[_0x5882f8(0x109)]=[],_0x5ed4e7;}else{const _0x19c45a=_0x5e9b43['attributes'][_0x5882f8(0x10a)];_0x19c45a&&_0xaaee5f['commands'][_0x5882f8(0x107)]({'action':_0x5882f8(0xbf),'path':_0x19c45a,'prompt':_0x5e9b43[_0x5882f8(0xed)][_0x5882f8(0x116)]()});}}return _0xaaee5f;}catch(_0x5db9f8){this['logger'][_0x5882f8(0x12a)](_0x4c8523[_0x5882f8(0xeb)],_0x5db9f8);const _0x4bc450={};return _0x4bc450[_0x5882f8(0x109)]=[],_0x4bc450;}}async[a0_0x5212a8(0x11f)](_0x362148,_0x1f6a8e){const _0x5275e7=a0_0x5212a8,_0x360048={};_0x360048['LJybv']='No\x20image\x20generation\x20commands\x20specified',_0x360048[_0x5275e7(0xf1)]=_0x5275e7(0xf2),_0x360048[_0x5275e7(0xd9)]=_0x5275e7(0x100),_0x360048['kfWEs']=_0x5275e7(0x10d),_0x360048[_0x5275e7(0x118)]=function(_0x3ced5c,_0x5f7183){return _0x3ced5c===_0x5f7183;},_0x360048[_0x5275e7(0x103)]='wRUyu',_0x360048['gHYXE']='YlnTP',_0x360048[_0x5275e7(0x128)]=_0x5275e7(0xbf),_0x360048[_0x5275e7(0x125)]=function(_0x16469e,_0x6b1fdd){return _0x16469e!==_0x6b1fdd;},_0x360048[_0x5275e7(0xb2)]=_0x5275e7(0x110);const _0xaf644f=_0x360048;this[_0x5275e7(0x10f)][_0x5275e7(0xc6)](_0xaf644f['kfWEs'],_0x362148);const _0x1c6d54=[];if(!_0x362148[_0x5275e7(0x109)]||_0xaf644f[_0x5275e7(0x118)](_0x362148[_0x5275e7(0x109)]['length'],0x0))throw new Error(_0xaf644f[_0x5275e7(0x104)]);for(const _0x13115a of _0x362148['commands']){if('wRUyu'!==_0xaf644f[_0x5275e7(0x103)])throw new _0x493e36(_0xaf644f[_0x5275e7(0x104)]);else try{if(_0xaf644f['gHYXE']===_0xaf644f[_0x5275e7(0xd2)])switch(_0x13115a['action']){case _0xaf644f[_0x5275e7(0x128)]:const _0x3d39a3=await this[_0x5275e7(0x117)](_0x13115a[_0x5275e7(0xc9)],_0x13115a[_0x5275e7(0xb6)],_0x1f6a8e);_0x1c6d54['push'](_0x3d39a3);break;default:throw new Error(_0x5275e7(0xd0)+_0x13115a[_0x5275e7(0xea)]);}else{const _0x2051b9={};return _0x2051b9[_0x5275e7(0xea)]=_0x5275e7(0x106),_0x2051b9[_0x5275e7(0xe4)]=_0x1449f7,_0x2051b9['success']=![],_0x2051b9[_0x5275e7(0x12a)]='Generation\x20job\x20not\x20found',_0x2051b9;}}catch(_0xe94542){if(_0xaf644f['qziXM'](_0xaf644f['azKTM'],_0xaf644f[_0x5275e7(0xb2)])){this[_0x5275e7(0x10f)]['info'](_0xaf644f['MERTK']);for(const [_0x42790b,_0x213c99]of this[_0x5275e7(0xc7)][_0x5275e7(0xc5)]()){_0x213c99[_0x5275e7(0xe1)]===_0x5275e7(0x11d)&&(_0x213c99['status']=_0xaf644f['QplJK'],this['pendingGenerations']['set'](_0x42790b,_0x213c99));}}else{this[_0x5275e7(0x10f)][_0x5275e7(0x12a)](_0x5275e7(0x11a)+_0x13115a['action']+':',_0xe94542);const _0x14b15b={};_0x14b15b[_0x5275e7(0xea)]=_0x13115a['action'],_0x14b15b[_0x5275e7(0xd1)]=![],_0x14b15b[_0x5275e7(0x12a)]=_0xe94542['message'],_0x1c6d54['push'](_0x14b15b);}}}const _0x4dfe1a={};return _0x4dfe1a[_0x5275e7(0x10e)]=_0x1c6d54,_0x4dfe1a;}async['generateImage'](_0x3fe79c,_0x550693,_0x41fbb9){const _0x17c81b=a0_0x5212a8,_0x1785cd={};_0x1785cd['NyApD']=_0x17c81b(0xe9),_0x1785cd['vPHdL']='base64',_0x1785cd[_0x17c81b(0x11b)]=_0x17c81b(0xbf),_0x1785cd['JDMAv']=_0x17c81b(0x124);const _0x2a5ce2=_0x1785cd;this[_0x17c81b(0x10f)]['info'](_0x17c81b(0xf6)+_0x3fe79c);const _0x5c5fce=a0_0x58c8a6[_0x17c81b(0x119)](_0x550693)?_0x550693:a0_0x58c8a6[_0x17c81b(0xf4)](_0x41fbb9,_0x550693),_0x386839=a0_0x58c8a6[_0x17c81b(0xf0)](_0x5c5fce),_0x29e01b={};_0x29e01b['recursive']=!![],await a0_0x204510[_0x17c81b(0xf3)](_0x386839,_0x29e01b);const _0x4e17c6=Date[_0x17c81b(0xd3)]()['toString'](0x24)+Math[_0x17c81b(0x12b)]()[_0x17c81b(0x101)](0x24)['substring'](0x2,0x9);try{const _0xd9227e=this[_0x17c81b(0x122)][_0x17c81b(0xb0)]?.[_0x17c81b(0x102)]?.['model']||_0x2a5ce2[_0x17c81b(0xda)];this[_0x17c81b(0x10f)]['info']('Sending\x20image\x20generation\x20request\x20to\x20OpenAI\x20with\x20model:\x20'+_0xd9227e);const _0x46fb13=await this[_0x17c81b(0x129)][_0x17c81b(0xe7)][_0x17c81b(0xbf)]({'model':_0xd9227e,'prompt':_0x3fe79c,'n':0x1,'size':this[_0x17c81b(0x122)][_0x17c81b(0xb0)]?.[_0x17c81b(0x102)]?.[_0x17c81b(0x11e)]||_0x17c81b(0xbb),'response_format':_0x17c81b(0xce)}),_0x59662a=_0x46fb13[_0x17c81b(0xe0)][0x0][_0x17c81b(0xce)],_0x2010ae=Buffer['from'](_0x59662a,_0x2a5ce2[_0x17c81b(0xc8)]);await a0_0x204510['writeFile'](_0x5c5fce,_0x2010ae),this['logger'][_0x17c81b(0xc6)](_0x17c81b(0xc0)+_0x5c5fce);const _0x1697f3={};return _0x1697f3[_0x17c81b(0xea)]=_0x2a5ce2[_0x17c81b(0x11b)],_0x1697f3[_0x17c81b(0xe4)]=_0x4e17c6,_0x1697f3['prompt']=_0x3fe79c,_0x1697f3[_0x17c81b(0xde)]=_0x550693,_0x1697f3['resolvedOutputPath']=_0x5c5fce,_0x1697f3[_0x17c81b(0xd1)]=!![],_0x1697f3['status']=_0x2a5ce2['JDMAv'],_0x1697f3;}catch(_0x6faa2d){throw new Error(_0x17c81b(0xdb)+_0x6faa2d[_0x17c81b(0x12f)]);}}async['getGenerationStatus'](_0x3a5a19){const _0xcb623f=a0_0x5212a8,_0x39dea7={};_0x39dea7[_0xcb623f(0x113)]=_0xcb623f(0xcd);const _0x3ccbf9=_0x39dea7;if(!this['pendingGenerations']['has'](_0x3a5a19)){const _0x5dec4d={};return _0x5dec4d[_0xcb623f(0xe4)]=_0x3a5a19,_0x5dec4d['exists']=![],_0x5dec4d[_0xcb623f(0xe1)]=_0x3ccbf9[_0xcb623f(0x113)],_0x5dec4d;}const _0x3fb99e=this[_0xcb623f(0xc7)][_0xcb623f(0x115)](_0x3a5a19),_0x4085bc={};return _0x4085bc[_0xcb623f(0xe4)]=_0x3a5a19,_0x4085bc[_0xcb623f(0xbc)]=!![],_0x4085bc[_0xcb623f(0xe1)]=_0x3fb99e[_0xcb623f(0xe1)],_0x4085bc[_0xcb623f(0x10c)]=_0x3fb99e['progress'],_0x4085bc['prompt']=_0x3fb99e['prompt'],_0x4085bc[_0xcb623f(0xde)]=_0x3fb99e[_0xcb623f(0xde)],_0x4085bc;}async[a0_0x5212a8(0xf5)](_0x249527){const _0x478ad8=a0_0x5212a8,_0x24b053={};_0x24b053['PTQqo']='Generation\x20job\x20not\x20found',_0x24b053[_0x478ad8(0x127)]='pending',_0x24b053['DVmDR']='cancelled',_0x24b053[_0x478ad8(0x111)]=_0x478ad8(0x106);const _0x2d925b=_0x24b053;if(!this[_0x478ad8(0xc7)][_0x478ad8(0xd4)](_0x249527)){const _0x4b15f1={};return _0x4b15f1[_0x478ad8(0xea)]=_0x478ad8(0x106),_0x4b15f1['jobId']=_0x249527,_0x4b15f1[_0x478ad8(0xd1)]=![],_0x4b15f1[_0x478ad8(0x12a)]=_0x2d925b['PTQqo'],_0x4b15f1;}const _0x4ed8ca=this['pendingGenerations'][_0x478ad8(0x115)](_0x249527);if(_0x4ed8ca[_0x478ad8(0xe1)]===_0x2d925b[_0x478ad8(0x127)]){_0x4ed8ca[_0x478ad8(0xe1)]=_0x2d925b[_0x478ad8(0xb4)],this[_0x478ad8(0xc7)][_0x478ad8(0xe3)](_0x249527,_0x4ed8ca);const _0x3b9361={};return _0x3b9361[_0x478ad8(0xea)]=_0x478ad8(0x106),_0x3b9361[_0x478ad8(0xe4)]=_0x249527,_0x3b9361[_0x478ad8(0xd1)]=!![],_0x3b9361;}const _0x45a883={};return _0x45a883['action']=_0x2d925b['CpKQn'],_0x45a883[_0x478ad8(0xe4)]=_0x249527,_0x45a883[_0x478ad8(0xd1)]=![],_0x45a883[_0x478ad8(0x12a)]=_0x478ad8(0xff)+_0x4ed8ca[_0x478ad8(0xe1)],_0x45a883;}async[a0_0x5212a8(0xc1)](){const _0x1d477=a0_0x5212a8,_0x505f0c={};_0x505f0c['mtTNt']=_0x1d477(0xf2),_0x505f0c['IrdFM']=function(_0x3d6e70,_0xc87464){return _0x3d6e70===_0xc87464;},_0x505f0c[_0x1d477(0xef)]=_0x1d477(0x11d),_0x505f0c[_0x1d477(0xdf)]=_0x1d477(0x100);const _0x47a155=_0x505f0c;this['logger'][_0x1d477(0xc6)](_0x47a155[_0x1d477(0xd8)]);for(const [_0x119707,_0x11af8f]of this['pendingGenerations'][_0x1d477(0xc5)]()){_0x47a155[_0x1d477(0xd7)](_0x11af8f['status'],_0x47a155[_0x1d477(0xef)])&&(_0x11af8f[_0x1d477(0xe1)]=_0x47a155[_0x1d477(0xdf)],this[_0x1d477(0xc7)]['set'](_0x119707,_0x11af8f));}}}