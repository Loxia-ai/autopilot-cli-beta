const a0_0x67b376=a0_0x1098;(function(_0x2dc038,_0x205bb5){const _0x22757a=a0_0x1098,_0x29a0d0=_0x2dc038();while(!![]){try{const _0x922353=-parseInt(_0x22757a(0x15e))/0x1+-parseInt(_0x22757a(0x1e3))/0x2+-parseInt(_0x22757a(0x148))/0x3+parseInt(_0x22757a(0x16e))/0x4*(parseInt(_0x22757a(0x174))/0x5)+parseInt(_0x22757a(0x1b7))/0x6*(parseInt(_0x22757a(0x18d))/0x7)+parseInt(_0x22757a(0x1a9))/0x8*(parseInt(_0x22757a(0x195))/0x9)+parseInt(_0x22757a(0x16a))/0xa*(parseInt(_0x22757a(0x17d))/0xb);if(_0x922353===_0x205bb5)break;else _0x29a0d0['push'](_0x29a0d0['shift']());}catch(_0x3119f2){_0x29a0d0['push'](_0x29a0d0['shift']());}}}(a0_0x1adb,0x4b563));function a0_0x1098(_0x5c79fe,_0x5542ac){const _0x365cb7=a0_0x1adb();return a0_0x1098=function(_0x5b3b07,_0x37676c){_0x5b3b07=_0x5b3b07-0x13e;let _0x331076=_0x365cb7[_0x5b3b07];if(a0_0x1098['kHzEIL']===undefined){var _0x204586=function(_0x109842){const _0x5aa75f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3eb823='',_0x285e5b='',_0x2b921b=_0x3eb823+_0x204586;for(let _0x4ed721=0x0,_0x11d94c,_0x11e463,_0x33f843=0x0;_0x11e463=_0x109842['charAt'](_0x33f843++);~_0x11e463&&(_0x11d94c=_0x4ed721%0x4?_0x11d94c*0x40+_0x11e463:_0x11e463,_0x4ed721++%0x4)?_0x3eb823+=_0x2b921b['charCodeAt'](_0x33f843+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x11d94c>>(-0x2*_0x4ed721&0x6)):_0x4ed721:0x0){_0x11e463=_0x5aa75f['indexOf'](_0x11e463);}for(let _0x4e32d0=0x0,_0x5628eb=_0x3eb823['length'];_0x4e32d0<_0x5628eb;_0x4e32d0++){_0x285e5b+='%'+('00'+_0x3eb823['charCodeAt'](_0x4e32d0)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x285e5b);};a0_0x1098['Xtjkzj']=_0x204586,_0x5c79fe=arguments,a0_0x1098['kHzEIL']=!![];}const _0x302605=_0x365cb7[0x0],_0x38ad6f=_0x5b3b07+_0x302605,_0x1adb47=_0x5c79fe[_0x38ad6f];if(!_0x1adb47){const _0x4e1b11=function(_0x3ec8e9){this['QIEUKK']=_0x3ec8e9,this['juEIPc']=[0x1,0x0,0x0],this['qCJZmE']=function(){return'newState';},this['HmikXy']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['RbHLAq']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x4e1b11['prototype']['buClbz']=function(){const _0x490140=new RegExp(this['HmikXy']+this['RbHLAq']),_0x2eac3b=_0x490140['test'](this['qCJZmE']['toString']())?--this['juEIPc'][0x1]:--this['juEIPc'][0x0];return this['nzmwxF'](_0x2eac3b);},_0x4e1b11['prototype']['nzmwxF']=function(_0x232507){if(!Boolean(~_0x232507))return _0x232507;return this['MEYNSY'](this['QIEUKK']);},_0x4e1b11['prototype']['MEYNSY']=function(_0xc58f79){for(let _0x5bc0b2=0x0,_0xf10067=this['juEIPc']['length'];_0x5bc0b2<_0xf10067;_0x5bc0b2++){this['juEIPc']['push'](Math['round'](Math['random']())),_0xf10067=this['juEIPc']['length'];}return _0xc58f79(this['juEIPc'][0x0]);},new _0x4e1b11(a0_0x1098)['buClbz'](),_0x331076=a0_0x1098['Xtjkzj'](_0x331076),_0x5c79fe[_0x38ad6f]=_0x331076;}else _0x331076=_0x1adb47;return _0x331076;},a0_0x1098(_0x5c79fe,_0x5542ac);}const a0_0x38ad6f=(function(){const _0x1f772e=a0_0x1098,_0x26ccd7={};_0x26ccd7['TlVik']=function(_0x1705ac,_0x1984ce){return _0x1705ac===_0x1984ce;},_0x26ccd7[_0x1f772e(0x194)]='pending',_0x26ccd7[_0x1f772e(0x15d)]=_0x1f772e(0x1d9),_0x26ccd7[_0x1f772e(0x1e2)]=function(_0x530439,_0x420436){return _0x530439===_0x420436;},_0x26ccd7[_0x1f772e(0x1e1)]=_0x1f772e(0x1c3);const _0x15f89b=_0x26ccd7;let _0x47ccd3=!![];return function(_0xe432b6,_0x31b546){const _0x37f6a8=_0x1f772e,_0xe7cd82={'zUIZQ':function(_0xa9079f,_0x5d37be){const _0x824fe6=a0_0x1098;return _0x15f89b[_0x824fe6(0x1df)](_0xa9079f,_0x5d37be);},'oBlDX':_0x15f89b['HwOmU'],'TkURy':'cancelled','YcvGE':_0x15f89b[_0x37f6a8(0x15d)]};if(_0x15f89b[_0x37f6a8(0x1e2)](_0x15f89b[_0x37f6a8(0x1e1)],_0x15f89b[_0x37f6a8(0x1e1)])){const _0x10a995=_0x47ccd3?function(){const _0x1ed052=_0x37f6a8;if(_0xe7cd82['YcvGE']===_0xe7cd82[_0x1ed052(0x17e)]){if(_0x31b546){const _0x434901=_0x31b546[_0x1ed052(0x147)](_0xe432b6,arguments);return _0x31b546=null,_0x434901;}}else _0xe7cd82[_0x1ed052(0x1cb)](_0x120da9['status'],_0xe7cd82['oBlDX'])&&(_0xfbe81[_0x1ed052(0x18a)]=_0xe7cd82[_0x1ed052(0x166)],this['pendingGenerations']['set'](_0x53b0ff,_0x238f26));}:function(){};return _0x47ccd3=![],_0x10a995;}else{if(_0x1b897d){const _0x2269de=_0x138a9d[_0x37f6a8(0x147)](_0x27e159,arguments);return _0x39aad7=null,_0x2269de;}}};}()),a0_0x302605=a0_0x38ad6f(this,function(){const _0x45ab3d=a0_0x1098,_0x513e50={};_0x513e50[_0x45ab3d(0x179)]=_0x45ab3d(0x1a4);const _0x131d03=_0x513e50;return a0_0x302605[_0x45ab3d(0x1d0)]()[_0x45ab3d(0x177)](_0x45ab3d(0x1a4))[_0x45ab3d(0x1d0)]()[_0x45ab3d(0x183)](a0_0x302605)[_0x45ab3d(0x177)](_0x131d03[_0x45ab3d(0x179)]);});a0_0x302605();const a0_0x37676c=(function(){let _0x26f33e=!![];return function(_0x1a4f20,_0x4c0d7c){const _0x55c6e6=_0x26f33e?function(){const _0x2a95dc=a0_0x1098;if(_0x4c0d7c){const _0x3b229c=_0x4c0d7c[_0x2a95dc(0x147)](_0x1a4f20,arguments);return _0x4c0d7c=null,_0x3b229c;}}:function(){};return _0x26f33e=![],_0x55c6e6;};}()),a0_0x5b3b07=a0_0x37676c(this,function(){const _0x3b3a42=a0_0x1098,_0x30d5ab={'pwzdy':_0x3b3a42(0x196),'MQcDa':_0x3b3a42(0x1b5),'FgjTw':function(_0x52a748,_0x5dcf68){return _0x52a748(_0x5dcf68);},'FHHjT':function(_0x1547f3,_0x4072c2){return _0x1547f3+_0x4072c2;},'ezwHV':_0x3b3a42(0x13e),'AheDj':'{}.constructor(\x22return\x20this\x22)(\x20)','DwyJM':function(_0x164330,_0x19b2f2){return _0x164330===_0x19b2f2;},'CXieO':'efpvB','rYrRY':function(_0x4041fc){return _0x4041fc();},'Xldjb':_0x3b3a42(0x1ac),'ySZha':_0x3b3a42(0x176),'FNplY':'exception','Pppwn':_0x3b3a42(0x1c7),'pUnre':'trace','hOJuu':function(_0x5d8788,_0x220266){return _0x5d8788<_0x220266;},'jgALm':function(_0x4e9dff,_0x5f1859){return _0x4e9dff!==_0x5f1859;},'ZHXky':_0x3b3a42(0x188)},_0xa22333=function(){const _0x36d6fa=_0x3b3a42,_0x5727bc={};_0x5727bc[_0x36d6fa(0x158)]=_0x30d5ab[_0x36d6fa(0x1bc)];const _0x333f33=_0x5727bc;if(_0x30d5ab[_0x36d6fa(0x15c)]===_0x30d5ab['MQcDa']){let _0x3adb68;try{_0x3adb68=_0x30d5ab['FgjTw'](Function,_0x30d5ab['FHHjT'](_0x30d5ab[_0x36d6fa(0x18f)]+_0x30d5ab[_0x36d6fa(0x1c1)],');'))();}catch(_0x2420d3){if(_0x30d5ab['DwyJM'](_0x36d6fa(0x165),_0x30d5ab[_0x36d6fa(0x15b)]))_0x3adb68=window;else{_0x4f9d86[_0x36d6fa(0x18a)]=_0x333f33[_0x36d6fa(0x158)],this['pendingGenerations'][_0x36d6fa(0x169)](_0x345e7f,_0x17e01b);const _0x4638c9={};return _0x4638c9['action']=_0x36d6fa(0x1d6),_0x4638c9[_0x36d6fa(0x175)]=_0x23d19c,_0x4638c9[_0x36d6fa(0x145)]=!![],_0x4638c9;}}return _0x3adb68;}else{const _0x188f64=_0x490140?function(){const _0x4d626e=_0x36d6fa;if(_0x56334c){const _0x454141=_0x550ffd[_0x4d626e(0x147)](_0x5ded51,arguments);return _0x40f384=null,_0x454141;}}:function(){};return _0xf10067=![],_0x188f64;}},_0x5bf0c7=_0x30d5ab[_0x3b3a42(0x19f)](_0xa22333),_0x4a0960=_0x5bf0c7['console']=_0x5bf0c7[_0x3b3a42(0x1ad)]||{},_0x510b1d=[_0x30d5ab['Xldjb'],'warn',_0x30d5ab[_0x3b3a42(0x173)],_0x3b3a42(0x1db),_0x30d5ab[_0x3b3a42(0x160)],_0x30d5ab[_0x3b3a42(0x19c)],_0x30d5ab[_0x3b3a42(0x171)]];for(let _0x42621f=0x0;_0x30d5ab[_0x3b3a42(0x164)](_0x42621f,_0x510b1d[_0x3b3a42(0x1bd)]);_0x42621f++){if(_0x30d5ab[_0x3b3a42(0x167)](_0x30d5ab[_0x3b3a42(0x172)],_0x3b3a42(0x188))){const _0x2d4fda=_0x4a516e[_0x3b3a42(0x147)](_0xf2e2a6,arguments);return _0x5d43ad=null,_0x2d4fda;}else{const _0x9c35f0=a0_0x37676c[_0x3b3a42(0x183)][_0x3b3a42(0x1d2)][_0x3b3a42(0x1c6)](a0_0x37676c),_0xde26c5=_0x510b1d[_0x42621f],_0x14cb50=_0x4a0960[_0xde26c5]||_0x9c35f0;_0x9c35f0[_0x3b3a42(0x1b1)]=a0_0x37676c['bind'](a0_0x37676c),_0x9c35f0[_0x3b3a42(0x1d0)]=_0x14cb50[_0x3b3a42(0x1d0)]['bind'](_0x14cb50),_0x4a0960[_0xde26c5]=_0x9c35f0;}}});a0_0x5b3b07();import a0_0x28b29c from'path';import{promises as a0_0x251855}from'fs';import{OpenAI}from'openai';function a0_0x1adb(){const _0x4631c8=['zKjAD2O','y29UC3rYDwn0B3i','rMT2AvK','CMvZDwX0CW','y2XlBey','tNzMqMq','Ewfdrxy','Aw1Hz2vhzw4','C3rHDhvZ','rvPpz2S','Bw9KzwW','mJqYmM1luwrfEG','rfnnDNO','zxP3sfy','vw5RBM93BIbPBwfNzsbNzw5LCMf0Aw9UignVBw1HBMq6ia','r2vUzxjHDgLUzYbPBwfNzsb3AxrOihbYB21WDdOG','C0Lmze8','z2v0r2vUzxjHDgLVBLn0yxr1CW','shDpBvu','odu1tKvwCMPV','y2fUy2vSBgvK','CgvUzgLUz0DLBMvYyxrPB25Z','rMLMBLq','z2vUzxjHDgvjBwfNzq','Aw1Hz2vZ','zw50CMLLCW','uhbWD24','C2vYDMLJzxm','rxjYB3iGCgfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNm6','CLLYuLK','CMfUzg9T','BKLgD1u','sNfnCgq','z1jwywu','kcGOlISPkYKRksSK','BwvZC2fNzq','tM8GAw1Hz2uGz2vUzxjHDgLVBIbJB21Tyw5KCYbZCgvJAwzPzwq','C2H1DgrVD24','zgfSBc1Lltm','mZG2ndHty1HwDM0','qwjgqM4','qKvovfO','Bg9N','y29UC29Szq','B3v0Chv0lxbHDgG','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','D2nwu0y','x19WCM90B19F','wuLJywu','AwfXALK','r1ziDKu','ufLZD1i','yMfZzty0','ntC2mev5z1rODG','tvjTr3C','ChvZAa','AfLvBvC','A29hs1O','ChD6zhK','BgvUz3rO','y29UDgvUDa','ywn0Aw9U','rKDqBxq','qwHLrgO','yu94DNe','sxvtBu0','shPfz3m','ChjVz3jLC3m','yMLUza','DgfIBgu','ywfIBu4','vfDdDM4','D3jPDgvgAwXL','ELvjwLe','u1PVse8','C2L6zq','rhbduvC','CMvZB2X2zwrpDxrWDxrqyxrO','Dg9tDhjPBMC','zefyDMm','ChjVDg90ExbL','z2v0','rxjYB3iGzxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzca','Bg9Nz2vY','y2fUy2vS','B3bLBMfP','DhnsCfm','BwTJwxy','r0PqzfO','zxjYB3i','A2TRCKG','z2v0rgvZy3jPChrPB24','CgfYC2vqyxjHBwv0zxjZ','vgXwAwS','B3v0Chv0ugf0Aa','rgjmwu0','CwjnAgm','nZqZnZCYvxr0A01z','CMv0DxjUicHMDw5JDgLVBIGPia','u2vUzgLUzYbPBwfNzsbNzw5LCMf0Aw9UihjLCxvLC3qGDg8Gt3bLBKfjihDPDgGGBw9KzwW6ia','y29TBwfUzhm','ChjVBxb0','zgLYBMfTzq','uMvNDhq','AhHcvwS','C3vJy2vZCW','u2H1DhrPBMCGzg93BIbPBwfNzsb0B29S','yxbWBhK','otC2mZqXELP3sezX','Cgf0Aa','rMfPBgvKihrVigDLBMvYyxrLigLTywDLoIa','y2fUy2vSr2vUzxjHDgLVBG','y29UzMLN','rxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzcb3AxrOihbHCMfTzxrLCNm6','rwjkyve','r2vUzxjHDgLVBIbQB2iGBM90igzVDw5K','q0T4Dxm','BM90x2zVDw5K','txnzDMm','y29TCgXLDgvK','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','CgvUzgLUzW','yJy0x2PZB24','CvLkyvG','qxzOA24','ELrKtgK','q2fUBM90ignHBMnLBcbQB2iGD2L0AcbZDgf0Dxm6ia','q1HPzu8','tvfJrge','twn2wKm','mZa0ndC1shr2BePT','CMD2zMK','rK5WBfK','vK1WyxK','z2vUzxjHDgu','zgf0yq','Ae9kDxu','zwzWDKi','vgTvuNK','AMDbtg0','t1bftKfjx0fqsv9lrvK','C2v0','mJmZodi5mefpv0z3vq','AgfZ','t3vtu2C','z1bYugC','odyWngvYreXsvW','zxHPC3rZ','vvzoy2O','CfvUCMu','wKHyA3K','EvnAAge','mtiWEvvwsw5o','AM9Iswq','Aw5MBW','C2vHCMnO','Dg9VBhm','qu9It0e','BwXstvu','BKjZufK','qxvIAxK','mJjKCxHHueK','wwn2r0u','CMvJDxjZAxzL','zNjVBq','BM93'];a0_0x1adb=function(){return _0x4631c8;};return a0_0x1adb();}import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class ImageTool extends BaseTool{constructor(_0x27670d,_0x4d90a3){const _0x52afab=a0_0x1098;super(_0x27670d,_0x4d90a3),this[_0x52afab(0x1d7)]=new OpenAI({'apiKey':this[_0x52afab(0x14c)][_0x52afab(0x19d)]?.['openai']?.['apiKey']||process['env'][_0x52afab(0x168)]}),this[_0x52afab(0x197)]=new Map();}[a0_0x67b376(0x1dd)](){return'\x0aImage\x20Generation\x20Tool:\x20Allows\x20you\x20to\x20generate\x20images\x20using\x20AI\x20models.\x0a\x0aUsage:\x0a[tool\x20id=\x22image-gen\x22]\x0a[generate\x20output-path=\x22relative/path/to/save/image.png\x22]\x0aDetailed\x20description\x20of\x20the\x20image\x20you\x20want\x20to\x20generate\x0a[/generate]\x0a[/tool]\x0a\x0aExamples:\x0a1.\x20Generate\x20a\x20simple\x20image:\x0a[tool\x20id=\x22image-gen\x22]\x0a[generate\x20output-path=\x22images/mountains.png\x22]\x0aA\x20beautiful\x20mountain\x20landscape\x20with\x20snow-capped\x20peaks,\x20a\x20clear\x20blue\x20sky,\x20and\x20a\x20forest\x20at\x20the\x20base\x20of\x20the\x20mountains.\x0a[/generate]\x0a[/tool]\x0a\x0a2.\x20Generate\x20a\x20detailed\x20image\x20with\x20specific\x20style:\x0a[tool\x20id=\x22image-gen\x22]\x0a[generate\x20output-path=\x22images/robot.png\x22]\x0aA\x20futuristic\x20robot\x20in\x20a\x20cyberpunk\x20city\x20at\x20night.\x20The\x20robot\x20has\x20glowing\x20blue\x20eyes\x20and\x20is\x20standing\x20under\x20a\x20neon\x20sign.\x20Style:\x20digital\x20art,\x20detailed,\x20high\x20contrast.\x0a[/generate]\x0a[/tool]\x0a\x0a3.\x20Generate\x20an\x20abstract\x20art\x20piece:\x0a[tool\x20id=\x22image-gen\x22]\x0a[generate\x20output-path=\x22images/abstract.png\x22]\x0aAbstract\x20geometric\x20shapes\x20in\x20bright\x20colors,\x20with\x20a\x20focus\x20on\x20circles\x20and\x20triangles.\x20Style:\x20minimalist,\x20clean\x20lines,\x20vibrant\x20colors.\x0a[/generate]\x0a[/tool]\x0a\x0aNotes:\x0a-\x20Image\x20generation\x20may\x20take\x20some\x20time\x20to\x20complete\x0a-\x20The\x20output\x20path\x20should\x20be\x20relative\x20to\x20the\x20project\x20directory\x0a-\x20Provide\x20detailed\x20descriptions\x20for\x20better\x20results\x0a-\x20You\x20will\x20receive\x20a\x20notification\x20when\x20the\x20image\x20generation\x20is\x20complete\x0a\x20\x20\x20\x20';}[a0_0x67b376(0x1de)](_0x3c685b){const _0x5c815a=a0_0x67b376,_0x4d3cbd={'Aubiy':function(_0x2bc4f8,_0x16856d){return _0x2bc4f8(_0x16856d);},'wcVSF':function(_0x32db7a,_0x1cf5f1){return _0x32db7a+_0x1cf5f1;},'Regtt':_0x5c815a(0x1af),'OuSSg':function(_0x4a8149,_0x18a6fd){return _0x4a8149(_0x18a6fd);},'FGPmt':_0x5c815a(0x13e),'dAXvc':'Parsing\x20image\x20generation\x20parameters\x20with\x20TagParser','zTdLi':_0x5c815a(0x162),'gRVae':_0x5c815a(0x1ae),'MsYvc':_0x5c815a(0x198),'hYUmW':function(_0x1cbb0a,_0x557124){return _0x1cbb0a===_0x557124;},'XFLbS':_0x5c815a(0x19e)};this[_0x5c815a(0x1d5)][_0x5c815a(0x176)](_0x4d3cbd[_0x5c815a(0x1d1)]);const _0x4b6366={};_0x4b6366[_0x5c815a(0x140)]=[];const _0xde22d7=_0x4b6366;try{const _0x504bc8=TagParser['query'](_0x3c685b,_0x4d3cbd[_0x5c815a(0x159)]);for(const _0x279685 of _0x504bc8){const _0x2c905d=_0x279685['attributes'][_0x4d3cbd[_0x5c815a(0x1a3)]];_0x2c905d&&(_0x4d3cbd[_0x5c815a(0x152)]===_0x5c815a(0x192)?_0x193118=qLzuIj[_0x5c815a(0x17c)](_0x46b4fb,qLzuIj[_0x5c815a(0x1b0)]('return\x20(function()\x20',qLzuIj[_0x5c815a(0x143)])+');')():_0xde22d7[_0x5c815a(0x140)][_0x5c815a(0x1b9)]({'action':_0x4d3cbd[_0x5c815a(0x159)],'path':_0x2c905d,'prompt':_0x279685[_0x5c815a(0x1be)]['trim']()}));}return _0xde22d7;}catch(_0x1a63a1){if(_0x4d3cbd[_0x5c815a(0x1ba)](_0x5c815a(0x1ab),_0x5c815a(0x1a1))){let _0x3ec153;try{_0x3ec153=qLzuIj[_0x5c815a(0x16c)](_0x4a06dc,qLzuIj[_0x5c815a(0x1b0)](qLzuIj[_0x5c815a(0x1c0)],qLzuIj[_0x5c815a(0x143)])+');')();}catch(_0xe28f4){_0x3ec153=_0xd82f5;}return _0x3ec153;}else{this[_0x5c815a(0x1d5)][_0x5c815a(0x1db)](_0x4d3cbd['XFLbS'],_0x1a63a1);const _0x53315f={};return _0x53315f[_0x5c815a(0x140)]=[],_0x53315f;}}}async[a0_0x67b376(0x154)](_0x5a2d59,_0x4689fd){const _0x5a8b31=a0_0x67b376,_0x3a38f7={};_0x3a38f7[_0x5a8b31(0x16d)]=_0x5a8b31(0x14d),_0x3a38f7[_0x5a8b31(0x184)]=function(_0xf93ae9,_0x59feba){return _0xf93ae9===_0x59feba;},_0x3a38f7[_0x5a8b31(0x1c2)]=_0x5a8b31(0x1bb),_0x3a38f7[_0x5a8b31(0x186)]=_0x5a8b31(0x1a6),_0x3a38f7['GJPdZ']=_0x5a8b31(0x1ce),_0x3a38f7[_0x5a8b31(0x170)]=_0x5a8b31(0x150),_0x3a38f7[_0x5a8b31(0x161)]=_0x5a8b31(0x162);const _0x30ec82=_0x3a38f7;this[_0x5a8b31(0x1d5)][_0x5a8b31(0x176)](_0x30ec82['gPrPg'],_0x5a2d59);const _0x4f9972=[];if(!_0x5a2d59[_0x5a8b31(0x140)]||_0x30ec82[_0x5a8b31(0x184)](_0x5a2d59[_0x5a8b31(0x140)][_0x5a8b31(0x1bd)],0x0)){if(_0x30ec82[_0x5a8b31(0x184)](_0x30ec82[_0x5a8b31(0x1c2)],_0x30ec82[_0x5a8b31(0x1c2)]))throw new Error(_0x30ec82[_0x5a8b31(0x186)]);else{const _0x158810=_0x2df811?function(){const _0x2c9737=_0x5a8b31;if(_0x5a54c4){const _0x54bd7f=_0x51c126[_0x2c9737(0x147)](_0x1581f8,arguments);return _0x220dd5=null,_0x54bd7f;}}:function(){};return _0x21fdbd=![],_0x158810;}}for(const _0x1898ca of _0x5a2d59[_0x5a8b31(0x140)]){if(_0x30ec82['FkviY'](_0x30ec82[_0x5a8b31(0x1da)],_0x30ec82[_0x5a8b31(0x170)]))throw new _0x377af7(_0x5a8b31(0x14a)+_0x2aaa05[_0x5a8b31(0x1a5)]);else try{switch(_0x1898ca[_0x5a8b31(0x1bf)]){case _0x30ec82[_0x5a8b31(0x161)]:const _0x5b511d=await this[_0x5a8b31(0x199)](_0x1898ca[_0x5a8b31(0x141)],_0x1898ca[_0x5a8b31(0x149)],_0x4689fd);_0x4f9972[_0x5a8b31(0x1b9)](_0x5b511d);break;default:throw new Error(_0x5a8b31(0x190)+_0x1898ca['action']);}}catch(_0x3e1cb9){this['logger'][_0x5a8b31(0x1db)](_0x5a8b31(0x1d4)+_0x1898ca[_0x5a8b31(0x1bf)]+':',_0x3e1cb9);const _0x1cca1e={};_0x1cca1e[_0x5a8b31(0x1bf)]=_0x1898ca[_0x5a8b31(0x1bf)],_0x1cca1e[_0x5a8b31(0x145)]=![],_0x1cca1e['error']=_0x3e1cb9[_0x5a8b31(0x1a5)],_0x4f9972[_0x5a8b31(0x1b9)](_0x1cca1e);}}const _0x1b597c={};return _0x1b597c[_0x5a8b31(0x185)]=_0x4f9972,_0x1b597c;}async[a0_0x67b376(0x199)](_0x5a6708,_0xcd0d04,_0x35bf2d){const _0x2a96da=a0_0x67b376,_0x4bcdd3={};_0x4bcdd3[_0x2a96da(0x1a2)]=function(_0xcf59d8,_0x356ed8){return _0xcf59d8+_0x356ed8;},_0x4bcdd3[_0x2a96da(0x157)]=_0x2a96da(0x1a8),_0x4bcdd3[_0x2a96da(0x1c9)]='1024x1024',_0x4bcdd3[_0x2a96da(0x17a)]=_0x2a96da(0x156),_0x4bcdd3[_0x2a96da(0x15f)]=_0x2a96da(0x1b6),_0x4bcdd3['xcOCi']=_0x2a96da(0x162),_0x4bcdd3['OXkdN']=_0x2a96da(0x153),_0x4bcdd3[_0x2a96da(0x17b)]='qCCbc';const _0x34132e=_0x4bcdd3;this[_0x2a96da(0x1d5)][_0x2a96da(0x176)](_0x2a96da(0x191)+_0x5a6708);const _0x394bb=a0_0x28b29c['isAbsolute'](_0xcd0d04)?_0xcd0d04:a0_0x28b29c['resolve'](_0x35bf2d,_0xcd0d04),_0x169a78=a0_0x28b29c[_0x2a96da(0x142)](_0x394bb),_0x112f35={};_0x112f35[_0x2a96da(0x17f)]=!![],await a0_0x251855['mkdir'](_0x169a78,_0x112f35);const _0x100c61=_0x34132e[_0x2a96da(0x1a2)](Date[_0x2a96da(0x181)]()[_0x2a96da(0x1d0)](0x24),Math[_0x2a96da(0x1a0)]()['toString'](0x24)['substring'](0x2,0x9));try{const _0x4340e1=this['config'][_0x2a96da(0x178)]?.[_0x2a96da(0x189)]?.[_0x2a96da(0x18c)]||_0x34132e['qYJaX'];this[_0x2a96da(0x1d5)]['info'](_0x2a96da(0x13f)+_0x4340e1);const _0x473ebe=await this[_0x2a96da(0x1d7)][_0x2a96da(0x19a)]['generate']({'model':_0x4340e1,'prompt':_0x5a6708,'n':0x1,'size':this[_0x2a96da(0x14c)]['tools']?.[_0x2a96da(0x189)]?.[_0x2a96da(0x1cd)]||_0x34132e[_0x2a96da(0x1c9)],'response_format':_0x34132e['mlRMU']}),_0x4427c3=_0x473ebe[_0x2a96da(0x163)][0x0][_0x2a96da(0x156)],_0xd53e9e=Buffer[_0x2a96da(0x180)](_0x4427c3,_0x34132e['rgvfi']);await a0_0x251855[_0x2a96da(0x1ca)](_0x394bb,_0xd53e9e),this[_0x2a96da(0x1d5)][_0x2a96da(0x176)]('Image\x20saved\x20to:\x20'+_0x394bb);const _0x21931c={};return _0x21931c[_0x2a96da(0x1bf)]=_0x34132e['xcOCi'],_0x21931c['jobId']=_0x100c61,_0x21931c[_0x2a96da(0x141)]=_0x5a6708,_0x21931c[_0x2a96da(0x1e0)]=_0xcd0d04,_0x21931c[_0x2a96da(0x1cf)]=_0x394bb,_0x21931c['success']=!![],_0x21931c[_0x2a96da(0x18a)]=_0x34132e['OXkdN'],_0x21931c;}catch(_0x4cdc44){if(_0x34132e[_0x2a96da(0x17b)]===_0x34132e[_0x2a96da(0x17b)])throw new Error(_0x2a96da(0x14a)+_0x4cdc44[_0x2a96da(0x1a5)]);else{this['logger']['error'](_0x2a96da(0x19e),_0x19492c);const _0x17efc3={};return _0x17efc3[_0x2a96da(0x140)]=[],_0x17efc3;}}}async[a0_0x67b376(0x193)](_0x1df6c4){const _0x137f47=a0_0x67b376,_0x41579a={};_0x41579a['YIcae']=function(_0x10399c,_0x614604){return _0x10399c===_0x614604;},_0x41579a[_0x137f47(0x1b4)]='pending',_0x41579a['kkkrH']=_0x137f47(0x196),_0x41579a[_0x137f47(0x1d8)]=function(_0x204d49,_0x19f4ef){return _0x204d49===_0x19f4ef;},_0x41579a['EbJaQ']=_0x137f47(0x1cc),_0x41579a['aabmN']=_0x137f47(0x151);const _0x8b60b6=_0x41579a;if(!this[_0x137f47(0x197)][_0x137f47(0x16b)](_0x1df6c4)){if(_0x8b60b6['tsRpS'](_0x8b60b6[_0x137f47(0x14e)],_0x137f47(0x18b))){this[_0x137f47(0x1d5)][_0x137f47(0x176)](_0x137f47(0x146));for(const [_0x273c42,_0x1d4ea7]of this[_0x137f47(0x197)][_0x137f47(0x19b)]()){_0x8b60b6[_0x137f47(0x1b2)](_0x1d4ea7[_0x137f47(0x18a)],_0x8b60b6['GVHvE'])&&(_0x1d4ea7['status']=_0x8b60b6[_0x137f47(0x1dc)],this['pendingGenerations']['set'](_0x273c42,_0x1d4ea7));}}else{const _0x281129={};return _0x281129[_0x137f47(0x175)]=_0x1df6c4,_0x281129[_0x137f47(0x16f)]=![],_0x281129[_0x137f47(0x18a)]=_0x8b60b6[_0x137f47(0x1c8)],_0x281129;}}const _0x19af20=this[_0x137f47(0x197)][_0x137f47(0x1d3)](_0x1df6c4),_0x1a2d4a={};return _0x1a2d4a[_0x137f47(0x175)]=_0x1df6c4,_0x1a2d4a[_0x137f47(0x16f)]=!![],_0x1a2d4a['status']=_0x19af20['status'],_0x1a2d4a[_0x137f47(0x1c5)]=_0x19af20[_0x137f47(0x1c5)],_0x1a2d4a[_0x137f47(0x141)]=_0x19af20[_0x137f47(0x141)],_0x1a2d4a[_0x137f47(0x1e0)]=_0x19af20[_0x137f47(0x1e0)],_0x1a2d4a;}async[a0_0x67b376(0x14b)](_0x5b152a){const _0x4dc07a=a0_0x67b376,_0x4a3646={};_0x4a3646[_0x4dc07a(0x182)]='not_found',_0x4a3646[_0x4dc07a(0x1c4)]=_0x4dc07a(0x1d6),_0x4a3646['OLSOr']=_0x4dc07a(0x14f),_0x4a3646[_0x4dc07a(0x1b8)]=function(_0x23e487,_0x257ece){return _0x23e487===_0x257ece;},_0x4a3646['NvfBd']=_0x4dc07a(0x155),_0x4a3646[_0x4dc07a(0x1b3)]=_0x4dc07a(0x18e),_0x4a3646['WhxMF']='cancelled';const _0x3a88f7=_0x4a3646;if(!this[_0x4dc07a(0x197)]['has'](_0x5b152a)){const _0x245540={};return _0x245540['action']=_0x3a88f7['HzEgs'],_0x245540[_0x4dc07a(0x175)]=_0x5b152a,_0x245540['success']=![],_0x245540[_0x4dc07a(0x1db)]=_0x3a88f7['OLSOr'],_0x245540;}const _0x2c6507=this[_0x4dc07a(0x197)][_0x4dc07a(0x1d3)](_0x5b152a);if(_0x3a88f7[_0x4dc07a(0x1b8)](_0x2c6507['status'],_0x3a88f7[_0x4dc07a(0x187)])){if(_0x3a88f7[_0x4dc07a(0x1b3)]==='DSMvz'){_0x2c6507[_0x4dc07a(0x18a)]=_0x3a88f7['WhxMF'],this[_0x4dc07a(0x197)][_0x4dc07a(0x169)](_0x5b152a,_0x2c6507);const _0x1f6158={};return _0x1f6158[_0x4dc07a(0x1bf)]=_0x4dc07a(0x1d6),_0x1f6158[_0x4dc07a(0x175)]=_0x5b152a,_0x1f6158[_0x4dc07a(0x145)]=!![],_0x1f6158;}else{if(!this['pendingGenerations'][_0x4dc07a(0x16b)](_0x43da39)){const _0xec802c={};return _0xec802c[_0x4dc07a(0x175)]=_0x2b5d52,_0xec802c[_0x4dc07a(0x16f)]=![],_0xec802c[_0x4dc07a(0x18a)]=_0x3a88f7[_0x4dc07a(0x182)],_0xec802c;}const _0x5c76a5=this['pendingGenerations'][_0x4dc07a(0x1d3)](_0x24f627),_0x23b89a={};return _0x23b89a[_0x4dc07a(0x175)]=_0x202235,_0x23b89a[_0x4dc07a(0x16f)]=!![],_0x23b89a[_0x4dc07a(0x18a)]=_0x5c76a5[_0x4dc07a(0x18a)],_0x23b89a['progress']=_0x5c76a5[_0x4dc07a(0x1c5)],_0x23b89a[_0x4dc07a(0x141)]=_0x5c76a5[_0x4dc07a(0x141)],_0x23b89a[_0x4dc07a(0x1e0)]=_0x5c76a5['outputPath'],_0x23b89a;}}const _0x12c54b={};return _0x12c54b['action']=_0x3a88f7['HzEgs'],_0x12c54b['jobId']=_0x5b152a,_0x12c54b[_0x4dc07a(0x145)]=![],_0x12c54b[_0x4dc07a(0x1db)]=_0x4dc07a(0x15a)+_0x2c6507[_0x4dc07a(0x18a)],_0x12c54b;}async[a0_0x67b376(0x1a7)](){const _0x1b69e3=a0_0x67b376,_0x3befae={};_0x3befae[_0x1b69e3(0x1aa)]=_0x1b69e3(0x155),_0x3befae[_0x1b69e3(0x144)]=_0x1b69e3(0x196);const _0xc14680=_0x3befae;this['logger']['info']('Shutting\x20down\x20image\x20tool');for(const [_0x45c615,_0x473843]of this[_0x1b69e3(0x197)]['entries']()){_0x473843[_0x1b69e3(0x18a)]===_0xc14680[_0x1b69e3(0x1aa)]&&(_0x473843[_0x1b69e3(0x18a)]=_0xc14680[_0x1b69e3(0x144)],this['pendingGenerations'][_0x1b69e3(0x169)](_0x45c615,_0x473843));}}}