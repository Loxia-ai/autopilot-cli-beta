const a0_0x558160=a0_0x338a;(function(_0x36fc0a,_0x2254e9){const _0x302c6b=a0_0x338a,_0x2da0ea=_0x36fc0a();while(!![]){try{const _0x4793f4=-parseInt(_0x302c6b(0x248))/0x1+parseInt(_0x302c6b(0x25d))/0x2*(-parseInt(_0x302c6b(0x25f))/0x3)+-parseInt(_0x302c6b(0x240))/0x4*(parseInt(_0x302c6b(0x26d))/0x5)+-parseInt(_0x302c6b(0x1ed))/0x6+-parseInt(_0x302c6b(0x27a))/0x7+parseInt(_0x302c6b(0x272))/0x8+parseInt(_0x302c6b(0x211))/0x9;if(_0x4793f4===_0x2254e9)break;else _0x2da0ea['push'](_0x2da0ea['shift']());}catch(_0x4ad55f){_0x2da0ea['push'](_0x2da0ea['shift']());}}}(a0_0x524b,0x4ac3b));const a0_0x3d237c=(function(){const _0x1342ad=a0_0x338a,_0x4f852d={};_0x4f852d[_0x1342ad(0x223)]=_0x1342ad(0x22d),_0x4f852d['jYcOA']=_0x1342ad(0x26e);const _0x308128=_0x4f852d;let _0x395522=!![];return function(_0x285ab2,_0x39404b){const _0x29fd76=_0x1342ad,_0xe32b12={};_0xe32b12[_0x29fd76(0x26c)]=function(_0xdcc9b0,_0x39f64a){return _0xdcc9b0!==_0x39f64a;},_0xe32b12['WVagf']=_0x308128[_0x29fd76(0x223)],_0xe32b12[_0x29fd76(0x26a)]=_0x308128[_0x29fd76(0x21a)];const _0x4d0456=_0xe32b12,_0x24982d=_0x395522?function(){const _0x46511d=_0x29fd76;if(_0x4d0456[_0x46511d(0x26c)](_0x4d0456[_0x46511d(0x275)],_0x46511d(0x23f))){if(_0x39404b){if(_0x4d0456[_0x46511d(0x26a)]==='zhqQN'){const _0x5abb4e=_0x39404b[_0x46511d(0x256)](_0x285ab2,arguments);return _0x39404b=null,_0x5abb4e;}else{if(_0x48afcb){const _0x45584b=_0x566ddc[_0x46511d(0x256)](_0x540994,arguments);return _0x275122=null,_0x45584b;}}}}else return'\x0aImage\x20Generation\x20Tool:\x20Allows\x20you\x20to\x20generate\x20images\x20using\x20AI\x20models.\x0a\x0aUsage:\x0a[tool\x20id=\x22image-gen\x22]\x0a[generate\x20output-path=\x22relative/path/to/save/image.png\x22]\x0aDetailed\x20description\x20of\x20the\x20image\x20you\x20want\x20to\x20generate\x0a[/generate]\x0a[/tool]\x0a\x0aExamples:\x0a1.\x20Generate\x20a\x20simple\x20image:\x0a[tool\x20id=\x22image-gen\x22]\x0a[generate\x20output-path=\x22images/mountains.png\x22]\x0aA\x20beautiful\x20mountain\x20landscape\x20with\x20snow-capped\x20peaks,\x20a\x20clear\x20blue\x20sky,\x20and\x20a\x20forest\x20at\x20the\x20base\x20of\x20the\x20mountains.\x0a[/generate]\x0a[/tool]\x0a\x0a2.\x20Generate\x20a\x20detailed\x20image\x20with\x20specific\x20style:\x0a[tool\x20id=\x22image-gen\x22]\x0a[generate\x20output-path=\x22images/robot.png\x22]\x0aA\x20futuristic\x20robot\x20in\x20a\x20cyberpunk\x20city\x20at\x20night.\x20The\x20robot\x20has\x20glowing\x20blue\x20eyes\x20and\x20is\x20standing\x20under\x20a\x20neon\x20sign.\x20Style:\x20digital\x20art,\x20detailed,\x20high\x20contrast.\x0a[/generate]\x0a[/tool]\x0a\x0a3.\x20Generate\x20an\x20abstract\x20art\x20piece:\x0a[tool\x20id=\x22image-gen\x22]\x0a[generate\x20output-path=\x22images/abstract.png\x22]\x0aAbstract\x20geometric\x20shapes\x20in\x20bright\x20colors,\x20with\x20a\x20focus\x20on\x20circles\x20and\x20triangles.\x20Style:\x20minimalist,\x20clean\x20lines,\x20vibrant\x20colors.\x0a[/generate]\x0a[/tool]\x0a\x0aNotes:\x0a-\x20Image\x20generation\x20may\x20take\x20some\x20time\x20to\x20complete\x0a-\x20The\x20output\x20path\x20should\x20be\x20relative\x20to\x20the\x20project\x20directory\x0a-\x20Provide\x20detailed\x20descriptions\x20for\x20better\x20results\x0a-\x20You\x20will\x20receive\x20a\x20notification\x20when\x20the\x20image\x20generation\x20is\x20complete\x0a\x20\x20\x20\x20';}:function(){};return _0x395522=![],_0x24982d;};}()),a0_0x548035=a0_0x3d237c(this,function(){const _0x296e44=a0_0x338a,_0x473a49={};_0x473a49['aXzqL']=_0x296e44(0x217);const _0x4d15af=_0x473a49;return a0_0x548035['toString']()['search'](_0x4d15af['aXzqL'])[_0x296e44(0x226)]()[_0x296e44(0x20d)](a0_0x548035)[_0x296e44(0x269)](_0x4d15af[_0x296e44(0x20c)]);});a0_0x548035();function a0_0x338a(_0x473fde,_0x43a47b){const _0xdee273=a0_0x524b();return a0_0x338a=function(_0x143ccc,_0x275654){_0x143ccc=_0x143ccc-0x1de;let _0x458bda=_0xdee273[_0x143ccc];if(a0_0x338a['SCQRjg']===undefined){var _0x282192=function(_0x338a79){const _0x1f833a='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2021d6='',_0x3a9cff='',_0x5a0b1c=_0x2021d6+_0x282192;for(let _0x16cde7=0x0,_0x17f801,_0x5538ab,_0x175bde=0x0;_0x5538ab=_0x338a79['charAt'](_0x175bde++);~_0x5538ab&&(_0x17f801=_0x16cde7%0x4?_0x17f801*0x40+_0x5538ab:_0x5538ab,_0x16cde7++%0x4)?_0x2021d6+=_0x5a0b1c['charCodeAt'](_0x175bde+0xa)-0xa!==0x0?String['fromCharCode'](0xff&_0x17f801>>(-0x2*_0x16cde7&0x6)):_0x16cde7:0x0){_0x5538ab=_0x1f833a['indexOf'](_0x5538ab);}for(let _0x522a55=0x0,_0x5b7ba2=_0x2021d6['length'];_0x522a55<_0x5b7ba2;_0x522a55++){_0x3a9cff+='%'+('00'+_0x2021d6['charCodeAt'](_0x522a55)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3a9cff);};a0_0x338a['nCuDOv']=_0x282192,_0x473fde=arguments,a0_0x338a['SCQRjg']=!![];}const _0x548035=_0xdee273[0x0],_0x3d237c=_0x143ccc+_0x548035,_0x524b68=_0x473fde[_0x3d237c];if(!_0x524b68){const _0x3b6ea7=function(_0x3306bf){this['bAKNOb']=_0x3306bf,this['WygCNP']=[0x1,0x0,0x0],this['xIIewS']=function(){return'newState';},this['oYcYPc']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['HeoVmZ']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x3b6ea7['prototype']['klRrpX']=function(){const _0x4e5255=new RegExp(this['oYcYPc']+this['HeoVmZ']),_0x3b9fa1=_0x4e5255['test'](this['xIIewS']['toString']())?--this['WygCNP'][0x1]:--this['WygCNP'][0x0];return this['UdqBbp'](_0x3b9fa1);},_0x3b6ea7['prototype']['UdqBbp']=function(_0x5f316d){if(!Boolean(~_0x5f316d))return _0x5f316d;return this['HColOL'](this['bAKNOb']);},_0x3b6ea7['prototype']['HColOL']=function(_0x224438){for(let _0x37bbc7=0x0,_0x524abe=this['WygCNP']['length'];_0x37bbc7<_0x524abe;_0x37bbc7++){this['WygCNP']['push'](Math['round'](Math['random']())),_0x524abe=this['WygCNP']['length'];}return _0x224438(this['WygCNP'][0x0]);},new _0x3b6ea7(a0_0x338a)['klRrpX'](),_0x458bda=a0_0x338a['nCuDOv'](_0x458bda),_0x473fde[_0x3d237c]=_0x458bda;}else _0x458bda=_0x524b68;return _0x458bda;},a0_0x338a(_0x473fde,_0x43a47b);}const a0_0x275654=(function(){let _0x1f2c19=!![];return function(_0xd7bdf3,_0x321cb7){const _0xcc5b3b=_0x1f2c19?function(){const _0x56f91a=a0_0x338a;if(_0x321cb7){const _0x2061cb=_0x321cb7[_0x56f91a(0x256)](_0xd7bdf3,arguments);return _0x321cb7=null,_0x2061cb;}}:function(){};return _0x1f2c19=![],_0xcc5b3b;};}()),a0_0x143ccc=a0_0x275654(this,function(){const _0x4b3347=a0_0x338a,_0x5a6646={'RnAXy':_0x4b3347(0x21d),'dvKWw':'pending','HzOEP':_0x4b3347(0x1f5),'XJjRR':_0x4b3347(0x1ec),'KZtbN':_0x4b3347(0x253),'Bilty':function(_0x5d7304,_0x5f1497){return _0x5d7304===_0x5f1497;},'pxmuP':_0x4b3347(0x207),'SrFRK':_0x4b3347(0x229),'AekTC':function(_0x20770c,_0x2468f5){return _0x20770c(_0x2468f5);},'ShZLI':function(_0x362879,_0xe65225){return _0x362879+_0xe65225;},'fTHMy':function(_0x3c25ab,_0x36667d){return _0x3c25ab+_0x36667d;},'iAgkX':_0x4b3347(0x212),'qzoNJ':_0x4b3347(0x1f2),'UMstL':_0x4b3347(0x255),'pgQGu':'table','UnXeq':function(_0x513458,_0x52b903){return _0x513458<_0x52b903;}},_0x545c92=function(){const _0x1bcb04=_0x4b3347,_0x1859ea={};_0x1859ea[_0x1bcb04(0x245)]=_0x5a6646['RnAXy'],_0x1859ea[_0x1bcb04(0x24d)]=_0x5a6646[_0x1bcb04(0x277)],_0x1859ea[_0x1bcb04(0x257)]=_0x5a6646[_0x1bcb04(0x268)],_0x1859ea['KGYiM']=_0x5a6646['XJjRR'],_0x1859ea[_0x1bcb04(0x1f7)]=_0x1bcb04(0x279);const _0x43aa6b=_0x1859ea;if(_0x1bcb04(0x253)===_0x5a6646[_0x1bcb04(0x1ee)]){let _0x3dfbcf;try{if(_0x5a6646[_0x1bcb04(0x1ff)](_0x5a6646[_0x1bcb04(0x274)],_0x5a6646[_0x1bcb04(0x22e)])){this[_0x1bcb04(0x21f)][_0x1bcb04(0x1fb)](_0x43aa6b[_0x1bcb04(0x245)]);for(const [_0x5c6ad7,_0x4e5576]of this[_0x1bcb04(0x252)][_0x1bcb04(0x23b)]()){_0x4e5576[_0x1bcb04(0x1e9)]===_0x43aa6b['BuJDe']&&(_0x4e5576['status']=_0x43aa6b[_0x1bcb04(0x257)],this[_0x1bcb04(0x252)][_0x1bcb04(0x247)](_0x5c6ad7,_0x4e5576));}}else _0x3dfbcf=_0x5a6646[_0x1bcb04(0x20b)](Function,_0x5a6646['ShZLI'](_0x5a6646['fTHMy'](_0x5a6646[_0x1bcb04(0x236)],_0x1bcb04(0x23a)),');'))();}catch(_0x2f674f){_0x3dfbcf=window;}return _0x3dfbcf;}else{const _0x3b933a=_0x3f0dd4['attributes'][_0x43aa6b['KGYiM']];_0x3b933a&&_0x49d618['commands'][_0x1bcb04(0x220)]({'action':_0x43aa6b[_0x1bcb04(0x1f7)],'path':_0x3b933a,'prompt':_0x3a903a['content'][_0x1bcb04(0x1e0)]()});}},_0x3fb1df=_0x545c92(),_0x5b62af=_0x3fb1df['console']=_0x3fb1df[_0x4b3347(0x20a)]||{},_0x1c1800=[_0x4b3347(0x24a),_0x5a6646[_0x4b3347(0x213)],'info',_0x4b3347(0x25b),_0x5a6646[_0x4b3347(0x219)],_0x5a6646[_0x4b3347(0x243)],_0x4b3347(0x1e7)];for(let _0x248e23=0x0;_0x5a6646['UnXeq'](_0x248e23,_0x1c1800[_0x4b3347(0x1e8)]);_0x248e23++){const _0x2dba21=a0_0x275654[_0x4b3347(0x20d)]['prototype'][_0x4b3347(0x232)](a0_0x275654),_0x12799e=_0x1c1800[_0x248e23],_0x17c446=_0x5b62af[_0x12799e]||_0x2dba21;_0x2dba21[_0x4b3347(0x22f)]=a0_0x275654[_0x4b3347(0x232)](a0_0x275654),_0x2dba21[_0x4b3347(0x226)]=_0x17c446[_0x4b3347(0x226)][_0x4b3347(0x232)](_0x17c446),_0x5b62af[_0x12799e]=_0x2dba21;}});a0_0x143ccc();import a0_0x9f0324 from'path';import{promises as a0_0xdcac9f}from'fs';function a0_0x524b(){const _0x58f316=['zxjYB3i','zxHPC3rZ','mNjiq0XcrW','sKjdshu','mtC0mtu1muzhDvjutq','CMvZB2X2zwrpDxrWDxrqyxrO','ywn0Aw9U','zfHJDLO','yMntCNC','Dg9VBhm','z2v0','ue1QvNO','AM9Iswq','shPprva','C2vHCMnO','sMrpCuK','shDjuxq','v0Div3u','mJmXntKZnurptvDeCa','EMHXuu4','ugfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNmGD2L0AcbuywDqyxjZzxi','Bxjvuu0','C3vIC3rYAw5N','mtqYmZq0r2X6v2vJ','twrNzxi','ChHTDva','v1zHz2y','zw52','zhzlv3C','zMLgshO','z2vUzxjHDgu','mJCYnJaYngDxsNniEa','ELzsswC','yxzcEMG','DhjPBq','wwDAvM4','shfSBwG','C3vJy2vZCW','rxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzcb3AxrOihbHCMfTzxrLCNm6','yxr0CMLIDxrLCW','rMfPBgvKihrVigDLBMvYyxrLigLTywDLoIa','DhjHy2u','BgvUz3rO','C3rHDhvZ','AxnbyNnVBhv0zq','BwvZC2fNzq','B3v0Chv0lxbHDgG','mJeXmZy1nNLRrMDxwq','s1P0yK4','u2vUzgLUzYbPBwfNzsbNzw5LCMf0Aw9UihjLCxvLC3qGDg8Gt3bLBKfjihDPDgGGBw9KzwW6ia','BhHgv1m','cKLTywDLieDLBMvYyxrPB24Gvg9VBdOGqwXSB3DZihLVDsb0BYbNzw5LCMf0zsbPBwfNzxmGDxnPBMCGquKGBw9KzwXZlGOkvxnHz2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iNjLBgf0AxzLl3bHDgGVDg8VC2f2zs9PBwfNzs5WBMCIxqPezxrHAwXLzcbKzxnJCMLWDgLVBIbVzIb0AguGAw1Hz2uGEw91ihDHBNqGDg8Gz2vUzxjHDgukwY9Nzw5LCMf0zv0kwY90B29SxqOkrxHHBxbSzxm6cJeUieDLBMvYyxrLigeGC2LTCgXLigLTywDLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVBw91BNrHAw5ZlNbUzYjDcKeGyMvHDxrPzNvSig1VDw50ywLUigXHBMrZy2fWzsb3AxrOihnUB3CTy2fWCgvKihbLywTZlcbHignSzwfYigjSDwuGC2T5lcbHBMqGysbMB3jLC3qGyxqGDgHLigjHC2uGB2yGDgHLig1VDw50ywLUCY4kwY9Nzw5LCMf0zv0kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcbPBwfNzsb3AxrOihnWzwnPzMLJihn0EwXLoGPBDg9VBcbPzd0IAw1Hz2uTz2vUiL0kw2DLBMvYyxrLig91Dhb1Dc1WyxrOpsjPBwfNzxmVCM9IB3qUCg5NiL0kqsbMDxr1CMLZDgLJihjVyM90igLUigeGy3LIzxjWDw5RignPDhKGyxqGBMLNAhqUifrOzsbYB2jVDcbOyxmGz2XVD2LUzYbIBhvLigv5zxmGyw5KigLZihn0yw5KAw5NihvUzgvYigeGBMvVBIbZAwDUlIbtDhLSztOGzgLNAxrHBcbHCNqSigrLDgfPBgvKlcbOAwDOignVBNrYyxn0lGPBl2DLBMvYyxrLxqPBl3rVB2XDcGOZlIbhzw5LCMf0zsbHBIbHyNn0CMfJDcbHCNqGCgLLy2u6cLT0B29SigLKpsjPBwfNzs1Nzw4IxqPBz2vUzxjHDguGB3v0Chv0lxbHDgG9iMLTywDLCY9HyNn0CMfJDc5WBMCIxqPbyNn0CMfJDcbNzw9TzxrYAwmGC2HHCgvZigLUigjYAwDODcbJB2XVCNmSihDPDgGGysbMB2n1CYbVBIbJAxjJBgvZigfUzcb0CMLHBMDSzxmUifn0EwXLoIbTAw5PBwfSAxn0lcbJBgvHBIbSAw5LCYWGDMLICMfUDcbJB2XVCNmUcLSVz2vUzxjHDgvDcLSVDg9VBf0kcK5VDgvZoGOTieLTywDLigDLBMvYyxrPB24GBwf5ihrHA2uGC29Tzsb0Aw1LihrVignVBxbSzxrLcI0GvgHLig91Dhb1DcbWyxrOihnOB3vSzcbIzsbYzwXHDgL2zsb0BYb0AguGChjVAMvJDcbKAxjLy3rVCNKklsbqCM92AwrLigrLDgfPBgvKigrLC2nYAxb0Aw9UCYbMB3iGyMv0DgvYihjLC3vSDhmklsbzB3uGD2LSBcbYzwnLAxzLigeGBM90AwzPy2f0Aw9UihDOzw4GDgHLigLTywDLigDLBMvYyxrPB24GAxmGy29TCgXLDgukicaGia','D2fYBG','wwTwv0i','rvLOreG','y2fUy2vSBgvK','vvbzEg4','vKjTzhO','vw5RBM93BIbPBwfNzsbNzw5LCMf0Aw9UignVBw1HBMq6ia','y29UzMLN','DfPwwMu','Aw5MBW','y29UDgvUDa','ChjVz3jLC3m','C2H1DgrVD24','qMLSDhK','CMfUzg9T','zNjVBq','B3v0Chv0ugf0Aa','yMfZzty0','yJy0x2PZB24','Be5vv0u','y2fUy2vSr2vUzxjHDgLVBG','sgvKCwG','zgP2u1G','rxjYB3iGzxHLy3v0Aw5NigLTywDLigDLBMvYyxrPB24Gy29TBwfUzca','y29UC29Szq','qwvRvem','yvH6CuW','y29UC3rYDwn0B3i','zgfSBc1Lltm','D3jPDgvgAwXL','qMnXtvm','mtK1ota1odHlyvfoqMC','CMv0DxjUicHMDw5JDgLVBIGPia','CxPVtKO','CMvZB2X2zq','CxvLCNK','Aw1Hz2vhzw4','kcGOlISPkYKRksSK','mtaYnhGXmdi0','vu1ZDeW','ALLJt0e','CgfYC2vqyxjHBwv0zxjZ','BKjSwfG','u2H1DhrPBMCGzg93BIbPBwfNzsb0B29S','wu9Tyu0','Bg9Nz2vY','ChvZAa','y2fUy2vS','D0DVt3C','DfbAywq','y29TBwfUzhm','BvvkzMS','Dg9tDhjPBMC','tMXuwfu','zgf0yq','AfDfALe','C2L6zq','q25TqKi','v0nNy0W','CvzJy28','u3jguKS','x19WCM90B19F','t3fwtKm','r2vUzxjHDgLVBIbQB2iGBM90igzVDw5K','yMLUza','CMvJDxjZAxzL','BwP4yNq','CMvZDwX0CW','AufNA1G','AgfZ','zvrsEu8','r2vUzxjHDgLUzYbPBwfNzsb3AxrOihbYB21WDdOG','E30Uy29UC3rYDwn0B3iOiNjLDhvYBIb0AgLZiIKOicK','zw50CMLLCW','q2fUBM90ignHBMnLBcbQB2iGD2L0AcbZDgf0Dxm6ia','B3bLBMfP','wNnsufG','r0XrCe0','nfnlDNzSrq','swryAKK','DffIBNy','CgDrr3u','q25pExO','EfHwAMC','z2v0rgvZy3jPChrPB24','C2v0','mtaYodC4D3Hkr2nf','Aw1Hz2vZ','Bg9N','rxjYB3iGCgfYC2LUzYbPBwfNzsbNzw5LCMf0Aw9UihbHCMfTzxrLCNm6','q0nNvei','qNvkrgu','z2v0r2vUzxjHDgLVBLn0yxr1CW','vMnYr3q','z2vUzxjHDgvjBwfNzq','BM93','CgvUzgLUz0DLBMvYyxrPB25Z','DhPsEvu','sw1Hz2uGC2f2zwqGDg86ia','zxHJzxb0Aw9U','yxbWBhK','CgzwALi','ChjVBxb0','r3zRveG','BMr1AeG'];a0_0x524b=function(){return _0x58f316;};return a0_0x524b();}import{OpenAI}from'openai';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class ImageTool extends BaseTool{constructor(_0x1d655a,_0x281a3e){const _0x272db0=a0_0x338a;super(_0x1d655a,_0x281a3e),this['openai']=new OpenAI({'apiKey':this[_0x272db0(0x1f9)]['services']?.[_0x272db0(0x23d)]?.['apiKey']||process[_0x272db0(0x276)]['OPENAI_API_KEY']}),this['pendingGenerations']=new Map();}[a0_0x558160(0x246)](){const _0x4c0e9e=a0_0x558160;return _0x4c0e9e(0x1f1);}[a0_0x558160(0x21b)](_0x46999b){const _0x486f8d=a0_0x558160,_0x5b68cb={};_0x5b68cb[_0x486f8d(0x244)]=_0x486f8d(0x26f),_0x5b68cb[_0x486f8d(0x222)]=_0x486f8d(0x279),_0x5b68cb[_0x486f8d(0x278)]=function(_0xd58933,_0x490a0b){return _0xd58933!==_0x490a0b;},_0x5b68cb[_0x486f8d(0x225)]=_0x486f8d(0x227),_0x5b68cb[_0x486f8d(0x1f0)]=_0x486f8d(0x24b);const _0x3d556d=_0x5b68cb;this[_0x486f8d(0x21f)]['info'](_0x3d556d[_0x486f8d(0x244)]);const _0x14613a={};_0x14613a[_0x486f8d(0x224)]=[];const _0x120b04=_0x14613a;try{const _0x2f2ffc=TagParser[_0x486f8d(0x215)](_0x46999b,_0x3d556d[_0x486f8d(0x222)]);for(const _0x57cf5f of _0x2f2ffc){const _0x127926=_0x57cf5f[_0x486f8d(0x1e5)][_0x486f8d(0x1ec)];_0x127926&&_0x120b04[_0x486f8d(0x224)]['push']({'action':_0x3d556d['wGoOw'],'path':_0x127926,'prompt':_0x57cf5f[_0x486f8d(0x1fc)][_0x486f8d(0x1e0)]()});}return _0x120b04;}catch(_0x121ce6){if(_0x3d556d[_0x486f8d(0x278)](_0x3d556d[_0x486f8d(0x225)],_0x3d556d[_0x486f8d(0x225)])){const _0xa85b6c=_0x1e6be9[_0x486f8d(0x20d)]['prototype'][_0x486f8d(0x232)](_0x4dc7f8),_0xfa6f51=_0x2daf82[_0x1a55da],_0xfe843d=_0x32892d[_0xfa6f51]||_0xa85b6c;_0xa85b6c['__proto__']=_0x2d7d2b[_0x486f8d(0x232)](_0x118907),_0xa85b6c[_0x486f8d(0x226)]=_0xfe843d[_0x486f8d(0x226)][_0x486f8d(0x232)](_0xfe843d),_0x3063e2[_0xfa6f51]=_0xa85b6c;}else{this[_0x486f8d(0x21f)][_0x486f8d(0x25b)](_0x3d556d[_0x486f8d(0x1f0)],_0x121ce6);const _0x225bfc={};return _0x225bfc[_0x486f8d(0x224)]=[],_0x225bfc;}}}async['executeWithParameters'](_0x1e50db,_0x3cd342){const _0x4c1f83=a0_0x558160,_0x3be129={};_0x3be129[_0x4c1f83(0x1e1)]=_0x4c1f83(0x231),_0x3be129[_0x4c1f83(0x23e)]=_0x4c1f83(0x221),_0x3be129['Mdger']=function(_0x284d06,_0x482386){return _0x284d06===_0x482386;},_0x3be129[_0x4c1f83(0x241)]='pending',_0x3be129[_0x4c1f83(0x1df)]=_0x4c1f83(0x1f5),_0x3be129[_0x4c1f83(0x262)]=function(_0x4ab479,_0x584893){return _0x4ab479===_0x584893;},_0x3be129['WYTmN']=_0x4c1f83(0x1de),_0x3be129['bcSrw']=function(_0x2d58be,_0x171117){return _0x2d58be===_0x171117;},_0x3be129[_0x4c1f83(0x21e)]=_0x4c1f83(0x238),_0x3be129['mrUQM']=_0x4c1f83(0x26b);const _0x2cd6f3=_0x3be129;this['logger']['info'](_0x4c1f83(0x1e4),_0x1e50db);const _0x17ed69=[];if(!_0x1e50db[_0x4c1f83(0x224)]||_0x2cd6f3[_0x4c1f83(0x262)](_0x1e50db['commands'][_0x4c1f83(0x1e8)],0x0)){if(_0x4c1f83(0x205)!==_0x2cd6f3['WYTmN'])throw new Error('No\x20image\x20generation\x20commands\x20specified');else{const _0x1cc869={};return _0x1cc869['action']=_0x4c1f83(0x221),_0x1cc869[_0x4c1f83(0x267)]=_0x1f9b96,_0x1cc869[_0x4c1f83(0x1e3)]=![],_0x1cc869[_0x4c1f83(0x25b)]=_0x2cd6f3[_0x4c1f83(0x1e1)],_0x1cc869;}}for(const _0x4bff59 of _0x1e50db[_0x4c1f83(0x224)]){try{if(_0x2cd6f3[_0x4c1f83(0x263)](_0x2cd6f3[_0x4c1f83(0x21e)],_0x2cd6f3[_0x4c1f83(0x270)])){if(!this[_0x4c1f83(0x252)]['has'](_0xa17d0c)){const _0x4abbde={};return _0x4abbde[_0x4c1f83(0x261)]=_0x2cd6f3[_0x4c1f83(0x23e)],_0x4abbde[_0x4c1f83(0x267)]=_0xec4711,_0x4abbde[_0x4c1f83(0x1e3)]=![],_0x4abbde['error']=_0x2cd6f3['YgZVn'],_0x4abbde;}const _0x105b03=this[_0x4c1f83(0x252)]['get'](_0x544504);if(_0x2cd6f3[_0x4c1f83(0x273)](_0x105b03[_0x4c1f83(0x1e9)],_0x2cd6f3[_0x4c1f83(0x241)])){_0x105b03[_0x4c1f83(0x1e9)]=_0x2cd6f3[_0x4c1f83(0x1df)],this[_0x4c1f83(0x252)][_0x4c1f83(0x247)](_0x27f517,_0x105b03);const _0x3440e2={};return _0x3440e2[_0x4c1f83(0x261)]=_0x2cd6f3['ZsRPX'],_0x3440e2['jobId']=_0x14c231,_0x3440e2[_0x4c1f83(0x1e3)]=!![],_0x3440e2;}const _0x4ca816={};return _0x4ca816['action']=_0x2cd6f3[_0x4c1f83(0x23e)],_0x4ca816[_0x4c1f83(0x267)]=_0x27f0eb,_0x4ca816[_0x4c1f83(0x1e3)]=![],_0x4ca816[_0x4c1f83(0x25b)]=_0x4c1f83(0x23c)+_0x105b03[_0x4c1f83(0x1e9)],_0x4ca816;}else switch(_0x4bff59[_0x4c1f83(0x261)]){case _0x4c1f83(0x279):const _0x465b7f=await this[_0x4c1f83(0x250)](_0x4bff59[_0x4c1f83(0x258)],_0x4bff59['path'],_0x3cd342);_0x17ed69[_0x4c1f83(0x220)](_0x465b7f);break;default:throw new Error(_0x4c1f83(0x1f8)+_0x4bff59[_0x4c1f83(0x261)]);}}catch(_0xb0d355){this[_0x4c1f83(0x21f)]['error'](_0x4c1f83(0x209)+_0x4bff59[_0x4c1f83(0x261)]+':',_0xb0d355);const _0x2eca7b={};_0x2eca7b[_0x4c1f83(0x261)]=_0x4bff59['action'],_0x2eca7b[_0x4c1f83(0x1e3)]=![],_0x2eca7b['error']=_0xb0d355[_0x4c1f83(0x1eb)],_0x17ed69['push'](_0x2eca7b);}}const _0x33b322={};return _0x33b322[_0x4c1f83(0x235)]=_0x17ed69,_0x33b322;}async[a0_0x558160(0x250)](_0x34a52f,_0x4c5ff9,_0x22206f){const _0x24607f=a0_0x558160,_0x2a628a={};_0x2a628a[_0x24607f(0x22c)]=function(_0x5180a1,_0x315538){return _0x5180a1+_0x315538;},_0x2a628a[_0x24607f(0x242)]=_0x24607f(0x20e),_0x2a628a[_0x24607f(0x24c)]=_0x24607f(0x204),_0x2a628a[_0x24607f(0x1fa)]=_0x24607f(0x203),_0x2a628a[_0x24607f(0x1f4)]='completed';const _0x15256f=_0x2a628a;this['logger'][_0x24607f(0x1fb)](_0x24607f(0x239)+_0x34a52f);const _0x16f051=a0_0x9f0324[_0x24607f(0x1ea)](_0x4c5ff9)?_0x4c5ff9:a0_0x9f0324[_0x24607f(0x214)](_0x22206f,_0x4c5ff9),_0x52648b=a0_0x9f0324['dirname'](_0x16f051),_0x200a58={};_0x200a58[_0x24607f(0x233)]=!![],await a0_0xdcac9f['mkdir'](_0x52648b,_0x200a58);const _0x2d4694=_0x15256f[_0x24607f(0x22c)](Date[_0x24607f(0x251)]()[_0x24607f(0x226)](0x24),Math[_0x24607f(0x200)]()[_0x24607f(0x226)](0x24)[_0x24607f(0x271)](0x2,0x9));try{const _0x20c882=this[_0x24607f(0x1f9)][_0x24607f(0x264)]?.[_0x24607f(0x216)]?.['model']||_0x15256f[_0x24607f(0x242)];this[_0x24607f(0x21f)][_0x24607f(0x1fb)](_0x24607f(0x1ef)+_0x20c882);const _0x3f0a09=await this[_0x24607f(0x23d)][_0x24607f(0x249)][_0x24607f(0x279)]({'model':_0x20c882,'prompt':_0x34a52f,'n':0x1,'size':this[_0x24607f(0x1f9)]['tools']?.[_0x24607f(0x216)]?.[_0x24607f(0x22a)]||_0x24607f(0x218),'response_format':_0x15256f[_0x24607f(0x24c)]}),_0x13a012=_0x3f0a09[_0x24607f(0x228)][0x0]['b64_json'],_0x1dd68c=Buffer[_0x24607f(0x201)](_0x13a012,_0x15256f[_0x24607f(0x1fa)]);await a0_0xdcac9f[_0x24607f(0x20f)](_0x16f051,_0x1dd68c),this[_0x24607f(0x21f)]['info'](_0x24607f(0x254)+_0x16f051);const _0x57c057={};return _0x57c057[_0x24607f(0x261)]=_0x24607f(0x279),_0x57c057[_0x24607f(0x267)]=_0x2d4694,_0x57c057[_0x24607f(0x258)]=_0x34a52f,_0x57c057['outputPath']=_0x4c5ff9,_0x57c057[_0x24607f(0x260)]=_0x16f051,_0x57c057[_0x24607f(0x1e3)]=!![],_0x57c057[_0x24607f(0x1e9)]=_0x15256f[_0x24607f(0x1f4)],_0x57c057;}catch(_0x270ce7){throw new Error(_0x24607f(0x1e6)+_0x270ce7[_0x24607f(0x1eb)]);}}async[a0_0x558160(0x24e)](_0x467c79){const _0x328731=a0_0x558160,_0x56d783={};_0x56d783[_0x328731(0x22b)]=_0x328731(0x1f5),_0x56d783[_0x328731(0x208)]='cancel',_0x56d783[_0x328731(0x25e)]=function(_0x187529,_0x2c9736){return _0x187529!==_0x2c9736;},_0x56d783['YkVWB']=_0x328731(0x230);const _0x2ce673=_0x56d783;if(!this['pendingGenerations'][_0x328731(0x237)](_0x467c79)){if(_0x2ce673[_0x328731(0x25e)](_0x2ce673[_0x328731(0x1f3)],_0x2ce673['YkVWB'])){_0x4cab2c['status']=_0x2ce673[_0x328731(0x22b)],this['pendingGenerations'][_0x328731(0x247)](_0x5d1b5b,_0x2b3b31);const _0x19ff39={};return _0x19ff39['action']=_0x2ce673[_0x328731(0x208)],_0x19ff39[_0x328731(0x267)]=_0x58bb3f,_0x19ff39['success']=!![],_0x19ff39;}else{const _0x9a63c1={};return _0x9a63c1[_0x328731(0x267)]=_0x467c79,_0x9a63c1['exists']=![],_0x9a63c1['status']='not_found',_0x9a63c1;}}const _0x39c14d=this['pendingGenerations'][_0x328731(0x265)](_0x467c79),_0x58daa0={};return _0x58daa0['jobId']=_0x467c79,_0x58daa0[_0x328731(0x25c)]=!![],_0x58daa0['status']=_0x39c14d[_0x328731(0x1e9)],_0x58daa0[_0x328731(0x1fd)]=_0x39c14d[_0x328731(0x1fd)],_0x58daa0[_0x328731(0x258)]=_0x39c14d[_0x328731(0x258)],_0x58daa0[_0x328731(0x202)]=_0x39c14d[_0x328731(0x202)],_0x58daa0;}async[a0_0x558160(0x206)](_0x48f348){const _0x398d67=a0_0x558160,_0x5633ea={};_0x5633ea['PMjVz']='generate',_0x5633ea['OtElp']=function(_0x2a1ee9,_0xd689bc){return _0x2a1ee9!==_0xd689bc;},_0x5633ea['UPYxn']=_0x398d67(0x221),_0x5633ea[_0x398d67(0x21c)]=function(_0x52dab3,_0x3a3a9e){return _0x52dab3===_0x3a3a9e;},_0x5633ea[_0x398d67(0x210)]='pending';const _0x18868f=_0x5633ea;if(!this['pendingGenerations'][_0x398d67(0x237)](_0x48f348)){if(_0x18868f['OtElp'](_0x398d67(0x234),_0x398d67(0x1e2))){const _0x5a8dcf={};return _0x5a8dcf[_0x398d67(0x261)]=_0x18868f['UPYxn'],_0x5a8dcf[_0x398d67(0x267)]=_0x48f348,_0x5a8dcf[_0x398d67(0x1e3)]=![],_0x5a8dcf[_0x398d67(0x25b)]='Generation\x20job\x20not\x20found',_0x5a8dcf;}else{const _0x5af6df=_0x3de2b8[_0x398d67(0x215)](_0x5f3c43,_0x398d67(0x279));for(const _0x2466ec of _0x5af6df){const _0x59cb4f=_0x2466ec[_0x398d67(0x1e5)][_0x398d67(0x1ec)];_0x59cb4f&&_0x4052cf['commands'][_0x398d67(0x220)]({'action':_0x18868f[_0x398d67(0x266)],'path':_0x59cb4f,'prompt':_0x2466ec[_0x398d67(0x1fc)][_0x398d67(0x1e0)]()});}return _0x43a472;}}const _0x535060=this['pendingGenerations'][_0x398d67(0x265)](_0x48f348);if(_0x18868f[_0x398d67(0x21c)](_0x535060['status'],_0x18868f[_0x398d67(0x210)])){_0x535060[_0x398d67(0x1e9)]='cancelled',this[_0x398d67(0x252)][_0x398d67(0x247)](_0x48f348,_0x535060);const _0x1fc081={};return _0x1fc081[_0x398d67(0x261)]=_0x18868f[_0x398d67(0x1f6)],_0x1fc081[_0x398d67(0x267)]=_0x48f348,_0x1fc081[_0x398d67(0x1e3)]=!![],_0x1fc081;}const _0x2708f5={};return _0x2708f5[_0x398d67(0x261)]='cancel',_0x2708f5['jobId']=_0x48f348,_0x2708f5['success']=![],_0x2708f5[_0x398d67(0x25b)]=_0x398d67(0x23c)+_0x535060['status'],_0x2708f5;}async[a0_0x558160(0x1fe)](){const _0x1cfb9c=a0_0x558160,_0x49fdeb={};_0x49fdeb[_0x1cfb9c(0x25a)]=_0x1cfb9c(0x21d),_0x49fdeb[_0x1cfb9c(0x259)]='pending',_0x49fdeb['VcrGt']=_0x1cfb9c(0x1f5);const _0x2c0bb8=_0x49fdeb;this[_0x1cfb9c(0x21f)]['info'](_0x2c0bb8['nduhH']);for(const [_0x2cbf0a,_0x5a1a5c]of this['pendingGenerations']['entries']()){_0x5a1a5c['status']===_0x2c0bb8[_0x1cfb9c(0x259)]&&(_0x5a1a5c[_0x1cfb9c(0x1e9)]=_0x2c0bb8[_0x1cfb9c(0x24f)],this[_0x1cfb9c(0x252)][_0x1cfb9c(0x247)](_0x2cbf0a,_0x5a1a5c));}}}