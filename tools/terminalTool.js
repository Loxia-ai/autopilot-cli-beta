const a0_0x2bc939=a0_0x4ddf;function a0_0x3558(){const _0x5496f3=['z2v0q29UDgLUDw91C091Dhb1Da','ntzgENHAEwy','zxHPDenVzgu','CMvJzw50u3rKB3v0','4OcIie5VzguUANm6ifvZzsbWywnRywDLig1HBMfNzxiGkgfWDcbPBNn0ywXSig5VzgvQCYbUCg0Pig9Yig52BqO','yxv0BW','ChL0Ag9UmW','iGOGicaGicaGiaOGicaGicaGicmGtg9HzcbZAgvSBcbWCM9MAwXLigzPBgvZcIaGicaGicaGzM9YihbYB2zPBguGAw4GFI8UyMfZAhjJih4VlMjHC2HFChjVzMLSzsb+lY56C2HYyYb+lY5WCM9MAwXLoYbKBWOGicaGicaGicaGwYaTzIaIjhbYB2zPBguIif0GjIyGC291CMnLiciKChjVzMLSzsiGmJ4Vzgv2l251BgWGFhWGDhj1zqOGicaGicaGigrVBMukicaGicaGicakicaGicaGicaJiev4zwn1DguGDgHLignVBw1HBMqkicaGicaGica','zxjYB3i','cIaGicaGia','DxnLCMrLBa','q29TBwfUzcbLCNjVCJOG','C2HLBgW','C3rHCNrZv2L0Aa','zw52xW','zw5K','l2jPBI9ZAa','x2nOyw5NzurPCMvJDg9YEq','ChjVy2vZC0LK','Aw5WDxqTDMfSDwu','l2jPBI9IyxnO','w0fsuK9xx0rpv05D','qxbWrgf0yq','y29TBwfUzhm','mtuWsMLUrgHt','lM5WBs1NBg9IywW','DMfSAwrHDgvdB25MAwD1CMf0Aw9U','ywn0Aw9U','y29TBwfUzeHPC3rVCNK','lNb5zw52','BxmGlYa','ywn0AxzLuhjVy2vZC2vZ','B3bLBMjZza','q09nu1bfqW','C3rHCNruAw1L','C2HHCMu','BgfZDefJDgL2Axr5','D3jPDgu','l2jPBG','z2v0lxnLC3nPB24TAw5MBW','l3vZCI9IAw4','CgTPBgW','cVcFKQeGqwz0zxiGAw5ZDgfSBgf0Aw9UlcbYzxn0yxj0ihLVDxiGDgvYBwLUywWGyw5KihrYEsbHz2fPBI4k','rxjYB3iGCgfYC2LUzYb0zxjTAw5HBcbWyxjHBwv0zxjZoG','ywnJzxnZ','w0nuuKXFrf0','mJy0zerwrhvL','4OcIieDPDdOGvxnLihbHy2THz2uGBwfUywDLCIaOyxb0igLUC3rHBgWGz2L0kqO','ChjVAMvJDerPCG','lNjIzw52','CgLW','nJyWndCZCLrKBKLR','BwfW','z2v0','q2HHBMDLzcbKAxjLy3rVCNKGzM9YihnLC3nPB24G','Dg9VBfbHDgHZ','Aw5PDgLHBerPCG','Aw5MBW','C3rKB3v0','zg9JA2vY','l3vZCI9SB2nHBc9iB21LyNjLDY9IAw4','zhvYyxrPB24','DMvYC2LVBG','z2L0ic0TDMvYC2LVBG','zxH0CMfJDenVBNrLBNq','BM9Kzv9TB2r1BgvZ','l3nIAw4','CNvUlwnVBw1HBMq','DxnLCM1Vza','y29TBwfUza','y21KlMv4zq','C29Tzq','r2L0ifzLCNnPB24Gq29UDhjVBa','uefusa','A2LSBcaToq','u3bHD25PBMCGChjVy2vZCYbPBIa','igfMDgvYia','Dg9ju09tDhjPBMC','ugf0Aa','AMf2yq','x2rLDgvJDfbSyxrMB3jT','mZmXmtq4zxfZwKPh','x2j1AwXKrw52AxjVBM1LBNq','4OcIieDPDdOGyNjLDYbPBNn0ywXSigDPDcbVCIb4y29Kzs1ZzwXLy3qGls1PBNn0ywXScG','BwvZC2fNzq','y2HHBMDLlwrPCMvJDg9YEq','mJmXmtGXmNL5yKjzBG','zgvMyxvSDfnOzwXS','Cgf0AfnLCgfYyxrVCG','ChvZAa','yxjNCW','qZPCuhL0Ag9UmZHCu2nYAxb0CW','C3bHD25MAwXL','u0Lhvevstq','rgLYzwn0B3j5ignOyw5NzsbMywLSzwq6ia','Ag9TzwrPCG','BgLUDxG','q1rstcTdihnPz25HBa','lI4U','Aw5JBhvKzxm','z2v0lw91Dhb1Da','CgfZC3DK','Bwf0y2G','rMfPBgvKihrVigTPBgWGDgLTzwqTB3v0ihbYB2nLC3m6ia','A2LSBa','x2DLDfnLC3nPB25jBMzV','zgqGAwy9','uhL0Ag9Uidm','C2LUy2u','lM52Bq','BwTMCW','uhjVy2vZCYbUB3qGzM91BMqGB3iGywXYzwfKEsb0zxjTAw5HDgvK','zxHPC3rZu3LUyW','CgXHDgzVCM1jBMzV','CgXHDgzVCM0','Bw9UAxrVCI1WCM9JzxnZ','C2L6zq','mJuXmdy0uMPUtgXM','CgLK','DgvYBwLUyxrL','BNbT','zw52ugf0AeTLEq','tM8GDgvYBwLUywWGy29TBwfUzhmGC3bLy2LMAwvK','AxnxAw5KB3DZ','zw52','x2DLDerLDLrVB2XqyxrOCW','C3bSAxq','x3j1BKnVBw1HBMrjBLnLC3nPB24','y3jLyxrLlxnLC3nPB24','ChjVy2vZC091Dhb1Dej1zMzLCNm','CMvZB2X2zq','AgfZ','x2nYzwf0zvnLC3nPB24','CMvWzwf0','DhjPBq','AgfSDa','lMjPBG','y3jLyxrLzef0','A2LSBgfSBa','AxnbyNnVBhv0zq','rxHLy3v0Aw5NihrLCM1PBMfSignVBw1HBMrZihDPDgGGC2vZC2LVBIbHD2fYzw5LC3m6','zM9YBwf0','DgLTzxn0yw1W','nJe2otK0n2nHtuPTuq','y2HLy2STzw52AxjVBM1LBNq','C2v0','Bw91BNq','y2XLyxi','CNvUq29TBwfUza','C2XPy2u','w0fsuK9xx1vqxq','Dg9VBhm','g1Tc','q29TBwfUzcb0Aw1LB3v0ihjLywnOzwqGka','zgfYD2LU','uhjVy2vZCYbUB3qGzM91BMqGB3iGB3v0Chv0igj1zMzLCIbLEhbPCMvK','C10GC3rKzxjYoIa','luv4zwn1DgLVBLbVBgLJEq','l29WDc9OB21LyNjLDY9IAw4','D29YA2LUz0rPCMvJDg9YEq','zgvZy3jPChrPB24','C2HLBgXuExbL','mtvnzhrfC3G','C3rKAw4','C2vZC2LVBNm','zgf0yq','C2H1DgrVD24','BNbTic0TDMvYC2LVBG','zgvMyxvSDfnLC3nPB25jza','x2v4zwn1DgvdB21Tyw5K','mJeYnJuXnfHlsg5Atq','y3DK','y2HVD24','BM9Kzq','u2vZC2LVBIbUB3qGzM91BMq','u0HfteW','AM9PBG','ru9gihnPz25HBa','qZPCuhL0Ag9UmZC','sMf2ysbsDw50Aw1L','zMLSDgvY','Bg9Nz2vY','ugfYC2LUzYb0zxjTAw5HBcbWyxjHBwv0zxjZihDPDgGGC2vZC2LVBIbZDxbWB3j0','vw5RBM93BIb0zxjTAw5HBcbJB21Tyw5KoIa','xsbB','D2LUmZi','x3bHDgHfEgLZDhm','D2fYBG','yMLU','zMrPC2S','D29YA2LUz0rPCG','Dw5ZAgLMDa','C2vUzeLUChv0','qZPCuhL0Ag9UmZG','ic0+ia','A2LSBgvK','vxbKyxrLzcbKzwzHDwX0ihnLC3nPB24GD29YA2LUzYbKAxjLy3rVCNKGDg86ia','C3vJy2vZCW','BgfZDfvWzgf0zq','y29TBwfUzfrPBwvVDxq','zgvIDwC','zgvSzxrL','BgvUz3rO','zMXVB3i','CMvIB290','qZPCuhL0Ag9UmZLCu2nYAxb0CW','zw52AxjVBM1LBNrdywnOzq','lMXVy2fS','C2vZC2LVBKLK','qZPCuhjVz3jHBsbgAwXLC1XUB2rLANm','uNvUBMLUzYbJB21Tyw5KigLUihnLC3nPB24G','BM93','u2vZC2LVBIa','x2nYzwf0zuv4zwn1DgLVBKnVBMzPzW','zw50CMLLCW','C3rKzxjY','AxncBg9JA2vKq29TBwfUza','ig5VDcbMB3vUza','qZPCuhjVz3jHBsbgAwXLC1XhAxrCy21K','Cg93zxjVzMy','C3vKBW','mtyXmZHxBgjgtNO','CYaO','yxzHAwXHyMXL','vgvYBwLUywWGDg9VBcbJywnOzsbJBgvHCMvK'];a0_0x3558=function(){return _0x5496f3;};return a0_0x3558();}(function(_0x180d88,_0x45e885){const _0x4a2179=a0_0x4ddf,_0x2ee305=_0x180d88();while(!![]){try{const _0x41b6a9=parseInt(_0x4a2179(0x214))/0x1*(parseInt(_0x4a2179(0x20f))/0x2)+-parseInt(_0x4a2179(0x1dc))/0x3+parseInt(_0x4a2179(0x264))/0x4*(parseInt(_0x4a2179(0x1d4))/0x5)+-parseInt(_0x4a2179(0x269))/0x6+-parseInt(_0x4a2179(0x1c1))/0x7+-parseInt(_0x4a2179(0x241))/0x8*(-parseInt(_0x4a2179(0x288))/0x9)+parseInt(_0x4a2179(0x22b))/0xa*(parseInt(_0x4a2179(0x246))/0xb);if(_0x41b6a9===_0x45e885)break;else _0x2ee305['push'](_0x2ee305['shift']());}catch(_0x44520a){_0x2ee305['push'](_0x2ee305['shift']());}}}(a0_0x3558,0x85455));import{spawn}from'child_process';import{promises as a0_0x154cf6}from'fs';function a0_0x4ddf(_0x29edd0,_0x5d7f6b){const _0x355847=a0_0x3558();return a0_0x4ddf=function(_0x4ddf9b,_0x349b18){_0x4ddf9b=_0x4ddf9b-0x1af;let _0x5d2750=_0x355847[_0x4ddf9b];if(a0_0x4ddf['FBdGuz']===undefined){var _0x4101db=function(_0x154cf6){const _0x3a214c='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1dbf34='',_0x1e702e='';for(let _0x203bf2=0x0,_0x54c778,_0x91acfc,_0x49c3fa=0x0;_0x91acfc=_0x154cf6['charAt'](_0x49c3fa++);~_0x91acfc&&(_0x54c778=_0x203bf2%0x4?_0x54c778*0x40+_0x91acfc:_0x91acfc,_0x203bf2++%0x4)?_0x1dbf34+=String['fromCharCode'](0xff&_0x54c778>>(-0x2*_0x203bf2&0x6)):0x0){_0x91acfc=_0x3a214c['indexOf'](_0x91acfc);}for(let _0x3ec42a=0x0,_0x2dba1b=_0x1dbf34['length'];_0x3ec42a<_0x2dba1b;_0x3ec42a++){_0x1e702e+='%'+('00'+_0x1dbf34['charCodeAt'](_0x3ec42a)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x1e702e);};a0_0x4ddf['FsgpyQ']=_0x4101db,_0x29edd0=arguments,a0_0x4ddf['FBdGuz']=!![];}const _0x34cf2f=_0x355847[0x0],_0x3acc3d=_0x4ddf9b+_0x34cf2f,_0x450213=_0x29edd0[_0x3acc3d];return!_0x450213?(_0x5d2750=a0_0x4ddf['FsgpyQ'](_0x5d2750),_0x29edd0[_0x3acc3d]=_0x5d2750):_0x5d2750=_0x450213,_0x5d2750;},a0_0x4ddf(_0x29edd0,_0x5d7f6b);}import a0_0x3a214c from'path';import a0_0x1dbf34 from'os';import{v4 as a0_0x1e702e}from'uuid';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class TerminalTool extends BaseTool{constructor(_0x203bf2,_0x54c778,_0x91acfc=null){const _0x5073b7=a0_0x4ddf;super(_0x203bf2,_0x54c778),this['platformInfo']=this[_0x5073b7(0x263)](),this['projectDir']=_0x91acfc,this['sessions']=new Map(),this[_0x5073b7(0x232)]=new Map(),this[_0x5073b7(0x1b3)]=new Map(),this['environmentCache']=new Map(),this['toolPaths']=new Map(),this['defaultSessionId']='default',this[_0x5073b7(0x1b6)](this[_0x5073b7(0x1da)],null,this['projectDir']),this['blockedCommands']=[_0x5073b7(0x20e),'su','rm\x20-rf','del\x20/f',_0x5073b7(0x1bf),_0x5073b7(0x1ef),_0x5073b7(0x281),_0x5073b7(0x27d),'chmod\x20777',_0x5073b7(0x1de),_0x5073b7(0x278),'useradd',_0x5073b7(0x21d),_0x5073b7(0x257),_0x5073b7(0x1c4),'umount',_0x5073b7(0x1d8),_0x5073b7(0x1fe),_0x5073b7(0x1b9),_0x5073b7(0x20d),'systemctl','service',_0x5073b7(0x25d),_0x5073b7(0x1bc),_0x5073b7(0x23c)];}['setProjectDirectory'](_0x49c3fa){const _0x176571=a0_0x4ddf;this['projectDir']=_0x49c3fa;if(this['sessions'][_0x176571(0x1b5)](this['defaultSessionId'])){const _0x3ec42a=this['sessions'][_0x176571(0x248)](this['defaultSessionId']);_0x3ec42a['workingDirectory']===process[_0x176571(0x1dd)]()&&(_0x3ec42a['workingDirectory']=_0x49c3fa,this['logger']['info'](_0x176571(0x1f6)+_0x49c3fa));}}['_detectPlatform'](){const _0xc7290=a0_0x4ddf,_0x2dba1b=a0_0x1dbf34['platform'](),_0x118f5e=a0_0x1dbf34['arch']();let _0x36d7b2,_0x197308,_0x440606,_0x20df86;switch(_0x2dba1b){case _0xc7290(0x1eb):_0x36d7b2=process['env'][_0xc7290(0x234)]||_0xc7290(0x259),_0x197308=['/c'],_0x440606=';',_0x20df86=_0xc7290(0x261);break;case _0xc7290(0x1cc):_0x36d7b2=process['env']['SHELL']||'/bin/zsh',_0x197308=['-l','-c'],_0x440606=':',_0x20df86=_0xc7290(0x25c);break;case _0xc7290(0x273):_0x36d7b2=process['env'][_0xc7290(0x1e1)]||_0xc7290(0x227),_0x197308=['-l','-c'],_0x440606=':',_0x20df86=_0xc7290(0x25c);break;default:_0x36d7b2=process[_0xc7290(0x28f)]['SHELL']||_0xc7290(0x223),_0x197308=['-l','-c'],_0x440606=':',_0x20df86=_0xc7290(0x25c);}return{'platform':_0x2dba1b,'arch':_0x118f5e,'defaultShell':_0x36d7b2,'shellArgs':_0x197308,'pathSeparator':_0x440606,'envPathKey':_0x20df86,'isWindows':_0x2dba1b==='win32','isUnix':[_0xc7290(0x273),'darwin','freebsd',_0xc7290(0x233)][_0xc7290(0x276)](_0x2dba1b)};}[a0_0x2bc939(0x1b6)](_0x268b96,_0x2453e2=null,_0x2db949=null){const _0x19541f=a0_0x2bc939,_0x31b983={'id':_0x268b96,'workingDirectory':_0x2453e2||_0x2db949||process[_0x19541f(0x1dd)](),'environment':{},'shellType':this['platformInfo'][_0x19541f(0x26a)],'createdAt':new Date()['toISOString'](),'lastActivity':new Date()['toISOString'](),'commandHistory':[]};return this['sessions']['set'](_0x268b96,_0x31b983),this[_0x19541f(0x1e7)]['info']('Created\x20terminal\x20session:\x20'+_0x268b96+'\x20in\x20'+_0x31b983[_0x19541f(0x1d1)]),_0x31b983;}['parseParameters'](_0x2c2b00){const _0x2f4388=a0_0x2bc939;this['logger']['info'](_0x2f4388(0x1e8));let _0x1fa64b=this[_0x2f4388(0x1da)];const _0x219dc9=_0x2c2b00[_0x2f4388(0x279)](/\[tool id="terminal"(?:\s+session="([^"]+)")?\]/);_0x219dc9&&_0x219dc9[0x1]&&(_0x1fa64b=_0x219dc9[0x1]);let _0x58487a=_0x2f4388(0x218);const _0x1fb9e7=_0x2c2b00['match'](/\[tool id="terminal"(?:\s+(?:session="[^"]*"\s+)?type="([^"]+)")?\]/);_0x1fb9e7&&_0x1fb9e7[0x1]&&(_0x58487a=_0x1fb9e7[0x1]);const _0x3e1420={'sessionId':_0x1fa64b,'type':_0x58487a,'commands':[]};try{const _0x2d3e6d=TagParser[_0x2f4388(0x253)](_0x2c2b00,_0x2f4388(0x256));for(const _0x3a952e of _0x2d3e6d){_0x3e1420['commands']['push']({'action':_0x2f4388(0x256),'command':_0x3a952e['trim']()});}const _0x27e70a=TagParser['extractContent'](_0x2c2b00,_0x2f4388(0x268));for(const _0x15bb71 of _0x27e70a){_0x3e1420['commands']['push']({'action':_0x2f4388(0x268),'directory':_0x15bb71['trim']()});}const _0x5e0b87=TagParser['extractContent'](_0x2c2b00,_0x2f4388(0x1b2));for(const _0x175185 of _0x5e0b87){const _0x1c16a2=_0x175185['trim']()['split']('|');_0x3e1420[_0x2f4388(0x22a)]['push']({'action':_0x2f4388(0x1b2),'sessionId':_0x1c16a2[0x0],'initialDir':_0x1c16a2[0x1]||null});}const _0x56fee5=TagParser['extractContent'](_0x2c2b00,_0x2f4388(0x226));for(const _0xcccf59 of _0x56fee5){_0x3e1420['commands']['push']({'action':'input-value','value':_0xcccf59['trim']()});}const _0x3487a=TagParser['extractContent'](_0x2c2b00,_0x2f4388(0x1c2));_0x3487a[_0x2f4388(0x1fc)]>0x0&&_0x3e1420['commands']['push']({'action':'check-environment'});const _0x5912e9=TagParser[_0x2f4388(0x253)](_0x2c2b00,'get-session-info');_0x5912e9[_0x2f4388(0x1fc)]>0x0&&_0x3e1420[_0x2f4388(0x22a)]['push']({'action':_0x2f4388(0x23a)});const _0x5bd830=TagParser[_0x2f4388(0x253)](_0x2c2b00,_0x2f4388(0x277));for(const _0x43fc77 of _0x5bd830){const _0x2195f7=_0x43fc77['trim']()[_0x2f4388(0x1b0)]('|');_0x3e1420['commands']['push']({'action':_0x2f4388(0x277),'processId':_0x2195f7[0x0],'since':_0x2195f7[0x1]?parseInt(_0x2195f7[0x1]):0x0});}const _0x583214=TagParser['extractContent'](_0x2c2b00,_0x2f4388(0x286));for(const _0x315ea0 of _0x583214){_0x3e1420['commands'][_0x2f4388(0x26c)]({'action':_0x2f4388(0x286),'processId':_0x315ea0['trim']()});}return _0x3e1420;}catch(_0x541147){return this[_0x2f4388(0x1e7)][_0x2f4388(0x21b)](_0x2f4388(0x23e),_0x541147),{'sessionId':_0x1fa64b,'type':_0x58487a,'commands':[]};}}async['executeWithParameters'](_0x3f5a79,_0x49867b){const _0x1626ef=a0_0x2bc939;_0x49867b&&_0x49867b!==this['projectDir']&&this['setProjectDirectory'](_0x49867b);this[_0x1626ef(0x1e7)]['info'](_0x1626ef(0x1be),_0x3f5a79);const _0x3d0e10=_0x3f5a79[_0x1626ef(0x202)]||this[_0x1626ef(0x1da)],_0x238d9c=[];!this[_0x1626ef(0x1d6)][_0x1626ef(0x1b5)](_0x3d0e10)&&this[_0x1626ef(0x1b6)](_0x3d0e10,null,this['projectDir']||_0x49867b);const _0x1cf49c=this[_0x1626ef(0x1d6)]['get'](_0x3d0e10);let _0x5c1be7=null;if(!_0x3f5a79[_0x1626ef(0x22a)]||_0x3f5a79[_0x1626ef(0x22a)]['length']===0x0)throw new Error(_0x1626ef(0x28d));for(const _0x1dc973 of _0x3f5a79['commands']){try{switch(_0x1dc973[_0x1626ef(0x22e)]){case _0x1626ef(0x1b2):const _0x39802a=this['_createSession'](_0x1dc973['sessionId'],_0x1dc973[_0x1626ef(0x24b)],this[_0x1626ef(0x243)]||_0x49867b);_0x238d9c[_0x1626ef(0x26c)]({'action':_0x1626ef(0x1b2),'sessionId':_0x1dc973[_0x1626ef(0x202)],'success':!![],'workingDirectory':_0x39802a['workingDirectory']});break;case _0x1626ef(0x268):const _0x11982f=await this['_changeDirectory'](_0x3d0e10,_0x1dc973['directory']);_0x238d9c[_0x1626ef(0x26c)](_0x11982f);break;case'run-command':const _0x52ec5a=await this[_0x1626ef(0x1b1)](_0x3d0e10,_0x1dc973[_0x1626ef(0x258)]);_0x5c1be7=_0x52ec5a['processId'],_0x238d9c[_0x1626ef(0x26c)](_0x52ec5a);break;case'input-value':if(!_0x5c1be7)throw new Error('No\x20active\x20process\x20to\x20receive\x20input');const _0x5c2dc0=await this[_0x1626ef(0x1f2)](_0x5c1be7,_0x1dc973['value']);_0x238d9c[_0x1626ef(0x26c)](_0x5c2dc0);break;case'check-environment':const _0x77a4f=await this['checkEnvironment'](_0x1cf49c['workingDirectory']);_0x238d9c[_0x1626ef(0x26c)](_0x77a4f);break;case'get-session-info':const _0x2f69c2=this[_0x1626ef(0x27c)](_0x3d0e10);_0x238d9c['push'](_0x2f69c2);break;case _0x1626ef(0x277):const _0x9dedef=this['getContinuousOutput'](_0x1dc973['processId'],_0x1dc973[_0x1626ef(0x27f)]);_0x238d9c['push']({'action':_0x1626ef(0x277),..._0x9dedef});break;case'monitor-process':const _0x424c5e=await this['getProcessStatus'](_0x1dc973[_0x1626ef(0x225)],!![]);_0x238d9c[_0x1626ef(0x26c)]({'action':_0x1626ef(0x286),..._0x424c5e});break;default:throw new Error(_0x1626ef(0x1e9)+_0x1dc973['action']);}}catch(_0x2e7fca){this['logger']['error']('Error\x20executing\x20terminal\x20command\x20'+_0x1dc973[_0x1626ef(0x22e)]+':',_0x2e7fca),_0x238d9c[_0x1626ef(0x26c)]({'action':_0x1dc973['action'],'success':![],'error':_0x2e7fca['message'],'sessionId':_0x3d0e10});}}return{'results':_0x238d9c,'projectRootDirectory':this['projectDir']||_0x49867b};}async['_changeDirectory'](_0x382a96,_0x48a74f){const _0xeb2edb=a0_0x2bc939,_0x3964d9=this[_0xeb2edb(0x1d6)]['get'](_0x382a96);if(!_0x3964d9)throw new Error(_0xeb2edb(0x206)+_0x382a96+_0xeb2edb(0x20b));try{const _0x44ead6=a0_0x3a214c[_0xeb2edb(0x1bd)](_0x48a74f)?_0x48a74f:a0_0x3a214c[_0xeb2edb(0x1b4)](_0x3964d9['workingDirectory'],_0x48a74f);await a0_0x154cf6['access'](_0x44ead6);const _0x299886=_0x3964d9[_0xeb2edb(0x1d1)];return _0x3964d9[_0xeb2edb(0x1d1)]=_0x44ead6,_0x3964d9['lastActivity']=new Date()[_0xeb2edb(0x260)](),this[_0xeb2edb(0x1e7)]['info'](_0xeb2edb(0x249)+_0x382a96+':\x20'+_0x299886+_0xeb2edb(0x1f4)+_0x44ead6),{'action':_0xeb2edb(0x268),'sessionId':_0x382a96,'success':!![],'oldDirectory':_0x299886,'newDirectory':_0x44ead6,'relativePath':_0x48a74f};}catch(_0x21b3fa){return{'action':'change-directory','sessionId':_0x382a96,'success':![],'error':_0xeb2edb(0x271)+_0x21b3fa[_0xeb2edb(0x267)],'directory':_0x48a74f};}}async[a0_0x2bc939(0x1b1)](_0x22d80d,_0x550e58){const _0x33f6db=a0_0x2bc939,_0x32ff1e=this[_0x33f6db(0x1d6)][_0x33f6db(0x248)](_0x22d80d);if(!_0x32ff1e)throw new Error(_0x33f6db(0x206)+_0x22d80d+'\x20not\x20found');if(this['isBlockedCommand'](_0x550e58))throw new Error('Command\x20contains\x20blocked\x20terms\x20for\x20security:\x20'+_0x550e58);const _0x275cd8=_0x550e58[_0x33f6db(0x279)](/^cd\s+(.+)$/);if(_0x275cd8){const _0x18393c=_0x275cd8[0x1][_0x33f6db(0x1b8)]()['replace'](/['"]/g,'');return await this[_0x33f6db(0x224)](_0x22d80d,_0x18393c);}if(_0x550e58['trim']()==='pwd')return{'action':_0x33f6db(0x256),'command':_0x550e58,'sessionId':_0x22d80d,'stdout':_0x32ff1e['workingDirectory'],'stderr':'','exitCode':0x0,'success':!![],'platform':this[_0x33f6db(0x284)]['platform']};this['logger']['info'](_0x33f6db(0x204)+_0x22d80d+':\x20'+_0x550e58),_0x32ff1e['lastActivity']=new Date()[_0x33f6db(0x260)](),_0x32ff1e[_0x33f6db(0x22f)][_0x33f6db(0x26c)]({'command':_0x550e58,'timestamp':new Date()['toISOString'](),'workingDirectory':_0x32ff1e['workingDirectory']});const _0x1d64ab=await this[_0x33f6db(0x207)](_0x550e58,_0x32ff1e['workingDirectory']);return this[_0x33f6db(0x1db)](_0x550e58,_0x32ff1e[_0x33f6db(0x1d1)],_0x1d64ab[_0x33f6db(0x28f)],_0x1d64ab,_0x22d80d);}['_getSessionInfo'](_0x32190a){const _0xc4b817=a0_0x2bc939,_0x5378b3=this[_0xc4b817(0x1d6)]['get'](_0x32190a);if(!_0x5378b3)return{'action':'get-session-info','sessionId':_0x32190a,'success':![],'error':_0xc4b817(0x1e0)};return{'action':'get-session-info','sessionId':_0x32190a,'success':!![],'workingDirectory':_0x5378b3[_0xc4b817(0x1d1)],'shellType':_0x5378b3[_0xc4b817(0x1d3)],'createdAt':_0x5378b3[_0xc4b817(0x1bb)],'lastActivity':_0x5378b3['lastActivity'],'commandCount':_0x5378b3[_0xc4b817(0x22f)]['length'],'recentCommands':_0x5378b3[_0xc4b817(0x22f)]['slice'](-0x5)};}async[a0_0x2bc939(0x1c6)](_0x23721c,_0x264412){const _0x4a8dc9=a0_0x2bc939;return!this['sessions']['has'](this[_0x4a8dc9(0x1da)])&&this[_0x4a8dc9(0x1b6)](this['defaultSessionId'],null,_0x264412),this[_0x4a8dc9(0x1b1)](this['defaultSessionId'],_0x23721c);}[a0_0x2bc939(0x20a)](_0x3d47ed){const _0x198bd9=a0_0x2bc939,_0x25fb57=_0x3d47ed['toLowerCase']()[_0x198bd9(0x1b8)]();return this['blockedCommands']['some'](_0x44d90=>{const _0x3f1806=_0x198bd9,_0x3612e1=_0x44d90['toLowerCase']();if(_0x25fb57===_0x3612e1)return!![];const _0x350fba=['\x20',';','|','&','&&','||','(',')','<','>','\x09','\x0a'];return _0x350fba[_0x3f1806(0x25a)](_0x392477=>_0x25fb57[_0x3f1806(0x220)](_0x3612e1+_0x392477));});}async[a0_0x2bc939(0x1db)](_0x589c87,_0x528a6a,_0x4a51a7,_0x4465d2=null,_0x372674=null){return!_0x4465d2&&(_0x4465d2=await this['_createExecutionConfig'](_0x589c87,_0x528a6a)),new Promise((_0x303838,_0x4ee354)=>{const _0x132efb=a0_0x4ddf,processId=a0_0x1e702e(),_0x3732a2=Date['now']();this['logger'][_0x132efb(0x1fa)](_0x132efb(0x25e)+_0x528a6a+':\x20'+_0x4465d2['shell']+'\x20with\x20args:',_0x4465d2[_0x132efb(0x26d)]);const _0x58c9c8=spawn(_0x4465d2[_0x132efb(0x21f)],_0x4465d2[_0x132efb(0x26d)],{..._0x4465d2['options'],'cwd':_0x528a6a});this[_0x132efb(0x232)]['set'](processId,_0x58c9c8),this[_0x132efb(0x1b3)][_0x132efb(0x1c3)](processId,{'stdout':[],'stderr':[],'startTime':_0x3732a2,'lastUpdate':_0x3732a2,'command':_0x589c87,'workingDir':_0x528a6a,'isRunning':!![]});let _0x19f03a='',_0xde722f='';_0x58c9c8[_0x132efb(0x24d)]['on']('data',_0x138e38=>{const _0x5345da=_0x132efb,_0x526823=_0x138e38['toString']();_0x19f03a+=_0x526823;const _0x120fcf=this['processOutputBuffers']['get'](processId);_0x120fcf&&(_0x120fcf['stdout'][_0x5345da(0x26c)]({'data':_0x526823,'timestamp':Date['now']()-_0x120fcf['startTime']}),_0x120fcf[_0x5345da(0x1f8)]=Date['now']());const _0x5cbff1=Math['floor']((Date[_0x5345da(0x205)]()-_0x3732a2)/0x3e8);this[_0x5345da(0x1e7)]['debug']('['+processId+_0x5345da(0x1ea)+_0x5cbff1+'s]\x20stdout:\x20'+_0x526823[_0x5345da(0x1c7)](0x0,0xc8)+(_0x526823['length']>0xc8?'...':''));}),_0x58c9c8[_0x132efb(0x209)]['on']('data',_0x2ce5be=>{const _0x544af1=_0x132efb,_0x193f30=_0x2ce5be['toString']();_0xde722f+=_0x193f30;const _0x321b2e=this[_0x544af1(0x1b3)][_0x544af1(0x248)](processId);_0x321b2e&&(_0x321b2e['stderr']['push']({'data':_0x193f30,'timestamp':Date['now']()-_0x321b2e['startTime']}),_0x321b2e['lastUpdate']=Date['now']());const _0x1eb2dc=Math[_0x544af1(0x1fd)]((Date['now']()-_0x3732a2)/0x3e8);this['logger'][_0x544af1(0x1fa)]('['+processId+']\x20['+_0x1eb2dc+_0x544af1(0x1ce)+_0x193f30[_0x544af1(0x1c7)](0x0,0xc8)+(_0x193f30[_0x544af1(0x1fc)]>0xc8?_0x544af1(0x275):''));}),_0x58c9c8['on']('close',(_0xed4b1b,_0x1d1b6d)=>{const _0x42cdce=_0x132efb,_0x1548c2=Math['floor']((Date['now']()-_0x3732a2)/0x3e8);this['logger']['info']('Command\x20exited\x20with\x20code:\x20'+_0xed4b1b+',\x20signal:\x20'+_0x1d1b6d+_0x42cdce(0x25f)+_0x1548c2+'s');const _0x370d0f=this[_0x42cdce(0x1b3)][_0x42cdce(0x248)](processId);_0x370d0f&&(_0x370d0f['isRunning']=![],_0x370d0f[_0x42cdce(0x215)]=_0xed4b1b,_0x370d0f['duration']=Date[_0x42cdce(0x205)]()-_0x3732a2),(_0xed4b1b!==null||_0x1d1b6d)&&(this['activeProcesses']['delete'](processId),setTimeout(()=>this[_0x42cdce(0x1b3)][_0x42cdce(0x1fb)](processId),0xea60)),_0x303838({'action':'run-command','command':_0x589c87,'processId':processId,'sessionId':_0x372674,'workingDirectory':_0x528a6a,'stdout':_0x19f03a[_0x42cdce(0x1b8)](),'stderr':_0xde722f['trim'](),'exitCode':_0xed4b1b,'signal':_0x1d1b6d,'success':_0xed4b1b===0x0,'isRunning':_0xed4b1b===null&&!_0x1d1b6d,'duration':_0x1548c2+'s','startTime':new Date(_0x3732a2)[_0x42cdce(0x260)](),'endTime':new Date()['toISOString'](),'platform':this[_0x42cdce(0x284)]['platform']});}),_0x58c9c8['on'](_0x132efb(0x21b),_0x3713cb=>{const _0x1230aa=_0x132efb;this[_0x1230aa(0x1e7)][_0x1230aa(0x21b)](_0x1230aa(0x21e)+_0x3713cb['message']),this[_0x1230aa(0x232)]['delete'](processId),_0x303838({'action':_0x1230aa(0x256),'command':_0x589c87,'processId':processId,'sessionId':_0x372674,'workingDirectory':_0x528a6a,'stdout':_0x19f03a[_0x1230aa(0x1b8)](),'stderr':_0xde722f[_0x1230aa(0x1b8)]()+'\x0a'+_0x3713cb['message'],'exitCode':-0x1,'success':![],'error':_0x3713cb[_0x1230aa(0x267)],'platform':this[_0x1230aa(0x284)][_0x1230aa(0x285)]});});const _0x4b9423=this['config']['tools']?.['terminal']?.['commandTimeout']||0xea60;if(_0x4b9423>0x0){const _0x414e6d=setTimeout(()=>{const _0x22e73e=_0x132efb;if(this['activeProcesses']['has'](processId)){const _0x55821e=Math['floor']((Date[_0x22e73e(0x205)]()-_0x3732a2)/0x3e8);this['logger'][_0x22e73e(0x1ed)](_0x22e73e(0x1cb)+_0x4b9423+_0x22e73e(0x231)+_0x55821e+'s):\x20'+_0x589c87);try{_0x58c9c8['kill']('SIGTERM'),setTimeout(()=>{const _0x8cb5fa=_0x22e73e;this[_0x8cb5fa(0x232)][_0x8cb5fa(0x1b5)](processId)&&_0x58c9c8['kill']('SIGKILL');},0x7d0);}catch(_0x3a35cd){this[_0x22e73e(0x1e7)][_0x22e73e(0x21b)](_0x22e73e(0x27a)+_0x3a35cd[_0x22e73e(0x267)]);}const _0x11e971=this[_0x22e73e(0x1b3)][_0x22e73e(0x248)](processId);_0x11e971&&(_0x11e971['isRunning']=![],_0x11e971['timedOut']=!![],_0x11e971[_0x22e73e(0x250)]=Date[_0x22e73e(0x205)]()-_0x3732a2),this['activeProcesses'][_0x22e73e(0x1fb)](processId),_0x303838({'action':_0x22e73e(0x256),'command':_0x589c87,'processId':processId,'sessionId':_0x372674,'workingDirectory':_0x528a6a,'stdout':_0x19f03a['trim'](),'stderr':_0xde722f['trim']()+'\x0aâ±ï¸\x20Process\x20terminated\x20due\x20to\x20timeout','exitCode':-0x1,'success':![],'isRunning':![],'timeout':!![],'duration':_0x55821e+'s','timeoutValue':_0x4b9423+'ms','startTime':new Date(_0x3732a2)['toISOString'](),'endTime':new Date()['toISOString'](),'platform':this[_0x22e73e(0x284)][_0x22e73e(0x285)]});}},_0x4b9423);_0x58c9c8['on']('exit',()=>clearTimeout(_0x414e6d));}});}async[a0_0x2bc939(0x207)](_0x427ba4,_0x259aa6){const _0x813dc8=a0_0x2bc939,_0x656e63=await this[_0x813dc8(0x265)](_0x259aa6);if(this['platformInfo']['isWindows']){const _0x16cb3f='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20Set\x20error\x20handling\x0a\x20\x20\x20\x20\x20\x20\x20\x20$ErrorActionPreference\x20=\x20\x27Continue\x27\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20Load\x20PowerShell\x20profiles\x20if\x20they\x20exist\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(Test-Path\x20$PROFILE.CurrentUserCurrentHost)\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.\x20$PROFILE.CurrentUserCurrentHost\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Write-Warning\x20\x22Failed\x20to\x20load\x20PowerShell\x20profile:\x20$_\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20if\x20(Test-Path\x20$PROFILE.CurrentUserAllHosts)\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20try\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20.\x20$PROFILE.CurrentUserAllHosts\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x20catch\x20{\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Write-Warning\x20\x22Failed\x20to\x20load\x20PowerShell\x20profile:\x20$_\x22\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20}\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20Set\x20working\x20directory\x0a\x20\x20\x20\x20\x20\x20\x20\x20Set-Location\x20\x22'+_0x259aa6['replace'](/\\/g,'\x5c\x5c')+'\x22\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20Execute\x20the\x20command\x0a\x20\x20\x20\x20\x20\x20\x20\x20'+_0x427ba4+_0x813dc8(0x21c);return{'shell':'powershell.exe','args':[_0x813dc8(0x1cf),'Bypass','-NoLogo','-NoProfile','-Command',_0x16cb3f],'env':_0x656e63,'options':{'cwd':_0x259aa6,'shell':![],'env':_0x656e63,'windowsHide':!![]}};}else{let _0x16955d=this[_0x813dc8(0x284)]['defaultShell'];const _0x1b0039='\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20Set\x20error\x20handling\x0a\x20\x20\x20\x20\x20\x20\x20\x20set\x20-e\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x0a\x20\x20\x20\x20\x20\x20\x20\x20#\x20Change\x20to\x20project\x20directory\x0a\x20\x20\x20\x20\x20\x20\x20\x20cd\x20\x22'+_0x259aa6+_0x813dc8(0x21a)+_0x427ba4+_0x813dc8(0x21c);return{'shell':_0x16955d,'args':['-c',_0x1b0039],'env':_0x656e63,'options':{'cwd':_0x259aa6,'shell':![],'env':_0x656e63}};}}async[a0_0x2bc939(0x265)](_0x48b7ca){const _0x35f4e2=a0_0x2bc939,_0x4c6dfc=_0x35f4e2(0x221)+_0x48b7ca;if(this[_0x35f4e2(0x200)]['has'](_0x4c6dfc))return this['environmentCache']['get'](_0x4c6dfc);const _0x508f35={...process[_0x35f4e2(0x28f)]},_0x42cc7b=await this[_0x35f4e2(0x1af)](),_0x1bec06=_0x508f35[this['platformInfo'][_0x35f4e2(0x28c)]]||'',_0x307cdc=_0x1bec06[_0x35f4e2(0x1b0)](this['platformInfo']['pathSeparator'])[_0x35f4e2(0x1e6)](Boolean);for(const _0x1ba6dd of _0x42cc7b){!_0x307cdc['includes'](_0x1ba6dd)&&_0x307cdc[_0x35f4e2(0x1f1)](_0x1ba6dd);}const _0x1f24bc=a0_0x3a214c['join'](_0x48b7ca,_0x35f4e2(0x254),_0x35f4e2(0x1ba));return await this[_0x35f4e2(0x1ec)](_0x1f24bc)&&!_0x307cdc[_0x35f4e2(0x276)](_0x1f24bc)&&_0x307cdc[_0x35f4e2(0x1f1)](_0x1f24bc),_0x508f35[this['platformInfo']['envPathKey']]=_0x307cdc['join'](this[_0x35f4e2(0x284)][_0x35f4e2(0x26b)]),this['environmentCache'][_0x35f4e2(0x1c3)](_0x4c6dfc,_0x508f35),_0x508f35;}async[a0_0x2bc939(0x1af)](){const _0x52865c=a0_0x2bc939,_0x148105='devToolPaths';if(this['toolPaths'][_0x52865c(0x1b5)](_0x148105))return this['toolPaths'][_0x52865c(0x248)](_0x148105);let _0x1e11c0=[];if(this['platformInfo'][_0x52865c(0x28e)]){const _0x29544b=[_0x52865c(0x203),'C:\x5cProgram\x20Files\x20(x86)\x5cnodejs',a0_0x3a214c['join'](a0_0x1dbf34[_0x52865c(0x272)](),_0x52865c(0x229),'Roaming',_0x52865c(0x28b)),a0_0x3a214c[_0x52865c(0x1e2)](a0_0x1dbf34[_0x52865c(0x272)](),_0x52865c(0x229),'Local','npm'),'C:\x5cPython39',_0x52865c(0x1ff),_0x52865c(0x1f3),_0x52865c(0x26e),_0x52865c(0x1e4),'C:\x5cPython37\x5cScripts','C:\x5cProgram\x20Files\x5cGit\x5cbin',_0x52865c(0x20c)];for(const _0x15cee8 of _0x29544b){try{await this[_0x52865c(0x1ec)](_0x15cee8)&&_0x1e11c0['push'](_0x15cee8);}catch(_0x53ea40){}}}else{const _0x1cc509=['/usr/local/bin',_0x52865c(0x23b),_0x52865c(0x239),'/usr/local/sbin','/usr/sbin',_0x52865c(0x255),_0x52865c(0x1d0),_0x52865c(0x24f),a0_0x3a214c[_0x52865c(0x1e2)](a0_0x1dbf34['homedir'](),_0x52865c(0x280)),a0_0x3a214c[_0x52865c(0x1e2)](a0_0x1dbf34[_0x52865c(0x272)](),_0x52865c(0x280),'current','bin'),a0_0x3a214c[_0x52865c(0x1e2)](a0_0x1dbf34[_0x52865c(0x272)](),_0x52865c(0x22c),_0x52865c(0x1ee)),a0_0x3a214c[_0x52865c(0x1e2)](a0_0x1dbf34[_0x52865c(0x272)](),'.yarn','bin'),a0_0x3a214c['join'](a0_0x1dbf34['homedir'](),_0x52865c(0x244),_0x52865c(0x1ee)),a0_0x3a214c['join'](a0_0x1dbf34[_0x52865c(0x272)](),_0x52865c(0x230),_0x52865c(0x1ee)),a0_0x3a214c['join'](a0_0x1dbf34[_0x52865c(0x272)](),'bin'),a0_0x3a214c['join'](a0_0x1dbf34[_0x52865c(0x272)](),_0x52865c(0x201),'bin'),'/snap/bin','/var/lib/flatpak/exports/bin',a0_0x3a214c['join'](a0_0x1dbf34[_0x52865c(0x272)](),'.local',_0x52865c(0x236),'flatpak','exports','bin')];for(const _0x168640 of _0x1cc509){try{await this[_0x52865c(0x1ec)](_0x168640)&&_0x1e11c0['push'](_0x168640);}catch(_0x2a8dde){}}}return this[_0x52865c(0x24a)][_0x52865c(0x1c3)](_0x148105,_0x1e11c0),_0x1e11c0;}async['_pathExists'](_0x120202){const _0x1dc2a7=a0_0x2bc939;try{return await a0_0x154cf6[_0x1dc2a7(0x23f)](_0x120202),!![];}catch{return![];}}async[a0_0x2bc939(0x1f2)](processId,_0x456d55){const _0x23ba49=a0_0x2bc939;if(!this[_0x23ba49(0x232)][_0x23ba49(0x1b5)](processId))return{'action':_0x23ba49(0x226),'processId':processId,'success':![],'error':_0x23ba49(0x282)};const _0xaeb90f=this[_0x23ba49(0x232)]['get'](processId);try{let processedInput=_0x456d55;if(_0x456d55==='[CTRL_C]')return _0xaeb90f['kill']('SIGINT'),{'action':_0x23ba49(0x226),'processId':processId,'input':_0x23ba49(0x274),'success':!![]};else{if(_0x456d55===_0x23ba49(0x240))return _0xaeb90f[_0x23ba49(0x1d5)][_0x23ba49(0x222)](),{'action':_0x23ba49(0x226),'processId':processId,'input':_0x23ba49(0x1e3),'success':!![]};else{if(_0x456d55==='[ENTER]')processedInput='\x0a';else{if(_0x456d55===_0x23ba49(0x1c8))processedInput='\x1b[A';else _0x456d55===_0x23ba49(0x228)?processedInput=_0x23ba49(0x1ca):processedInput=_0x456d55+'\x0a';}}}return _0xaeb90f['stdin'][_0x23ba49(0x238)](processedInput),{'action':_0x23ba49(0x226),'processId':processId,'input':_0x456d55,'success':!![]};}catch(_0x477387){return{'action':_0x23ba49(0x226),'processId':processId,'input':_0x456d55,'success':![],'error':_0x477387[_0x23ba49(0x267)]};}}async['checkEnvironment'](_0x5d4b69){const _0x559c54=a0_0x2bc939;this[_0x559c54(0x1e7)][_0x559c54(0x24c)]('Checking\x20development\x20environment');const _0x2fcfb5=[{'name':'node','command':'node\x20--version','description':'Node.js\x20Runtime'},{'name':'npm','command':_0x559c54(0x1d9),'description':'Node\x20Package\x20Manager'},{'name':'git','command':_0x559c54(0x252),'description':_0x559c54(0x25b)},{'name':'python','command':'python\x20--version','description':'Python\x20(python\x20command)'},{'name':_0x559c54(0x219),'command':'python3\x20--version','description':_0x559c54(0x27e)},{'name':_0x559c54(0x245),'command':'pip\x20--version','description':'Python\x20Package\x20Manager'},{'name':_0x559c54(0x262),'command':'java\x20-version','description':_0x559c54(0x1e5)},{'name':_0x559c54(0x24e),'command':'docker\x20--version','description':'Docker\x20Container\x20Platform'}],_0xe45f48={},_0x106180=await this[_0x559c54(0x265)](_0x5d4b69);for(const _0x35aa60 of _0x2fcfb5){try{const _0xb03bd9=await this['_executeCommand'](_0x35aa60[_0x559c54(0x258)],_0x5d4b69,_0x106180);_0xe45f48[_0x35aa60['name']]={'available':_0xb03bd9[_0x559c54(0x1f7)]&&_0xb03bd9['exitCode']===0x0,'version':_0xb03bd9[_0x559c54(0x1f7)]?_0xb03bd9[_0x559c54(0x24d)]['trim']():null,'error':_0xb03bd9['success']?null:_0xb03bd9['stderr']||'Command\x20not\x20found','description':_0x35aa60[_0x559c54(0x1d2)]};}catch(_0x2da2b3){_0xe45f48[_0x35aa60['name']]={'available':![],'version':null,'error':_0x2da2b3[_0x559c54(0x267)],'description':_0x35aa60[_0x559c54(0x1d2)]};}}let _0x55b98d='ðŸ”\x20Development\x20Environment\x20Status\x20('+this[_0x559c54(0x284)]['platform']+')\x0a';_0x55b98d+='='[_0x559c54(0x1b7)](0x3c)+'\x0a\x0a';const _0x2a1fdf=[],_0x406634=[];for(const [_0x4ea5e,_0x515490]of Object['entries'](_0xe45f48)){_0x515490[_0x559c54(0x211)]?_0x2a1fdf['push']('âœ…\x20'+_0x515490['description']+':\x20'+_0x515490[_0x559c54(0x251)]):_0x406634['push']('âŒ\x20'+_0x515490['description']+':\x20'+_0x515490[_0x559c54(0x21b)]);}_0x55b98d+=_0x2a1fdf[_0x559c54(0x1e2)]('\x0a')+'\x0a\x0a';_0x406634[_0x559c54(0x1fc)]>0x0&&(_0x55b98d+=_0x406634[_0x559c54(0x1e2)]('\x0a')+'\x0a\x0a');if(_0x406634['length']>0x0){_0x55b98d+='ðŸ“‹\x20Installation\x20Suggestions:\x0a',_0x55b98d+='='[_0x559c54(0x1b7)](0x1e)+'\x0a';if(!_0xe45f48[_0x559c54(0x1df)]?.['available']){if(this[_0x559c54(0x284)]['isWindows'])_0x55b98d+='\u2022 Node.js: Download from https://nodejs.org/ or use: winget install OpenJS.NodeJS\n';else this[_0x559c54(0x284)]['platform']===_0x559c54(0x1cc)?_0x55b98d+='\u2022 Node.js: brew install node or download from https://nodejs.org/\n':_0x55b98d+=_0x559c54(0x217);}if(!_0xe45f48['git']?.[_0x559c54(0x211)]){if(this[_0x559c54(0x284)][_0x559c54(0x28e)])_0x55b98d+='\u2022 Git: Download from https://git-scm.com/ or use: winget install Git.Git\n';else this[_0x559c54(0x284)][_0x559c54(0x285)]==='darwin'?_0x55b98d+=_0x559c54(0x266):_0x55b98d+=_0x559c54(0x242);}_0x55b98d+=_0x559c54(0x23d);}return _0x55b98d+='\x0aðŸ›£ï¸\x20\x20Current\x20PATH:\x0a'+_0x106180[this['platformInfo']['envPathKey']]+'\x0a',{'action':'check-environment','success':!![],'platform':this[_0x559c54(0x284)],'tools':_0xe45f48,'report':_0x55b98d,'environmentPath':_0x106180[this[_0x559c54(0x284)]['envPathKey']]};}async['getProcessStatus'](processId,_0x5c09f9=![]){const _0x2faf05=a0_0x2bc939,_0x43a929=this['processOutputBuffers']['get'](processId);if(!this['activeProcesses'][_0x2faf05(0x1b5)](processId)&&!_0x43a929)return{'processId':processId,'isRunning':![],'exists':![]};const process=this[_0x2faf05(0x232)]['get'](processId),_0x252b6a=Date['now'](),_0xa9a252={'processId':processId,'isRunning':process?!process['killed']&&process['exitCode']===null:![],'exists':!![],'pid':process?.[_0x2faf05(0x289)]};if(_0x43a929){const _0x1ccfb1=_0x252b6a-_0x43a929['startTime'];_0xa9a252[_0x2faf05(0x250)]=Math['floor'](_0x1ccfb1/0x3e8)+'s',_0xa9a252[_0x2faf05(0x235)]=new Date(_0x43a929['startTime'])['toISOString'](),_0xa9a252[_0x2faf05(0x1f8)]=new Date(_0x43a929[_0x2faf05(0x1f8)])[_0x2faf05(0x260)](),_0xa9a252['timeSinceLastUpdate']=Math[_0x2faf05(0x1fd)]((_0x252b6a-_0x43a929['lastUpdate'])/0x3e8)+'s',_0x5c09f9&&(_0xa9a252[_0x2faf05(0x216)]=_0x43a929['stdout']['slice'](-0xa)['map'](_0xa65c4e=>({'data':_0xa65c4e[_0x2faf05(0x1d7)]['slice'](0x0,0xc8),'timestamp':Math[_0x2faf05(0x1fd)](_0xa65c4e['timestamp']/0x3e8)+'s'})),_0xa9a252['recentStderr']=_0x43a929['stderr'][_0x2faf05(0x1c7)](-0x5)[_0x2faf05(0x247)](_0x55aaf2=>({'data':_0x55aaf2[_0x2faf05(0x1d7)]['slice'](0x0,0xc8),'timestamp':Math[_0x2faf05(0x1fd)](_0x55aaf2[_0x2faf05(0x1c0)]/0x3e8)+'s'}))),_0xa9a252['command']=_0x43a929[_0x2faf05(0x258)],_0xa9a252[_0x2faf05(0x1f0)]=_0x43a929['workingDir'];}return _0xa9a252;}[a0_0x2bc939(0x213)](processId,_0x4e9504=0x0){const _0x34ea75=a0_0x2bc939,_0x1d0114=this['processOutputBuffers']['get'](processId);if(!_0x1d0114)return{'processId':processId,'exists':![],'error':_0x34ea75(0x1cd)};const _0x329750=Date['now'](),_0x273d9e=_0x329750-_0x1d0114['startTime'],_0x390bd5=_0x1d0114['stdout']['filter'](_0x172dda=>_0x172dda['timestamp']>=_0x4e9504),_0x3ce279=_0x1d0114['stderr'][_0x34ea75(0x1e6)](_0x6f01b6=>_0x6f01b6['timestamp']>=_0x4e9504);return{'processId':processId,'isRunning':_0x1d0114['isRunning'],'duration':Math[_0x34ea75(0x1fd)](_0x273d9e/0x3e8)+_0x34ea75(0x210)+Math[_0x34ea75(0x1fd)](_0x273d9e/0xea60)+'m\x20'+Math[_0x34ea75(0x1fd)](_0x273d9e%0xea60/0x3e8)+'s)','startTime':new Date(_0x1d0114['startTime'])[_0x34ea75(0x260)](),'currentTime':new Date(_0x329750)['toISOString'](),'lastUpdate':new Date(_0x1d0114[_0x34ea75(0x1f8)])['toISOString'](),'newStdout':_0x390bd5[_0x34ea75(0x247)](_0x2cbe33=>_0x2cbe33['data'])['join'](''),'newStderr':_0x3ce279['map'](_0x413061=>_0x413061[_0x34ea75(0x1d7)])['join'](''),'stdoutCount':_0x390bd5[_0x34ea75(0x1fc)],'stderrCount':_0x3ce279[_0x34ea75(0x1fc)],'totalStdoutLines':_0x1d0114[_0x34ea75(0x24d)]['length'],'totalStderrLines':_0x1d0114[_0x34ea75(0x209)][_0x34ea75(0x1fc)],'command':_0x1d0114[_0x34ea75(0x258)],'workingDirectory':_0x1d0114['workingDir'],'timedOut':_0x1d0114['timedOut']||![],'exitCode':_0x1d0114['exitCode']};}async['terminateProcess'](processId){const _0x5e9562=a0_0x2bc939;if(!this['activeProcesses'][_0x5e9562(0x1b5)](processId))return{'action':'terminate','processId':processId,'success':![],'error':_0x5e9562(0x282)};const _0x4f833b=this[_0x5e9562(0x232)]['get'](processId);try{return this[_0x5e9562(0x284)][_0x5e9562(0x28e)]?_0x4f833b['kill'](_0x5e9562(0x270)):_0x4f833b[_0x5e9562(0x27b)]('SIGINT'),await new Promise(_0x1e87d4=>setTimeout(_0x1e87d4,0x7d0)),this[_0x5e9562(0x232)]['has'](processId)&&!_0x4f833b[_0x5e9562(0x1f5)]&&_0x4f833b['kill']('SIGKILL'),this[_0x5e9562(0x232)][_0x5e9562(0x1fb)](processId),{'action':_0x5e9562(0x28a),'processId':processId,'success':!![]};}catch(_0x5e502c){return this['activeProcesses']['delete'](processId),{'action':'terminate','processId':processId,'success':![],'error':_0x5e502c[_0x5e9562(0x267)]};}}['getActiveProcesses'](){const _0x3f5019=a0_0x2bc939,processes=[];for(const [processId,_0x5c8d52]of this['activeProcesses'][_0x3f5019(0x208)]()){processes[_0x3f5019(0x26c)]({'processId':processId,'pid':_0x5c8d52['pid'],'isRunning':!_0x5c8d52[_0x3f5019(0x1f5)]&&_0x5c8d52['exitCode']===null,'spawnfile':_0x5c8d52[_0x3f5019(0x26f)],'spawnargs':_0x5c8d52['spawnargs']});}return processes;}['clearCache'](){const _0x480ea3=a0_0x2bc939;this[_0x480ea3(0x200)][_0x480ea3(0x1c5)](),this[_0x480ea3(0x24a)][_0x480ea3(0x1c5)](),this[_0x480ea3(0x1e7)]['info'](_0x480ea3(0x212));}['getPlatformInfo'](){const _0xa8c601=a0_0x2bc939;return{...this[_0xa8c601(0x284)],'nodeVersion':process['version'],'activeProcesses':this['activeProcesses']['size'],'activeSessions':this[_0xa8c601(0x1d6)][_0xa8c601(0x287)],'cacheSize':this['environmentCache'][_0xa8c601(0x287)]};}['getActiveSessions'](){const _0x1052cf=a0_0x2bc939,_0x41bff3=[];for(const [_0x36e9b3,_0x41f3c3]of this['sessions']['entries']()){_0x41bff3[_0x1052cf(0x26c)]({'sessionId':_0x36e9b3,'workingDirectory':_0x41f3c3[_0x1052cf(0x1d1)],'createdAt':_0x41f3c3['createdAt'],'lastActivity':_0x41f3c3[_0x1052cf(0x237)],'commandCount':_0x41f3c3['commandHistory']['length']});}return _0x41bff3;}[a0_0x2bc939(0x22d)](){const _0x2cbc23=a0_0x2bc939,_0x2f8545=[],_0x29ae0a=[];try{if(this[_0x2cbc23(0x284)]['isWindows'])!process[_0x2cbc23(0x28f)]['WINDIR']&&_0x29ae0a[_0x2cbc23(0x26c)]('Windows\x20environment\x20variables\x20not\x20detected');else{const _0x24e8c1=require('fs');!_0x24e8c1[_0x2cbc23(0x283)](this[_0x2cbc23(0x284)][_0x2cbc23(0x26a)])&&_0x2f8545[_0x2cbc23(0x26c)]('Default\x20shell\x20not\x20found:\x20'+this[_0x2cbc23(0x284)][_0x2cbc23(0x26a)]);}}catch(_0x14e2fa){_0x2f8545['push']('Shell\x20validation\x20error:\x20'+_0x14e2fa['message']);}const _0x3bfc53=this['config'][_0x2cbc23(0x1c9)]?.['terminal'];return _0x3bfc53&&(_0x3bfc53[_0x2cbc23(0x1f9)]&&_0x3bfc53['commandTimeout']<0x3e8&&_0x29ae0a[_0x2cbc23(0x26c)]('Command\x20timeout\x20is\x20very\x20low\x20(<\x201000ms)')),{'valid':_0x2f8545['length']===0x0,'issues':_0x2f8545,'warnings':_0x29ae0a,'platform':this['platformInfo'][_0x2cbc23(0x285)],'shell':this['platformInfo']['defaultShell']};}['getDescription'](){return'\x0aTerminal\x20Tool:\x20Cross-platform\x20terminal\x20command\x20execution\x20with\x20comprehensive\x20environment\x20support.\x0a\x0aFeatures:\x0a-\x20Automatic\x20environment\x20detection\x20and\x20setup\x0a-\x20Cross-platform\x20compatibility\x20(Windows,\x20macOS,\x20Linux)\x0a-\x20Development\x20tool\x20path\x20discovery\x20(Node.js,\x20npm,\x20Python,\x20Git,\x20etc.)\x0a-\x20Profile\x20and\x20environment\x20variable\x20loading\x0a-\x20Security\x20command\x20blocking\x0a\x0aUsage:\x0a[tool\x20id=\x22terminal\x22\x20type=\x22auto\x20|\x20powershell\x20|\x20bash\x20|\x20zsh\x20|\x20cmd\x22]\x0a[run-command]\x0acommand\x20to\x20execute\x0a[/run-command]\x0a\x0a[input-value]\x0avalue\x20to\x20input\x20when\x20prompted\x0a[/input-value]\x0a\x0a[check-environment]\x0aDisplay\x20environment\x20information\x0a[/check-environment]\x0a[/tool]\x0a\x0aExamples:\x0a\x0a1.\x20Check\x20environment:\x0a[tool\x20id=\x22terminal\x22]\x0a[check-environment]\x0a[/check-environment]\x0a[/tool]\x0a\x0a2.\x20Run\x20Node.js\x20commands:\x0a[tool\x20id=\x22terminal\x22]\x0a[run-command]\x0anode\x20--version\x20&&\x20npm\x20--version\x0a[/run-command]\x0a[/tool]\x0a\x0a3.\x20Install\x20packages:\x0a[tool\x20id=\x22terminal\x22]\x0a[run-command]\x0anpm\x20install\x20express\x0a[/run-command]\x0a[/tool]\x0a\x0a4.\x20Interactive\x20command\x20with\x20input:\x0a[tool\x20id=\x22terminal\x22]\x0a[run-command]\x0anpm\x20init\x0a[/run-command]\x0a[input-value]\x0amy-project\x0a[/input-value]\x0a[/tool]\x0a\x0a5.\x20Session-aware\x20usage\x20(supports\x20directory\x20persistence):\x0a[tool\x20id=\x22terminal\x22\x20session=\x22optional-session-id\x22]\x0a[change-directory]\x0apath/to/directory\x0a[/change-directory]\x0a[run-command]\x0acommand\x20to\x20execute\x0a[/run-command]\x0a[get-output]\x0aprocess-id|since-timestamp\x0a[/get-output]\x0a[monitor-process]\x0aprocess-id\x0a[/monitor-process]\x0a[/tool]\x0a\x0aSession\x20management\x20commands:\x0a[tool\x20id=\x22terminal\x22]\x0a[create-session]\x0asession-id|optional-initial-directory\x0a[/create-session]\x0a[get-session-info]\x0a[/get-session-info]\x0a[/tool]\x0a\x0aSOLUTION\x20FOR\x20DIRECTORY\x20MISMATCH\x20ISSUE:\x0a[tool\x20id=\x22terminal\x22]\x0a[change-directory]\x0aarchitech/backend\x0a[/change-directory]\x0a[run-command]\x0anpm\x20run\x20build\x0a[/run-command]\x0a[/tool]\x0a\x0aMultiple\x20session\x20workflow:\x0a[tool\x20id=\x22terminal\x22]\x0a[create-session]\x0abackend|architech/backend\x0a[/create-session]\x0a[create-session]\x0afrontend|architech/frontend\x0a[/create-session]\x0a[/tool]\x0a\x0a[tool\x20id=\x22terminal\x22\x20session=\x22backend\x22]\x0a[run-command]\x0anpm\x20run\x20build\x0a[/run-command]\x0a[/tool]\x0a\x0a[tool\x20id=\x22terminal\x22\x20session=\x22frontend\x22]\x0a[run-command]\x0anpm\x20start\x0a[/run-command]\x0a[/tool]\x0a\x0aKey\x20Improvements:\x0a-\x20Working\x20directory\x20persists\x20between\x20commands\x20within\x20sessions\x0a-\x20Multiple\x20independent\x20terminal\x20sessions\x20supported\x0a-\x20Built-in\x20change-directory\x20command\x20that\x20updates\x20session\x20state\x0a-\x20Session\x20information\x20tracking\x20and\x20command\x20history\x0a-\x20Backwards\x20compatibility\x20with\x20existing\x20syntax\x0a-\x20Enhanced\x20debugging\x20with\x20session\x20context\x0a-\x20Continuous\x20output\x20monitoring\x20with\x20timestamps\x0a-\x20Process\x20duration\x20tracking\x20(minutes:seconds\x20format)\x0a-\x20Enhanced\x20timeout\x20that\x20actually\x20terminates\x20stuck\x20processes\x0a-\x20Real-time\x20output\x20buffer\x20for\x20monitoring\x20long-running\x20commands\x0a\x0aSpecial\x20placeholders\x20for\x20input\x20(for\x20interactive\x20commands):\x0a-\x20[CTRL_C]:\x20Send\x20Ctrl+C\x20signal\x20to\x20terminate\x0a-\x20[CTRL_D]:\x20Send\x20Ctrl+D\x20(EOF)\x20to\x20close\x20input\x0a-\x20[ENTER]:\x20Send\x20Enter\x20key\x0a-\x20[ARROW_UP],\x20[ARROW_DOWN]:\x20Arrow\x20keys\x20for\x20navigation\x0a\x0aMonitoring\x20long-running\x20processes:\x0a[tool\x20id=\x22terminal\x22]\x0a[run-command]\x0anpm\x20install\x0a[/run-command]\x0a[/tool]\x0a\x0aThen\x20check\x20progress:\x0a[tool\x20id=\x22terminal\x22]\x0a[get-output]\x0aprocess-id|0\x0a[/get-output]\x0a[/tool]\x0a\x0aOr\x20monitor\x20with\x20full\x20status:\x0a[tool\x20id=\x22terminal\x22]\x0a[monitor-process]\x0aprocess-id\x0a[/monitor-process]\x0a[/tool]\x0a\x0aSecurity:\x20Commands\x20containing\x20dangerous\x20operations\x20(sudo,\x20rm\x20-rf,\x20format,\x20etc.)\x20are\x20blocked.\x0a\x0aThe\x20tool\x20automatically:\x0a-\x20Detects\x20your\x20operating\x20system\x20and\x20sets\x20up\x20appropriate\x20shell\x0a-\x20Loads\x20shell\x20profiles\x20and\x20environment\x20variables\x0a-\x20Discovers\x20development\x20tool\x20installation\x20paths\x0a-\x20Sets\x20up\x20proper\x20PATH\x20for\x20Node.js,\x20npm,\x20Python,\x20Git,\x20and\x20other\x20tools\x0a-\x20Handles\x20cross-platform\x20path\x20differences\x0a\x0aBefore\x20running\x20commands,\x20check\x20working\x20directory\x20and\x20navigate\x20to\x20desired\x20location\x20using\x20[change-directory]\x20command\x20(alternative:\x20cd\x20command)\x0a\x20\x20\x20\x20';}}