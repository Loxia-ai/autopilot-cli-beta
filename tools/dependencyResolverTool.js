(function(_0xef6a82,_0x23d422){const _0x52c63a=a0_0xaf71,_0x2d19b3=_0xef6a82();while(!![]){try{const _0x235d68=-parseInt(_0x52c63a(0xcf))/0x1*(parseInt(_0x52c63a(0xc5))/0x2)+parseInt(_0x52c63a(0xbe))/0x3*(parseInt(_0x52c63a(0xd2))/0x4)+-parseInt(_0x52c63a(0xd7))/0x5*(parseInt(_0x52c63a(0xa9))/0x6)+parseInt(_0x52c63a(0xc3))/0x7+parseInt(_0x52c63a(0xc1))/0x8*(-parseInt(_0x52c63a(0xad))/0x9)+parseInt(_0x52c63a(0xc8))/0xa+parseInt(_0x52c63a(0xd0))/0xb;if(_0x235d68===_0x23d422)break;else _0x2d19b3['push'](_0x2d19b3['shift']());}catch(_0x31d88b){_0x2d19b3['push'](_0x2d19b3['shift']());}}}(a0_0x4e96,0xe35b4));import{promises as a0_0x12fe6d}from'fs';import a0_0xbbb6df from'path';import{exec as a0_0x4a208f}from'child_process';function a0_0xaf71(_0x1799e5,_0x3206b6){const _0x4e9638=a0_0x4e96();return a0_0xaf71=function(_0xaf7144,_0x1e3580){_0xaf7144=_0xaf7144-0xa8;let _0x22bd35=_0x4e9638[_0xaf7144];if(a0_0xaf71['jskWYn']===undefined){var _0x44bce5=function(_0x12fe6d){const _0xbbb6df='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x4a208f='',_0x557739='';for(let _0x4033d9=0x0,_0x4c0818,_0x6ef294,_0x35f7db=0x0;_0x6ef294=_0x12fe6d['charAt'](_0x35f7db++);~_0x6ef294&&(_0x4c0818=_0x4033d9%0x4?_0x4c0818*0x40+_0x6ef294:_0x6ef294,_0x4033d9++%0x4)?_0x4a208f+=String['fromCharCode'](0xff&_0x4c0818>>(-0x2*_0x4033d9&0x6)):0x0){_0x6ef294=_0xbbb6df['indexOf'](_0x6ef294);}for(let _0x235991=0x0,_0x3652f2=_0x4a208f['length'];_0x235991<_0x3652f2;_0x235991++){_0x557739+='%'+('00'+_0x4a208f['charCodeAt'](_0x235991)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x557739);};a0_0xaf71['KfDGdZ']=_0x44bce5,_0x1799e5=arguments,a0_0xaf71['jskWYn']=!![];}const _0x2d74d0=_0x4e9638[0x0],_0x584273=_0xaf7144+_0x2d74d0,_0x361482=_0x1799e5[_0x584273];return!_0x361482?(_0x22bd35=a0_0xaf71['KfDGdZ'](_0x22bd35),_0x1799e5[_0x584273]=_0x22bd35):_0x22bd35=_0x361482,_0x22bd35;},a0_0xaf71(_0x1799e5,_0x3206b6);}import{promisify}from'util';import{BaseTool}from'./baseTool.js';import{TagParser}from'../utilities/tagParser.js';function a0_0x4e96(){const _0x46fa50=['4P2mieLUC3rHBgXHDgLVBIbMywLSzwq6ia','A2v5CW','mZa2ndu5tLPoqvDm','8j+uJsbszwfKAw5NihbHy2THz2uUANnVBI4UlG','ihbHy2THz2vZihrOyxqGy2fUigjLihvWzgf0zwq','y2HLy2S','u3vJy2vZC2z1BgX5ihvWzgf0zwqG','rgvWzw5Kzw5JEsbYzxnVBhzLCIbYDw5UAw5NigLUia','igLZihvWlxrVlwrHDguGka','zw50CMLLCW','ChvZAa','twLZC2LUzYbBCMvZB2X2zv0Gy29TBwfUzcbPBIbKzxbLBMrLBMn5ihjLC29SDMvYihrVB2W','cVcFM6aGvxbKyxrPBMCGCgfJA2fNzs5QC29UihDPDgGGCMvZB2X2zwqGDMvYC2LVBNmUlI4','zxjYB3i','BgvUz3rO','zgv2rgvWzw5Kzw5JAwvZ','uNvUihDPDgGGBw9Kzt0IzML4iIb0BYb1CgrHDguGCgfJA2fNzs5QC29UigfUzcbPBNn0ywXS','igrLCgvUzgvUy2LLCW','AM9PBG','ndHhvuLKz1C','Bg9Nz2vY','Cgf0Aa','mZKYEuHUAe1T','zgvWzw5Kzw5JAwvZ','mti4ndi4ntfYsxbnAK4','zgLZDc10ywDZ','mKnPuuP0AG','yxr0CMLIDxrLCW','8j+sVIbWywnRywDLlMPZB24GDxbKyxrLza','mtqZodK4ndb1wfHdBNa','cVcFK6uGsw5ZDgfSBgLUzYbKzxbLBMrLBMnPzxmUlI4','rgvWzw5Kzw5JEsbYzxnVBhzLCIbLCNjVCJO','Bw9Kzq','cKrLCgvUzgvUy3KGuMvZB2X2zxiGvg9VBdOGuMvZB2X2zxmGtM9Kzs5QCYbWywnRywDLigrLCgvUzgvUy3KGy29UzMXPy3rZigj5ignOzwnRAw5NigfUzcb1CgrHDgLUzYb0BYbSyxrLC3qGy29TCgf0AwjSzsb2zxjZAw9UCY4kcLvZywDLoGPBDg9VBcbPzd0IzgvWlxjLC29SDMvYiL0kw3jLC29SDMuGCgf0Ad0IB3b0Aw9UywWVCgf0Ac90BY9WCM9Qzwn0iIbTB2rLpsjJAgvJA3XMAxH8yxv0BYiGl10kwY90B29SxqOktw9Kzxm6cI0GBw9Kzt0Iy2HLy2SIicHKzwzHDwX0ktOGt25SEsbJAgvJA3mGzM9YigrLCgvUzgvUy3KGAxnZDwvZihDPDgHVDxqGBwfRAw5NignOyw5NzxmklsbTB2rLpsjMAxGIoIbvCgrHDgvZihbHy2THz2uUANnVBIb3AxrOihjLC29SDMvKihzLCNnPB25ZigfUzcbYDw5Zig5WBsbPBNn0ywXScI0GBw9Kzt0Iyxv0BYi6ief1Dg9TyxrPy2fSBhKGzML4zxmGywXSihjLC29SDMfIBguGy29UzMXPy3rZihDPDgHVDxqGChjVBxb0Aw5NcGPqyxjHBwv0zxjZoGOTihbHDgG6ie9WDgLVBMfSihbHDgGGDg8GChjVAMvJDcbKAxjLy3rVCNKGy29UDgfPBMLUzYbWywnRywDLlMPZB24GkgrLzMf1BhrZihrVign1CNjLBNqGzgLYzwn0B3j5kqOTig1Vzgu6ie9WzxjHDgLVBIbTB2rLicHJAgvJAYWGzML4lcbVCIbHDxrVkqOkrxHHBxbSzxm6cJeUienOzwnRigzVCIbKzxbLBMrLBMn5ignVBMzSAwn0CYbPBIbJDxjYzw50igrPCMvJDg9YEtOkw3rVB2WGAwq9iMrLCc1YzxnVBhzLCIjDcLTYzxnVBhzLig1Vzgu9iMnOzwnRiIaVxqPBl3rVB2XDcGOYlIbgAxGGzgvWzw5Kzw5JEsbJB25MBgLJDhmGAw4GysbZCgvJAwzPyYbWCM9Qzwn0oGPBDg9VBcbPzd0IzgvWlxjLC29SDMvYiL0kw3jLC29SDMuGCgf0Ad0IlI9TEs1WCM9Qzwn0iIbTB2rLpsjMAxGIic9DcLSVDg9VBf0kcJmUief1Dg9TyxrPy2fSBhKGCMvZB2X2zsbHBgWGy29UzMXPy3rZoGPBDg9VBcbPzd0IzgvWlxjLC29SDMvYiL0kw3jLC29SDMuGBw9Kzt0Iyxv0BYiGl10kwY90B29SxqOkvgHLihrVB2WGD2LSBdOkms4GuMvHzcbWywnRywDLlMPZB24GzNjVBsb0AguGC3bLy2LMAwvKigrPCMvJDg9YEqOYlIbdAgvJAYbLywnOigrLCgvUzgvUy3KGywDHAw5ZDcbUCg0GCMvNAxn0CNKGzM9YigXHDgvZDcbJB21WyxrPyMXLihzLCNnPB25ZcJmUieLKzw50Awz5igrLCgvUzgvUy2LLCYb0Agf0ig5LzwqGDxbKyxrLCWO0lIbjBIbMAxGVyxv0BYbTB2rLoIbvCgrHDguGCgfJA2fNzs5QC29UigfUzcbYDw4GBNbTigLUC3rHBgWkns4GuMvWB3j0ihrOzsbYzxn1BhrZig9MihrOzsbVCgvYyxrPB24kcLvtrsbuseLtifrpt0WGrfvssu5hifLpvviGrevwruXpue1ftLqGq1LdteuGqu5eiervuKLorYbcruzpuKuGuLvotKLorYbuseuGq09ers4k','4PQG77Ipica','BwvZC2fNzq','mty5otK1owHWz2z2ua','mtmZmtG0ntLcwxf0zeu','zML4','mZa3nduYqwHkBLb5','tM8GzgvWzw5Kzw5JAwvZigzVDw5KigLUihbHy2THz2uUANnVBG','Bwf0y2G','ig1VzguGzM9YoIa','ywnJzxnZ','mJeXmgfMwgLAwq','C3rYAw5NAwz5','BMfTzq','cVcFK4OGrM91BMqG','v2fYBMLUzZOG','mJaXmtjHA0Lby0O','cVcFK4qGtM8GDxbKyxrLCYbUzwvKzwqGAw4GCgfJA2fNzs5QC29U'];a0_0x4e96=function(){return _0x46fa50;};return a0_0x4e96();}const exec=promisify(a0_0x4a208f);export class DependencyResolverTool extends BaseTool{['getDescription'](){const _0x1ff6e9=a0_0xaf71;return _0x1ff6e9(0xcc);}['parseParameters'](_0x557739){const _0x3a3e9f=a0_0xaf71,_0x4033d9=new TagParser(),_0x4c0818=_0x4033d9['parse'](_0x557739),_0x6ef294=_0x4c0818['find'](_0x35f7db=>_0x35f7db[_0x3a3e9f(0xd9)]==='resolve');if(!_0x6ef294)throw new Error(_0x3a3e9f(0xb6));return{'path':_0x6ef294[_0x3a3e9f(0xc6)][_0x3a3e9f(0xc0)]||'.','mode':_0x6ef294['attributes'][_0x3a3e9f(0xcb)]||_0x3a3e9f(0xb0)};}async['getLatestCompatibleVersion'](_0x235991,_0x3652f2){const _0x5f3587=a0_0xaf71;try{const _0x2a40ba=await fetch('https://registry.npmjs.org/'+_0x235991);if(!_0x2a40ba['ok'])throw new Error('Failed\x20to\x20fetch\x20info\x20for\x20'+_0x235991+':\x20'+_0x2a40ba['statusText']);const _0x5dca5c=await _0x2a40ba['json'](),_0x3d6dcd=_0x5dca5c[_0x5f3587(0xc4)]?.['latest'];if(!_0x3d6dcd)return null;const _0x53d2e1=_0x3652f2[_0x5f3587(0xd4)](/\^?~?(\d+)/)?.[0x1],_0x2c3b1d=_0x3d6dcd[_0x5f3587(0xd4)](/(\d+)/)?.[0x1];if(_0x53d2e1&&_0x2c3b1d&&parseInt(_0x2c3b1d)>parseInt(_0x53d2e1))return _0x3d6dcd;return null;}catch(_0x23174f){return this['logger'][_0x5f3587(0xb8)]('Failed\x20to\x20check\x20'+_0x235991+':\x20'+_0x23174f['message']),null;}}async['executeWithParameters'](_0x2cfbc1,_0x3c5b83){const _0x289794=a0_0xaf71,{path:_0x21c427,mode:_0x4354c4}=_0x2cfbc1,_0xd0ddee=a0_0xbbb6df['isAbsolute'](_0x21c427)?_0x21c427:a0_0xbbb6df[_0x289794(0xbd)](_0x3c5b83,_0x21c427),_0x466767=a0_0xbbb6df[_0x289794(0xbd)](_0xd0ddee,'package.json');this[_0x289794(0xbf)]['info'](_0x289794(0xb2)+_0x4354c4+_0x289794(0xd5)+_0xd0ddee);let _0x300ce7=[];try{try{await a0_0x12fe6d[_0x289794(0xd6)](_0x466767);}catch{return{'success':![],'message':'No\x20package.json\x20found\x20at:\x20'+_0x466767};}_0x300ce7['push'](_0x289794(0xae));const _0x1f062a=await a0_0x12fe6d['readFile'](_0x466767,'utf-8'),_0x2b88bf=JSON['parse'](_0x1f062a),_0x429e55={..._0x2b88bf['dependencies'],..._0x2b88bf['devDependencies']};if(Object['keys'](_0x429e55)['length']===0x0)return{'success':!![],'message':_0x289794(0xd3),'output':_0x300ce7['join']('\x0a')};_0x300ce7[_0x289794(0xb5)]('ðŸ“¦\x20Checking\x20dependencies\x20for\x20latest\x20compatible\x20versions...');const _0x1db7a7={},_0x19791a=[];for(const [_0x26e2d0,_0x5a14f4]of Object['entries'](_0x429e55)){try{const _0x2e3283=await this['getLatestCompatibleVersion'](_0x26e2d0,_0x5a14f4);if(_0x2e3283){const _0x45761d=_0x5a14f4['replace'](/[\^~]/,'');_0x2e3283!==_0x45761d?(_0x19791a[_0x289794(0xb5)](_0x289794(0xcd)+_0x26e2d0+':\x20current\x20'+_0x5a14f4+'\x20â†’\x20available\x20'+_0x2e3283),_0x1db7a7[_0x26e2d0]='^'+_0x2e3283):_0x19791a[_0x289794(0xb5)]('âœ…\x20'+_0x26e2d0+'\x20is\x20up-to-date\x20('+_0x5a14f4+')');}else _0x19791a[_0x289794(0xb5)]('âœ…\x20'+_0x26e2d0+_0x289794(0xb3)+_0x5a14f4+')');}catch(_0x101d97){_0x19791a['push']('âŒ\x20Failed\x20to\x20check\x20'+_0x26e2d0+':\x20'+_0x101d97['message']);}}_0x300ce7[_0x289794(0xb5)](..._0x19791a);if(_0x4354c4===_0x289794(0xb0))return Object['keys'](_0x1db7a7)['length']>0x0?(_0x300ce7[_0x289794(0xb5)](_0x289794(0xda)+Object[_0x289794(0xac)](_0x1db7a7)['length']+_0x289794(0xaf)),_0x300ce7[_0x289794(0xb5)](_0x289794(0xbb))):_0x300ce7[_0x289794(0xb5)]('\x0aâœ…\x20All\x20dependencies\x20are\x20up-to-date!'),{'success':!![],'message':'Dependency\x20check\x20completed','updates':_0x1db7a7,'output':_0x300ce7[_0x289794(0xbd)]('\x0a')};if((_0x4354c4===_0x289794(0xd1)||_0x4354c4==='auto')&&Object['keys'](_0x1db7a7)['length']>0x0){_0x300ce7['push'](_0x289794(0xb7));for(const [_0x56ad64,_0x6a0415]of Object[_0x289794(0xb4)](_0x1db7a7)){_0x2b88bf[_0x289794(0xc2)]?.[_0x56ad64]&&(_0x2b88bf[_0x289794(0xc2)][_0x56ad64]=_0x6a0415),_0x2b88bf[_0x289794(0xba)]?.[_0x56ad64]&&(_0x2b88bf[_0x289794(0xba)][_0x56ad64]=_0x6a0415);}await a0_0x12fe6d['writeFile'](_0x466767,JSON[_0x289794(0xd8)](_0x2b88bf,null,0x2)),_0x300ce7['push'](_0x289794(0xc7)),_0x300ce7[_0x289794(0xb5)](_0x289794(0xc9));try{const {stdout:_0x303bc5,stderr:_0x4e05f2}=await exec('npm\x20install',{'cwd':_0xd0ddee});if(_0x303bc5)_0x300ce7['push'](_0x303bc5);if(_0x4e05f2)_0x300ce7[_0x289794(0xb5)](_0x289794(0xa8)+_0x4e05f2);_0x300ce7[_0x289794(0xb5)]('âœ…\x20Installation\x20complete');try{const {stdout:_0x2161ba}=await exec('npm\x20ls\x20--depth=0',{'cwd':_0xd0ddee});_0x300ce7[_0x289794(0xb5)]('\x0aðŸ“Š\x20Installed\x20versions:'),_0x300ce7[_0x289794(0xb5)](_0x2161ba);}catch(_0x2bbe42){_0x300ce7[_0x289794(0xb5)]('Note:\x20Some\x20peer\x20dependency\x20warnings\x20may\x20exist');}}catch(_0x5d675b){return _0x300ce7[_0x289794(0xb5)](_0x289794(0xab)+_0x5d675b['message']),{'success':![],'message':'Failed\x20to\x20install\x20dependencies','error':_0x5d675b[_0x289794(0xce)],'output':_0x300ce7[_0x289794(0xbd)]('\x0a')};}return{'success':!![],'message':_0x289794(0xb1)+Object['keys'](_0x1db7a7)[_0x289794(0xb9)]+_0x289794(0xbc),'updates':_0x1db7a7,'output':_0x300ce7[_0x289794(0xbd)]('\x0a')};}else{if(_0x4354c4==='fix'||_0x4354c4==='auto')return _0x300ce7[_0x289794(0xb5)](_0x289794(0xaa)),{'success':!![],'message':'No\x20dependency\x20updates\x20required','output':_0x300ce7['join']('\x0a')};}}catch(_0x5a3c43){return this['logger'][_0x289794(0xb8)](_0x289794(0xca),_0x5a3c43),{'success':![],'message':'Dependency\x20resolver\x20failed:\x20'+_0x5a3c43[_0x289794(0xce)],'error':_0x5a3c43['message'],'output':_0x300ce7['join']('\x0a')};}}}