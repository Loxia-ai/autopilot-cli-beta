(function(_0x380255,_0x2810da){const _0x4b710f=a0_0x2d7d,_0x493147=_0x380255();while(!![]){try{const _0x1229d5=-parseInt(_0x4b710f(0xbe))/0x1+-parseInt(_0x4b710f(0x98))/0x2+parseInt(_0x4b710f(0x96))/0x3*(-parseInt(_0x4b710f(0xbd))/0x4)+parseInt(_0x4b710f(0xa1))/0x5*(parseInt(_0x4b710f(0x99))/0x6)+parseInt(_0x4b710f(0xa6))/0x7+-parseInt(_0x4b710f(0x9a))/0x8*(parseInt(_0x4b710f(0xc0))/0x9)+-parseInt(_0x4b710f(0xa3))/0xa*(-parseInt(_0x4b710f(0xc7))/0xb);if(_0x1229d5===_0x2810da)break;else _0x493147['push'](_0x493147['shift']());}catch(_0x1d52ce){_0x493147['push'](_0x493147['shift']());}}}(a0_0x17da,0x458c3));function a0_0x2d7d(_0x5e9629,_0x9215a0){const _0x17da46=a0_0x17da();return a0_0x2d7d=function(_0x2d7d69,_0x370e13){_0x2d7d69=_0x2d7d69-0x95;let _0x5f5362=_0x17da46[_0x2d7d69];if(a0_0x2d7d['MwzIaX']===undefined){var _0x2fb4a3=function(_0x15bc79){const _0x393051='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x24dff4='',_0x3b6104='';for(let _0x152202=0x0,_0x896cb3,_0x1caa08,_0x184327=0x0;_0x1caa08=_0x15bc79['charAt'](_0x184327++);~_0x1caa08&&(_0x896cb3=_0x152202%0x4?_0x896cb3*0x40+_0x1caa08:_0x1caa08,_0x152202++%0x4)?_0x24dff4+=String['fromCharCode'](0xff&_0x896cb3>>(-0x2*_0x152202&0x6)):0x0){_0x1caa08=_0x393051['indexOf'](_0x1caa08);}for(let _0x3e8589=0x0,_0x40a9ab=_0x24dff4['length'];_0x3e8589<_0x40a9ab;_0x3e8589++){_0x3b6104+='%'+('00'+_0x24dff4['charCodeAt'](_0x3e8589)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3b6104);};a0_0x2d7d['yfVOtP']=_0x2fb4a3,_0x5e9629=arguments,a0_0x2d7d['MwzIaX']=!![];}const _0x5b252a=_0x17da46[0x0],_0xbbc8fa=_0x2d7d69+_0x5b252a,_0x543972=_0x5e9629[_0xbbc8fa];return!_0x543972?(_0x5f5362=a0_0x2d7d['yfVOtP'](_0x5f5362),_0x5e9629[_0xbbc8fa]=_0x5f5362):_0x5f5362=_0x543972,_0x5f5362;},a0_0x2d7d(_0x5e9629,_0x9215a0);}import{promises as a0_0x15bc79}from'fs';import a0_0x393051 from'path';function a0_0x17da(){const _0x1a61d4=['v2fYBMLUzZOG','BNbTigLUC3rHBgW','oIbJDxjYzw50ia','Bg9Nz2vY','AxnbyNnVBhv0zq','zgv2rgvWzw5Kzw5JAwvZ','C3rHDhvZvgv4Da','ihbHy2THz2vZihrOyxqGy2fUigjLihvWzgf0zwq','nfzfv1LLqW','ndmXmdeXuhLQwM1J','4PYfieLUC3rHBgXHDgLVBIbJB21WBgv0zq','ouPtreTbta','4PQG77Ipica','Cgf0Aa','8j+sVIbWywnRywDLlMPZB24GDxbKyxrLza','zgLZDc10ywDZ','DxrMltG','rgvWzw5Kzw5JEsbYzxnVBhzLCIbLCNjVCJO','mZqXndC2m1H1zg9zBW','zgvWzw5Kzw5JAwvZ','CgfYC2u','tM90ztOGu29TzsbWzwvYigrLCgvUzgvUy3KGD2fYBMLUz3mGBwf5igv4Axn0','oti5mtGXDfrsCgTm','AM9PBG','mZqWnZqYB2PMyNzH','nNzYvMTlyG','mtu0odG3mLvjCKLIrq','rMfPBgvKihrVignOzwnRia','ywnJzxnZ','yxv0BW','zML4','BgvUz3rO','igrLCgvUzgvUy2LLCW','mta0otG1qNLcB3LK','cVcFM6aGvxbKyxrPBMCGCgfJA2fNzs5QC29UihDPDgGGCMvZB2X2zwqGDMvYC2LVBNmUlI4','mZbXwMXAzMW','yxr0CMLIDxrLCW','ChvZAa','mZa2mtaYm1j0vfDvAW','Bgf0zxn0','A2v5CW','cKrLCgvUzgvUy3KGuMvZB2X2zxiGvg9VBdOGuMvZB2X2zxmGtM9Kzs5QCYbWywnRywDLigrLCgvUzgvUy3KGy29UzMXPy3rZigj5ignOzwnRAw5NigfUzcb1CgrHDgLUzYb0BYbSyxrLC3qGy29TCgf0AwjSzsb2zxjZAw9UCY4kcLvZywDLoGPBDg9VBcbPzd0IzgvWlxjLC29SDMvYiL0kw3jLC29SDMuGCgf0Ad0IB3b0Aw9UywWVCgf0Ac90BY9WCM9Qzwn0iIbTB2rLpsjJAgvJA3XMAxH8yxv0BYiGl10kwY90B29SxqOktw9Kzxm6cI0GBw9Kzt0Iy2HLy2SIicHKzwzHDwX0ktOGt25SEsbJAgvJA3mGzM9YigrLCgvUzgvUy3KGAxnZDwvZihDPDgHVDxqGBwfRAw5NignOyw5NzxmklsbTB2rLpsjMAxGIoIbvCgrHDgvZihbHy2THz2uUANnVBIb3AxrOihjLC29SDMvKihzLCNnPB25ZigfUzcbYDw5Zig5WBsbPBNn0ywXScI0GBw9Kzt0Iyxv0BYi6ief1Dg9TyxrPy2fSBhKGzML4zxmGywXSihjLC29SDMfIBguGy29UzMXPy3rZihDPDgHVDxqGChjVBxb0Aw5NcGPqyxjHBwv0zxjZoGOTihbHDgG6ie9WDgLVBMfSihbHDgGGDg8GChjVAMvJDcbKAxjLy3rVCNKGy29UDgfPBMLUzYbWywnRywDLlMPZB24GkgrLzMf1BhrZihrVign1CNjLBNqGzgLYzwn0B3j5kqOTig1Vzgu6ie9WzxjHDgLVBIbTB2rLicHJAgvJAYWGzML4lcbVCIbHDxrVkqOkrxHHBxbSzxm6cJeUienOzwnRigzVCIbKzxbLBMrLBMn5ignVBMzSAwn0CYbPBIbJDxjYzw50igrPCMvJDg9YEtOkw3rVB2WGAwq9iMrLCc1YzxnVBhzLCIjDcLTYzxnVBhzLig1Vzgu9iMnOzwnRiIaVxqPBl3rVB2XDcGOYlIbgAxGGzgvWzw5Kzw5JEsbJB25MBgLJDhmGAw4GysbZCgvJAwzPyYbWCM9Qzwn0oGPBDg9VBcbPzd0IzgvWlxjLC29SDMvYiL0kw3jLC29SDMuGCgf0Ad0IlI9TEs1WCM9Qzwn0iIbTB2rLpsjMAxGIic9DcLSVDg9VBf0kcJmUief1Dg9TyxrPy2fSBhKGCMvZB2X2zsbHBgWGy29UzMXPy3rZoGPBDg9VBcbPzd0IzgvWlxjLC29SDMvYiL0kw3jLC29SDMuGBw9Kzt0Iyxv0BYiGl10kwY90B29SxqOkvgHLihrVB2WGD2LSBdOkms4GuMvHzcbWywnRywDLlMPZB24GzNjVBsb0AguGC3bLy2LMAwvKigrPCMvJDg9YEqOYlIbdAgvJAYbLywnOigrLCgvUzgvUy3KGywDHAw5ZDcbUCg0GCMvNAxn0CNKGzM9YigXHDgvZDcbJB21WyxrPyMXLihzLCNnPB25ZcJmUieLKzw50Awz5igrLCgvUzgvUy2LLCYb0Agf0ig5LzwqGDxbKyxrLCWO0lIbjBIbMAxGVyxv0BYbTB2rLoIbvCgrHDguGCgfJA2fNzs5QC29UigfUzcbYDw4GBNbTigLUC3rHBgWkns4GuMvWB3j0ihrOzsbYzxn1BhrZig9MihrOzsbVCgvYyxrPB24kcLvtrsbuseLtifrpt0WGrfvssu5hifLpvviGrevwruXpue1ftLqGq1LdteuGqu5eiervuKLorYbcruzpuKuGuLvotKLorYbuseuGq09ers4k','BwvZC2fNzq','CMvHzezPBgu','CMvWBgfJzq','igLZihvWlxrVlwrHDguGka','4P2miezHAwXLzcb0BYbJAgvJAYa','zw50CMLLCW','cUkCHsbbBgWGzgvWzw5Kzw5JAwvZigfYzsb1Cc10BY1KyxrLiq','rgvWzw5Kzw5JEsbJAgvJAYbJB21WBgv0zwq','y2HLy2S','CMvZB2X2zq','z2v0tgf0zxn0q29TCgf0AwjSzvzLCNnPB24'];a0_0x17da=function(){return _0x1a61d4;};return a0_0x17da();}import{exec as a0_0x24dff4}from'child_process';import{promisify}from'util';import{BaseTool}from'./baseTool.js';import{TagParser}from'../utilities/tagParser.js';const exec=promisify(a0_0x24dff4);export class DependencyResolverTool extends BaseTool{['getDescription'](){const _0x520044=a0_0x2d7d;return _0x520044(0xa9);}['parseParameters'](_0x3b6104){const _0x3b5fc3=a0_0x2d7d,_0x152202=TagParser['parseTags'](_0x3b6104,_0x3b5fc3(0xb3));if(!_0x152202||_0x152202[_0x3b5fc3(0x9f)]===0x0)throw new Error('Missing\x20[resolve]\x20command\x20in\x20dependency\x20resolver\x20tool');const _0x896cb3=_0x152202[0x0];return{'path':_0x896cb3[_0x3b5fc3(0xa4)][_0x3b5fc3(0xc2)]||'.','mode':_0x896cb3[_0x3b5fc3(0xa4)]['mode']||_0x3b5fc3(0xb2)};}async['getLatestCompatibleVersion'](_0x1caa08,_0x184327){const _0x4aa1f6=a0_0x2d7d;try{const _0x3e8589=await fetch('https://registry.npmjs.org/'+_0x1caa08);if(!_0x3e8589['ok'])throw new Error('Failed\x20to\x20fetch\x20info\x20for\x20'+_0x1caa08+':\x20'+_0x3e8589[_0x4aa1f6(0xbb)]);const _0x40a9ab=await _0x3e8589['json'](),_0x434c19=_0x40a9ab[_0x4aa1f6(0xc4)]?.[_0x4aa1f6(0xa7)];if(!_0x434c19)return null;const _0x2d5aa4=_0x184327['match'](/\^?~?(\d+)/)?.[0x1],_0x1f7dab=_0x434c19['match'](/(\d+)/)?.[0x1];if(_0x2d5aa4&&_0x1f7dab&&parseInt(_0x1f7dab)>parseInt(_0x2d5aa4))return _0x434c19;return null;}catch(_0x29047c){return this['logger']['error'](_0x4aa1f6(0x9b)+_0x1caa08+':\x20'+_0x29047c[_0x4aa1f6(0xaa)]),null;}}async['executeWithParameters'](_0x304d42,_0x2f19c7){const _0x449640=a0_0x2d7d,{path:_0x532b7e,mode:_0x3bf872}=_0x304d42,_0x5cad33=a0_0x393051[_0x449640(0xb9)](_0x532b7e)?_0x532b7e:a0_0x393051[_0x449640(0x97)](_0x2f19c7,_0x532b7e),_0x5ba777=a0_0x393051[_0x449640(0x97)](_0x5cad33,'package.json');this['logger']['info']('Dependency\x20resolver\x20running\x20in\x20'+_0x3bf872+'\x20mode\x20for:\x20'+_0x5cad33);let _0x29050d=[];try{try{await a0_0x15bc79[_0x449640(0x9c)](_0x5ba777);}catch{return{'success':![],'message':'No\x20package.json\x20found\x20at:\x20'+_0x5ba777};}_0x29050d[_0x449640(0xa5)]('üîç\x20Reading\x20package.json...');const _0x1b1203=await a0_0x15bc79[_0x449640(0xab)](_0x5ba777,_0x449640(0xc5)),_0x7fb9df=JSON[_0x449640(0xc9)](_0x1b1203),_0x20df03={..._0x7fb9df['dependencies'],..._0x7fb9df['devDependencies']};if(Object[_0x449640(0xa8)](_0x20df03)['length']===0x0)return{'success':!![],'message':'No\x20dependencies\x20found\x20in\x20package.json','output':_0x29050d[_0x449640(0x97)]('\x0a')};_0x29050d[_0x449640(0xa5)]('üì¶\x20Checking\x20dependencies\x20for\x20latest\x20compatible\x20versions...');const _0x1192eb={},_0x56ca9c=[];for(const [_0x49f9f7,_0x566a81]of Object[_0x449640(0xaf)](_0x20df03)){try{const _0x1b364d=await this[_0x449640(0xb4)](_0x49f9f7,_0x566a81);if(_0x1b364d){const _0xf7c375=_0x566a81[_0x449640(0xac)](/[\^~]/,'');_0x1b364d!==_0xf7c375?(_0x56ca9c[_0x449640(0xa5)](_0x449640(0xc1)+_0x49f9f7+_0x449640(0xb7)+_0x566a81+'\x20‚Üí\x20available\x20'+_0x1b364d),_0x1192eb[_0x49f9f7]='^'+_0x1b364d):_0x56ca9c['push']('‚úÖ\x20'+_0x49f9f7+'\x20is\x20up-to-date\x20('+_0x566a81+')');}else _0x56ca9c['push']('‚úÖ\x20'+_0x49f9f7+_0x449640(0xad)+_0x566a81+')');}catch(_0x18e2bd){_0x56ca9c['push'](_0x449640(0xae)+_0x49f9f7+':\x20'+_0x18e2bd['message']);}}_0x29050d[_0x449640(0xa5)](..._0x56ca9c);if(_0x3bf872==='check')return Object['keys'](_0x1192eb)['length']>0x0?(_0x29050d['push']('\x0aüìä\x20Found\x20'+Object['keys'](_0x1192eb)['length']+_0x449640(0xbc)),_0x29050d[_0x449640(0xa5)]('Run\x20with\x20mode=\x22fix\x22\x20to\x20update\x20package.json\x20and\x20install')):_0x29050d[_0x449640(0xa5)](_0x449640(0xb0)),{'success':!![],'message':_0x449640(0xb1),'updates':_0x1192eb,'output':_0x29050d['join']('\x0a')};if((_0x3bf872==='fix'||_0x3bf872===_0x449640(0x9d))&&Object['keys'](_0x1192eb)['length']>0x0){_0x29050d[_0x449640(0xa5)](_0x449640(0xa2));for(const [_0x1b118f,_0x36bb8e]of Object['entries'](_0x1192eb)){_0x7fb9df['dependencies']?.[_0x1b118f]&&(_0x7fb9df[_0x449640(0xc8)][_0x1b118f]=_0x36bb8e),_0x7fb9df[_0x449640(0xba)]?.[_0x1b118f]&&(_0x7fb9df[_0x449640(0xba)][_0x1b118f]=_0x36bb8e);}await a0_0x15bc79['writeFile'](_0x5ba777,JSON['stringify'](_0x7fb9df,null,0x2)),_0x29050d['push'](_0x449640(0xc3)),_0x29050d['push']('\x0aüì•\x20Installing\x20dependencies...');try{const {stdout:_0x54d23a,stderr:_0x8384f}=await exec(_0x449640(0xb6),{'cwd':_0x5cad33});if(_0x54d23a)_0x29050d['push'](_0x54d23a);if(_0x8384f)_0x29050d['push'](_0x449640(0xb5)+_0x8384f);_0x29050d['push'](_0x449640(0xbf));try{const {stdout:_0x5be6f8}=await exec('npm\x20ls\x20--depth=0',{'cwd':_0x5cad33});_0x29050d['push']('\x0aüìä\x20Installed\x20versions:'),_0x29050d['push'](_0x5be6f8);}catch(_0x44db89){_0x29050d['push'](_0x449640(0x95));}}catch(_0xd505ef){return _0x29050d['push']('‚ùå\x20Installation\x20failed:\x20'+_0xd505ef[_0x449640(0xaa)]),{'success':![],'message':'Failed\x20to\x20install\x20dependencies','error':_0xd505ef[_0x449640(0xaa)],'output':_0x29050d[_0x449640(0x97)]('\x0a')};}return{'success':!![],'message':'Successfully\x20updated\x20'+Object[_0x449640(0xa8)](_0x1192eb)[_0x449640(0x9f)]+_0x449640(0xa0),'updates':_0x1192eb,'output':_0x29050d[_0x449640(0x97)]('\x0a')};}else{if(_0x3bf872===_0x449640(0x9e)||_0x3bf872===_0x449640(0x9d))return _0x29050d['push']('\x0aüìÑ\x20No\x20updates\x20needed\x20in\x20package.json'),{'success':!![],'message':'No\x20dependency\x20updates\x20required','output':_0x29050d[_0x449640(0x97)]('\x0a')};}}catch(_0x1d55a7){return this[_0x449640(0xb8)]['error'](_0x449640(0xc6),_0x1d55a7),{'success':![],'message':'Dependency\x20resolver\x20failed:\x20'+_0x1d55a7[_0x449640(0xaa)],'error':_0x1d55a7[_0x449640(0xaa)],'output':_0x29050d[_0x449640(0x97)]('\x0a')};}}}