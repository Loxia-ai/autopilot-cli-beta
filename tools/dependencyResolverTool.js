const a0_0x24be32=a0_0x573a;(function(_0x4ca562,_0xbaa0b6){const _0x2c7138=a0_0x573a,_0x4f1d0b=_0x4ca562();while(!![]){try{const _0x3e611f=parseInt(_0x2c7138(0xde))/0x1*(parseInt(_0x2c7138(0xe8))/0x2)+-parseInt(_0x2c7138(0xe0))/0x3*(-parseInt(_0x2c7138(0xf5))/0x4)+-parseInt(_0x2c7138(0xdd))/0x5+parseInt(_0x2c7138(0xeb))/0x6*(parseInt(_0x2c7138(0xf9))/0x7)+-parseInt(_0x2c7138(0xd6))/0x8+-parseInt(_0x2c7138(0xf2))/0x9*(-parseInt(_0x2c7138(0xe3))/0xa)+-parseInt(_0x2c7138(0xfa))/0xb*(parseInt(_0x2c7138(0xd7))/0xc);if(_0x3e611f===_0xbaa0b6)break;else _0x4f1d0b['push'](_0x4f1d0b['shift']());}catch(_0x201012){_0x4f1d0b['push'](_0x4f1d0b['shift']());}}}(a0_0x68f2,0x88ac7));import{promises as a0_0x5f3e38}from'fs';import a0_0x4f9413 from'path';import{exec as a0_0x3b084a}from'child_process';import{promisify}from'util';function a0_0x573a(_0x5059b0,_0x33b0fb){const _0x68f2e2=a0_0x68f2();return a0_0x573a=function(_0x573ac4,_0x3a00da){_0x573ac4=_0x573ac4-0xcf;let _0x19f9be=_0x68f2e2[_0x573ac4];if(a0_0x573a['nlXIji']===undefined){var _0x895770=function(_0x5f3e38){const _0x4f9413='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x3b084a='',_0x16981a='';for(let _0x60990e=0x0,_0x225233,_0x3a9d06,_0x107894=0x0;_0x3a9d06=_0x5f3e38['charAt'](_0x107894++);~_0x3a9d06&&(_0x225233=_0x60990e%0x4?_0x225233*0x40+_0x3a9d06:_0x3a9d06,_0x60990e++%0x4)?_0x3b084a+=String['fromCharCode'](0xff&_0x225233>>(-0x2*_0x60990e&0x6)):0x0){_0x3a9d06=_0x4f9413['indexOf'](_0x3a9d06);}for(let _0x2bf863=0x0,_0x104f4b=_0x3b084a['length'];_0x2bf863<_0x104f4b;_0x2bf863++){_0x16981a+='%'+('00'+_0x3b084a['charCodeAt'](_0x2bf863)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x16981a);};a0_0x573a['UDNNmy']=_0x895770,_0x5059b0=arguments,a0_0x573a['nlXIji']=!![];}const _0x16c355=_0x68f2e2[0x0],_0x5725a1=_0x573ac4+_0x16c355,_0x339e56=_0x5059b0[_0x5725a1];return!_0x339e56?(_0x19f9be=a0_0x573a['UDNNmy'](_0x19f9be),_0x5059b0[_0x5725a1]=_0x19f9be):_0x19f9be=_0x339e56,_0x19f9be;},a0_0x573a(_0x5059b0,_0x33b0fb);}import{BaseTool}from'./baseTool.js';import{TagParser}from'../utilities/tagParser.js';const exec=promisify(a0_0x3b084a);export class DependencyResolverTool extends BaseTool{['getDescription'](){return'\x0aDependency\x20Resolver\x20Tool:\x20Resolves\x20Node.js\x20package\x20dependency\x20conflicts\x20by\x20checking\x20and\x20updating\x20to\x20latest\x20compatible\x20versions.\x0a\x0aUsage:\x0a[tool\x20id=\x22dep-resolver\x22]\x0a[resolve\x20path=\x22optional/path/to/project\x22\x20mode=\x22check|fix|auto\x22\x20/]\x0a[/tool]\x0a\x0aModes:\x0a-\x20mode=\x22check\x22\x20(default):\x20Only\x20checks\x20for\x20dependency\x20issues\x20without\x20making\x20changes\x0a-\x20mode=\x22fix\x22:\x20Updates\x20package.json\x20with\x20resolved\x20versions\x20and\x20runs\x20npm\x20install\x0a-\x20mode=\x22auto\x22:\x20Automatically\x20fixes\x20all\x20resolvable\x20conflicts\x20without\x20prompting\x0a\x0aParameters:\x0a-\x20path:\x20Optional\x20path\x20to\x20project\x20directory\x20containing\x20package.json\x20(defaults\x20to\x20current\x20directory)\x0a-\x20mode:\x20Operation\x20mode\x20(check,\x20fix,\x20or\x20auto)\x0a\x0aExamples:\x0a1.\x20Check\x20for\x20dependency\x20conflicts\x20in\x20current\x20directory:\x0a[tool\x20id=\x22dep-resolver\x22]\x0a[resolve\x20mode=\x22check\x22\x20/]\x0a[/tool]\x0a\x0a2.\x20Fix\x20dependency\x20conflicts\x20in\x20a\x20specific\x20project:\x0a[tool\x20id=\x22dep-resolver\x22]\x0a[resolve\x20path=\x22./my-project\x22\x20mode=\x22fix\x22\x20/]\x0a[/tool]\x0a\x0a3.\x20Automatically\x20resolve\x20all\x20conflicts:\x0a[tool\x20id=\x22dep-resolver\x22]\x0a[resolve\x20mode=\x22auto\x22\x20/]\x0a[/tool]\x0a\x0aThe\x20tool\x20will:\x0a1.\x20Read\x20package.json\x20from\x20the\x20specified\x20directory\x0a2.\x20Check\x20each\x20dependency\x20against\x20npm\x20registry\x20for\x20latest\x20compatible\x20versions\x0a3.\x20Identify\x20dependencies\x20that\x20need\x20updates\x0a4.\x20In\x20fix/auto\x20mode:\x20Update\x20package.json\x20and\x20run\x20npm\x20install\x0a5.\x20Report\x20the\x20results\x20of\x20the\x20operation\x0a\x0aUSE\x20THIS\x20TOOL\x20DURING\x20YOUR\x20DEVELOPMENT\x20CYCLE\x20AND\x20DURING\x20BEFORE\x20RUNNING\x20THE\x20CODE.\x0a';}[a0_0x24be32(0xdc)](_0x16981a){const _0x8ced7b=a0_0x24be32,_0x60990e=new TagParser(),_0x225233=_0x60990e[_0x8ced7b(0xd1)](_0x16981a),_0x3a9d06=_0x225233[_0x8ced7b(0xf1)](_0x107894=>_0x107894[_0x8ced7b(0xea)]==='resolve');if(!_0x3a9d06)throw new Error('Missing\x20[resolve]\x20command\x20in\x20dependency\x20resolver\x20tool');return{'path':_0x3a9d06['attributes']['path']||'.','mode':_0x3a9d06[_0x8ced7b(0xd4)]['mode']||'check'};}async[a0_0x24be32(0xe5)](_0x2bf863,_0x104f4b){const _0x147a2f=a0_0x24be32;try{const _0x46ad70=await fetch('https://registry.npmjs.org/'+_0x2bf863);if(!_0x46ad70['ok'])throw new Error(_0x147a2f(0xf4)+_0x2bf863+':\x20'+_0x46ad70[_0x147a2f(0xd8)]);const _0x1c4c24=await _0x46ad70['json'](),_0x150758=_0x1c4c24[_0x147a2f(0xdf)]?.['latest'];if(!_0x150758)return null;const _0x485ccf=_0x104f4b[_0x147a2f(0xf8)](/\^?~?(\d+)/)?.[0x1],_0x5231ae=_0x150758[_0x147a2f(0xf8)](/(\d+)/)?.[0x1];if(_0x485ccf&&_0x5231ae&&parseInt(_0x5231ae)>parseInt(_0x485ccf))return _0x150758;return null;}catch(_0x40fe61){return this[_0x147a2f(0xef)]['error'](_0x147a2f(0xd0)+_0x2bf863+':\x20'+_0x40fe61[_0x147a2f(0xd3)]),null;}}async[a0_0x24be32(0xe7)](_0x5a22ef,_0x483bc8){const _0x1a574e=a0_0x24be32,{path:_0x1ddf84,mode:_0x5472b3}=_0x5a22ef,_0x462280=a0_0x4f9413[_0x1a574e(0xf0)](_0x1ddf84)?_0x1ddf84:a0_0x4f9413[_0x1a574e(0xfb)](_0x483bc8,_0x1ddf84),_0x5d9f9d=a0_0x4f9413[_0x1a574e(0xfb)](_0x462280,_0x1a574e(0xd9));this['logger']['info'](_0x1a574e(0xe1)+_0x5472b3+'\x20mode\x20for:\x20'+_0x462280);let _0x744e95=[];try{try{await a0_0x5f3e38['access'](_0x5d9f9d);}catch{return{'success':![],'message':'No\x20package.json\x20found\x20at:\x20'+_0x5d9f9d};}_0x744e95[_0x1a574e(0xcf)](_0x1a574e(0xf6));const _0x50b3bd=await a0_0x5f3e38[_0x1a574e(0xe9)](_0x5d9f9d,_0x1a574e(0xee)),_0x152db2=JSON[_0x1a574e(0xd1)](_0x50b3bd),_0xa89740={..._0x152db2[_0x1a574e(0xff)],..._0x152db2[_0x1a574e(0xe4)]};if(Object['keys'](_0xa89740)['length']===0x0)return{'success':!![],'message':_0x1a574e(0xec),'output':_0x744e95[_0x1a574e(0xfb)]('\x0a')};_0x744e95[_0x1a574e(0xcf)]('üì¶\x20Checking\x20dependencies\x20for\x20latest\x20compatible\x20versions...');const _0x450e1d={},_0x45c277=[];for(const [_0x224035,_0x25359d]of Object['entries'](_0xa89740)){try{const _0x1d0c16=await this[_0x1a574e(0xe5)](_0x224035,_0x25359d);if(_0x1d0c16){const _0x551c8c=_0x25359d['replace'](/[\^~]/,'');_0x1d0c16!==_0x551c8c?(_0x45c277[_0x1a574e(0xcf)]('‚ö†Ô∏è\x20\x20'+_0x224035+':\x20current\x20'+_0x25359d+_0x1a574e(0xdb)+_0x1d0c16),_0x450e1d[_0x224035]='^'+_0x1d0c16):_0x45c277[_0x1a574e(0xcf)]('‚úÖ\x20'+_0x224035+_0x1a574e(0xe6)+_0x25359d+')');}else _0x45c277[_0x1a574e(0xcf)]('‚úÖ\x20'+_0x224035+'\x20is\x20up-to-date\x20('+_0x25359d+')');}catch(_0x4e5a12){_0x45c277[_0x1a574e(0xcf)]('‚ùå\x20Failed\x20to\x20check\x20'+_0x224035+':\x20'+_0x4e5a12[_0x1a574e(0xd3)]);}}_0x744e95['push'](..._0x45c277);if(_0x5472b3==='check')return Object['keys'](_0x450e1d)['length']>0x0?(_0x744e95['push'](_0x1a574e(0xfe)+Object[_0x1a574e(0xe2)](_0x450e1d)[_0x1a574e(0xd5)]+'\x20packages\x20that\x20can\x20be\x20updated'),_0x744e95[_0x1a574e(0xcf)]('Run\x20with\x20mode=\x22fix\x22\x20to\x20update\x20package.json\x20and\x20install')):_0x744e95[_0x1a574e(0xcf)](_0x1a574e(0xda)),{'success':!![],'message':_0x1a574e(0xf7),'updates':_0x450e1d,'output':_0x744e95[_0x1a574e(0xfb)]('\x0a')};if((_0x5472b3==='fix'||_0x5472b3===_0x1a574e(0xfd))&&Object['keys'](_0x450e1d)['length']>0x0){_0x744e95[_0x1a574e(0xcf)]('\x0aüõ†\x20Updating\x20package.json\x20with\x20resolved\x20versions...');for(const [_0x492281,_0x3e25ab]of Object['entries'](_0x450e1d)){_0x152db2['dependencies']?.[_0x492281]&&(_0x152db2[_0x1a574e(0xff)][_0x492281]=_0x3e25ab),_0x152db2['devDependencies']?.[_0x492281]&&(_0x152db2[_0x1a574e(0xe4)][_0x492281]=_0x3e25ab);}await a0_0x5f3e38['writeFile'](_0x5d9f9d,JSON[_0x1a574e(0xd2)](_0x152db2,null,0x2)),_0x744e95['push']('üíæ\x20package.json\x20updated'),_0x744e95[_0x1a574e(0xcf)]('\x0aüì•\x20Installing\x20dependencies...');try{const {stdout:_0x2666cf,stderr:_0x33c582}=await exec('npm\x20install',{'cwd':_0x462280});if(_0x2666cf)_0x744e95['push'](_0x2666cf);if(_0x33c582)_0x744e95['push']('Warning:\x20'+_0x33c582);_0x744e95['push']('‚úÖ\x20Installation\x20complete');try{const {stdout:_0x518196}=await exec('npm\x20ls\x20--depth=0',{'cwd':_0x462280});_0x744e95['push']('\x0aüìä\x20Installed\x20versions:'),_0x744e95[_0x1a574e(0xcf)](_0x518196);}catch(_0x223385){_0x744e95[_0x1a574e(0xcf)]('Note:\x20Some\x20peer\x20dependency\x20warnings\x20may\x20exist');}}catch(_0x324956){return _0x744e95[_0x1a574e(0xcf)]('‚ùå\x20Installation\x20failed:\x20'+_0x324956[_0x1a574e(0xd3)]),{'success':![],'message':_0x1a574e(0xed),'error':_0x324956['message'],'output':_0x744e95['join']('\x0a')};}return{'success':!![],'message':'Successfully\x20updated\x20'+Object['keys'](_0x450e1d)[_0x1a574e(0xd5)]+'\x20dependencies','updates':_0x450e1d,'output':_0x744e95[_0x1a574e(0xfb)]('\x0a')};}else{if(_0x5472b3==='fix'||_0x5472b3==='auto')return _0x744e95['push']('\x0aüìÑ\x20No\x20updates\x20needed\x20in\x20package.json'),{'success':!![],'message':'No\x20dependency\x20updates\x20required','output':_0x744e95[_0x1a574e(0xfb)]('\x0a')};}}catch(_0x4b003d){return this[_0x1a574e(0xef)][_0x1a574e(0xfc)]('Dependency\x20resolver\x20error:',_0x4b003d),{'success':![],'message':_0x1a574e(0xf3)+_0x4b003d[_0x1a574e(0xd3)],'error':_0x4b003d[_0x1a574e(0xd3)],'output':_0x744e95['join']('\x0a')};}}}function a0_0x68f2(){const _0x491bac=['nZC4nJHozujJzui','C3rHDhvZvgv4Da','CgfJA2fNzs5QC29U','cUkCHsbbBgWGzgvWzw5Kzw5JAwvZigfYzsb1Cc10BY1KyxrLiq','iokgKIbHDMfPBgfIBguG','CgfYC2vqyxjHBwv0zxjZ','mZy5odq3mgnqzLrdBW','mvHrEKDcwq','zgLZDc10ywDZ','ovLzyuDuDG','rgvWzw5Kzw5JEsbYzxnVBhzLCIbYDw5UAw5NigLUia','A2v5CW','otC1nZy5meH5v3bkza','zgv2rgvWzw5Kzw5JAwvZ','z2v0tgf0zxn0q29TCgf0AwjSzvzLCNnPB24','igLZihvWlxrVlwrHDguGka','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','mJe0mJu5og5UEKDttG','CMvHzezPBgu','BMfTzq','mJe4mdC2t01QANz6','tM8GzgvWzw5Kzw5JAwvZigzVDw5KigLUihbHy2THz2uUANnVBG','rMfPBgvKihrVigLUC3rHBgWGzgvWzw5Kzw5JAwvZ','DxrMltG','Bg9Nz2vY','AxnbyNnVBhv0zq','zMLUza','ownUywvjAa','rgvWzw5Kzw5JEsbYzxnVBhzLCIbMywLSzwq6ia','rMfPBgvKihrVigzLDgnOigLUzM8GzM9Yia','ndK4mtmYy2jHvMLw','8j+uJsbszwfKAw5NihbHy2THz2uUANnVBI4UlG','rgvWzw5Kzw5JEsbJAgvJAYbJB21WBgv0zwq','Bwf0y2G','mtqWEMrcBujt','mJK0ogLjsufHsG','AM9PBG','zxjYB3i','yxv0BW','cVcFK4OGrM91BMqG','zgvWzw5Kzw5JAwvZ','ChvZAa','rMfPBgvKihrVignOzwnRia','CgfYC2u','C3rYAw5NAwz5','BwvZC2fNzq','yxr0CMLIDxrLCW','BgvUz3rO','odCYmJa4zg5ltxHv'];a0_0x68f2=function(){return _0x491bac;};return a0_0x68f2();}