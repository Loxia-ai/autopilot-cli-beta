const a0_0x26c945=a0_0x515d;(function(_0x546e19,_0x324a7b){const _0x21e171=a0_0x515d,_0x169a27=_0x546e19();while(!![]){try{const _0x41bedc=parseInt(_0x21e171(0x147))/0x1+-parseInt(_0x21e171(0x113))/0x2*(-parseInt(_0x21e171(0x11d))/0x3)+-parseInt(_0x21e171(0x13b))/0x4*(-parseInt(_0x21e171(0x14d))/0x5)+-parseInt(_0x21e171(0x153))/0x6*(parseInt(_0x21e171(0x140))/0x7)+parseInt(_0x21e171(0x145))/0x8*(parseInt(_0x21e171(0x142))/0x9)+parseInt(_0x21e171(0x13f))/0xa*(-parseInt(_0x21e171(0x126))/0xb)+-parseInt(_0x21e171(0x112))/0xc;if(_0x41bedc===_0x324a7b)break;else _0x169a27['push'](_0x169a27['shift']());}catch(_0x3bc9fe){_0x169a27['push'](_0x169a27['shift']());}}}(a0_0x1bfa,0xc1613));function a0_0x515d(_0x25e97f,_0x3c5b90){const _0x1bfa92=a0_0x1bfa();return a0_0x515d=function(_0x515dcc,_0x334109){_0x515dcc=_0x515dcc-0x10e;let _0x180b18=_0x1bfa92[_0x515dcc];if(a0_0x515d['TsMoxg']===undefined){var _0x556780=function(_0x1f41e1){const _0x3deca7='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xfe0965='',_0x47673d='';for(let _0x1c2cbd=0x0,_0x5f32e6,_0x52d35b,_0x413e8c=0x0;_0x52d35b=_0x1f41e1['charAt'](_0x413e8c++);~_0x52d35b&&(_0x5f32e6=_0x1c2cbd%0x4?_0x5f32e6*0x40+_0x52d35b:_0x52d35b,_0x1c2cbd++%0x4)?_0xfe0965+=String['fromCharCode'](0xff&_0x5f32e6>>(-0x2*_0x1c2cbd&0x6)):0x0){_0x52d35b=_0x3deca7['indexOf'](_0x52d35b);}for(let _0x31b82b=0x0,_0xee2ca6=_0xfe0965['length'];_0x31b82b<_0xee2ca6;_0x31b82b++){_0x47673d+='%'+('00'+_0xfe0965['charCodeAt'](_0x31b82b)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x47673d);};a0_0x515d['BEbTuG']=_0x556780,_0x25e97f=arguments,a0_0x515d['TsMoxg']=!![];}const _0x2dd709=_0x1bfa92[0x0],_0x40b4ba=_0x515dcc+_0x2dd709,_0x584390=_0x25e97f[_0x40b4ba];return!_0x584390?(_0x180b18=a0_0x515d['BEbTuG'](_0x180b18),_0x25e97f[_0x40b4ba]=_0x180b18):_0x180b18=_0x584390,_0x180b18;},a0_0x515d(_0x25e97f,_0x3c5b90);}import{promises as a0_0x1f41e1}from'fs';import a0_0x3deca7 from'path';import{TagParser}from'../utilities/tagParser.js';function a0_0x1bfa(){const _0x4775d3=['AM9PBG','zMLSDgvY','zxH0BMfTzq','Bg9Nz2vY','Cgf0DgvYBG','x19WEwnHy2HLx18','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','C3vIC3rYAw5N','vw5RBM93BIbMAwXLihrYzwuGy29TBwfUzdOG','zxjYB3i','ng9SsMr1AW','DhLWzq','icaGia','CMvWBgfJzq','mZu2ntCWD2LdAhLc','oda0ndq3uNvgBwPU','y292zxjHz2u','ndy4vvDsuhHX','AwDUB3jLlwv4Dhm','yxr0CMLIDxrLCW','mJaZmJK2t3bir1fW','BgvUz3rO','mtiWmJe3mu9qsvzHrW','lMXVEgLHx3n0yxrL','lNrTCa','DMvUDG','yMfZzw5HBwu','Aw5MBW','nZC5mZyZmgDpDKnvwq','zgvMyxvSDeLNBM9Yzuv4Dhm','AwDUB3jLrxH0CW','lM1PBI5JC3m','z2v0rgvZy3jPChrPB24','zgLZDa','ndHdC0LgtMW','yNvPBgruCMvL','BwvZC2fNzq','y2HPBgrYzw4','z2vUzxjHDguTDhjLzq','ugfYC2LUzYbMAwXLihrYzwuGCgfYyw1LDgvYCYb3AxrOifrHz1bHCNnLCG','mZG5mZuYnZjfrhz4DvG','mZmWnK5IueH2AG','zgLY','rxjYB3iGzxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5Kia','CgfYC2vqyxjHBwv0zxjZ','ywn0Aw9U','AxnbyNnVBhv0zq','AxneAxjLy3rVCNK','zw5KC1DPDgG','4Psu4Psa4Psaia','yM93zxjFy29TCg9Uzw50CW','mJqYn3r4wu9msa','zw52','zMfSC2u','CxvLCNK','z2vUzxjHDgvuCMvL','zgvMyxvSDeLNBM9YzurPCNm','Aw5JBhvKzxm','Bwf4rgvWDgG','CMvZB2X2zvbHDgG','mtqZBhfOCefT','CMvZB2X2zq','C3bSAxq','zMLSzq','AwDUB3jLlwrPCNm','tM8GzMLSzsb0CMvLignVBw1HBMrZihnWzwnPzMLLza','CMvSyxrPDMu','BMfTzq','r2vUzxjHDgLUzYbMAwXLihrYzwuGzM9YoIa','lM1HCa','lMXVzW'];a0_0x1bfa=function(){return _0x4775d3;};return a0_0x1bfa();}import{BaseTool}from'./baseTool.js';export class FileTreeTool extends BaseTool{constructor(_0xfe0965,_0x47673d){const _0x194db0=a0_0x515d;super(_0xfe0965,_0x47673d),this[_0x194db0(0x122)]=[_0x194db0(0x148),'node_modules','.git',_0x194db0(0x152),'build',_0x194db0(0x141),'.next','.nuxt','.cache','vendor',_0x194db0(0x11c),'.vscode','.idea',_0x194db0(0x136),_0x194db0(0x14a),_0x194db0(0x11e),'.env'],this[_0x194db0(0x14e)]=[_0x194db0(0x12f),'.min.js',_0x194db0(0x150),_0x194db0(0x130),_0x194db0(0x149),'.temp'];}[a0_0x26c945(0x151)](){return'\x0aFile\x20Tree\x20Tool:\x20Generates\x20a\x20hierarchical\x20tree\x20representation\x20of\x20your\x20project\x27s\x20file\x20structure.\x0a\x0aUsage:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20\x0a\x20\x20dir=\x22path/to/directory\x22\x20\x0a\x20\x20max-depth=\x223\x22\x20\x0a\x20\x20ignore-dirs=\x22node_modules,dist,.git\x22\x20\x0a\x20\x20ignore-exts=\x22.map,.min.js\x22\x20\x0a\x20\x20show-files=\x22true\x22\x20\x0a\x20\x20pattern=\x22*.js,*.ts\x22\x0a/]\x0a[/tool]\x0a\x0aParameters:\x0a-\x20dir:\x20Directory\x20to\x20scan\x20(defaults\x20to\x20project\x20root)\x0a-\x20max-depth:\x20Maximum\x20depth\x20to\x20scan\x20(defaults\x20to\x203)\x0a-\x20ignore-dirs:\x20Comma-separated\x20list\x20of\x20directories\x20to\x20ignore\x0a-\x20ignore-exts:\x20Comma-separated\x20list\x20of\x20file\x20extensions\x20to\x20ignore\x0a-\x20show-files:\x20Whether\x20to\x20show\x20files\x20(defaults\x20to\x20true)\x0a-\x20pattern:\x20Optional\x20glob\x20pattern\x20to\x20filter\x20files\x20(e.g.,\x20\x22*.js,*.ts\x22)\x0a\x0aExamples:\x0a1.\x20Generate\x20a\x20basic\x20tree\x20of\x20the\x20project:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20/]\x0a[/tool]\x0a\x0a2.\x20Generate\x20a\x20detailed\x20tree\x20with\x20custom\x20options:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20\x0a\x20\x20dir=\x22src\x22\x20\x0a\x20\x20max-depth=\x224\x22\x20\x0a\x20\x20ignore-dirs=\x22tests,fixtures\x22\x20\x0a\x20\x20show-files=\x22true\x22\x20\x0a\x20\x20pattern=\x22*.js,*.jsx\x22\x0a/]\x0a[/tool]\x0a\x0aThe\x20tool\x20automatically\x20ignores\x20common\x20dependency\x20and\x20build\x20directories\x20like\x20node_modules,\x20.git,\x20dist,\x20etc.\x0a\x20\x20\x20\x20';}[a0_0x26c945(0x116)](_0x1c2cbd){const _0x530421=a0_0x26c945;this[_0x530421(0x134)]['info'](_0x530421(0x111));const _0x5f32e6={'commands':[]};try{const _0x52d35b=TagParser[_0x530421(0x120)](_0x1c2cbd,'generate-tree');for(const _0x413e8c of _0x52d35b){_0x5f32e6['commands']['push']({'action':'generate-tree','dir':_0x413e8c['attributes'][_0x530421(0x114)]||'.','maxDepth':parseInt(_0x413e8c['attributes']['max-depth']||'3',0xa),'ignoreDirs':(_0x413e8c['attributes'][_0x530421(0x12a)]||'')[_0x530421(0x128)](',')['filter'](Boolean),'ignoreExts':(_0x413e8c['attributes'][_0x530421(0x143)]||'')['split'](',')['filter'](Boolean),'showFiles':_0x413e8c[_0x530421(0x144)]['show-files']!==_0x530421(0x11f),'pattern':(_0x413e8c[_0x530421(0x144)][_0x530421(0x135)]||'')[_0x530421(0x128)](',')['filter'](Boolean)});}return _0x5f32e6;}catch(_0x31b82b){return this[_0x530421(0x134)][_0x530421(0x13a)]('Error\x20parsing\x20file\x20tree\x20parameters:',_0x31b82b),{'commands':[]};}}async[a0_0x26c945(0x137)](_0xee2ca6,_0x458f3a){const _0xbf2963=a0_0x26c945;this['logger'][_0xbf2963(0x14c)]('Executing\x20file\x20tree\x20command\x20with\x20parameters:',_0xee2ca6);const _0x446987=[];if(!_0xee2ca6['commands']||_0xee2ca6['commands']['length']===0x0)throw new Error(_0xbf2963(0x12b));for(const _0x2e5907 of _0xee2ca6['commands']){try{switch(_0x2e5907['action']){case _0xbf2963(0x110):_0x446987['push'](await this['generateTree'](_0x2e5907[_0xbf2963(0x114)],_0x2e5907[_0xbf2963(0x124)],_0x2e5907['ignoreDirs'],_0x2e5907[_0xbf2963(0x14f)],_0x2e5907['showFiles'],_0x2e5907[_0xbf2963(0x135)],_0x458f3a));break;default:throw new Error(_0xbf2963(0x139)+_0x2e5907['action']);}}catch(_0x229f55){this['logger']['error'](_0xbf2963(0x115)+_0x2e5907[_0xbf2963(0x117)]+':',_0x229f55),_0x446987['push']({'action':_0x2e5907[_0xbf2963(0x117)],'success':![],'error':_0x229f55[_0xbf2963(0x10e)]});}}return{'results':_0x446987};}async[a0_0x26c945(0x121)](_0x5a31b6,_0x2c1337,_0x438eba,_0x2f632b,_0x3f015f,_0x4af282,_0x564ac1){const _0x25f61b=a0_0x26c945;this[_0x25f61b(0x134)]['info'](_0x25f61b(0x12e)+_0x5a31b6);const _0xb44a5e=this['resolvePath'](_0x5a31b6,_0x564ac1),_0x36b7af=[...this[_0x25f61b(0x122)],..._0x438eba]['filter'](Boolean),_0x1aa576=[...this['defaultIgnoreExts'],..._0x2f632b][_0x25f61b(0x132)](Boolean),_0x1463a9=await this['buildTree'](_0xb44a5e,_0xb44a5e,0x0,_0x2c1337,_0x36b7af,_0x1aa576,_0x3f015f,_0x4af282),_0x5a74a7=this['formatTree'](_0x1463a9);return{'action':'generate-tree','path':_0x5a31b6,'resolvedPath':_0xb44a5e,'tree':_0x5a74a7,'success':!![]};}async[a0_0x26c945(0x154)](_0xe7d698,_0x5ac3e2,_0x257f7a,_0x2a6c29,_0x556ab4,_0x20aa97,_0x416bc1,_0x1e248d){const _0x44ecc2=a0_0x26c945;if(_0x257f7a>_0x2a6c29)return null;try{const _0x41ed0f=await a0_0x1f41e1['readdir'](_0x5ac3e2,{'withFileTypes':!![]}),_0x41849d={'name':a0_0x3deca7[_0x44ecc2(0x14b)](_0x5ac3e2),'path':a0_0x3deca7[_0x44ecc2(0x12c)](_0xe7d698,_0x5ac3e2),'type':'directory','children':[]};for(const _0x250e33 of _0x41ed0f){const _0x280088=a0_0x3deca7[_0x44ecc2(0x131)](_0x5ac3e2,_0x250e33[_0x44ecc2(0x12d)]),_0x4ff200=a0_0x3deca7[_0x44ecc2(0x12c)](_0xe7d698,_0x280088);if(_0x250e33[_0x44ecc2(0x119)]()){if(_0x556ab4['some'](_0x30eaa0=>_0x250e33[_0x44ecc2(0x12d)]===_0x30eaa0||_0x4ff200['split'](a0_0x3deca7['sep'])[_0x44ecc2(0x123)](_0x30eaa0)))continue;const _0x5b5182=await this[_0x44ecc2(0x154)](_0xe7d698,_0x280088,_0x257f7a+0x1,_0x2a6c29,_0x556ab4,_0x20aa97,_0x416bc1,_0x1e248d);_0x5b5182&&(_0x5b5182['children'][_0x44ecc2(0x146)]>0x0||_0x257f7a===0x0)&&_0x41849d[_0x44ecc2(0x10f)]['push'](_0x5b5182);}else{if(_0x250e33['isFile']()&&_0x416bc1){const _0x164a43=a0_0x3deca7[_0x44ecc2(0x133)](_0x250e33[_0x44ecc2(0x12d)]);if(_0x20aa97['includes'](_0x164a43))continue;if(_0x1e248d&&_0x1e248d[_0x44ecc2(0x146)]>0x0){const _0xc1712b=_0x1e248d['some'](_0x25dcb0=>{const _0x289b40=_0x44ecc2;return _0x25dcb0['startsWith']('*.')?_0x250e33[_0x289b40(0x12d)][_0x289b40(0x11a)](_0x25dcb0[_0x289b40(0x138)](0x1)):_0x250e33['name']['includes'](_0x25dcb0[_0x289b40(0x13e)]('*',''));});if(!_0xc1712b)continue;}_0x41849d['children']['push']({'name':_0x250e33[_0x44ecc2(0x12d)],'path':_0x4ff200,'type':_0x44ecc2(0x129),'ext':_0x164a43});}}}return _0x41849d[_0x44ecc2(0x10f)]['sort']((_0x3dd932,_0x46f759)=>{const _0x42f045=_0x44ecc2;if(_0x3dd932[_0x42f045(0x13c)]===_0x46f759['type'])return _0x3dd932['name']['localeCompare'](_0x46f759[_0x42f045(0x12d)]);return _0x3dd932[_0x42f045(0x13c)]==='directory'?-0x1:0x1;}),_0x41849d;}catch(_0x425a4a){return this[_0x44ecc2(0x134)][_0x44ecc2(0x13a)]('Error\x20building\x20tree\x20for\x20'+_0x5ac3e2+':',_0x425a4a),{'name':a0_0x3deca7[_0x44ecc2(0x14b)](_0x5ac3e2),'path':a0_0x3deca7['relative'](_0xe7d698,_0x5ac3e2),'type':'directory','error':_0x425a4a[_0x44ecc2(0x10e)],'children':[]};}}['formatTree'](_0x4d3b8f,_0x2dd7b5='',_0x123591=!![]){const _0x4f68a7=a0_0x26c945;if(!_0x4d3b8f)return'';const _0xe37c5='├──\x20',_0x444c64=_0x4f68a7(0x11b),_0x31b273='│\x20\x20\x20',_0x118beb=_0x4f68a7(0x13d);let _0x1c3dee=''+_0x2dd7b5+(_0x123591?_0x444c64:_0xe37c5)+_0x4d3b8f[_0x4f68a7(0x12d)]+'\x0a';if(_0x4d3b8f[_0x4f68a7(0x10f)]&&_0x4d3b8f[_0x4f68a7(0x10f)]['length']>0x0){const _0xae3507=_0x2dd7b5+(_0x123591?_0x118beb:_0x31b273);_0x4d3b8f['children']['forEach']((_0x432ac3,_0x2849ff)=>{const _0x19230e=_0x4f68a7,_0xaeb844=_0x2849ff===_0x4d3b8f['children'][_0x19230e(0x146)]-0x1;_0x1c3dee+=this['formatTree'](_0x432ac3,_0xae3507,_0xaeb844);});}return _0x1c3dee;}[a0_0x26c945(0x125)](_0x112626,_0x188a4d){const _0x411757=a0_0x26c945;if(a0_0x3deca7[_0x411757(0x118)](_0x112626))return _0x112626;return a0_0x3deca7[_0x411757(0x127)](_0x188a4d,_0x112626);}}