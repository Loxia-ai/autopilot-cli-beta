const a0_0x3f7b71=a0_0x5bdc;(function(_0x2ff4ae,_0xf76dd5){const _0x4db847=a0_0x5bdc,_0x3cd445=_0x2ff4ae();while(!![]){try{const _0x42f078=-parseInt(_0x4db847(0x141))/0x1*(-parseInt(_0x4db847(0x155))/0x2)+-parseInt(_0x4db847(0x15c))/0x3+parseInt(_0x4db847(0x129))/0x4*(-parseInt(_0x4db847(0x12e))/0x5)+-parseInt(_0x4db847(0x13b))/0x6+parseInt(_0x4db847(0x156))/0x7+-parseInt(_0x4db847(0x15d))/0x8*(parseInt(_0x4db847(0x145))/0x9)+parseInt(_0x4db847(0x163))/0xa*(parseInt(_0x4db847(0x126))/0xb);if(_0x42f078===_0xf76dd5)break;else _0x3cd445['push'](_0x3cd445['shift']());}catch(_0x484f93){_0x3cd445['push'](_0x3cd445['shift']());}}}(a0_0x46c5,0xb62b8));import{promises as a0_0x44088d}from'fs';function a0_0x5bdc(_0x1a7fba,_0x37b269){const _0x46c543=a0_0x46c5();return a0_0x5bdc=function(_0x5bdc93,_0x11223d){_0x5bdc93=_0x5bdc93-0x125;let _0x4be7d3=_0x46c543[_0x5bdc93];if(a0_0x5bdc['OBFWpR']===undefined){var _0x38c634=function(_0x44088d){const _0x2eec8f='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5457f1='',_0x44794e='';for(let _0xbcbd2e=0x0,_0x39994f,_0x46b4b4,_0xfa484c=0x0;_0x46b4b4=_0x44088d['charAt'](_0xfa484c++);~_0x46b4b4&&(_0x39994f=_0xbcbd2e%0x4?_0x39994f*0x40+_0x46b4b4:_0x46b4b4,_0xbcbd2e++%0x4)?_0x5457f1+=String['fromCharCode'](0xff&_0x39994f>>(-0x2*_0xbcbd2e&0x6)):0x0){_0x46b4b4=_0x2eec8f['indexOf'](_0x46b4b4);}for(let _0x823b4=0x0,_0x4682ed=_0x5457f1['length'];_0x823b4<_0x4682ed;_0x823b4++){_0x44794e+='%'+('00'+_0x5457f1['charCodeAt'](_0x823b4)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x44794e);};a0_0x5bdc['hngpLk']=_0x38c634,_0x1a7fba=arguments,a0_0x5bdc['OBFWpR']=!![];}const _0x3836d1=_0x46c543[0x0],_0x4b3f6e=_0x5bdc93+_0x3836d1,_0x42100d=_0x1a7fba[_0x4b3f6e];return!_0x42100d?(_0x4be7d3=a0_0x5bdc['hngpLk'](_0x4be7d3),_0x1a7fba[_0x4b3f6e]=_0x4be7d3):_0x4be7d3=_0x42100d,_0x4be7d3;},a0_0x5bdc(_0x1a7fba,_0x37b269);}import a0_0x2eec8f from'path';function a0_0x46c5(){const _0x13b884=['lM1PBI5JC3m','yMfZzw5HBwu','rxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5KihDPDgGGCgfYyw1LDgvYCZO','lM1PBI5QCW','zM9YBwf0vhjLzq','lMDPDa','tM8GzMLSzsb0CMvLignVBw1HBMrZihnWzwnPzMLLza','AM9PBG','x19WEwnHy2HLx18','z2vUzxjHDguTDhjLzq','yNvPBgruCMvL','mZe0mtu0tvfctvPo','zMLSDgvY','rxjYB3iGCgfYC2LUzYbMAwXLihrYzwuGCgfYyw1LDgvYCZO','CMvZB2X2zq','CMvWBgfJzq','z2vUzxjHDgvuCMvL','odzQwK53uxa','zgLYzwn0B3j5','zgLY','Cgf0DgvYBG','ndu4mJC3m0ritfvOwG','ywn0Aw9U','DMvUzg9Y','CMvSyxrPDMu','AxngAwXL','lM51Ehq','CMvHzgrPCG','BwvZC2fNzq','BMfTzq','yxr0CMLIDxrLCW','lMXVEgLHx3n0yxrL','cKzPBguGvhjLzsbuB29SoIbhzw5LCMf0zxmGysbOAwvYyxjJAgLJywWGDhjLzsbYzxbYzxnLBNrHDgLVBIbVzIb5B3vYihbYB2PLy3qNCYbMAwXLihn0CNvJDhvYzs4kcLvZywDLoGPBDg9VBcbPzd0IzMLSzs10CMvLiL0kw2DLBMvYyxrLlxrYzwuGcIaGzgLYpsjWyxrOl3rVl2rPCMvJDg9YEsiGcIaGBwf4lwrLChrOpsiZiIakicbPz25VCMuTzgLYCZ0IBM9Kzv9TB2r1BgvZlgrPC3qSlMDPDciGcIaGAwDUB3jLlwv4Dhm9iI5TyxaSlM1PBI5QCYiGcIaGC2HVDY1MAwXLCZ0IDhj1zsiGcIaGCgf0DgvYBJ0IkI5QCYWQlNrZiGOVxqPBl3rVB2XDcGPqyxjHBwv0zxjZoGOTigrPCJOGrgLYzwn0B3j5ihrVihnJyw4GkgrLzMf1BhrZihrVihbYB2PLy3qGCM9VDcKklsbTyxGTzgvWDgG6ie1HEgLTDw0GzgvWDgGGDg8GC2nHBIaOzgvMyxvSDhmGDg8GmYKklsbPz25VCMuTzgLYCZOGq29TBweTC2vWyxjHDgvKigXPC3qGB2yGzgLYzwn0B3jPzxmGDg8GAwDUB3jLcI0GAwDUB3jLlwv4Dhm6ienVBw1HlxnLCgfYyxrLzcbSAxn0ig9MigzPBguGzxH0zw5ZAw9UCYb0BYbPz25VCMuklsbZAg93lwzPBgvZoIbxAgv0AgvYihrVihnOB3CGzMLSzxmGkgrLzMf1BhrZihrVihrYDwuPcI0GCgf0DgvYBJOGt3b0Aw9UywWGz2XVyIbWyxr0zxjUihrVigzPBhrLCIbMAwXLCYaOzs5NlIWGiIOUANmSkI50CYiPcGPfEgfTCgXLCZOkms4Gr2vUzxjHDguGysbIyxnPyYb0CMvLig9MihrOzsbWCM9Qzwn0oGPBDg9VBcbPzd0IzMLSzs10CMvLiL0kw2DLBMvYyxrLlxrYzwuGl10kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcb0CMvLihDPDgGGy3vZDg9Tig9WDgLVBNm6cLT0B29SigLKpsjMAwXLlxrYzwuIxqPBz2vUzxjHDguTDhjLzsakicbKAxi9iNnYyYiGcIaGBwf4lwrLChrOpsi0iIakicbPz25VCMuTzgLYCZ0IDgvZDhmSzML4DhvYzxmIiaOGihnOB3CTzMLSzxm9iNrYDwuIiaOGihbHDhrLCM49iIOUANmSkI5QC3GIcI9DcLSVDg9VBf0kcLrOzsb0B29Sigf1Dg9TyxrPy2fSBhKGAwDUB3jLCYbJB21TB24GzgvWzw5Kzw5JEsbHBMqGyNvPBgqGzgLYzwn0B3jPzxmGBgLRzsbUB2rLx21VzhvSzxmSic5NAxqSigrPC3qSigv0yY4kicaGia','zgvMyxvSDeLNBM9Yzuv4Dhm','ChvZAa','4Psu4Psa4Psaia','yM93zxjFy29TCg9Uzw50CW','mtCZmtjoy05yswm','nZa4otuZugj0A3HQ','DhLWzq','AwDUB3jLrgLYCW','lNzZy29Kzq','rxjYB3iGzxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5Kia','AxneAxjLy3rVCNK','mtCWnZCYC3D2C0nI','ohrPyLLRuW','C29Tzq','y2HPBgrYzw4','BgvUz3rO','Bwf4rgvWDgG','y29TBwfUzhm','ndmWCgrluNHX','Bg9Nz2vY','Aw5MBW','zgLZDa','z2v0rgvZy3jPChrPB24','zw5KC1DPDgG','C2HVDY1MAwXLCW','yNvPBgq','lNrLBxa','C3bSAxq','mJm2nteXBLHUrKvg','zxjYB3i','DMvUDG','mZi0ndCYquLlzwPx','zxH0BMfTzq','CxvLCNK','Aw5JBhvKzxm','lMvUDG','mJvoAwrgA1O','icaGia'];a0_0x46c5=function(){return _0x13b884;};return a0_0x46c5();}import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class FileTreeTool extends BaseTool{constructor(_0x5457f1,_0x44794e){const _0x51a358=a0_0x5bdc;super(_0x5457f1,_0x44794e),this['defaultIgnoreDirs']=[_0x51a358(0x14f),'node_modules',_0x51a358(0x135),_0x51a358(0x166),_0x51a358(0x16a),'coverage','.next',_0x51a358(0x14a),'.cache',_0x51a358(0x147),_0x51a358(0x154),_0x51a358(0x159),'.idea',_0x51a358(0x138),_0x51a358(0x128),'env',_0x51a358(0x12d)],this[_0x51a358(0x151)]=['.map',_0x51a358(0x133),_0x51a358(0x130),'.log','.tmp',_0x51a358(0x16b)];}[a0_0x3f7b71(0x167)](){const _0x16177a=a0_0x3f7b71;return _0x16177a(0x150);}['parseParameters'](_0xbcbd2e){const _0x4d7d21=a0_0x3f7b71;this['logger'][_0x4d7d21(0x165)]('Parsing\x20file\x20tree\x20parameters\x20with\x20TagParser');const _0x39994f={'commands':[]};try{const _0x46b4b4=TagParser[_0x4d7d21(0x12b)](_0xbcbd2e,'generate-tree');for(const _0xfa484c of _0x46b4b4){_0x39994f['commands']['push']({'action':_0x4d7d21(0x139),'dir':_0xfa484c[_0x4d7d21(0x14e)][_0x4d7d21(0x143)]||'.','maxDepth':parseInt(_0xfa484c['attributes']['max-depth']||'3',0xa),'ignoreDirs':(_0xfa484c[_0x4d7d21(0x14e)]['ignore-dirs']||'')[_0x4d7d21(0x125)](',')['filter'](Boolean),'ignoreExts':(_0xfa484c['attributes']['ignore-exts']||'')['split'](',')['filter'](Boolean),'showFiles':_0xfa484c[_0x4d7d21(0x14e)][_0x4d7d21(0x169)]!=='false','pattern':(_0xfa484c[_0x4d7d21(0x14e)]['pattern']||'')['split'](',')['filter'](Boolean)});}return _0x39994f;}catch(_0x823b4){return this[_0x4d7d21(0x164)][_0x4d7d21(0x127)](_0x4d7d21(0x13d),_0x823b4),{'commands':[]};}}async['executeWithParameters'](_0x4682ed,_0xef4759){const _0x25dbc4=a0_0x3f7b71;this['logger'][_0x25dbc4(0x165)](_0x25dbc4(0x132),_0x4682ed);const _0x4ef770=[];if(!_0x4682ed[_0x25dbc4(0x162)]||_0x4682ed['commands'][_0x25dbc4(0x160)]===0x0)throw new Error(_0x25dbc4(0x136));for(const _0x509d51 of _0x4682ed[_0x25dbc4(0x162)]){try{switch(_0x509d51['action']){case'generate-tree':_0x4ef770[_0x25dbc4(0x152)](await this[_0x25dbc4(0x140)](_0x509d51['dir'],_0x509d51[_0x25dbc4(0x161)],_0x509d51[_0x25dbc4(0x158)],_0x509d51['ignoreExts'],_0x509d51['showFiles'],_0x509d51[_0x25dbc4(0x144)],_0xef4759));break;default:throw new Error('Unknown\x20file\x20tree\x20command:\x20'+_0x509d51['action']);}}catch(_0x491ead){this['logger'][_0x25dbc4(0x127)](_0x25dbc4(0x15a)+_0x509d51[_0x25dbc4(0x146)]+':',_0x491ead),_0x4ef770[_0x25dbc4(0x152)]({'action':_0x509d51['action'],'success':![],'error':_0x491ead[_0x25dbc4(0x14c)]});}}return{'results':_0x4ef770};}async[a0_0x3f7b71(0x140)](_0x17f5a6,_0x348a32,_0x4f4c5c,_0x32ddcb,_0x19de4c,_0x206ece,_0x1753c3){const _0x2c3429=a0_0x3f7b71;this[_0x2c3429(0x164)]['info']('Generating\x20file\x20tree\x20for:\x20'+_0x17f5a6);const _0x22ea11=this['resolvePath'](_0x17f5a6,_0x1753c3),_0x4b0433=[...this['defaultIgnoreDirs'],..._0x4f4c5c][_0x2c3429(0x13c)](Boolean),_0x232919=[...this['defaultIgnoreExts'],..._0x32ddcb]['filter'](Boolean),_0x4fe519=await this[_0x2c3429(0x13a)](_0x22ea11,_0x22ea11,0x0,_0x348a32,_0x4b0433,_0x232919,_0x19de4c,_0x206ece),_0x55c950=this['formatTree'](_0x4fe519);return{'action':'generate-tree','path':_0x17f5a6,'resolvedPath':_0x22ea11,'tree':_0x55c950,'success':!![]};}async['buildTree'](_0x5c19fe,_0x6dddbb,_0x2608a2,_0x1d0818,_0x45381c,_0x48dbe5,_0x59a834,_0x554010){const _0xfcf560=a0_0x3f7b71;if(_0x2608a2>_0x1d0818)return null;try{const _0xd8b571=await a0_0x44088d[_0xfcf560(0x14b)](_0x6dddbb,{'withFileTypes':!![]}),_0x51ba76={'name':a0_0x2eec8f[_0xfcf560(0x131)](_0x6dddbb),'path':a0_0x2eec8f[_0xfcf560(0x148)](_0x5c19fe,_0x6dddbb),'type':'directory','children':[]};for(const _0x56eb57 of _0xd8b571){const _0x2ca5f9=a0_0x2eec8f[_0xfcf560(0x137)](_0x6dddbb,_0x56eb57[_0xfcf560(0x14d)]),_0x8ca702=a0_0x2eec8f['relative'](_0x5c19fe,_0x2ca5f9);if(_0x56eb57[_0xfcf560(0x15b)]()){if(_0x45381c[_0xfcf560(0x15e)](_0x7ac6dd=>_0x56eb57['name']===_0x7ac6dd||_0x8ca702[_0xfcf560(0x125)](a0_0x2eec8f['sep'])['includes'](_0x7ac6dd)))continue;const _0x2f70e3=await this[_0xfcf560(0x13a)](_0x5c19fe,_0x2ca5f9,_0x2608a2+0x1,_0x1d0818,_0x45381c,_0x48dbe5,_0x59a834,_0x554010);_0x2f70e3&&(_0x2f70e3[_0xfcf560(0x15f)][_0xfcf560(0x160)]>0x0||_0x2608a2===0x0)&&_0x51ba76['children']['push'](_0x2f70e3);}else{if(_0x56eb57[_0xfcf560(0x149)]()&&_0x59a834){const _0x427a72=a0_0x2eec8f[_0xfcf560(0x12a)](_0x56eb57[_0xfcf560(0x14d)]);if(_0x48dbe5[_0xfcf560(0x12c)](_0x427a72))continue;if(_0x554010&&_0x554010[_0xfcf560(0x160)]>0x0){const _0x3173d4=_0x554010[_0xfcf560(0x15e)](_0x3a93a6=>{const _0x348b72=_0xfcf560;return _0x3a93a6['startsWith']('*.')?_0x56eb57['name'][_0x348b72(0x168)](_0x3a93a6['substring'](0x1)):_0x56eb57[_0x348b72(0x14d)]['includes'](_0x3a93a6[_0x348b72(0x13f)]('*',''));});if(!_0x3173d4)continue;}_0x51ba76[_0xfcf560(0x15f)]['push']({'name':_0x56eb57[_0xfcf560(0x14d)],'path':_0x8ca702,'type':'file','ext':_0x427a72});}}}return _0x51ba76[_0xfcf560(0x15f)]['sort']((_0x217d36,_0x57f532)=>{const _0x2c3c27=_0xfcf560;if(_0x217d36[_0x2c3c27(0x157)]===_0x57f532['type'])return _0x217d36[_0x2c3c27(0x14d)]['localeCompare'](_0x57f532[_0x2c3c27(0x14d)]);return _0x217d36['type']===_0x2c3c27(0x142)?-0x1:0x1;}),_0x51ba76;}catch(_0x19deed){return this[_0xfcf560(0x164)][_0xfcf560(0x127)]('Error\x20building\x20tree\x20for\x20'+_0x6dddbb+':',_0x19deed),{'name':a0_0x2eec8f['basename'](_0x6dddbb),'path':a0_0x2eec8f['relative'](_0x5c19fe,_0x6dddbb),'type':_0xfcf560(0x142),'error':_0x19deed['message'],'children':[]};}}['formatTree'](_0x3f0888,_0x161bed='',_0x29af34=!![]){const _0x400996=a0_0x3f7b71;if(!_0x3f0888)return'';const _0x55a924='├──\x20',_0x116306=_0x400996(0x153),_0x3b23e2='│\x20\x20\x20',_0x5adb86=_0x400996(0x12f);let _0x5d6185=''+_0x161bed+(_0x29af34?_0x116306:_0x55a924)+_0x3f0888[_0x400996(0x14d)]+'\x0a';if(_0x3f0888[_0x400996(0x15f)]&&_0x3f0888['children']['length']>0x0){const _0x5f1d4c=_0x161bed+(_0x29af34?_0x5adb86:_0x3b23e2);_0x3f0888[_0x400996(0x15f)]['forEach']((_0xf42071,_0x2ebe42)=>{const _0x3f2f43=_0x400996,_0x137115=_0x2ebe42===_0x3f0888['children'][_0x3f2f43(0x160)]-0x1;_0x5d6185+=this[_0x3f2f43(0x134)](_0xf42071,_0x5f1d4c,_0x137115);});}return _0x5d6185;}['resolvePath'](_0x15b2ff,_0x51df9c){const _0x31c635=a0_0x3f7b71;if(a0_0x2eec8f['isAbsolute'](_0x15b2ff))return _0x15b2ff;return a0_0x2eec8f[_0x31c635(0x13e)](_0x51df9c,_0x15b2ff);}}