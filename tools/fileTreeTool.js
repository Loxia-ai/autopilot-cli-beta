function a0_0x5f19(_0x79838f,_0x1d585b){const _0x5cdf34=a0_0x5cdf();return a0_0x5f19=function(_0x5f1968,_0x5cc9f9){_0x5f1968=_0x5f1968-0x12e;let _0x370a16=_0x5cdf34[_0x5f1968];if(a0_0x5f19['nKVXvS']===undefined){var _0x581227=function(_0x2bd3d9){const _0x8a632b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5ccc8d='',_0x21ea94='';for(let _0x2eeced=0x0,_0x16e7f5,_0x4bfcf7,_0x19000a=0x0;_0x4bfcf7=_0x2bd3d9['charAt'](_0x19000a++);~_0x4bfcf7&&(_0x16e7f5=_0x2eeced%0x4?_0x16e7f5*0x40+_0x4bfcf7:_0x4bfcf7,_0x2eeced++%0x4)?_0x5ccc8d+=String['fromCharCode'](0xff&_0x16e7f5>>(-0x2*_0x2eeced&0x6)):0x0){_0x4bfcf7=_0x8a632b['indexOf'](_0x4bfcf7);}for(let _0x3f324c=0x0,_0x5c8fda=_0x5ccc8d['length'];_0x3f324c<_0x5c8fda;_0x3f324c++){_0x21ea94+='%'+('00'+_0x5ccc8d['charCodeAt'](_0x3f324c)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x21ea94);};a0_0x5f19['uqPZrN']=_0x581227,_0x79838f=arguments,a0_0x5f19['nKVXvS']=!![];}const _0x24ae76=_0x5cdf34[0x0],_0x1a13cc=_0x5f1968+_0x24ae76,_0x10e336=_0x79838f[_0x1a13cc];return!_0x10e336?(_0x370a16=a0_0x5f19['uqPZrN'](_0x370a16),_0x79838f[_0x1a13cc]=_0x370a16):_0x370a16=_0x10e336,_0x370a16;},a0_0x5f19(_0x79838f,_0x1d585b);}const a0_0x4fc979=a0_0x5f19;(function(_0x41dc00,_0x97508d){const _0x2373e3=a0_0x5f19,_0x2638ca=_0x41dc00();while(!![]){try{const _0x24a18a=parseInt(_0x2373e3(0x16f))/0x1+-parseInt(_0x2373e3(0x14b))/0x2+-parseInt(_0x2373e3(0x157))/0x3*(-parseInt(_0x2373e3(0x140))/0x4)+parseInt(_0x2373e3(0x137))/0x5+-parseInt(_0x2373e3(0x133))/0x6*(parseInt(_0x2373e3(0x138))/0x7)+-parseInt(_0x2373e3(0x14e))/0x8+-parseInt(_0x2373e3(0x141))/0x9*(-parseInt(_0x2373e3(0x149))/0xa);if(_0x24a18a===_0x97508d)break;else _0x2638ca['push'](_0x2638ca['shift']());}catch(_0x2b1668){_0x2638ca['push'](_0x2638ca['shift']());}}}(a0_0x5cdf,0xa4caf));import{promises as a0_0x2bd3d9}from'fs';function a0_0x5cdf(){const _0x3de273=['lNrLBxa','lM1HCa','ywn0Aw9U','lM1PBI5QCW','y2HPBgrYzw4','ntmWote1BLzWEeLV','zw5KC1DPDgG','C3rHCNrZv2L0Aa','C3bSAxq','CgfYC2vqyxjHBwv0zxjZ','C2HVD0zPBgvZ','C3vIC3rYAw5N','CMvZB2X2zq','nZG5mtC0nLzZsfDVzq','zgvMyxvSDeLNBM9Yzuv4Dhm','yNvPBgruCMvL','y29TBwfUzhm','mtu5odm5mfzjvxL6qW','n0DxB2TfAW','z2vUzxjHDguTDhjLzq','z2v0rgvZy3jPChrPB24','rxjYB3iGzxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5Kia','zxjYB3i','zgLYzwn0B3j5','rxjYB3iGyNvPBgrPBMCGDhjLzsbMB3iG','ChvZAa','ndb6txb3AMy','ode5u2PQALzH','zMLSDgvY','Bwf4lwrLChrO','zgLY','zMfSC2u','lMXVzW','yxr0CMLIDxrLCW','DMvUDG','mtuWmZmWAxzPBgri','lM51Ehq','ndmWodq0A3zKD1jR','C29Tzq','DhLWzq','mZi1nJu3nMviD09vAW','zM9YBwf0vhjLzq','vw5RBM93BIbMAwXLihrYzwuGy29TBwfUzdOG','Cgf0DgvYBG','AwDUB3jLlwv4Dhm','AwDUB3jLrgLYCW','r2vUzxjHDgLUzYbMAwXLihrYzwuGzM9YoIa','y292zxjHz2u','BgvUz3rO','mte4mJu0zxnxshvq','AwDUB3jLrxH0CW','Bg9Nz2vY','zM9YrwfJAa','zgvMyxvSDeLNBM9YzurPCNm','Bg9JywXLq29TCgfYzq','CMvHzgrPCG','C2HVDY1MAwXLCW','ugfYC2LUzYbMAwXLihrYzwuGCgfYyw1LDgvYCYb3AxrOifrHz1bHCNnLCG','DMvUzg9Y','lMvUDG','BMfTzq','yMfZzw5HBwu','CMvSyxrPDMu','BM9Kzv9TB2r1BgvZ','yNvPBgq','lNrTCa','Aw5MBW','x19WEwnHy2HLx18'];a0_0x5cdf=function(){return _0x3de273;};return a0_0x5cdf();}import a0_0x8a632b from'path';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class FileTreeTool extends BaseTool{constructor(_0x5ccc8d,_0x21ea94){const _0x5b0b7e=a0_0x5f19;super(_0x5ccc8d,_0x21ea94),this[_0x5b0b7e(0x15b)]=['.loxia_state',_0x5b0b7e(0x165),'.git','dist',_0x5b0b7e(0x166),_0x5b0b7e(0x155),'.next',_0x5b0b7e(0x14a),'.cache',_0x5b0b7e(0x160),'bower_components','.vscode','.idea',_0x5b0b7e(0x169),_0x5b0b7e(0x148),'env',_0x5b0b7e(0x161)],this['defaultIgnoreExts']=[_0x5b0b7e(0x16b),_0x5b0b7e(0x16d),'.min.css',_0x5b0b7e(0x146),_0x5b0b7e(0x167),_0x5b0b7e(0x16a)];}[a0_0x4fc979(0x13a)](){return'\x0aFile\x20Tree\x20Tool:\x20Generates\x20a\x20hierarchical\x20tree\x20representation\x20of\x20your\x20project\x27s\x20file\x20structure.\x0a\x0aUsage:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20\x0a\x20\x20dir=\x22path/to/directory\x22\x20\x0a\x20\x20max-depth=\x223\x22\x20\x0a\x20\x20ignore-dirs=\x22node_modules,dist,.git\x22\x20\x0a\x20\x20ignore-exts=\x22.map,.min.js\x22\x20\x0a\x20\x20show-files=\x22true\x22\x20\x0a\x20\x20pattern=\x22*.js,*.ts\x22\x0a/]\x0a[/tool]\x0a\x0aParameters:\x0a-\x20dir:\x20Directory\x20to\x20scan\x20(defaults\x20to\x20project\x20root)\x0a-\x20max-depth:\x20Maximum\x20depth\x20to\x20scan\x20(defaults\x20to\x203)\x0a-\x20ignore-dirs:\x20Comma-separated\x20list\x20of\x20directories\x20to\x20ignore\x0a-\x20ignore-exts:\x20Comma-separated\x20list\x20of\x20file\x20extensions\x20to\x20ignore\x0a-\x20show-files:\x20Whether\x20to\x20show\x20files\x20(defaults\x20to\x20true)\x0a-\x20pattern:\x20Optional\x20glob\x20pattern\x20to\x20filter\x20files\x20(e.g.,\x20\x22*.js,*.ts\x22)\x0a\x0aExamples:\x0a1.\x20Generate\x20a\x20basic\x20tree\x20of\x20the\x20project:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20/]\x0a[/tool]\x0a\x0a2.\x20Generate\x20a\x20detailed\x20tree\x20with\x20custom\x20options:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20\x0a\x20\x20dir=\x22src\x22\x20\x0a\x20\x20max-depth=\x224\x22\x20\x0a\x20\x20ignore-dirs=\x22tests,fixtures\x22\x20\x0a\x20\x20show-files=\x22true\x22\x20\x0a\x20\x20pattern=\x22*.js,*.jsx\x22\x0a/]\x0a[/tool]\x0a\x0aThe\x20tool\x20automatically\x20ignores\x20common\x20dependency\x20and\x20build\x20directories\x20like\x20node_modules,\x20.git,\x20dist,\x20etc.\x0a\x20\x20\x20\x20';}[a0_0x4fc979(0x12f)](_0x2eeced){const _0x57f629=a0_0x4fc979;this[_0x57f629(0x159)][_0x57f629(0x168)](_0x57f629(0x15f));const _0x16e7f5={'commands':[]};try{const _0x4bfcf7=TagParser['query'](_0x2eeced,'generate-tree');for(const _0x19000a of _0x4bfcf7){_0x16e7f5[_0x57f629(0x136)][_0x57f629(0x13f)]({'action':_0x57f629(0x139),'dir':_0x19000a[_0x57f629(0x147)][_0x57f629(0x144)]||'.','maxDepth':parseInt(_0x19000a[_0x57f629(0x147)][_0x57f629(0x143)]||'3',0xa),'ignoreDirs':(_0x19000a['attributes']['ignore-dirs']||'')[_0x57f629(0x12e)](',')['filter'](Boolean),'ignoreExts':(_0x19000a[_0x57f629(0x147)][_0x57f629(0x152)]||'')['split'](',')[_0x57f629(0x142)](Boolean),'showFiles':_0x19000a[_0x57f629(0x147)][_0x57f629(0x15e)]!==_0x57f629(0x145),'pattern':(_0x19000a['attributes'][_0x57f629(0x151)]||'')[_0x57f629(0x12e)](',')[_0x57f629(0x142)](Boolean)});}return _0x16e7f5;}catch(_0x3f324c){return this['logger']['error']('Error\x20parsing\x20file\x20tree\x20parameters:',_0x3f324c),{'commands':[]};}}async['executeWithParameters'](_0x5c8fda,_0x18ff30){const _0x1a6cfb=a0_0x4fc979;this['logger']['info']('Executing\x20file\x20tree\x20command\x20with\x20parameters:',_0x5c8fda);const _0x33fd73=[];if(!_0x5c8fda[_0x1a6cfb(0x136)]||_0x5c8fda['commands']['length']===0x0)throw new Error('No\x20file\x20tree\x20commands\x20specified');for(const _0x266021 of _0x5c8fda['commands']){try{switch(_0x266021['action']){case'generate-tree':_0x33fd73[_0x1a6cfb(0x13f)](await this['generateTree'](_0x266021[_0x1a6cfb(0x144)],_0x266021['maxDepth'],_0x266021[_0x1a6cfb(0x153)],_0x266021[_0x1a6cfb(0x158)],_0x266021[_0x1a6cfb(0x130)],_0x266021[_0x1a6cfb(0x151)],_0x18ff30));break;default:throw new Error(_0x1a6cfb(0x150)+_0x266021[_0x1a6cfb(0x16c)]);}}catch(_0x140f00){this[_0x1a6cfb(0x159)][_0x1a6cfb(0x13c)](_0x1a6cfb(0x13b)+_0x266021[_0x1a6cfb(0x16c)]+':',_0x140f00),_0x33fd73['push']({'action':_0x266021['action'],'success':![],'error':_0x140f00['message']});}}return{'results':_0x33fd73};}async['generateTree'](_0x18efaf,_0x2aaca0,_0x5222ad,_0x40747c,_0x867636,_0x1ffaf5,_0x23fe92){const _0x232625=a0_0x4fc979;this[_0x232625(0x159)][_0x232625(0x168)](_0x232625(0x154)+_0x18efaf);const _0x1249b8=this['resolvePath'](_0x18efaf,_0x23fe92),_0x294dca=[...this['defaultIgnoreDirs'],..._0x5222ad]['filter'](Boolean),_0x23a487=[...this[_0x232625(0x134)],..._0x40747c]['filter'](Boolean),_0x17e31e=await this[_0x232625(0x135)](_0x1249b8,_0x1249b8,0x0,_0x2aaca0,_0x294dca,_0x23a487,_0x867636,_0x1ffaf5),_0x449a90=this[_0x232625(0x14f)](_0x17e31e);return{'action':'generate-tree','path':_0x18efaf,'resolvedPath':_0x1249b8,'tree':_0x449a90,'success':!![]};}async[a0_0x4fc979(0x135)](_0x22dd1a,_0x2d9d02,_0x20f70c,_0x1ff498,_0x398b68,_0x5010ff,_0x4805b2,_0x4fd160){const _0x3baed9=a0_0x4fc979;if(_0x20f70c>_0x1ff498)return null;try{const _0x565f04=await a0_0x2bd3d9[_0x3baed9(0x15d)](_0x2d9d02,{'withFileTypes':!![]}),_0x1c6e29={'name':a0_0x8a632b['basename'](_0x2d9d02),'path':a0_0x8a632b[_0x3baed9(0x164)](_0x22dd1a,_0x2d9d02),'type':'directory','children':[]};for(const _0x5af06d of _0x565f04){const _0x39cb29=a0_0x8a632b['join'](_0x2d9d02,_0x5af06d[_0x3baed9(0x162)]),_0x5a7098=a0_0x8a632b[_0x3baed9(0x164)](_0x22dd1a,_0x39cb29);if(_0x5af06d['isDirectory']()){if(_0x398b68[_0x3baed9(0x14c)](_0x38d107=>_0x5af06d[_0x3baed9(0x162)]===_0x38d107||_0x5a7098['split'](a0_0x8a632b['sep'])['includes'](_0x38d107)))continue;const _0x35e860=await this['buildTree'](_0x22dd1a,_0x39cb29,_0x20f70c+0x1,_0x1ff498,_0x398b68,_0x5010ff,_0x4805b2,_0x4fd160);_0x35e860&&(_0x35e860['children'][_0x3baed9(0x156)]>0x0||_0x20f70c===0x0)&&_0x1c6e29[_0x3baed9(0x16e)]['push'](_0x35e860);}else{if(_0x5af06d['isFile']()&&_0x4805b2){const _0x43172b=a0_0x8a632b['extname'](_0x5af06d['name']);if(_0x5010ff['includes'](_0x43172b))continue;if(_0x4fd160&&_0x4fd160['length']>0x0){const _0x3fc6e8=_0x4fd160[_0x3baed9(0x14c)](_0x4a5695=>{const _0x1cc93b=_0x3baed9;return _0x4a5695[_0x1cc93b(0x171)]('*.')?_0x5af06d['name'][_0x1cc93b(0x170)](_0x4a5695[_0x1cc93b(0x131)](0x1)):_0x5af06d['name']['includes'](_0x4a5695['replace']('*',''));});if(!_0x3fc6e8)continue;}_0x1c6e29['children'][_0x3baed9(0x13f)]({'name':_0x5af06d['name'],'path':_0x5a7098,'type':'file','ext':_0x43172b});}}}return _0x1c6e29[_0x3baed9(0x16e)]['sort']((_0x27435d,_0x4b04de)=>{const _0x18231e=_0x3baed9;if(_0x27435d[_0x18231e(0x14d)]===_0x4b04de['type'])return _0x27435d[_0x18231e(0x162)][_0x18231e(0x15c)](_0x4b04de['name']);return _0x27435d[_0x18231e(0x14d)]===_0x18231e(0x13d)?-0x1:0x1;}),_0x1c6e29;}catch(_0x2db863){return this['logger'][_0x3baed9(0x13c)](_0x3baed9(0x13e)+_0x2d9d02+':',_0x2db863),{'name':a0_0x8a632b[_0x3baed9(0x163)](_0x2d9d02),'path':a0_0x8a632b['relative'](_0x22dd1a,_0x2d9d02),'type':'directory','error':_0x2db863['message'],'children':[]};}}[a0_0x4fc979(0x14f)](_0x530082,_0x52036c='',_0x536177=!![]){const _0x1b1c97=a0_0x4fc979;if(!_0x530082)return'';const _0x51b17b='├──\x20',_0x5360a5='└──\x20',_0x498026='│\x20\x20\x20',_0x4bd5bf='\x20\x20\x20\x20';let _0x3577ad=''+_0x52036c+(_0x536177?_0x5360a5:_0x51b17b)+_0x530082['name']+'\x0a';if(_0x530082[_0x1b1c97(0x16e)]&&_0x530082['children']['length']>0x0){const _0x4b37a3=_0x52036c+(_0x536177?_0x4bd5bf:_0x498026);_0x530082[_0x1b1c97(0x16e)][_0x1b1c97(0x15a)]((_0x2445f7,_0x1d813d)=>{const _0xae654=_0x1b1c97,_0x5e0841=_0x1d813d===_0x530082['children'][_0xae654(0x156)]-0x1;_0x3577ad+=this['formatTree'](_0x2445f7,_0x4b37a3,_0x5e0841);});}return _0x3577ad;}['resolvePath'](_0x555130,_0x5f56a0){const _0x2dd17f=a0_0x4fc979;if(a0_0x8a632b['isAbsolute'](_0x555130))return _0x555130;return a0_0x8a632b[_0x2dd17f(0x132)](_0x5f56a0,_0x555130);}}