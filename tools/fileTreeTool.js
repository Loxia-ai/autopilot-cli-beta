const a0_0x4ffc82=a0_0x1ba3;(function(_0x59705d,_0x319e5b){const _0x1bec3f=a0_0x1ba3,_0x36fd84=_0x59705d();while(!![]){try{const _0x2d2735=parseInt(_0x1bec3f(0x160))/0x1+-parseInt(_0x1bec3f(0x193))/0x2*(-parseInt(_0x1bec3f(0x173))/0x3)+parseInt(_0x1bec3f(0x1a0))/0x4+-parseInt(_0x1bec3f(0x179))/0x5+parseInt(_0x1bec3f(0x161))/0x6+-parseInt(_0x1bec3f(0x175))/0x7*(-parseInt(_0x1bec3f(0x170))/0x8)+-parseInt(_0x1bec3f(0x190))/0x9*(parseInt(_0x1bec3f(0x174))/0xa);if(_0x2d2735===_0x319e5b)break;else _0x36fd84['push'](_0x36fd84['shift']());}catch(_0x3b4133){_0x36fd84['push'](_0x36fd84['shift']());}}}(a0_0x80bf,0xcdaa9));function a0_0x1ba3(_0x5607ff,_0x30f493){const _0x80bf2b=a0_0x80bf();return a0_0x1ba3=function(_0x1ba390,_0x486c62){_0x1ba390=_0x1ba390-0x15f;let _0x1b6936=_0x80bf2b[_0x1ba390];if(a0_0x1ba3['QiyNdj']===undefined){var _0x3a9c3e=function(_0x593ea1){const _0x5c534d='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1295b7='',_0x44c9f3='';for(let _0xc36c83=0x0,_0x417522,_0x54b0f1,_0x3a74bd=0x0;_0x54b0f1=_0x593ea1['charAt'](_0x3a74bd++);~_0x54b0f1&&(_0x417522=_0xc36c83%0x4?_0x417522*0x40+_0x54b0f1:_0x54b0f1,_0xc36c83++%0x4)?_0x1295b7+=String['fromCharCode'](0xff&_0x417522>>(-0x2*_0xc36c83&0x6)):0x0){_0x54b0f1=_0x5c534d['indexOf'](_0x54b0f1);}for(let _0x433a37=0x0,_0x3f01d6=_0x1295b7['length'];_0x433a37<_0x3f01d6;_0x433a37++){_0x44c9f3+='%'+('00'+_0x1295b7['charCodeAt'](_0x433a37)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x44c9f3);};a0_0x1ba3['bZnTwQ']=_0x3a9c3e,_0x5607ff=arguments,a0_0x1ba3['QiyNdj']=!![];}const _0x3c380a=_0x80bf2b[0x0],_0x21708c=_0x1ba390+_0x3c380a,_0x121b67=_0x5607ff[_0x21708c];return!_0x121b67?(_0x1b6936=a0_0x1ba3['bZnTwQ'](_0x1b6936),_0x5607ff[_0x21708c]=_0x1b6936):_0x1b6936=_0x121b67,_0x1b6936;},a0_0x1ba3(_0x5607ff,_0x30f493);}import{promises as a0_0x593ea1}from'fs';function a0_0x80bf(){const _0x41324d=['4PsC4Psa4Psaia','C29YDa','r2vUzxjHDgLUzYbMAwXLihrYzwuGzM9YoIa','zgLYzwn0B3j5','Bg9Nz2vY','y2HPBgrYzw4','BMfTzq','CMvZB2X2zvbHDgG','C2HVD0zPBgvZ','CgfYC2vqyxjHBwv0zxjZ','AxnbyNnVBhv0zq','Aw5MBW','CMvWBgfJzq','yMfZzw5HBwu','lNrLBxa','lNzZy29Kzq','mty1mtu1odvXtNLZvNq','C2HVDY1MAwXLCW','C3rHCNrZv2L0Aa','mLLNwwjzzG','C2vW','ChvZAa','lM1PBI5QCW','CMvZB2X2zq','y29TBwfUzhm','lNrTCa','yxr0CMLIDxrLCW','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','C3bSAxq','yNvPBgq','Aw5JBhvKzxm','Cgf0DgvYBG','nda0nJKYnfD6s3LlEq','BgvUz3rO','ntK2ntbxwLnZrvG','odCYmdeYngHKzLHOyW','zgLZDa','Bwf4rgvWDgG','zMLSDgvY','lMvUDG','yNvPBgruCMvL','ywn0Aw9U','4Psu4Psa4Psaia','lMDPDa','z2vUzxjHDgvuCMvL','DMvUDG','C3vIC3rYAw5N','zM9YBwf0vhjLzq','lMXVEgLHx3n0yxrL','icaGia','ndK0mtKYrwPYCNzN','ugfYC2LUzYbMAwXLihrYzwuGCgfYyw1LDgvYCYb3AxrOifrHz1bHCNnLCG','AxngAwXL','otu4mJaZC3rfwg9j','mtb1rxHbAwq','ntzluePMzNG','zxH0BMfTzq','z2vUzxjHDguTDhjLzq','AM9PBG','mZmWndi3men0wLzAuW','CMvHzgrPCG','z2v0rgvZy3jPChrPB24','cKzPBguGvhjLzsbuB29SoIbhzw5LCMf0zxmGysbOAwvYyxjJAgLJywWGDhjLzsbYzxbYzxnLBNrHDgLVBIbVzIb5B3vYihbYB2PLy3qNCYbMAwXLihn0CNvJDhvYzs4kcLvZywDLoGPBDg9VBcbPzd0IzMLSzs10CMvLiL0kw2DLBMvYyxrLlxrYzwuGcIaGzgLYpsjWyxrOl3rVl2rPCMvJDg9YEsiGcIaGBwf4lwrLChrOpsiZiIakicbPz25VCMuTzgLYCZ0IBM9Kzv9TB2r1BgvZlgrPC3qSlMDPDciGcIaGAwDUB3jLlwv4Dhm9iI5TyxaSlM1PBI5QCYiGcIaGC2HVDY1MAwXLCZ0IDhj1zsiGcIaGCgf0DgvYBJ0IkI5QCYWQlNrZiGOVxqPBl3rVB2XDcGPqyxjHBwv0zxjZoGOTigrPCJOGrgLYzwn0B3j5ihrVihnJyw4GkgrLzMf1BhrZihrVihbYB2PLy3qGCM9VDcKklsbTyxGTzgvWDgG6ie1HEgLTDw0GzgvWDgGGDg8GC2nHBIaOzgvMyxvSDhmGDg8GmYKklsbPz25VCMuTzgLYCZOGq29TBweTC2vWyxjHDgvKigXPC3qGB2yGzgLYzwn0B3jPzxmGDg8GAwDUB3jLcI0GAwDUB3jLlwv4Dhm6ienVBw1HlxnLCgfYyxrLzcbSAxn0ig9MigzPBguGzxH0zw5ZAw9UCYb0BYbPz25VCMuklsbZAg93lwzPBgvZoIbxAgv0AgvYihrVihnOB3CGzMLSzxmGkgrLzMf1BhrZihrVihrYDwuPcI0GCgf0DgvYBJOGt3b0Aw9UywWGz2XVyIbWyxr0zxjUihrVigzPBhrLCIbMAwXLCYaOzs5NlIWGiIOUANmSkI50CYiPcGPfEgfTCgXLCZOkms4Gr2vUzxjHDguGysbIyxnPyYb0CMvLig9MihrOzsbWCM9Qzwn0oGPBDg9VBcbPzd0IzMLSzs10CMvLiL0kw2DLBMvYyxrLlxrYzwuGl10kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcb0CMvLihDPDgGGy3vZDg9Tig9WDgLVBNm6cLT0B29SigLKpsjMAwXLlxrYzwuIxqPBz2vUzxjHDguTDhjLzsakicbKAxi9iNnYyYiGcIaGBwf4lwrLChrOpsi0iIakicbPz25VCMuTzgLYCZ0IDgvZDhmSzML4DhvYzxmIiaOGihnOB3CTzMLSzxm9iNrYDwuIiaOGihbHDhrLCM49iIOUANmSkI5QC3GIcI9DcLSVDg9VBf0kcLrOzsb0B29Sigf1Dg9TyxrPy2fSBhKGAwDUB3jLCYbJB21TB24GzgvWzw5Kzw5JEsbHBMqGyNvPBgqGzgLYzwn0B3jPzxmGBgLRzsbUB2rLx21VzhvSzxmSic5NAxqSigrPC3qSigv0yY4kicaGia','Bwf4lwrLChrO','zgvMyxvSDeLNBM9YzurPCNm','CMvSyxrPDMu'];a0_0x80bf=function(){return _0x41324d;};return a0_0x80bf();}import a0_0x5c534d from'path';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class FileTreeTool extends BaseTool{constructor(_0x1295b7,_0x44c9f3){const _0x343293=a0_0x1ba3;super(_0x1295b7,_0x44c9f3),this['defaultIgnoreDirs']=[_0x343293(0x16e),'node_modules',_0x343293(0x169),_0x343293(0x162),_0x343293(0x19d),'coverage','.next','.nuxt','.cache','vendor','bower_components',_0x343293(0x18f),'.idea','__pycache__',_0x343293(0x16b),'env',_0x343293(0x165)],this['defaultIgnoreExts']=['.map',_0x343293(0x196),'.min.css','.log',_0x343293(0x199),_0x343293(0x18e)];}[a0_0x4ffc82(0x17b)](){const _0x38701b=a0_0x4ffc82;return _0x38701b(0x17c);}[a0_0x4ffc82(0x189)](_0xc36c83){const _0x3722d5=a0_0x4ffc82;this['logger']['info'](_0x3722d5(0x171));const _0x417522={'commands':[]};try{const _0x54b0f1=TagParser['query'](_0xc36c83,'generate-tree');for(const _0x3a74bd of _0x54b0f1){_0x417522[_0x3722d5(0x198)][_0x3722d5(0x195)]({'action':_0x3722d5(0x177),'dir':_0x3a74bd['attributes']['dir']||'.','maxDepth':parseInt(_0x3a74bd[_0x3722d5(0x19a)][_0x3722d5(0x17d)]||'3',0xa),'ignoreDirs':(_0x3a74bd['attributes']['ignore-dirs']||'')['split'](',')['filter'](Boolean),'ignoreExts':(_0x3a74bd[_0x3722d5(0x19a)]['ignore-exts']||'')[_0x3722d5(0x19c)](',')['filter'](Boolean),'showFiles':_0x3a74bd['attributes'][_0x3722d5(0x191)]!=='false','pattern':(_0x3a74bd[_0x3722d5(0x19a)][_0x3722d5(0x19f)]||'')['split'](',')[_0x3722d5(0x164)](Boolean)});}return _0x417522;}catch(_0x433a37){return this[_0x3722d5(0x184)]['error']('Error\x20parsing\x20file\x20tree\x20parameters:',_0x433a37),{'commands':[]};}}async[a0_0x4ffc82(0x19b)](_0x3f01d6,_0x34c748){const _0x24ce17=a0_0x4ffc82;this[_0x24ce17(0x184)][_0x24ce17(0x18b)]('Executing\x20file\x20tree\x20command\x20with\x20parameters:',_0x3f01d6);const _0x57eddd=[];if(!_0x3f01d6['commands']||_0x3f01d6[_0x24ce17(0x198)][_0x24ce17(0x15f)]===0x0)throw new Error('No\x20file\x20tree\x20commands\x20specified');for(const _0x152d44 of _0x3f01d6[_0x24ce17(0x198)]){try{switch(_0x152d44[_0x24ce17(0x167)]){case'generate-tree':_0x57eddd[_0x24ce17(0x195)](await this[_0x24ce17(0x16a)](_0x152d44['dir'],_0x152d44[_0x24ce17(0x163)],_0x152d44['ignoreDirs'],_0x152d44['ignoreExts'],_0x152d44[_0x24ce17(0x188)],_0x152d44['pattern'],_0x34c748));break;default:throw new Error('Unknown\x20file\x20tree\x20command:\x20'+_0x152d44['action']);}}catch(_0x469b39){this[_0x24ce17(0x184)]['error']('Error\x20executing\x20file\x20tree\x20command\x20'+_0x152d44[_0x24ce17(0x167)]+':',_0x469b39),_0x57eddd['push']({'action':_0x152d44[_0x24ce17(0x167)],'success':![],'error':_0x469b39['message']});}}return{'results':_0x57eddd};}async['generateTree'](_0x4b73dd,_0x4f66a2,_0x4dcbe2,_0x158b59,_0x4cc6ab,_0x357adf,_0x2f0640){const _0xe7d5b8=a0_0x4ffc82;this[_0xe7d5b8(0x184)]['info'](_0xe7d5b8(0x182)+_0x4b73dd);const _0x4f03da=this[_0xe7d5b8(0x187)](_0x4b73dd,_0x2f0640),_0x496941=[...this[_0xe7d5b8(0x17e)],..._0x4dcbe2][_0xe7d5b8(0x164)](Boolean),_0x26973c=[...this['defaultIgnoreExts'],..._0x158b59][_0xe7d5b8(0x164)](Boolean),_0x31ea23=await this['buildTree'](_0x4f03da,_0x4f03da,0x0,_0x4f66a2,_0x496941,_0x26973c,_0x4cc6ab,_0x357adf),_0x304c33=this['formatTree'](_0x31ea23);return{'action':'generate-tree','path':_0x4b73dd,'resolvedPath':_0x4f03da,'tree':_0x304c33,'success':!![]};}async[a0_0x4ffc82(0x166)](_0x1ddf41,_0x210b91,_0x404291,_0x47a087,_0x3e468f,_0x5dfad6,_0x42acf9,_0x281f1e){const _0x2633a7=a0_0x4ffc82;if(_0x404291>_0x47a087)return null;try{const _0x11d080=await a0_0x593ea1[_0x2633a7(0x17a)](_0x210b91,{'withFileTypes':!![]}),_0x3fec32={'name':a0_0x5c534d[_0x2633a7(0x18d)](_0x210b91),'path':a0_0x5c534d['relative'](_0x1ddf41,_0x210b91),'type':_0x2633a7(0x183),'children':[]};for(const _0x3af644 of _0x11d080){const _0x25d727=a0_0x5c534d[_0x2633a7(0x178)](_0x210b91,_0x3af644[_0x2633a7(0x186)]),_0x55a9f2=a0_0x5c534d['relative'](_0x1ddf41,_0x25d727);if(_0x3af644['isDirectory']()){if(_0x3e468f['some'](_0x211b57=>_0x3af644[_0x2633a7(0x186)]===_0x211b57||_0x55a9f2[_0x2633a7(0x19c)](a0_0x5c534d[_0x2633a7(0x194)])[_0x2633a7(0x19e)](_0x211b57)))continue;const _0x4bb3a7=await this[_0x2633a7(0x166)](_0x1ddf41,_0x25d727,_0x404291+0x1,_0x47a087,_0x3e468f,_0x5dfad6,_0x42acf9,_0x281f1e);_0x4bb3a7&&(_0x4bb3a7['children']['length']>0x0||_0x404291===0x0)&&_0x3fec32['children']['push'](_0x4bb3a7);}else{if(_0x3af644[_0x2633a7(0x172)]()&&_0x42acf9){const _0x56391b=a0_0x5c534d[_0x2633a7(0x176)](_0x3af644['name']);if(_0x5dfad6['includes'](_0x56391b))continue;if(_0x281f1e&&_0x281f1e[_0x2633a7(0x15f)]>0x0){const _0x598d39=_0x281f1e['some'](_0x28c6b4=>{const _0x32e1d5=_0x2633a7;return _0x28c6b4[_0x32e1d5(0x192)]('*.')?_0x3af644['name']['endsWith'](_0x28c6b4[_0x32e1d5(0x16c)](0x1)):_0x3af644[_0x32e1d5(0x186)]['includes'](_0x28c6b4[_0x32e1d5(0x18c)]('*',''));});if(!_0x598d39)continue;}_0x3fec32[_0x2633a7(0x185)][_0x2633a7(0x195)]({'name':_0x3af644[_0x2633a7(0x186)],'path':_0x55a9f2,'type':'file','ext':_0x56391b});}}}return _0x3fec32['children'][_0x2633a7(0x181)]((_0x2b3c2e,_0x577e3b)=>{const _0xe77625=_0x2633a7;if(_0x2b3c2e['type']===_0x577e3b['type'])return _0x2b3c2e['name']['localeCompare'](_0x577e3b[_0xe77625(0x186)]);return _0x2b3c2e['type']===_0xe77625(0x183)?-0x1:0x1;}),_0x3fec32;}catch(_0x25d560){return this[_0x2633a7(0x184)]['error']('Error\x20building\x20tree\x20for\x20'+_0x210b91+':',_0x25d560),{'name':a0_0x5c534d[_0x2633a7(0x18d)](_0x210b91),'path':a0_0x5c534d[_0x2633a7(0x17f)](_0x1ddf41,_0x210b91),'type':'directory','error':_0x25d560['message'],'children':[]};}}[a0_0x4ffc82(0x16d)](_0x219bff,_0x517670='',_0x139f39=!![]){const _0x1c3134=a0_0x4ffc82;if(!_0x219bff)return'';const _0x3ed7de=_0x1c3134(0x180),_0x5daa9c=_0x1c3134(0x168),_0x48c775='│\x20\x20\x20',_0x3c0264=_0x1c3134(0x16f);let _0x3a71e3=''+_0x517670+(_0x139f39?_0x5daa9c:_0x3ed7de)+_0x219bff['name']+'\x0a';if(_0x219bff['children']&&_0x219bff[_0x1c3134(0x185)][_0x1c3134(0x15f)]>0x0){const _0x40ad69=_0x517670+(_0x139f39?_0x3c0264:_0x48c775);_0x219bff['children']['forEach']((_0x27f84c,_0x4dcedc)=>{const _0x50823b=_0x1c3134,_0x20c297=_0x4dcedc===_0x219bff[_0x50823b(0x185)]['length']-0x1;_0x3a71e3+=this[_0x50823b(0x16d)](_0x27f84c,_0x40ad69,_0x20c297);});}return _0x3a71e3;}['resolvePath'](_0x14a4b5,_0x248aad){const _0x2575f5=a0_0x4ffc82;if(a0_0x5c534d[_0x2575f5(0x18a)](_0x14a4b5))return _0x14a4b5;return a0_0x5c534d[_0x2575f5(0x197)](_0x248aad,_0x14a4b5);}}