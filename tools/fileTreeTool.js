const a0_0x52b9a3=a0_0x47fe;(function(_0x4d7758,_0x250140){const _0x45319c=a0_0x47fe,_0xe96776=_0x4d7758();while(!![]){try{const _0x431b22=parseInt(_0x45319c(0xf0))/0x1+parseInt(_0x45319c(0xd6))/0x2+parseInt(_0x45319c(0xee))/0x3*(parseInt(_0x45319c(0xec))/0x4)+-parseInt(_0x45319c(0xc3))/0x5*(-parseInt(_0x45319c(0xde))/0x6)+-parseInt(_0x45319c(0xf5))/0x7+-parseInt(_0x45319c(0xca))/0x8+-parseInt(_0x45319c(0xb7))/0x9;if(_0x431b22===_0x250140)break;else _0xe96776['push'](_0xe96776['shift']());}catch(_0x1a1fed){_0xe96776['push'](_0xe96776['shift']());}}}(a0_0x216a,0x2769d));import{promises as a0_0x3f8b65}from'fs';import a0_0x1a31e4 from'path';import{TagParser}from'../utilities/tagParser.js';function a0_0x216a(){const _0x1b3ebc=['4PsC4Psa4Psaia','BgvUz3rO','z2vUzxjHDgvuCMvL','mtC1mJvKDKHzsw4','4Psu4Psa4Psaia','lMLKzwe','CgfYC2vqyxjHBwv0zxjZ','AwDUB3jLrgLYCW','AwDUB3jLlwrPCNm','zMLSDgvY','oda3mK1HB2zMvG','vw5RBM93BIbMAwXLihrYzwuGy29TBwfUzdOG','zgvMyxvSDeLNBM9Yzuv4Dhm','lM1HCa','Bwf4rgvWDgG','AxngAwXL','zMfSC2u','rxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5KihDPDgGGCgfYyw1LDgvYCZO','tM8GzMLSzsb0CMvLignVBw1HBMrZihnWzwnPzMLLza','y29TBwfUzhm','zw52','zxjYB3i','ndi2mdu4ANrotLrw','C2HVD0zPBgvZ','Bwf4lwrLChrO','zgLZDa','BwvZC2fNzq','lM1PBI5QCW','ywn0Aw9U','yNvPBgruCMvL','mtj3DLP0Dgy','zgLY','y292zxjHz2u','Aw5JBhvKzxm','y2HPBgrYzw4','AxnbyNnVBhv0zq','zMLSzq','x19WEwnHy2HLx18','yM93zxjFy29TCg9Uzw50CW','CMvZB2X2zq','Aw5MBW','yMfZzw5HBwu','yxr0CMLIDxrLCW','C3bSAxq','mJeXmJyWDeHrEM52','CxvLCNK','m29wEfLLuG','Bg9Nz2vY','mtq4odm3A1fHB3rA','zM9YBwf0vhjLzq','DhLWzq','BMfTzq','rxjYB3iGyNvPBgrPBMCGDhjLzsbMB3iG','nJu3ndyXsNjuqLvv','z2vUzxjHDguTDhjLzq','lMXVzW','rxjYB3iGzxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5Kia','Bg9JywXLq29TCgfYzq','ChvZAa','mtq4nZG5ohLuvNHvza','lMXVEgLHx3n0yxrL','Cgf0DgvYBG','AxneAxjLy3rVCNK','zgvMyxvSDeLNBM9YzurPCNm','zgLYzwn0B3j5','DMvUzg9Y','C29YDa','cKzPBguGvhjLzsbuB29SoIbhzw5LCMf0zxmGysbOAwvYyxjJAgLJywWGDhjLzsbYzxbYzxnLBNrHDgLVBIbVzIb5B3vYihbYB2PLy3qNCYbMAwXLihn0CNvJDhvYzs4kcLvZywDLoGPBDg9VBcbPzd0IzMLSzs10CMvLiL0kw2DLBMvYyxrLlxrYzwuGcIaGzgLYpsjWyxrOl3rVl2rPCMvJDg9YEsiGcIaGBwf4lwrLChrOpsiZiIakicbPz25VCMuTzgLYCZ0IBM9Kzv9TB2r1BgvZlgrPC3qSlMDPDciGcIaGAwDUB3jLlwv4Dhm9iI5TyxaSlM1PBI5QCYiGcIaGC2HVDY1MAwXLCZ0IDhj1zsiGcIaGCgf0DgvYBJ0IkI5QCYWQlNrZiGOVxqPBl3rVB2XDcGPqyxjHBwv0zxjZoGOTigrPCJOGrgLYzwn0B3j5ihrVihnJyw4GkgrLzMf1BhrZihrVihbYB2PLy3qGCM9VDcKklsbTyxGTzgvWDgG6ie1HEgLTDw0GzgvWDgGGDg8GC2nHBIaOzgvMyxvSDhmGDg8GmYKklsbPz25VCMuTzgLYCZOGq29TBweTC2vWyxjHDgvKigXPC3qGB2yGzgLYzwn0B3jPzxmGDg8GAwDUB3jLcI0GAwDUB3jLlwv4Dhm6ienVBw1HlxnLCgfYyxrLzcbSAxn0ig9MigzPBguGzxH0zw5ZAw9UCYb0BYbPz25VCMuklsbZAg93lwzPBgvZoIbxAgv0AgvYihrVihnOB3CGzMLSzxmGkgrLzMf1BhrZihrVihrYDwuPcI0GCgf0DgvYBJOGt3b0Aw9UywWGz2XVyIbWyxr0zxjUihrVigzPBhrLCIbMAwXLCYaOzs5NlIWGiIOUANmSkI50CYiPcGPfEgfTCgXLCZOkms4Gr2vUzxjHDguGysbIyxnPyYb0CMvLig9MihrOzsbWCM9Qzwn0oGPBDg9VBcbPzd0IzMLSzs10CMvLiL0kw2DLBMvYyxrLlxrYzwuGl10kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcb0CMvLihDPDgGGy3vZDg9Tig9WDgLVBNm6cLT0B29SigLKpsjMAwXLlxrYzwuIxqPBz2vUzxjHDguTDhjLzsakicbKAxi9iNnYyYiGcIaGBwf4lwrLChrOpsi0iIakicbPz25VCMuTzgLYCZ0IDgvZDhmSzML4DhvYzxmIiaOGihnOB3CTzMLSzxm9iNrYDwuIiaOGihbHDhrLCM49iIOUANmSkI5QC3GIcI9DcLSVDg9VBf0kcLrOzsb0B29Sigf1Dg9TyxrPy2fSBhKGAwDUB3jLCYbJB21TB24GzgvWzw5Kzw5JEsbHBMqGyNvPBgqGzgLYzwn0B3jPzxmGBgLRzsbUB2rLx21VzhvSzxmSic5NAxqSigrPC3qSigv0yY4kicaGia'];a0_0x216a=function(){return _0x1b3ebc;};return a0_0x216a();}function a0_0x47fe(_0x47927b,_0x50e7d5){const _0x216ae6=a0_0x216a();return a0_0x47fe=function(_0x47fec9,_0x1177ae){_0x47fec9=_0x47fec9-0xb6;let _0x16794b=_0x216ae6[_0x47fec9];if(a0_0x47fe['wZLgBj']===undefined){var _0x224038=function(_0x3f8b65){const _0x1a31e4='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5f16f1='',_0x103c40='';for(let _0x1869f0=0x0,_0x38dddc,_0x128a8d,_0x4ded10=0x0;_0x128a8d=_0x3f8b65['charAt'](_0x4ded10++);~_0x128a8d&&(_0x38dddc=_0x1869f0%0x4?_0x38dddc*0x40+_0x128a8d:_0x128a8d,_0x1869f0++%0x4)?_0x5f16f1+=String['fromCharCode'](0xff&_0x38dddc>>(-0x2*_0x1869f0&0x6)):0x0){_0x128a8d=_0x1a31e4['indexOf'](_0x128a8d);}for(let _0x58058f=0x0,_0x16bfcf=_0x5f16f1['length'];_0x58058f<_0x16bfcf;_0x58058f++){_0x103c40+='%'+('00'+_0x5f16f1['charCodeAt'](_0x58058f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x103c40);};a0_0x47fe['yORoPk']=_0x224038,_0x47927b=arguments,a0_0x47fe['wZLgBj']=!![];}const _0x2a33da=_0x216ae6[0x0],_0x123a43=_0x47fec9+_0x2a33da,_0x4a194f=_0x47927b[_0x123a43];return!_0x4a194f?(_0x16794b=a0_0x47fe['yORoPk'](_0x16794b),_0x47927b[_0x123a43]=_0x16794b):_0x16794b=_0x4a194f,_0x16794b;},a0_0x47fe(_0x47927b,_0x50e7d5);}import{BaseTool}from'./baseTool.js';export class FileTreeTool extends BaseTool{constructor(_0x5f16f1,_0x103c40){const _0x1c7182=a0_0x47fe;super(_0x5f16f1,_0x103c40),this[_0x1c7182(0xbb)]=[_0x1c7182(0xb8),'node_modules','.git',_0x1c7182(0xd9),'build',_0x1c7182(0xe0),'.next','.nuxt','.cache',_0x1c7182(0xbd),_0x1c7182(0xe6),'.vscode',_0x1c7182(0xc5),_0x1c7182(0xe5),'venv',_0x1c7182(0xd4),'.env'],this['defaultIgnoreExts']=[_0x1c7182(0xcd),_0x1c7182(0xdb),'.min.css',_0x1c7182(0xf7),'.tmp','.temp'];}['getDescription'](){const _0x3aeb17=a0_0x47fe;return _0x3aeb17(0xbf);}[a0_0x52b9a3(0xc6)](_0x1869f0){const _0xbebadc=a0_0x52b9a3;this[_0xbebadc(0xef)][_0xbebadc(0xe8)]('Parsing\x20file\x20tree\x20parameters\x20with\x20TagParser');const _0x38dddc={'commands':[]};try{const _0x128a8d=TagParser[_0xbebadc(0xed)](_0x1869f0,_0xbebadc(0xf6));for(const _0x4ded10 of _0x128a8d){_0x38dddc[_0xbebadc(0xd3)][_0xbebadc(0xb6)]({'action':_0xbebadc(0xf6),'dir':_0x4ded10[_0xbebadc(0xea)][_0xbebadc(0xdf)]||'.','maxDepth':parseInt(_0x4ded10['attributes'][_0xbebadc(0xd8)]||'3',0xa),'ignoreDirs':(_0x4ded10['attributes'][_0xbebadc(0xc8)]||'')[_0xbebadc(0xeb)](',')['filter'](Boolean),'ignoreExts':(_0x4ded10[_0xbebadc(0xea)]['ignore-exts']||'')['split'](',')['filter'](Boolean),'showFiles':_0x4ded10[_0xbebadc(0xea)]['show-files']!==_0xbebadc(0xd0),'pattern':(_0x4ded10[_0xbebadc(0xea)][_0xbebadc(0xb9)]||'')[_0xbebadc(0xeb)](',')['filter'](Boolean)});}return _0x38dddc;}catch(_0x58058f){return this[_0xbebadc(0xef)]['error']('Error\x20parsing\x20file\x20tree\x20parameters:',_0x58058f),{'commands':[]};}}async['executeWithParameters'](_0x16bfcf,_0x1d107c){const _0x246078=a0_0x52b9a3;this['logger'][_0x246078(0xe8)](_0x246078(0xd1),_0x16bfcf);const _0x38d689=[];if(!_0x16bfcf['commands']||_0x16bfcf['commands'][_0x246078(0xc1)]===0x0)throw new Error(_0x246078(0xd2));for(const _0x1f9303 of _0x16bfcf['commands']){try{switch(_0x1f9303[_0x246078(0xdc)]){case _0x246078(0xf6):_0x38d689['push'](await this[_0x246078(0xc2)](_0x1f9303[_0x246078(0xdf)],_0x1f9303[_0x246078(0xce)],_0x1f9303[_0x246078(0xc7)],_0x1f9303['ignoreExts'],_0x1f9303[_0x246078(0xd7)],_0x1f9303[_0x246078(0xb9)],_0x1d107c));break;default:throw new Error(_0x246078(0xcb)+_0x1f9303[_0x246078(0xdc)]);}}catch(_0x23da83){this['logger']['error'](_0x246078(0xf8)+_0x1f9303[_0x246078(0xdc)]+':',_0x23da83),_0x38d689[_0x246078(0xb6)]({'action':_0x1f9303[_0x246078(0xdc)],'success':![],'error':_0x23da83['message']});}}return{'results':_0x38d689};}async['generateTree'](_0xd47c34,_0x1038d6,_0x48cfad,_0x95da09,_0x2779d3,_0x16cb71,_0x5bf56b){const _0xd92c7a=a0_0x52b9a3;this[_0xd92c7a(0xef)][_0xd92c7a(0xe8)]('Generating\x20file\x20tree\x20for:\x20'+_0xd47c34);const _0x4390c8=this['resolvePath'](_0xd47c34,_0x5bf56b),_0x27f886=[...this[_0xd92c7a(0xbb)],..._0x48cfad][_0xd92c7a(0xc9)](Boolean),_0x301704=[...this[_0xd92c7a(0xcc)],..._0x95da09]['filter'](Boolean),_0x5cea42=await this['buildTree'](_0x4390c8,_0x4390c8,0x0,_0x1038d6,_0x27f886,_0x301704,_0x2779d3,_0x16cb71),_0x65f985=this['formatTree'](_0x5cea42);return{'action':_0xd92c7a(0xf6),'path':_0xd47c34,'resolvedPath':_0x4390c8,'tree':_0x65f985,'success':!![]};}async[a0_0x52b9a3(0xdd)](_0x5b0ef1,_0x48827e,_0x3d43ae,_0x20c76a,_0x5596e6,_0x5a9c14,_0x5a30f7,_0x14bedd){const _0xbbb20f=a0_0x52b9a3;if(_0x3d43ae>_0x20c76a)return null;try{const _0x356de2=await a0_0x3f8b65['readdir'](_0x48827e,{'withFileTypes':!![]}),_0x239705={'name':a0_0x1a31e4[_0xbbb20f(0xe9)](_0x48827e),'path':a0_0x1a31e4['relative'](_0x5b0ef1,_0x48827e),'type':'directory','children':[]};for(const _0x17cd6c of _0x356de2){const _0x4862ef=a0_0x1a31e4['join'](_0x48827e,_0x17cd6c['name']),_0x54c0ba=a0_0x1a31e4['relative'](_0x5b0ef1,_0x4862ef);if(_0x17cd6c[_0xbbb20f(0xba)]()){if(_0x5596e6['some'](_0x42fda5=>_0x17cd6c['name']===_0x42fda5||_0x54c0ba['split'](a0_0x1a31e4['sep'])[_0xbbb20f(0xe1)](_0x42fda5)))continue;const _0x3d2b84=await this['buildTree'](_0x5b0ef1,_0x4862ef,_0x3d43ae+0x1,_0x20c76a,_0x5596e6,_0x5a9c14,_0x5a30f7,_0x14bedd);_0x3d2b84&&(_0x3d2b84['children'][_0xbbb20f(0xc1)]>0x0||_0x3d43ae===0x0)&&_0x239705['children']['push'](_0x3d2b84);}else{if(_0x17cd6c[_0xbbb20f(0xcf)]()&&_0x5a30f7){const _0x41d337=a0_0x1a31e4['extname'](_0x17cd6c['name']);if(_0x5a9c14['includes'](_0x41d337))continue;if(_0x14bedd&&_0x14bedd['length']>0x0){const _0x4630ca=_0x14bedd['some'](_0x451fbe=>{return _0x451fbe['startsWith']('*.')?_0x17cd6c['name']['endsWith'](_0x451fbe['substring'](0x1)):_0x17cd6c['name']['includes'](_0x451fbe['replace']('*',''));});if(!_0x4630ca)continue;}_0x239705[_0xbbb20f(0xe2)]['push']({'name':_0x17cd6c['name'],'path':_0x54c0ba,'type':_0xbbb20f(0xe4),'ext':_0x41d337});}}}return _0x239705['children'][_0xbbb20f(0xbe)]((_0x19136d,_0x3ceee9)=>{const _0x2a92a1=_0xbbb20f;if(_0x19136d['type']===_0x3ceee9[_0x2a92a1(0xf2)])return _0x19136d[_0x2a92a1(0xf3)][_0x2a92a1(0xf9)](_0x3ceee9[_0x2a92a1(0xf3)]);return _0x19136d['type']===_0x2a92a1(0xbc)?-0x1:0x1;}),_0x239705;}catch(_0x32e399){return this['logger'][_0xbbb20f(0xd5)](_0xbbb20f(0xf4)+_0x48827e+':',_0x32e399),{'name':a0_0x1a31e4[_0xbbb20f(0xe9)](_0x48827e),'path':a0_0x1a31e4['relative'](_0x5b0ef1,_0x48827e),'type':_0xbbb20f(0xbc),'error':_0x32e399[_0xbbb20f(0xda)],'children':[]};}}['formatTree'](_0x47e6e1,_0x40cc84='',_0x2abcbc=!![]){const _0x44b75a=a0_0x52b9a3;if(!_0x47e6e1)return'';const _0x461e1f=_0x44b75a(0xc0),_0x43be98=_0x44b75a(0xc4),_0x25f105='â”‚\x20\x20\x20',_0x25a8e8='\x20\x20\x20\x20';let _0x95e10e=''+_0x40cc84+(_0x2abcbc?_0x43be98:_0x461e1f)+_0x47e6e1[_0x44b75a(0xf3)]+'\x0a';if(_0x47e6e1['children']&&_0x47e6e1['children']['length']>0x0){const _0x1ef680=_0x40cc84+(_0x2abcbc?_0x25a8e8:_0x25f105);_0x47e6e1['children']['forEach']((_0x359172,_0x461160)=>{const _0x21a8ef=_0x44b75a,_0x3f4434=_0x461160===_0x47e6e1['children'][_0x21a8ef(0xc1)]-0x1;_0x95e10e+=this[_0x21a8ef(0xf1)](_0x359172,_0x1ef680,_0x3f4434);});}return _0x95e10e;}['resolvePath'](_0x25c0e9,_0x459778){const _0x1d1403=a0_0x52b9a3;if(a0_0x1a31e4[_0x1d1403(0xe3)](_0x25c0e9))return _0x25c0e9;return a0_0x1a31e4[_0x1d1403(0xe7)](_0x459778,_0x25c0e9);}}