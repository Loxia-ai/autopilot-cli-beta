const a0_0x5d7a96=a0_0x3d87;(function(_0x40d6db,_0x1e1a6a){const _0x1ed3aa=a0_0x3d87,_0x53d5e7=_0x40d6db();while(!![]){try{const _0x1c2ffe=parseInt(_0x1ed3aa(0x15b))/0x1*(-parseInt(_0x1ed3aa(0x144))/0x2)+-parseInt(_0x1ed3aa(0x163))/0x3+parseInt(_0x1ed3aa(0x136))/0x4*(parseInt(_0x1ed3aa(0x167))/0x5)+-parseInt(_0x1ed3aa(0x155))/0x6*(parseInt(_0x1ed3aa(0x139))/0x7)+parseInt(_0x1ed3aa(0x153))/0x8+parseInt(_0x1ed3aa(0x14e))/0x9+parseInt(_0x1ed3aa(0x166))/0xa*(parseInt(_0x1ed3aa(0x16c))/0xb);if(_0x1c2ffe===_0x1e1a6a)break;else _0x53d5e7['push'](_0x53d5e7['shift']());}catch(_0x47fc20){_0x53d5e7['push'](_0x53d5e7['shift']());}}}(a0_0x280b,0xb6fc6));import{promises as a0_0x18a882}from'fs';function a0_0x3d87(_0x11c0fe,_0x167b25){const _0x280bfb=a0_0x280b();return a0_0x3d87=function(_0x3d8711,_0x251366){_0x3d8711=_0x3d8711-0x133;let _0x5df2a4=_0x280bfb[_0x3d8711];if(a0_0x3d87['OlaRfD']===undefined){var _0x4df20e=function(_0x18a882){const _0x434bdc='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1d9bd0='',_0x3f8492='';for(let _0x3f2281=0x0,_0x266012,_0x411be2,_0x2a0640=0x0;_0x411be2=_0x18a882['charAt'](_0x2a0640++);~_0x411be2&&(_0x266012=_0x3f2281%0x4?_0x266012*0x40+_0x411be2:_0x411be2,_0x3f2281++%0x4)?_0x1d9bd0+=String['fromCharCode'](0xff&_0x266012>>(-0x2*_0x3f2281&0x6)):0x0){_0x411be2=_0x434bdc['indexOf'](_0x411be2);}for(let _0x25fa4f=0x0,_0x518594=_0x1d9bd0['length'];_0x25fa4f<_0x518594;_0x25fa4f++){_0x3f8492+='%'+('00'+_0x1d9bd0['charCodeAt'](_0x25fa4f)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3f8492);};a0_0x3d87['XRszdr']=_0x4df20e,_0x11c0fe=arguments,a0_0x3d87['OlaRfD']=!![];}const _0x25ae3f=_0x280bfb[0x0],_0x530241=_0x3d8711+_0x25ae3f,_0x34dd4b=_0x11c0fe[_0x530241];return!_0x34dd4b?(_0x5df2a4=a0_0x3d87['XRszdr'](_0x5df2a4),_0x11c0fe[_0x530241]=_0x5df2a4):_0x5df2a4=_0x34dd4b,_0x5df2a4;},a0_0x3d87(_0x11c0fe,_0x167b25);}import a0_0x434bdc from'path';function a0_0x280b(){const _0x5396a1=['BgvUz3rO','CMvZB2X2zvbHDgG','C29Tzq','y2HPBgrYzw4','DhLWzq','z2vUzxjHDgvuCMvL','mtyWnJiWA2DQrgj0','Aw5JBhvKzxm','Aw5MBW','CMvZB2X2zq','zxH0BMfTzq','zgLZDa','zM9YBwf0vhjLzq','C2HVD0zPBgvZ','y29TBwfUzhm','rxjYB3iGyNvPBgrPBMCGDhjLzsbMB3iG','mti3nZmXnJLjqNzgzuO','CxvLCNK','BMfTzq','lMvUDG','CMvWBgfJzq','ndK3ode2mevLAKD2Bq','yxr0CMLIDxrLCW','ota3mJC4tNfyANfo','ywn0Aw9U','zgvMyxvSDeLNBM9Yzuv4Dhm','Bwf4lwrLChrO','Bg9Nz2vY','Cgf0DgvYBG','mK9IwKH1rG','z2vUzxjHDguTDhjLzq','lNrTCa','CgfYC2vqyxjHBwv0zxjZ','lMDPDa','yM93zxjFy29TCg9Uzw50CW','AxnbyNnVBhv0zq','lMLKzwe','mZC2mdi4n1vHtKrKrW','ChvZAa','lM1HCa','mJi5nJK1mfrWDKPzyW','nZKZodGWBfv1BujW','AwDUB3jLrxH0CW','lM1PBI5QCW','ugfYC2LUzYbMAwXLihrYzwuGCgfYyw1LDgvYCYb3AxrOifrHz1bHCNnLCG','lMXVzW','mZnMCxrZt2K','zgvMyxvSDeLNBM9YzurPCNm','zMLSDgvY','lMnHy2HL','lNzZy29Kzq','Bwf4rgvWDgG','AwDUB3jLlwrPCNm','C3bSAxq','C3rHCNrZv2L0Aa','AwDUB3jLlwv4Dhm','lMXVEgLHx3n0yxrL','4Psu4Psa4Psaia','rxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5KihDPDgGGCgfYyw1LDgvYCZO','zxjYB3i','mJb6B25fwfi','tM8GzMLSzsb0CMvLignVBw1HBMrZihnWzwnPzMLLza','zMLSzq','nJnMt0vXwfu','yNvPBgruCMvL','zgLYzwn0B3j5','AwDUB3jLrgLYCW','BwvZC2fNzq'];a0_0x280b=function(){return _0x5396a1;};return a0_0x280b();}import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class FileTreeTool extends BaseTool{constructor(_0x1d9bd0,_0x3f8492){const _0x41d1f2=a0_0x3d87;super(_0x1d9bd0,_0x3f8492),this[_0x41d1f2(0x16d)]=[_0x41d1f2(0x176),'node_modules',_0x41d1f2(0x15f),_0x41d1f2(0x149),'build','coverage','.next','.nuxt',_0x41d1f2(0x16f),'vendor',_0x41d1f2(0x160),_0x41d1f2(0x170),_0x41d1f2(0x162),'__pycache__','venv','env',_0x41d1f2(0x151)],this[_0x41d1f2(0x157)]=[_0x41d1f2(0x165),_0x41d1f2(0x169),'.min.css',_0x41d1f2(0x16b),_0x41d1f2(0x15d),'.temp'];}['getDescription'](){return'\x0aFile\x20Tree\x20Tool:\x20Generates\x20a\x20hierarchical\x20tree\x20representation\x20of\x20your\x20project\x27s\x20file\x20structure.\x0a\x0aUsage:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20\x0a\x20\x20dir=\x22path/to/directory\x22\x20\x0a\x20\x20max-depth=\x223\x22\x20\x0a\x20\x20ignore-dirs=\x22node_modules,dist,.git\x22\x20\x0a\x20\x20ignore-exts=\x22.map,.min.js\x22\x20\x0a\x20\x20show-files=\x22true\x22\x20\x0a\x20\x20pattern=\x22*.js,*.ts\x22\x0a/]\x0a[/tool]\x0a\x0aParameters:\x0a-\x20dir:\x20Directory\x20to\x20scan\x20(defaults\x20to\x20project\x20root)\x0a-\x20max-depth:\x20Maximum\x20depth\x20to\x20scan\x20(defaults\x20to\x203)\x0a-\x20ignore-dirs:\x20Comma-separated\x20list\x20of\x20directories\x20to\x20ignore\x0a-\x20ignore-exts:\x20Comma-separated\x20list\x20of\x20file\x20extensions\x20to\x20ignore\x0a-\x20show-files:\x20Whether\x20to\x20show\x20files\x20(defaults\x20to\x20true)\x0a-\x20pattern:\x20Optional\x20glob\x20pattern\x20to\x20filter\x20files\x20(e.g.,\x20\x22*.js,*.ts\x22)\x0a\x0aExamples:\x0a1.\x20Generate\x20a\x20basic\x20tree\x20of\x20the\x20project:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20/]\x0a[/tool]\x0a\x0a2.\x20Generate\x20a\x20detailed\x20tree\x20with\x20custom\x20options:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20\x0a\x20\x20dir=\x22src\x22\x20\x0a\x20\x20max-depth=\x224\x22\x20\x0a\x20\x20ignore-dirs=\x22tests,fixtures\x22\x20\x0a\x20\x20show-files=\x22true\x22\x20\x0a\x20\x20pattern=\x22*.js,*.jsx\x22\x0a/]\x0a[/tool]\x0a\x0aThe\x20tool\x20automatically\x20ignores\x20common\x20dependency\x20and\x20build\x20directories\x20like\x20node_modules,\x20.git,\x20dist,\x20etc.\x0a\x20\x20\x20\x20';}[a0_0x5d7a96(0x15e)](_0x3f2281){const _0x4c4466=a0_0x5d7a96;this['logger'][_0x4c4466(0x146)](_0x4c4466(0x16a));const _0x266012={'commands':[]};try{const _0x411be2=TagParser[_0x4c4466(0x14f)](_0x3f2281,_0x4c4466(0x15c));for(const _0x2a0640 of _0x411be2){_0x266012[_0x4c4466(0x14c)]['push']({'action':_0x4c4466(0x15c),'dir':_0x2a0640['attributes']['dir']||'.','maxDepth':parseInt(_0x2a0640['attributes'][_0x4c4466(0x158)]||'3',0xa),'ignoreDirs':(_0x2a0640['attributes'][_0x4c4466(0x172)]||'')['split'](',')[_0x4c4466(0x16e)](Boolean),'ignoreExts':(_0x2a0640[_0x4c4466(0x154)][_0x4c4466(0x175)]||'')['split'](',')['filter'](Boolean),'showFiles':_0x2a0640['attributes']['show-files']!=='false','pattern':(_0x2a0640[_0x4c4466(0x154)][_0x4c4466(0x15a)]||'')[_0x4c4466(0x173)](',')[_0x4c4466(0x16e)](Boolean)});}return _0x266012;}catch(_0x25fa4f){return this[_0x4c4466(0x159)]['error']('Error\x20parsing\x20file\x20tree\x20parameters:',_0x25fa4f),{'commands':[]};}}async['executeWithParameters'](_0x518594,_0x2eda6d){const _0x53e823=a0_0x5d7a96;this[_0x53e823(0x159)]['info'](_0x53e823(0x134),_0x518594);const _0x449659=[];if(!_0x518594['commands']||_0x518594[_0x53e823(0x14c)][_0x53e823(0x13e)]===0x0)throw new Error(_0x53e823(0x137));for(const _0x483cdc of _0x518594['commands']){try{switch(_0x483cdc[_0x53e823(0x156)]){case'generate-tree':_0x449659['push'](await this['generateTree'](_0x483cdc['dir'],_0x483cdc[_0x53e823(0x171)],_0x483cdc[_0x53e823(0x13c)],_0x483cdc[_0x53e823(0x168)],_0x483cdc[_0x53e823(0x14b)],_0x483cdc['pattern'],_0x2eda6d));break;default:throw new Error('Unknown\x20file\x20tree\x20command:\x20'+_0x483cdc['action']);}}catch(_0x237e7b){this[_0x53e823(0x159)][_0x53e823(0x135)]('Error\x20executing\x20file\x20tree\x20command\x20'+_0x483cdc[_0x53e823(0x156)]+':',_0x237e7b),_0x449659[_0x53e823(0x164)]({'action':_0x483cdc[_0x53e823(0x156)],'success':![],'error':_0x237e7b['message']});}}return{'results':_0x449659};}async[a0_0x5d7a96(0x143)](_0x22c6d5,_0x3961e8,_0x57cb3e,_0x3304e0,_0x55cb74,_0x157168,_0x30ef68){const _0x184e85=a0_0x5d7a96;this['logger'][_0x184e85(0x146)]('Generating\x20file\x20tree\x20for:\x20'+_0x22c6d5);const _0x1692c1=this[_0x184e85(0x13f)](_0x22c6d5,_0x30ef68),_0x57d16f=[...this[_0x184e85(0x16d)],..._0x57cb3e][_0x184e85(0x16e)](Boolean),_0xb6933b=[...this['defaultIgnoreExts'],..._0x3304e0]['filter'](Boolean),_0x49c968=await this[_0x184e85(0x13a)](_0x1692c1,_0x1692c1,0x0,_0x3961e8,_0x57d16f,_0xb6933b,_0x55cb74,_0x157168),_0x540f55=this[_0x184e85(0x14a)](_0x49c968);return{'action':_0x184e85(0x15c),'path':_0x22c6d5,'resolvedPath':_0x1692c1,'tree':_0x540f55,'success':!![]};}async['buildTree'](_0x31aa98,_0x2a52e3,_0x2af4e0,_0x45019d,_0x4eb8ef,_0x430cc1,_0x5324d8,_0x562d20){const _0x3c0bb7=a0_0x5d7a96;if(_0x2af4e0>_0x45019d)return null;try{const _0x4fc6d6=await a0_0x18a882['readdir'](_0x2a52e3,{'withFileTypes':!![]}),_0x4c52a2={'name':a0_0x434bdc['basename'](_0x2a52e3),'path':a0_0x434bdc['relative'](_0x31aa98,_0x2a52e3),'type':'directory','children':[]};for(const _0x315e2c of _0x4fc6d6){const _0x2d4878=a0_0x434bdc['join'](_0x2a52e3,_0x315e2c[_0x3c0bb7(0x150)]),_0x14b6e9=a0_0x434bdc['relative'](_0x31aa98,_0x2d4878);if(_0x315e2c['isDirectory']()){if(_0x4eb8ef[_0x3c0bb7(0x140)](_0x20f9fd=>_0x315e2c[_0x3c0bb7(0x150)]===_0x20f9fd||_0x14b6e9['split'](a0_0x434bdc['sep'])[_0x3c0bb7(0x145)](_0x20f9fd)))continue;const _0x16ec16=await this[_0x3c0bb7(0x13a)](_0x31aa98,_0x2d4878,_0x2af4e0+0x1,_0x45019d,_0x4eb8ef,_0x430cc1,_0x5324d8,_0x562d20);_0x16ec16&&(_0x16ec16['children']['length']>0x0||_0x2af4e0===0x0)&&_0x4c52a2[_0x3c0bb7(0x141)]['push'](_0x16ec16);}else{if(_0x315e2c['isFile']()&&_0x5324d8){const _0x2b3712=a0_0x434bdc[_0x3c0bb7(0x148)](_0x315e2c[_0x3c0bb7(0x150)]);if(_0x430cc1[_0x3c0bb7(0x145)](_0x2b3712))continue;if(_0x562d20&&_0x562d20['length']>0x0){const _0x224b2b=_0x562d20['some'](_0x39f222=>{const _0x36afd3=_0x3c0bb7;return _0x39f222[_0x36afd3(0x174)]('*.')?_0x315e2c['name']['endsWith'](_0x39f222['substring'](0x1)):_0x315e2c['name']['includes'](_0x39f222[_0x36afd3(0x152)]('*',''));});if(!_0x224b2b)continue;}_0x4c52a2['children']['push']({'name':_0x315e2c[_0x3c0bb7(0x150)],'path':_0x14b6e9,'type':_0x3c0bb7(0x138),'ext':_0x2b3712});}}}return _0x4c52a2[_0x3c0bb7(0x141)]['sort']((_0x27f402,_0x596ee5)=>{const _0x1f200f=_0x3c0bb7;if(_0x27f402[_0x1f200f(0x142)]===_0x596ee5['type'])return _0x27f402[_0x1f200f(0x150)]['localeCompare'](_0x596ee5['name']);return _0x27f402['type']===_0x1f200f(0x13b)?-0x1:0x1;}),_0x4c52a2;}catch(_0x5be840){return this['logger'][_0x3c0bb7(0x135)](_0x3c0bb7(0x14d)+_0x2a52e3+':',_0x5be840),{'name':a0_0x434bdc['basename'](_0x2a52e3),'path':a0_0x434bdc['relative'](_0x31aa98,_0x2a52e3),'type':_0x3c0bb7(0x13b),'error':_0x5be840[_0x3c0bb7(0x13d)],'children':[]};}}['formatTree'](_0x8ccb8e,_0x10e1a2='',_0x4b4d68=!![]){const _0xed9344=a0_0x5d7a96;if(!_0x8ccb8e)return'';const _0x514cea='├──\x20',_0x38ee48=_0xed9344(0x133),_0x4d2042='│\x20\x20\x20',_0x422ae3='\x20\x20\x20\x20';let _0x45b1dc=''+_0x10e1a2+(_0x4b4d68?_0x38ee48:_0x514cea)+_0x8ccb8e['name']+'\x0a';if(_0x8ccb8e['children']&&_0x8ccb8e[_0xed9344(0x141)][_0xed9344(0x13e)]>0x0){const _0x2d9743=_0x10e1a2+(_0x4b4d68?_0x422ae3:_0x4d2042);_0x8ccb8e[_0xed9344(0x141)]['forEach']((_0x5a859b,_0x36af3a)=>{const _0x1f0006=_0xed9344,_0x2a7a05=_0x36af3a===_0x8ccb8e['children']['length']-0x1;_0x45b1dc+=this[_0x1f0006(0x14a)](_0x5a859b,_0x2d9743,_0x2a7a05);});}return _0x45b1dc;}['resolvePath'](_0x5cc032,_0x227a58){const _0x2f080b=a0_0x5d7a96;if(a0_0x434bdc[_0x2f080b(0x161)](_0x5cc032))return _0x5cc032;return a0_0x434bdc[_0x2f080b(0x147)](_0x227a58,_0x5cc032);}}