function a0_0x7134(_0x44c7d4,_0x311936){const _0x89d1a6=a0_0x89d1();return a0_0x7134=function(_0x713469,_0x570541){_0x713469=_0x713469-0x14f;let _0x42f6c1=_0x89d1a6[_0x713469];if(a0_0x7134['BvLyoR']===undefined){var _0x3e76a6=function(_0x517602){const _0x4f52a1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x1b5d08='',_0x11aa26='';for(let _0x373936=0x0,_0x254d47,_0x1990ef,_0x9efee4=0x0;_0x1990ef=_0x517602['charAt'](_0x9efee4++);~_0x1990ef&&(_0x254d47=_0x373936%0x4?_0x254d47*0x40+_0x1990ef:_0x1990ef,_0x373936++%0x4)?_0x1b5d08+=String['fromCharCode'](0xff&_0x254d47>>(-0x2*_0x373936&0x6)):0x0){_0x1990ef=_0x4f52a1['indexOf'](_0x1990ef);}for(let _0x319e24=0x0,_0x4a3d7c=_0x1b5d08['length'];_0x319e24<_0x4a3d7c;_0x319e24++){_0x11aa26+='%'+('00'+_0x1b5d08['charCodeAt'](_0x319e24)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x11aa26);};a0_0x7134['QAeymI']=_0x3e76a6,_0x44c7d4=arguments,a0_0x7134['BvLyoR']=!![];}const _0xd3ec1=_0x89d1a6[0x0],_0xdb94f8=_0x713469+_0xd3ec1,_0x28e143=_0x44c7d4[_0xdb94f8];return!_0x28e143?(_0x42f6c1=a0_0x7134['QAeymI'](_0x42f6c1),_0x44c7d4[_0xdb94f8]=_0x42f6c1):_0x42f6c1=_0x28e143,_0x42f6c1;},a0_0x7134(_0x44c7d4,_0x311936);}const a0_0x2d997b=a0_0x7134;(function(_0x4f7ea2,_0x499a66){const _0x3db9de=a0_0x7134,_0x1f84ef=_0x4f7ea2();while(!![]){try{const _0xa91d51=parseInt(_0x3db9de(0x156))/0x1*(parseInt(_0x3db9de(0x14f))/0x2)+parseInt(_0x3db9de(0x158))/0x3*(-parseInt(_0x3db9de(0x177))/0x4)+parseInt(_0x3db9de(0x16d))/0x5+parseInt(_0x3db9de(0x173))/0x6*(-parseInt(_0x3db9de(0x18b))/0x7)+parseInt(_0x3db9de(0x182))/0x8+parseInt(_0x3db9de(0x179))/0x9+-parseInt(_0x3db9de(0x189))/0xa;if(_0xa91d51===_0x499a66)break;else _0x1f84ef['push'](_0x1f84ef['shift']());}catch(_0x3ba84d){_0x1f84ef['push'](_0x1f84ef['shift']());}}}(a0_0x89d1,0xec42a));import{promises as a0_0x517602}from'fs';function a0_0x89d1(){const _0x4c6cc1=['otm2nMPuuvviBa','AxngAwXL','C3bSAxq','z2vUzxjHDguTDhjLzq','mJeYELfyq2Xg','CgfYC2vqyxjHBwv0zxjZ','mtKYmty5ogTWBwroBa','lMXVzW','yMfZzw5HBwu','zxjYB3i','z2v0rgvZy3jPChrPB24','AxnbyNnVBhv0zq','rxjYB3iGCgfYC2LUzYbMAwXLihrYzwuGCgfYyw1LDgvYCZO','yxr0CMLIDxrLCW','CMvHzgrPCG','mtqZnZG0ofPWBvjXwq','Bg9JywXLq29TCgfYzq','zgLYzwn0B3j5','ugfYC2LUzYbMAwXLihrYzwuGCgfYyw1LDgvYCYb3AxrOifrHz1bHCNnLCG','4PscicaG','zMLSDgvY','zgvMyxvSDeLNBM9Yzuv4Dhm','nJy4mdmWmgvnDvznEa','cKzPBguGvhjLzsbuB29SoIbhzw5LCMf0zxmGysbOAwvYyxjJAgLJywWGDhjLzsbYzxbYzxnLBNrHDgLVBIbVzIb5B3vYihbYB2PLy3qNCYbMAwXLihn0CNvJDhvYzs4kcLvZywDLoGPBDg9VBcbPzd0IzMLSzs10CMvLiL0kw2DLBMvYyxrLlxrYzwuGcIaGzgLYpsjWyxrOl3rVl2rPCMvJDg9YEsiGcIaGBwf4lwrLChrOpsiZiIakicbPz25VCMuTzgLYCZ0IBM9Kzv9TB2r1BgvZlgrPC3qSlMDPDciGcIaGAwDUB3jLlwv4Dhm9iI5TyxaSlM1PBI5QCYiGcIaGC2HVDY1MAwXLCZ0IDhj1zsiGcIaGCgf0DgvYBJ0IkI5QCYWQlNrZiGOVxqPBl3rVB2XDcGPqyxjHBwv0zxjZoGOTigrPCJOGrgLYzwn0B3j5ihrVihnJyw4GkgrLzMf1BhrZihrVihbYB2PLy3qGCM9VDcKklsbTyxGTzgvWDgG6ie1HEgLTDw0GzgvWDgGGDg8GC2nHBIaOzgvMyxvSDhmGDg8GmYKklsbPz25VCMuTzgLYCZOGq29TBweTC2vWyxjHDgvKigXPC3qGB2yGzgLYzwn0B3jPzxmGDg8GAwDUB3jLcI0GAwDUB3jLlwv4Dhm6ienVBw1HlxnLCgfYyxrLzcbSAxn0ig9MigzPBguGzxH0zw5ZAw9UCYb0BYbPz25VCMuklsbZAg93lwzPBgvZoIbxAgv0AgvYihrVihnOB3CGzMLSzxmGkgrLzMf1BhrZihrVihrYDwuPcI0GCgf0DgvYBJOGt3b0Aw9UywWGz2XVyIbWyxr0zxjUihrVigzPBhrLCIbMAwXLCYaOzs5NlIWGiIOUANmSkI50CYiPcGPfEgfTCgXLCZOkms4Gr2vUzxjHDguGysbIyxnPyYb0CMvLig9MihrOzsbWCM9Qzwn0oGPBDg9VBcbPzd0IzMLSzs10CMvLiL0kw2DLBMvYyxrLlxrYzwuGl10kwY90B29SxqOkmI4Gr2vUzxjHDguGysbKzxrHAwXLzcb0CMvLihDPDgGGy3vZDg9Tig9WDgLVBNm6cLT0B29SigLKpsjMAwXLlxrYzwuIxqPBz2vUzxjHDguTDhjLzsakicbKAxi9iNnYyYiGcIaGBwf4lwrLChrOpsi0iIakicbPz25VCMuTzgLYCZ0IDgvZDhmSzML4DhvYzxmIiaOGihnOB3CTzMLSzxm9iNrYDwuIiaOGihbHDhrLCM49iIOUANmSkI5QC3GIcI9DcLSVDg9VBf0kcLrOzsb0B29Sigf1Dg9TyxrPy2fSBhKGAwDUB3jLCYbJB21TB24GzgvWzw5Kzw5JEsbHBMqGyNvPBgqGzgLYzwn0B3jPzxmGBgLRzsbUB2rLx21VzhvSzxmSic5NAxqSigrPC3qSigv0yY4kicaGia','mtiYnxjbCvLmyW','C2HVD0zPBgvZ','Aw5JBhvKzxm','BgvUz3rO','mMTIwxfgAG','CxvLCNK','AwDUB3jLrgLYCW','lM51Ehq','lNzZy29Kzq','lM1PBI5JC3m','4Psu4Psa4Psaia','mZuWotq3vu5QswTq','BwvZC2fNzq','mteWmwn0AMXbrW','CMvWBgfJzq','lM1HCa','C3vIC3rYAw5N','DhLWzq','lNrTCa','zgLY','z2vUzxjHDgvuCMvL','CMvZB2X2zvbHDgG','Cgf0DgvYBG','C29YDa','y2HPBgrYzw4','zw52','zxH0BMfTzq','rxjYB3iGzxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5Kia','AM9PBG','zw5KC1DPDgG','lMnHy2HL','lMLKzwe','BMfTzq','zM9YBwf0vhjLzq','ntKYmdG5mgDPD0fwAG','ChvZAa','lMDPDa','Bg9Nz2vY','yNvPBgruCMvL','zMLSzq'];a0_0x89d1=function(){return _0x4c6cc1;};return a0_0x89d1();}import a0_0x4f52a1 from'path';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class FileTreeTool extends BaseTool{constructor(_0x1b5d08,_0x11aa26){const _0x169b33=a0_0x7134;super(_0x1b5d08,_0x11aa26),this['defaultIgnoreDirs']=['.loxia_state','node_modules',_0x169b33(0x16f),'dist','build','coverage','.next',_0x169b33(0x152),_0x169b33(0x169),'vendor','bower_components',_0x169b33(0x153),_0x169b33(0x16a),'__pycache__','venv',_0x169b33(0x164),'.env'],this[_0x169b33(0x188)]=[_0x169b33(0x15a),'.min.js',_0x169b33(0x154),_0x169b33(0x17a),_0x169b33(0x15d),'.temp'];}[a0_0x2d997b(0x17d)](){const _0x5de448=a0_0x2d997b;return _0x5de448(0x18a);}[a0_0x2d997b(0x178)](_0x373936){const _0x21940e=a0_0x2d997b;this['logger']['info'](_0x21940e(0x185));const _0x254d47={'commands':[]};try{const _0x1990ef=TagParser[_0x21940e(0x150)](_0x373936,'generate-tree');for(const _0x9efee4 of _0x1990ef){_0x254d47['commands']['push']({'action':'generate-tree','dir':_0x9efee4['attributes'][_0x21940e(0x15e)]||'.','maxDepth':parseInt(_0x9efee4['attributes']['max-depth']||'3',0xa),'ignoreDirs':(_0x9efee4[_0x21940e(0x180)]['ignore-dirs']||'')['split'](',')['filter'](Boolean),'ignoreExts':(_0x9efee4[_0x21940e(0x180)]['ignore-exts']||'')[_0x21940e(0x175)](',')[_0x21940e(0x187)](Boolean),'showFiles':_0x9efee4['attributes']['show-files']!=='false','pattern':(_0x9efee4[_0x21940e(0x180)][_0x21940e(0x161)]||'')['split'](',')['filter'](Boolean)});}return _0x254d47;}catch(_0x319e24){return this[_0x21940e(0x170)][_0x21940e(0x17c)](_0x21940e(0x17f),_0x319e24),{'commands':[]};}}async['executeWithParameters'](_0x4a3d7c,_0x43e958){const _0x328308=a0_0x2d997b;this['logger']['info']('Executing\x20file\x20tree\x20command\x20with\x20parameters:',_0x4a3d7c);const _0x358202=[];if(!_0x4a3d7c['commands']||_0x4a3d7c['commands']['length']===0x0)throw new Error('No\x20file\x20tree\x20commands\x20specified');for(const _0x497c3b of _0x4a3d7c['commands']){try{switch(_0x497c3b['action']){case'generate-tree':_0x358202['push'](await this[_0x328308(0x15f)](_0x497c3b['dir'],_0x497c3b['maxDepth'],_0x497c3b[_0x328308(0x151)],_0x497c3b['ignoreExts'],_0x497c3b[_0x328308(0x18c)],_0x497c3b[_0x328308(0x161)],_0x43e958));break;default:throw new Error('Unknown\x20file\x20tree\x20command:\x20'+_0x497c3b['action']);}}catch(_0x2395ad){this['logger']['error'](_0x328308(0x166)+_0x497c3b['action']+':',_0x2395ad),_0x358202[_0x328308(0x16e)]({'action':_0x497c3b['action'],'success':![],'error':_0x2395ad['message']});}}return{'results':_0x358202};}async['generateTree'](_0x536d8c,_0x10d7ee,_0x270ac7,_0x5abdd7,_0x5b220a,_0x4d803e,_0x3ca381){const _0x383a6f=a0_0x2d997b;this[_0x383a6f(0x170)]['info']('Generating\x20file\x20tree\x20for:\x20'+_0x536d8c);const _0x4c5e4b=this[_0x383a6f(0x160)](_0x536d8c,_0x3ca381),_0x4375f2=[...this['defaultIgnoreDirs'],..._0x270ac7]['filter'](Boolean),_0x4b72ae=[...this['defaultIgnoreExts'],..._0x5abdd7][_0x383a6f(0x187)](Boolean),_0x11aad5=await this['buildTree'](_0x4c5e4b,_0x4c5e4b,0x0,_0x10d7ee,_0x4375f2,_0x4b72ae,_0x5b220a,_0x4d803e),_0x46ffb0=this[_0x383a6f(0x16c)](_0x11aad5);return{'action':_0x383a6f(0x176),'path':_0x536d8c,'resolvedPath':_0x4c5e4b,'tree':_0x46ffb0,'success':!![]};}async[a0_0x2d997b(0x171)](_0x4648c7,_0x204eca,_0x267740,_0x39aa03,_0x3325ba,_0x2fac17,_0x38ddf4,_0x1bc854){const _0x5bb571=a0_0x2d997b;if(_0x267740>_0x39aa03)return null;try{const _0x27267b=await a0_0x517602[_0x5bb571(0x181)](_0x204eca,{'withFileTypes':!![]}),_0x5896aa={'name':a0_0x4f52a1[_0x5bb571(0x17b)](_0x204eca),'path':a0_0x4f52a1['relative'](_0x4648c7,_0x204eca),'type':'directory','children':[]};for(const _0x219800 of _0x27267b){const _0x5d9dc6=a0_0x4f52a1[_0x5bb571(0x167)](_0x204eca,_0x219800[_0x5bb571(0x16b)]),_0x54998b=a0_0x4f52a1['relative'](_0x4648c7,_0x5d9dc6);if(_0x219800['isDirectory']()){if(_0x3325ba['some'](_0x52e7df=>_0x219800['name']===_0x52e7df||_0x54998b['split'](a0_0x4f52a1['sep'])['includes'](_0x52e7df)))continue;const _0x47725e=await this[_0x5bb571(0x171)](_0x4648c7,_0x5d9dc6,_0x267740+0x1,_0x39aa03,_0x3325ba,_0x2fac17,_0x38ddf4,_0x1bc854);_0x47725e&&(_0x47725e[_0x5bb571(0x163)]['length']>0x0||_0x267740===0x0)&&_0x5896aa['children'][_0x5bb571(0x16e)](_0x47725e);}else{if(_0x219800[_0x5bb571(0x174)]()&&_0x38ddf4){const _0x59cd56=a0_0x4f52a1[_0x5bb571(0x165)](_0x219800[_0x5bb571(0x16b)]);if(_0x2fac17[_0x5bb571(0x18d)](_0x59cd56))continue;if(_0x1bc854&&_0x1bc854[_0x5bb571(0x18e)]>0x0){const _0x45748c=_0x1bc854['some'](_0x4d8739=>{const _0x281bfb=_0x5bb571;return _0x4d8739['startsWith']('*.')?_0x219800['name'][_0x281bfb(0x168)](_0x4d8739[_0x281bfb(0x15b)](0x1)):_0x219800['name'][_0x281bfb(0x18d)](_0x4d8739[_0x281bfb(0x159)]('*',''));});if(!_0x45748c)continue;}_0x5896aa[_0x5bb571(0x163)]['push']({'name':_0x219800[_0x5bb571(0x16b)],'path':_0x54998b,'type':_0x5bb571(0x172),'ext':_0x59cd56});}}}return _0x5896aa['children'][_0x5bb571(0x162)]((_0xb2c5cb,_0x267f37)=>{const _0x57886a=_0x5bb571;if(_0xb2c5cb['type']===_0x267f37[_0x57886a(0x15c)])return _0xb2c5cb[_0x57886a(0x16b)][_0x57886a(0x183)](_0x267f37[_0x57886a(0x16b)]);return _0xb2c5cb[_0x57886a(0x15c)]==='directory'?-0x1:0x1;}),_0x5896aa;}catch(_0x42bde4){return this['logger'][_0x5bb571(0x17c)]('Error\x20building\x20tree\x20for\x20'+_0x204eca+':',_0x42bde4),{'name':a0_0x4f52a1['basename'](_0x204eca),'path':a0_0x4f52a1['relative'](_0x4648c7,_0x204eca),'type':_0x5bb571(0x184),'error':_0x42bde4[_0x5bb571(0x157)],'children':[]};}}['formatTree'](_0x64334,_0x2ff1f4='',_0x26caae=!![]){const _0x6ff601=a0_0x2d997b;if(!_0x64334)return'';const _0x1f6cb7='âââ\x20',_0x35f16e=_0x6ff601(0x155),_0x5c445d=_0x6ff601(0x186),_0x11afe7='\x20\x20\x20\x20';let _0x366b76=''+_0x2ff1f4+(_0x26caae?_0x35f16e:_0x1f6cb7)+_0x64334['name']+'\x0a';if(_0x64334[_0x6ff601(0x163)]&&_0x64334['children']['length']>0x0){const _0x5705de=_0x2ff1f4+(_0x26caae?_0x11afe7:_0x5c445d);_0x64334[_0x6ff601(0x163)]['forEach']((_0x2334e6,_0x32ef91)=>{const _0x285206=_0x6ff601,_0x455c77=_0x32ef91===_0x64334[_0x285206(0x163)]['length']-0x1;_0x366b76+=this['formatTree'](_0x2334e6,_0x5705de,_0x455c77);});}return _0x366b76;}['resolvePath'](_0x5bf026,_0x1f77c9){const _0x54c3bf=a0_0x2d997b;if(a0_0x4f52a1[_0x54c3bf(0x17e)](_0x5bf026))return _0x5bf026;return a0_0x4f52a1['resolve'](_0x1f77c9,_0x5bf026);}}