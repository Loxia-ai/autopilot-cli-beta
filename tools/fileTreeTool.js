const a0_0x7157c=a0_0x4fcc;function a0_0x2f05(){const _0x9d7081=['zgLYzwn0B3j5','mJq5otm2qM1rDhrV','lMnHy2HL','nta3mtLcz1rirKS','Bg9JywXLq29TCgfYzq','rxjYB3iGzxHLy3v0Aw5NigzPBguGDhjLzsbJB21Tyw5Kia','yxr0CMLIDxrLCW','BgvUz3rO','AM9PBG','C3bSAxq','x19WEwnHy2HLx18','C3vIC3rYAw5N','zw52','AxngAwXL','tM8GzMLSzsb0CMvLignVBw1HBMrZihnWzwnPzMLLza','icaGia','zMLSzq','C2HVDY1MAwXLCW','yM93zxjFy29TCg9Uzw50CW','C2vW','CxvLCNK','m1vQrMXztq','zgvMyxvSDeLNBM9YzurPCNm','ugfYC2LUzYbMAwXLihrYzwuGCgfYyw1LDgvYCYb3AxrOifrHz1bHCNnLCG','4PsC4Psa4Psaia','zxjYB3i','y2HPBgrYzw4','yNvPBgruCMvL','4PscicaG','nZy4mdmXnNH4sw5mrG','r2vUzxjHDgLUzYbMAwXLihrYzwuGzM9YoIa','BMfTzq','BwvZC2fNzq','AwDUB3jLlwrPCNm','vw5RBM93BIbMAwXLihrYzwuGy29TBwfUzdOG','y29TBwfUzhm','yMfZzw5HBwu','lM1PBI5QCW','C2HVD0zPBgvZ','ndK1Bu5yA2vX','Bg9Nz2vY','ChvZAa','Aw5MBW','zw5KC1DPDgG','C29Tzq','AwDUB3jLrxH0CW','oty1ndbZyM5Vy3O','CMvZB2X2zvbHDgG','mZCYowjtrM1qzq','lM1PBI5JC3m','zgvMyxvSDeLNBM9Yzuv4Dhm','zMfSC2u','zM9YBwf0vhjLzq','CMvSyxrPDMu','z2vUzxjHDguTDhjLzq','zxHLy3v0zvDPDgHqyxjHBwv0zxjZ','lM51Ehq','y292zxjHz2u','odCXndu2uLPiB2Lm','nJa3mJHfzfrjAKi','mte0mde4Eg92vgXh','Aw5JBhvKzxm','ywn0Aw9U','lNzZy29Kzq','zMLSDgvY','yNvPBgq','lMvUDG','BM9Kzv9TB2r1BgvZ','mte1D09AC0zh','lNrTCa'];a0_0x2f05=function(){return _0x9d7081;};return a0_0x2f05();}function a0_0x4fcc(_0x395510,_0x485409){const _0x2f05c2=a0_0x2f05();return a0_0x4fcc=function(_0x4fccf1,_0x23cdff){_0x4fccf1=_0x4fccf1-0x149;let _0x1e95fa=_0x2f05c2[_0x4fccf1];if(a0_0x4fcc['dCFDuK']===undefined){var _0x1c1586=function(_0xe1fca){const _0x1c2098='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x7b217c='',_0x475c91='';for(let _0x2d5012=0x0,_0x383ca6,_0x535726,_0xd45450=0x0;_0x535726=_0xe1fca['charAt'](_0xd45450++);~_0x535726&&(_0x383ca6=_0x2d5012%0x4?_0x383ca6*0x40+_0x535726:_0x535726,_0x2d5012++%0x4)?_0x7b217c+=String['fromCharCode'](0xff&_0x383ca6>>(-0x2*_0x2d5012&0x6)):0x0){_0x535726=_0x1c2098['indexOf'](_0x535726);}for(let _0x35c253=0x0,_0x21e8fc=_0x7b217c['length'];_0x35c253<_0x21e8fc;_0x35c253++){_0x475c91+='%'+('00'+_0x7b217c['charCodeAt'](_0x35c253)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x475c91);};a0_0x4fcc['DJBrFP']=_0x1c1586,_0x395510=arguments,a0_0x4fcc['dCFDuK']=!![];}const _0x154494=_0x2f05c2[0x0],_0x2fd5fc=_0x4fccf1+_0x154494,_0x130084=_0x395510[_0x2fd5fc];return!_0x130084?(_0x1e95fa=a0_0x4fcc['DJBrFP'](_0x1e95fa),_0x395510[_0x2fd5fc]=_0x1e95fa):_0x1e95fa=_0x130084,_0x1e95fa;},a0_0x4fcc(_0x395510,_0x485409);}(function(_0x21e650,_0xb0853b){const _0x43b67b=a0_0x4fcc,_0x1fade5=_0x21e650();while(!![]){try{const _0x13f63b=parseInt(_0x43b67b(0x16d))/0x1+-parseInt(_0x43b67b(0x160))/0x2+parseInt(_0x43b67b(0x17f))/0x3*(-parseInt(_0x43b67b(0x15e))/0x4)+parseInt(_0x43b67b(0x168))/0x5*(-parseInt(_0x43b67b(0x16b))/0x6)+-parseInt(_0x43b67b(0x187))/0x7+parseInt(_0x43b67b(0x15f))/0x8*(-parseInt(_0x43b67b(0x14b))/0x9)+-parseInt(_0x43b67b(0x152))/0xa*(-parseInt(_0x43b67b(0x154))/0xb);if(_0x13f63b===_0xb0853b)break;else _0x1fade5['push'](_0x1fade5['shift']());}catch(_0x518a74){_0x1fade5['push'](_0x1fade5['shift']());}}}(a0_0x2f05,0x8c91b));import{promises as a0_0xe1fca}from'fs';import a0_0x1c2098 from'path';import{TagParser}from'../utilities/tagParser.js';import{BaseTool}from'./baseTool.js';export class FileTreeTool extends BaseTool{constructor(_0x7b217c,_0x475c91){const _0x2e6ffb=a0_0x4fcc;super(_0x7b217c,_0x475c91),this[_0x2e6ffb(0x180)]=['.loxia_state',_0x2e6ffb(0x167),'.git','dist',_0x2e6ffb(0x165),_0x2e6ffb(0x15d),'.next',_0x2e6ffb(0x15c),_0x2e6ffb(0x16c),'vendor',_0x2e6ffb(0x17c),_0x2e6ffb(0x163),'.idea',_0x2e6ffb(0x174),'venv',_0x2e6ffb(0x176),_0x2e6ffb(0x166)],this[_0x2e6ffb(0x156)]=['.map',_0x2e6ffb(0x149),_0x2e6ffb(0x155),'.log',_0x2e6ffb(0x169),'.temp'];}['getDescription'](){return'\x0aFile\x20Tree\x20Tool:\x20Generates\x20a\x20hierarchical\x20tree\x20representation\x20of\x20your\x20project\x27s\x20file\x20structure.\x0a\x0aUsage:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20\x0a\x20\x20dir=\x22path/to/directory\x22\x20\x0a\x20\x20max-depth=\x223\x22\x20\x0a\x20\x20ignore-dirs=\x22node_modules,dist,.git\x22\x20\x0a\x20\x20ignore-exts=\x22.map,.min.js\x22\x20\x0a\x20\x20show-files=\x22true\x22\x20\x0a\x20\x20pattern=\x22*.js,*.ts\x22\x0a/]\x0a[/tool]\x0a\x0aParameters:\x0a-\x20dir:\x20Directory\x20to\x20scan\x20(defaults\x20to\x20project\x20root)\x0a-\x20max-depth:\x20Maximum\x20depth\x20to\x20scan\x20(defaults\x20to\x203)\x0a-\x20ignore-dirs:\x20Comma-separated\x20list\x20of\x20directories\x20to\x20ignore\x0a-\x20ignore-exts:\x20Comma-separated\x20list\x20of\x20file\x20extensions\x20to\x20ignore\x0a-\x20show-files:\x20Whether\x20to\x20show\x20files\x20(defaults\x20to\x20true)\x0a-\x20pattern:\x20Optional\x20glob\x20pattern\x20to\x20filter\x20files\x20(e.g.,\x20\x22*.js,*.ts\x22)\x0a\x0aExamples:\x0a1.\x20Generate\x20a\x20basic\x20tree\x20of\x20the\x20project:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20/]\x0a[/tool]\x0a\x0a2.\x20Generate\x20a\x20detailed\x20tree\x20with\x20custom\x20options:\x0a[tool\x20id=\x22file-tree\x22]\x0a[generate-tree\x20\x0a\x20\x20dir=\x22src\x22\x20\x0a\x20\x20max-depth=\x224\x22\x20\x0a\x20\x20ignore-dirs=\x22tests,fixtures\x22\x20\x0a\x20\x20show-files=\x22true\x22\x20\x0a\x20\x20pattern=\x22*.js,*.jsx\x22\x0a/]\x0a[/tool]\x0a\x0aThe\x20tool\x20automatically\x20ignores\x20common\x20dependency\x20and\x20build\x20directories\x20like\x20node_modules,\x20.git,\x20dist,\x20etc.\x0a\x20\x20\x20\x20';}['parseParameters'](_0x2d5012){const _0x59f780=a0_0x4fcc;this[_0x59f780(0x14c)][_0x59f780(0x14e)](_0x59f780(0x181));const _0x383ca6={'commands':[]};try{const _0x535726=TagParser[_0x59f780(0x17e)](_0x2d5012,_0x59f780(0x15a));for(const _0xd45450 of _0x535726){_0x383ca6['commands']['push']({'action':_0x59f780(0x15a),'dir':_0xd45450[_0x59f780(0x170)]['dir']||'.','maxDepth':parseInt(_0xd45450[_0x59f780(0x170)]['max-depth']||'3',0xa),'ignoreDirs':(_0xd45450['attributes'][_0x59f780(0x18b)]||'')['split'](',')[_0x59f780(0x164)](Boolean),'ignoreExts':(_0xd45450[_0x59f780(0x170)]['ignore-exts']||'')['split'](',')['filter'](Boolean),'showFiles':_0xd45450['attributes'][_0x59f780(0x17b)]!==_0x59f780(0x157),'pattern':(_0xd45450['attributes']['pattern']||'')[_0x59f780(0x173)](',')['filter'](Boolean)});}return _0x383ca6;}catch(_0x35c253){return this[_0x59f780(0x14c)][_0x59f780(0x183)]('Error\x20parsing\x20file\x20tree\x20parameters:',_0x35c253),{'commands':[]};}}async[a0_0x7157c(0x15b)](_0x21e8fc,_0x42a15f){const _0xc4b3df=a0_0x7157c;this['logger']['info']('Executing\x20file\x20tree\x20command\x20with\x20parameters:',_0x21e8fc);const _0x4a5253=[];if(!_0x21e8fc[_0xc4b3df(0x18d)]||_0x21e8fc['commands']['length']===0x0)throw new Error(_0xc4b3df(0x178));for(const _0x5c371f of _0x21e8fc['commands']){try{switch(_0x5c371f['action']){case _0xc4b3df(0x15a):_0x4a5253['push'](await this['generateTree'](_0x5c371f['dir'],_0x5c371f['maxDepth'],_0x5c371f['ignoreDirs'],_0x5c371f[_0xc4b3df(0x151)],_0x5c371f[_0xc4b3df(0x14a)],_0x5c371f['pattern'],_0x42a15f));break;default:throw new Error(_0xc4b3df(0x18c)+_0x5c371f[_0xc4b3df(0x162)]);}}catch(_0x18de95){this[_0xc4b3df(0x14c)][_0xc4b3df(0x183)](_0xc4b3df(0x16f)+_0x5c371f['action']+':',_0x18de95),_0x4a5253['push']({'action':_0x5c371f['action'],'success':![],'error':_0x18de95[_0xc4b3df(0x18a)]});}}return{'results':_0x4a5253};}async['generateTree'](_0x1de3be,_0x189c0d,_0x1136e0,_0x1fa185,_0x1dfbba,_0x4347e9,_0x3de057){const _0x1eab6f=a0_0x7157c;this[_0x1eab6f(0x14c)]['info'](_0x1eab6f(0x188)+_0x1de3be);const _0x42776b=this[_0x1eab6f(0x153)](_0x1de3be,_0x3de057),_0x177871=[...this['defaultIgnoreDirs'],..._0x1136e0]['filter'](Boolean),_0x596dc3=[...this[_0x1eab6f(0x156)],..._0x1fa185]['filter'](Boolean),_0x4a238d=await this[_0x1eab6f(0x185)](_0x42776b,_0x42776b,0x0,_0x189c0d,_0x177871,_0x596dc3,_0x1dfbba,_0x4347e9),_0x363d87=this[_0x1eab6f(0x158)](_0x4a238d);return{'action':_0x1eab6f(0x15a),'path':_0x1de3be,'resolvedPath':_0x42776b,'tree':_0x363d87,'success':!![]};}async['buildTree'](_0x7f1e5e,_0x488814,_0x26ca7d,_0x52b59a,_0x3203bf,_0x2d3b5b,_0x433e0a,_0xedbede){const _0x57446b=a0_0x7157c;if(_0x26ca7d>_0x52b59a)return null;try{const _0x4c6809=await a0_0xe1fca['readdir'](_0x488814,{'withFileTypes':!![]}),_0x1afc39={'name':a0_0x1c2098['basename'](_0x488814),'path':a0_0x1c2098['relative'](_0x7f1e5e,_0x488814),'type':'directory','children':[]};for(const _0x299f62 of _0x4c6809){const _0x1e8872=a0_0x1c2098[_0x57446b(0x172)](_0x488814,_0x299f62[_0x57446b(0x189)]),_0x5c4f55=a0_0x1c2098[_0x57446b(0x159)](_0x7f1e5e,_0x1e8872);if(_0x299f62['isDirectory']()){if(_0x3203bf[_0x57446b(0x150)](_0x355fd4=>_0x299f62['name']===_0x355fd4||_0x5c4f55[_0x57446b(0x173)](a0_0x1c2098[_0x57446b(0x17d)])[_0x57446b(0x161)](_0x355fd4)))continue;const _0x197931=await this[_0x57446b(0x185)](_0x7f1e5e,_0x1e8872,_0x26ca7d+0x1,_0x52b59a,_0x3203bf,_0x2d3b5b,_0x433e0a,_0xedbede);_0x197931&&(_0x197931[_0x57446b(0x184)][_0x57446b(0x171)]>0x0||_0x26ca7d===0x0)&&_0x1afc39['children'][_0x57446b(0x14d)](_0x197931);}else{if(_0x299f62[_0x57446b(0x177)]()&&_0x433e0a){const _0x3f2ec1=a0_0x1c2098['extname'](_0x299f62['name']);if(_0x2d3b5b['includes'](_0x3f2ec1))continue;if(_0xedbede&&_0xedbede[_0x57446b(0x171)]>0x0){const _0x1a207f=_0xedbede['some'](_0x577797=>{const _0x30a7ac=_0x57446b;return _0x577797['startsWith']('*.')?_0x299f62['name'][_0x30a7ac(0x14f)](_0x577797[_0x30a7ac(0x175)](0x1)):_0x299f62['name'][_0x30a7ac(0x161)](_0x577797['replace']('*',''));});if(!_0x1a207f)continue;}_0x1afc39[_0x57446b(0x184)][_0x57446b(0x14d)]({'name':_0x299f62['name'],'path':_0x5c4f55,'type':_0x57446b(0x17a),'ext':_0x3f2ec1});}}}return _0x1afc39['children']['sort']((_0x9aefbe,_0xc96a59)=>{const _0x1657a1=_0x57446b;if(_0x9aefbe['type']===_0xc96a59['type'])return _0x9aefbe['name'][_0x1657a1(0x16e)](_0xc96a59[_0x1657a1(0x189)]);return _0x9aefbe['type']==='directory'?-0x1:0x1;}),_0x1afc39;}catch(_0x42dd79){return this[_0x57446b(0x14c)][_0x57446b(0x183)]('Error\x20building\x20tree\x20for\x20'+_0x488814+':',_0x42dd79),{'name':a0_0x1c2098[_0x57446b(0x18e)](_0x488814),'path':a0_0x1c2098[_0x57446b(0x159)](_0x7f1e5e,_0x488814),'type':_0x57446b(0x16a),'error':_0x42dd79['message'],'children':[]};}}[a0_0x7157c(0x158)](_0x251f19,_0x4c0742='',_0x4a9dd8=!![]){const _0x53f0ad=a0_0x7157c;if(!_0x251f19)return'';const _0x189fb6=_0x53f0ad(0x182),_0x5d2c9c='└──\x20',_0x7b17bf=_0x53f0ad(0x186),_0x43f4b0=_0x53f0ad(0x179);let _0x1d12dd=''+_0x4c0742+(_0x4a9dd8?_0x5d2c9c:_0x189fb6)+_0x251f19[_0x53f0ad(0x189)]+'\x0a';if(_0x251f19['children']&&_0x251f19['children'][_0x53f0ad(0x171)]>0x0){const _0xe0f2af=_0x4c0742+(_0x4a9dd8?_0x43f4b0:_0x7b17bf);_0x251f19['children']['forEach']((_0x140cd1,_0x3ccbca)=>{const _0x4147b6=_0x53f0ad,_0x16926e=_0x3ccbca===_0x251f19['children'][_0x4147b6(0x171)]-0x1;_0x1d12dd+=this[_0x4147b6(0x158)](_0x140cd1,_0xe0f2af,_0x16926e);});}return _0x1d12dd;}[a0_0x7157c(0x153)](_0xf70fc6,_0x32d5f1){if(a0_0x1c2098['isAbsolute'](_0xf70fc6))return _0xf70fc6;return a0_0x1c2098['resolve'](_0x32d5f1,_0xf70fc6);}}