#!/usr/bin/env node

const a0_0x132b6b=a0_0x3664;(function(_0x238bc0,_0x2b9dfb){const _0x26fc19=a0_0x3664,_0x44a0d2=_0x238bc0();while(!![]){try{const _0x5171ca=parseInt(_0x26fc19(0xcf))/0x1+parseInt(_0x26fc19(0xce))/0x2*(-parseInt(_0x26fc19(0x10d))/0x3)+-parseInt(_0x26fc19(0xa2))/0x4*(parseInt(_0x26fc19(0xf7))/0x5)+parseInt(_0x26fc19(0xc3))/0x6*(-parseInt(_0x26fc19(0xbe))/0x7)+-parseInt(_0x26fc19(0xd7))/0x8+parseInt(_0x26fc19(0xb8))/0x9+parseInt(_0x26fc19(0x109))/0xa;if(_0x5171ca===_0x2b9dfb)break;else _0x44a0d2['push'](_0x44a0d2['shift']());}catch(_0x4705b1){_0x44a0d2['push'](_0x44a0d2['shift']());}}}(a0_0x5141,0xcd64f));import a0_0x7b713b from'dotenv';a0_0x7b713b['config']();import{CLI}from'./core/cli.js';import{ConversationOrchestrator}from'./core/conversationOrchestrator.js';import{LoggingService}from'./services/loggingService.js';import{loadConfig}from'./config/configLoader.js';import a0_0x451dfd from'chalk';import{performance}from'perf_hooks';const INITIALIZATION_TIMEOUT_MS=0x7530,GRACEFUL_SHUTDOWN_TIMEOUT_MS=0x2710,SERVICE_HEALTH_CHECK_INTERVAL_MS=0x493e0;let applicationState={'isShuttingDown':![],'initializationStartTime':null,'services':{'logger':null,'config':null,'cli':null,'orchestrator':null},'healthCheckInterval':null};function a0_0x5141(){const _0x2e944e=['ChvZAa','v19psW','rxjYB3iGzhvYAw5NigDYywnLzNvSihnODxrKB3DUoG','q29UDgLUDwLUzYb3AxrOB3v0ig9Yy2HLC3rYyxrVCIbMB3iGC3rHDhvZignVBw1HBMq','Aw5PDgLHBgL6yxrPB25tDgfYDfrPBwu','BMfTzq','l2HLywX0Aa','C3rHDhvZ','BwvZC2fNzq','icaG','u2H1DhrPBMCGzg93BIbKDwuGDg8G','zMLSDgvY','icaG4OcIifnLCNzLCIbPCYbKB3DUig9Yig92zxjSB2fKzwq','C29Tzq','mtq5nJiYmtjRz0TVAhi','icaG4OcIia','rMf0ywWGzxjYB3iGzhvYAw5Nihn0yxj0Dxa6','t3jJAgvZDhjHDg9YigLUAxrPywXPEMf0Aw9UigzHAwXLzdO','BgvUz3rO','q2HLy2SGy29UzMLNDxjHDgLVBIbMAwXLihn5BNrHEa','mJiXmMj1B1DJCa','C2vYDMvYvxjS','D2fYBMLUzW','rw5ZDxjLihLVDsbOyxzLihDYAxrLigfJy2vZCYb0BYb0AguGy3vYCMvUDcbKAxjLy3rVCNK','q29UzMLNDxjHDgLVBIbSB2fKzwqGyw5KihzHBgLKyxrLzcbZDwnJzxnZzNvSBhK','mtyXmdrJy1bjChG','vMfSAwrHDguGy29UzMLNDxjHDgLVBJOGBg94AweGy29UzMLNic0TDMfSAwrHDgu','CgvYBwLZC2LVBG','CM91BMq','y2f0y2G','rM9Yy2uGC2H1DgrVD24GlsbYzwnLAxzLzcbZzwnVBMqGu0Lhsu5u','ChjVBwLZzxm','BwfW','yxjNDG','u2LNBMfSigHHBMrSzxjZignVBMzPz3vYzwq','rw1LCMDLBMn5ihnODxrKB3DUignVBxbSzxrLza','nKjTyuXTvG','mZm1mdC0vMvfB0v1','z3jHEq','uMvJzwL2zwqGu0LhvevstsWGAw5PDgLHDgLUzYbNCMfJzwz1BcbZAhv0zg93BG','y29UzMLN','cVcFLi0GrM9Yig1VCMuGAgvSCdO','qM9VDhn0CMfW','D2fYBG','EwvSBg93','mJiYotaXnNnMu21izW','q2HLy2SGEw91CIbPBNrLCM5LDcbJB25Uzwn0Aw9U','zgvIDwC','q0XjigLUAxrPywXPEMf0Aw9UigvYCM9YoIa','z2XVyMfS','zw52','Aw5PDgLHBgL6zvnLCNzPy2vZ','zM9YrwfJAa','z2v0u3rVCMvKqxbPs2v5','uhjVy2vZCYb3yxjUAw5NoG','AgvHBhrOq2HLy2TjBNrLCNzHBa','Aw5MBW','u2vYDMvYihzHBgLKyxrPB24GzMfPBgvKlcb3AwXSigf0DgvTChqGzMfSBgjHy2SGDg8GBg9JywWGC2vYDMLJzxm','Dg9tDhjPBMC','u3rHy2SGDhjHy2u6','CMvK','te9ysufFrevcvuC','y29UC29Szq','qM9VDhn0CMfWihrPBwvVDxq','Aw5JBhvKzxm','C2f2zvnLC3nPB25tDgf0zq','C3rHCNq','AxntAhv0DgLUz0rVD24','B3jJAgvZDhjHDg9Y','tg9HzgLUzYbJB25MAwD1CMf0Aw9U','rw1LCMDLBMn5ihnODxrKB3DUigzHAwXLzdO','cUkpScbjBML0AwfSAxPHDgLVBIb0Aw1LzcbVDxq','zxjYB3i','vw5JyxvNAhqGzxHJzxb0Aw9UoG','u2vYDMvYigHLywX0AcbJAgvJAYbMywLSzwq6ieHuvfaG','q0XjigLUAxrPywXPEMvKihn1y2nLC3nMDwXSEq','zw5HyMXLza','ntK5nte4nxHHwuXqCG','Bg9Ntgv2zwW','Bg9N','AgvHBhrOEq','lI9JB25MAwCVy29UzMLNtg9HzgvYlMPZ','ywXSu2v0DgXLza','sw5PDgLHBgL6Aw5NignVBNzLCNnHDgLVBIbVCMnOzxn0CMf0B3i','t3jJAgvZDhjHDg9YihnODxrKB3DUihrPBwvVDxq','BM93','sw5PDgLHBgL6Aw5Nienmsq','C3rHy2S','C2vYDMLJzxm','Dw5OzwfSDgH5','ywnJzxnZ','y2XP','B3bLBMfP','DgHLBG','Bg9Nz2LUzW','mJa4mZq0odbMsNDHr2G','uNvUDgLTzsb2ywXPzgf0Aw9UigzHAwXLzdOk','r3jHy2vMDwWGC2H1DgrVD24Gy29TCgXLDgvKihn1y2nLC3nMDwXSEq','DxnLu2vYDMvYteXn','oteZodG3Ceretxbb','A2v5','r3jHy2vMDwWGC2H1DgrVD24','yxbPs2v5','q2fUBM90ihjLywnOihnLCNzLCIbHDca','cVcFKQeGvhjVDwjSzxnOB290Aw5Nihn1z2DLC3rPB25ZoG','u0Lhvevstq','C2XPy2u','u0Lhsu5u','zgvNCMfKzwq','CMfJzq','C3rHCNruyxnR','yxbPigTLEq','te9ysufFu0Lmru5u','Dhj1zq','icaG4OcIifjLCg9YDcbPC3n1zxm6igH0DhbZoI8Vz2L0AhvIlMnVBs9SB3HPys1HAs9JBgKVAxnZDwvZ','y29UC3rHBNrZ','q29UDMvYC2f0Aw9Uig9Yy2HLC3rYyxrVCIbPBML0AwfSAxPLzcbZDwnJzxnZzNvSBhK','C2H1DgrVD24','ngrey3fWyG','B3zLCMfSBa','cLn0ywnRihrYywnLoG','Bg9Nz2vY','ugvYzM9YBwLUzYbLBwvYz2vUy3KGC2H1DgrVD24','q0XjihnODxrKB3DUihrPBwvVDxq','q29UzMLNDxjHDgLVBIbLCNjVCJOG','zxHPDa'];a0_0x5141=function(){return _0x2e944e;};return a0_0x5141();}async function bootstrap(){const _0x1050d0=a0_0x3664;applicationState[_0x1050d0(0xae)]=performance['now']();const _0x387269=createInitialLogger();applicationState['services']['logger']=_0x387269;try{_0x387269[_0x1050d0(0xe2)]('Starting\x20Loxia\x20CLI\x20application'),_0x387269['startTask'](_0x1050d0(0xd4),'Initializing\x20application\x20components');const _0xe9f688=await initializeConfiguration(_0x387269);applicationState['services'][_0x1050d0(0xd2)]=_0xe9f688;const _0x376dad=createEnhancedLogger(_0xe9f688);applicationState[_0x1050d0(0x102)]['logger']=_0x376dad;const _0x24133c=await initializeCLI(_0xe9f688,_0x376dad);applicationState[_0x1050d0(0x102)]['cli']=_0x24133c,await initializeOrchestratorIfNeeded(_0x24133c,_0xe9f688,_0x376dad),setupSignalHandlers(_0x376dad),setupHealthMonitoring(_0x376dad);const _0x374db5=performance[_0x1050d0(0xff)]()-applicationState[_0x1050d0(0xae)];_0x376dad['completeTask'](_0x1050d0(0xd4),!![],{'initializationTime':Math['round'](_0x374db5),'serverMode':_0xe9f688['useServerLLM'],'services':Object['keys'](applicationState['services'])[_0x1050d0(0xb5)](_0x1eb50d=>applicationState['services'][_0x1eb50d]!==null)}),_0x376dad['info']('Loxia\x20CLI\x20initialized\x20successfully\x20in\x20'+Math[_0x1050d0(0xc6)](_0x374db5)+'ms'),await _0x24133c[_0x1050d0(0xec)]();}catch(_0x3f3809){const _0x46b237=performance['now']()-applicationState[_0x1050d0(0xae)];_0x387269['completeTask']('Bootstrap',![],{'error':_0x3f3809['message'],'initializationTime':Math[_0x1050d0(0xc6)](_0x46b237)}),console['error'](a0_0x451dfd[_0x1050d0(0xe6)]('\x0a❌\x20Failed\x20to\x20start\x20Loxia\x20CLI:')),console['error'](a0_0x451dfd[_0x1050d0(0xe6)](_0x1050d0(0xb3)+_0x3f3809['message'])),_0x3f3809[_0x1050d0(0x101)]&&process[_0x1050d0(0xdc)][_0x1050d0(0xe7)]&&(console['error'](a0_0x451dfd[_0x1050d0(0xd0)](_0x1050d0(0xa4))),console[_0x1050d0(0xf2)](a0_0x451dfd['gray'](_0x3f3809[_0x1050d0(0x101)]))),provideTroubleshootingSuggestions(_0x3f3809),await performEmergencyShutdown(_0x387269),process[_0x1050d0(0xa9)](0x1);}}function createInitialLogger(){const _0x2d3bf0=a0_0x3664;return new LoggingService({'console':![],'file':![],'logLevel':process['env']['LOXIA_LOG_LEVEL']||_0x2d3bf0(0xe2),'silent':process['env'][_0x2d3bf0(0x11a)]===_0x2d3bf0(0x11b)});}async function initializeConfiguration(_0x14df5a){const _0x5943ad=a0_0x3664;_0x14df5a['info'](_0x5943ad(0xef));try{const _0x4527c4=await loadConfig();return await validateRuntimeConfiguration(_0x4527c4,_0x14df5a),_0x14df5a[_0x5943ad(0xe2)](_0x5943ad(0xc2),{'serverMode':_0x4527c4[_0x5943ad(0x10c)],'logLevel':_0x4527c4['logging']['logLevel'],'llmStrategy':_0x4527c4['llmStrategy']}),_0x4527c4;}catch(_0x19488c){_0x14df5a[_0x5943ad(0xf2)]('Configuration\x20loading\x20failed:',_0x19488c);throw new Error(_0x5943ad(0xa8)+_0x19488c[_0x5943ad(0xb2)]);}}async function validateRuntimeConfiguration(_0x3d593d,_0x1f104e){const _0x1bf5da=a0_0x3664,_0x4ea42a=[];if(_0x3d593d[_0x1bf5da(0x10c)])try{const _0x534b93=await fetch(_0x3d593d[_0x1bf5da(0xbf)]+_0x1bf5da(0xb0),{'method':'GET','timeout':0x1388});!_0x534b93['ok']&&_0x4ea42a[_0x1bf5da(0xaa)](_0x1bf5da(0xf4)+_0x534b93[_0x1bf5da(0xb1)]);}catch(_0x24be91){_0x4ea42a[_0x1bf5da(0xaa)](_0x1bf5da(0x111)+_0x3d593d['serverUrl']+':\x20'+_0x24be91[_0x1bf5da(0xb2)]);}if(!_0x3d593d[_0x1bf5da(0x10c)]){const _0x5712b5=_0x3d593d['services']['anthropic'][_0x1bf5da(0x110)]||_0x3d593d['services'][_0x1bf5da(0x106)]['apiKey']||_0x3d593d[_0x1bf5da(0x102)]['google'][_0x1bf5da(0x110)];!_0x5712b5&&_0x4ea42a[_0x1bf5da(0xaa)]('No\x20API\x20keys\x20configured\x20for\x20fallback\x20services');}try{const _0x29e28e=_0x3d593d['budget']['usageDir'];await import('fs')['then'](_0x598e34=>_0x598e34['promises']['mkdir'](_0x29e28e,{'recursive':!![]})),await import('fs')['then'](_0x4dc833=>_0x4dc833['promises'][_0x1bf5da(0x104)](_0x29e28e,_0x4dc833[_0x1bf5da(0x11d)][_0x1bf5da(0xab)]));}catch(_0x19d2ac){_0x4ea42a['push']('Cannot\x20write\x20to\x20budget\x20directory:\x20'+_0x19d2ac['message']);}if(_0x4ea42a[_0x1bf5da(0xbc)]>0x0){const _0x59e7a5=_0x1bf5da(0x10a)+_0x4ea42a[_0x1bf5da(0xca)](_0x583d5a=>'\x20\x20-\x20'+_0x583d5a)['join']('\x0a');if(_0x3d593d['useServerLLM']&&_0x4ea42a[_0x1bf5da(0xb7)](_0x446ac2=>_0x446ac2[_0x1bf5da(0xea)]('server')))_0x1f104e[_0x1bf5da(0xd5)](_0x1bf5da(0xe3)),_0x3d593d[_0x1bf5da(0x10c)]=![],_0x3d593d['services']['anthropic'][_0x1bf5da(0xf6)]=!!_0x3d593d['services']['anthropic']['apiKey'],_0x3d593d[_0x1bf5da(0x102)]['openai']['enabled']=!!_0x3d593d['services'][_0x1bf5da(0x106)]['apiKey'],_0x3d593d[_0x1bf5da(0x102)]['google']['enabled']=!!_0x3d593d['services']['google']['apiKey'];else throw new Error(_0x59e7a5);}}function createEnhancedLogger(_0x380281){const _0x3b1c28=a0_0x3664;return new LoggingService({'console':_0x380281[_0x3b1c28(0x108)][_0x3b1c28(0xe8)]!==![],'file':_0x380281[_0x3b1c28(0x108)]['file']!==![],'logLevel':_0x380281['logging'][_0x3b1c28(0xf8)],'logDir':_0x380281[_0x3b1c28(0x108)]['logDir'],'silent':_0x380281[_0x3b1c28(0x108)]['silent']===!![]});}async function initializeCLI(_0x1c0df3,_0x571ab0){const _0x419a21=a0_0x3664;_0x571ab0['info'](_0x419a21(0x100));try{const _0xeddb94=new CLI(null,_0x1c0df3,_0x571ab0);return await validateCLIResources(_0xeddb94,_0x1c0df3,_0x571ab0),_0x571ab0[_0x419a21(0xe2)](_0x419a21(0xf5)),_0xeddb94;}catch(_0x4db451){_0x571ab0[_0x419a21(0xf2)]('CLI\x20initialization\x20failed:',_0x4db451);throw new Error(_0x419a21(0xda)+_0x4db451[_0x419a21(0xb2)]);}}async function validateCLIResources(_0x4e37f7,_0x48bacd,_0x56eb99){const _0x28841a=a0_0x3664,_0x1a1155=await _0x4e37f7[_0x28841a(0xdf)]()[_0x28841a(0xc7)](()=>null);!_0x1a1155&&_0x48bacd['useServerLLM']&&_0x56eb99[_0x28841a(0xd5)]('No\x20API\x20key\x20found\x20-\x20some\x20commands\x20will\x20not\x20be\x20available');try{const {getConfigPaths:_0x52d7dc}=await import(_0x28841a(0xfb)),_0x295b50=_0x52d7dc();await import('fs')[_0x28841a(0x107)](_0x494226=>{const _0x49a7e0=_0x28841a,_0xe723cd=[];return _0x295b50[_0x49a7e0(0xdb)]&&_0xe723cd['push'](_0x494226[_0x49a7e0(0xc9)][_0x49a7e0(0x104)](_0x295b50[_0x49a7e0(0xdb)])[_0x49a7e0(0xc7)](()=>'no\x20global\x20config')),_0x295b50['local']&&_0xe723cd[_0x49a7e0(0xaa)](_0x494226['promises'][_0x49a7e0(0x104)](_0x295b50['local'])[_0x49a7e0(0xc7)](()=>'no\x20local\x20config')),Promise['allSettled'](_0xe723cd);});}catch(_0xd7ed1c){_0x56eb99[_0x28841a(0xd5)]('Configuration\x20file\x20validation\x20failed:',_0xd7ed1c);}}async function initializeOrchestratorIfNeeded(_0x42c30b,_0x1e83e3,_0x135285){const _0x29f148=a0_0x3664,_0x38ab8e=process[_0x29f148(0xcb)][_0x29f148(0x114)](0x2),_0x11cc0c=_0x38ab8e[0x0],_0x342df4=[_0x29f148(0x10e),_0x29f148(0xb1),'budget','--help','-h','--version','-v'];if(_0x342df4[_0x29f148(0xea)](_0x11cc0c)||_0x38ab8e[_0x29f148(0xea)]('--help')||_0x38ab8e[_0x29f148(0xea)]('-h')){_0x135285[_0x29f148(0xd9)]('Skipping\x20orchestrator\x20initialization\x20for\x20utility\x20command');return;}_0x135285[_0x29f148(0xe2)](_0x29f148(0xfd));try{const _0x24f74c=new ConversationOrchestrator(_0x1e83e3,_0x135285);await _0x24f74c[_0x29f148(0xdd)](),_0x42c30b['setOrchestrator'](_0x24f74c),applicationState['services'][_0x29f148(0xee)]=_0x24f74c,_0x135285[_0x29f148(0xe2)](_0x29f148(0x11e));}catch(_0x346490){_0x135285[_0x29f148(0xf2)](_0x29f148(0xbb),_0x346490);if([_0x29f148(0xb1),'budget']['includes'](_0x11cc0c))_0x135285[_0x29f148(0xd5)](_0x29f148(0xad));else throw new Error('Orchestrator\x20initialization\x20error:\x20'+_0x346490['message']);}}function setupSignalHandlers(_0x4213e7){const _0x2be094=a0_0x3664;process['on'](_0x2be094(0x115),async()=>{const _0x1bfa61=_0x2be094;applicationState[_0x1bfa61(0xed)]&&(_0x4213e7[_0x1bfa61(0xd5)](_0x1bfa61(0xc8)),process['exit'](0x1)),_0x4213e7['info']('Received\x20SIGINT,\x20initiating\x20graceful\x20shutdown'),await performGracefulShutdown(_0x4213e7,'SIGINT');}),process['on'](_0x2be094(0x113),async()=>{const _0x2f9d46=_0x2be094;applicationState[_0x2f9d46(0xed)]&&(_0x4213e7['warn']('Force\x20shutdown\x20-\x20received\x20second\x20SIGTERM'),process[_0x2f9d46(0xa9)](0x1)),_0x4213e7['info'](_0x2f9d46(0xd1)),await performGracefulShutdown(_0x4213e7,_0x2f9d46(0x113));}),process['on']('uncaughtException',async _0x5f2a1c=>{const _0x3bf548=_0x2be094;_0x4213e7['error'](_0x3bf548(0xf3),_0x5f2a1c),_0x5f2a1c['stack']&&_0x4213e7[_0x3bf548(0xf2)](_0x3bf548(0xe5),_0x5f2a1c[_0x3bf548(0x101)]),await performEmergencyShutdown(_0x4213e7),process['exit'](0x1);}),process['on']('unhandledRejection',async(_0x74e2f0,_0x3dd9b4)=>{const _0x1a4c3b=_0x2be094;_0x4213e7[_0x1a4c3b(0xf2)]('Unhandled\x20promise\x20rejection:',{'reason':_0x74e2f0?.['message']||_0x74e2f0,'promise':_0x3dd9b4?.[_0x1a4c3b(0xe4)]()}),_0x74e2f0?.[_0x1a4c3b(0x101)]&&_0x4213e7[_0x1a4c3b(0xf2)]('Rejection\x20stack\x20trace:',_0x74e2f0['stack']),await performEmergencyShutdown(_0x4213e7),process[_0x1a4c3b(0xa9)](0x1);}),process['on']('warning',_0x59ef84=>{const _0x32bd15=_0x2be094;_0x4213e7[_0x32bd15(0xd5)]('Node.js\x20warning:',{'name':_0x59ef84[_0x32bd15(0xaf)],'message':_0x59ef84['message'],'stack':_0x59ef84[_0x32bd15(0x101)]});}),_0x4213e7['debug'](_0x2be094(0xcc));}function setupHealthMonitoring(_0x252836){const _0x5869c0=a0_0x3664,_0x3d517c=process['argv'][_0x5869c0(0x114)](0x2),_0x1458c9=['do','make','resume','modify'];if(!_0x1458c9[_0x5869c0(0xb7)](_0x4bc9e1=>_0x3d517c['includes'](_0x4bc9e1)))return;applicationState['healthCheckInterval']=setInterval(async()=>{try{await performHealthCheck(_0x252836);}catch(_0x184b9b){_0x252836['warn']('Health\x20check\x20failed:',_0x184b9b);}},SERVICE_HEALTH_CHECK_INTERVAL_MS),_0x252836[_0x5869c0(0xd9)]('Health\x20monitoring\x20configured');}async function performHealthCheck(_0x2c62a4){const _0x369ac5=a0_0x3664,_0x21def6={'timestamp':new Date()['toISOString'](),'services':{},'overall':_0x369ac5(0xfa)};if(applicationState[_0x369ac5(0x102)][_0x369ac5(0x105)])try{_0x21def6[_0x369ac5(0x102)][_0x369ac5(0x105)]=_0x369ac5(0xfa);}catch(_0x54142b){_0x21def6['services']['cli']='unhealthy',_0x21def6['overall']=_0x369ac5(0x116);}if(applicationState['services']['orchestrator'])try{const _0x4b3377=await applicationState[_0x369ac5(0x102)][_0x369ac5(0xee)]['getHealthStatus']?.()||'unknown';_0x21def6[_0x369ac5(0x102)]['orchestrator']=_0x4b3377['overall']||'healthy',(_0x4b3377['overall']==='degraded'||_0x4b3377[_0x369ac5(0xa3)]===_0x369ac5(0x103))&&(_0x21def6['overall']=_0x369ac5(0x116));}catch(_0x3aeed1){_0x21def6[_0x369ac5(0x102)][_0x369ac5(0xee)]=_0x369ac5(0x103),_0x21def6[_0x369ac5(0xa3)]='degraded';}_0x21def6[_0x369ac5(0xa3)]!==_0x369ac5(0xfa)?_0x2c62a4['warn']('Service\x20health\x20check\x20detected\x20issues:',_0x21def6):_0x2c62a4[_0x369ac5(0xd9)]('Health\x20check\x20passed:',_0x21def6);}async function performGracefulShutdown(_0x3bc3f1,_0x72960a){const _0x28a793=a0_0x3664;if(applicationState['isShuttingDown'])return;applicationState[_0x28a793(0xed)]=!![],_0x3bc3f1[_0x28a793(0x118)](_0x28a793(0x10f),_0x28a793(0xb4)+_0x72960a);try{applicationState['healthCheckInterval']&&(clearInterval(applicationState[_0x28a793(0xe1)]),applicationState['healthCheckInterval']=null);const _0x4d8100=[];applicationState['services'][_0x28a793(0xee)]?.[_0x28a793(0x11f)]&&_0x4d8100['push'](Promise[_0x28a793(0x117)]([applicationState[_0x28a793(0x102)]['orchestrator']['shutdown'](),new Promise((_0x24afda,_0x2b784c)=>setTimeout(()=>_0x2b784c(new Error(_0x28a793(0xfe))),0x1388))])['catch'](_0x394282=>{const _0x2a3555=_0x28a793;_0x3bc3f1[_0x2a3555(0xd5)]('Orchestrator\x20shutdown\x20error:',_0x394282);})),applicationState[_0x28a793(0x102)]['cli']?.['shutdown']&&_0x4d8100[_0x28a793(0xaa)](Promise[_0x28a793(0x117)]([applicationState['services']['cli'][_0x28a793(0x11f)](),new Promise((_0x2a7fc9,_0x496aaa)=>setTimeout(()=>_0x496aaa(new Error(_0x28a793(0xa7))),0xbb8))])[_0x28a793(0xc7)](_0x46797d=>{_0x3bc3f1['warn']('CLI\x20shutdown\x20error:',_0x46797d);})),await Promise['race']([Promise[_0x28a793(0xfc)](_0x4d8100),new Promise(_0x25d3c8=>setTimeout(_0x25d3c8,GRACEFUL_SHUTDOWN_TIMEOUT_MS))]),_0x3bc3f1['completeTask'](_0x28a793(0x10f),!![]),_0x3bc3f1['info'](_0x28a793(0x10b));}catch(_0x439f84){_0x3bc3f1['completeTask']('Graceful\x20shutdown',![],{'error':_0x439f84['message']}),_0x3bc3f1['error'](_0x28a793(0xac),_0x439f84);}finally{setTimeout(()=>{process['exit'](0x0);},0x1f4);}}async function performEmergencyShutdown(_0x27bff2){const _0x5dc832=a0_0x3664;if(applicationState[_0x5dc832(0xed)])return;applicationState[_0x5dc832(0xed)]=!![],_0x27bff2[_0x5dc832(0xf2)](_0x5dc832(0xa6));try{applicationState[_0x5dc832(0xe1)]&&clearInterval(applicationState[_0x5dc832(0xe1)]),applicationState['services']['orchestrator']?.[_0x5dc832(0xeb)]&&await Promise[_0x5dc832(0x117)]([applicationState[_0x5dc832(0x102)][_0x5dc832(0xee)]['saveSessionState'](),new Promise(_0x3c0bc6=>setTimeout(_0x3c0bc6,0x7d0))])[_0x5dc832(0xc7)](()=>{}),_0x27bff2[_0x5dc832(0xf2)](_0x5dc832(0xcd));}catch(_0x15d578){console[_0x5dc832(0xf2)](_0x5dc832(0xf0),_0x15d578['message']);}}function provideTroubleshootingSuggestions(_0x5207bd){const _0x50a28c=a0_0x3664,_0x25ad4c=[],_0x348a98=_0x5207bd['message']['toLowerCase']();_0x348a98[_0x50a28c(0xea)](_0x50a28c(0x119))&&(_0x25ad4c[_0x50a28c(0xaa)]('Set\x20your\x20API\x20key\x20with:\x20loxia\x20key\x20--set\x20<your-api-key>'),_0x25ad4c['push']('Get your API key from: https://autopilot.loxia.ai/account/api-keys')),(_0x348a98['includes']('server')||_0x348a98['includes']('connection'))&&(_0x25ad4c[_0x50a28c(0xaa)](_0x50a28c(0xd8)),_0x25ad4c[_0x50a28c(0xaa)]('Verify\x20the\x20server\x20URL\x20in\x20your\x20configuration'),_0x25ad4c['push']('Try\x20using\x20fallback\x20mode:\x20LOXIA_USE_SERVER_LLM=false')),(_0x348a98[_0x50a28c(0xea)](_0x50a28c(0xc5))||_0x348a98[_0x50a28c(0xea)](_0x50a28c(0x104)))&&(_0x25ad4c[_0x50a28c(0xaa)]('Check\x20file\x20system\x20permissions'),_0x25ad4c[_0x50a28c(0xaa)](_0x50a28c(0xc1)),_0x25ad4c['push']('Try running from a different directory')),_0x348a98['includes']('timeout')&&(_0x25ad4c[_0x50a28c(0xaa)]('Increase\x20timeout\x20settings\x20in\x20configuration'),_0x25ad4c['push']('Check\x20network\x20connectivity'),_0x25ad4c[_0x50a28c(0xaa)]('Try\x20again\x20in\x20a\x20few\x20moments')),_0x348a98['includes']('config')&&(_0x25ad4c[_0x50a28c(0xaa)](_0x50a28c(0xbd)),_0x25ad4c[_0x50a28c(0xaa)]('Create default config: loxia config --create'),_0x25ad4c[_0x50a28c(0xaa)](_0x50a28c(0xc4))),_0x25ad4c['length']>0x0&&(console[_0x50a28c(0xf9)](a0_0x451dfd[_0x50a28c(0xd6)](_0x50a28c(0x112))),_0x25ad4c[_0x50a28c(0xde)](_0x52132a=>{const _0x1300c4=_0x50a28c;console[_0x1300c4(0xf9)](a0_0x451dfd['cyan'](_0x1300c4(0xb9)+_0x52132a));})),console['log'](a0_0x451dfd[_0x50a28c(0xd0)](_0x50a28c(0xd3))),console['log'](a0_0x451dfd['gray']('\x20\x20\x20•\x20Run:\x20loxia\x20--help')),console['log'](a0_0x451dfd[_0x50a28c(0xd0)]('\x20\x20\x20•\x20Check\x20documentation:\x20https://docs.loxia.ai')),console['log'](a0_0x451dfd[_0x50a28c(0xd0)](_0x50a28c(0x11c)));}function a0_0x3664(_0x599af5,_0x115922){const _0x5141a5=a0_0x5141();return a0_0x3664=function(_0x36644f,_0x510694){_0x36644f=_0x36644f-0xa2;let _0x1e88a5=_0x5141a5[_0x36644f];if(a0_0x3664['VwFBiO']===undefined){var _0x210515=function(_0x7b713b){const _0x451dfd='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x387269='',_0xe9f688='';for(let _0x376dad=0x0,_0x24133c,_0x374db5,_0x1eb50d=0x0;_0x374db5=_0x7b713b['charAt'](_0x1eb50d++);~_0x374db5&&(_0x24133c=_0x376dad%0x4?_0x24133c*0x40+_0x374db5:_0x374db5,_0x376dad++%0x4)?_0x387269+=String['fromCharCode'](0xff&_0x24133c>>(-0x2*_0x376dad&0x6)):0x0){_0x374db5=_0x451dfd['indexOf'](_0x374db5);}for(let _0x3f3809=0x0,_0x46b237=_0x387269['length'];_0x3f3809<_0x46b237;_0x3f3809++){_0xe9f688+='%'+('00'+_0x387269['charCodeAt'](_0x3f3809)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xe9f688);};a0_0x3664['tDfUpU']=_0x210515,_0x599af5=arguments,a0_0x3664['VwFBiO']=!![];}const _0x338fb7=_0x5141a5[0x0],_0x2ef8e9=_0x36644f+_0x338fb7,_0x5f596f=_0x599af5[_0x2ef8e9];return!_0x5f596f?(_0x1e88a5=a0_0x3664['tDfUpU'](_0x1e88a5),_0x599af5[_0x2ef8e9]=_0x1e88a5):_0x1e88a5=_0x5f596f,_0x1e88a5;},a0_0x3664(_0x599af5,_0x115922);}async function handleBootstrapTimeout(_0x1d000a){const _0x1d5089=a0_0x3664;_0x1d000a[_0x1d5089(0xf2)]('Bootstrap\x20process\x20timed\x20out'),console['error'](a0_0x451dfd[_0x1d5089(0xe6)](_0x1d5089(0xf1))),console[_0x1d5089(0xf2)](a0_0x451dfd[_0x1d5089(0xd6)]('This\x20might\x20indicate:')),console['error'](a0_0x451dfd['yellow']('\x20\x20\x20•\x20Network\x20connectivity\x20issues')),console['error'](a0_0x451dfd[_0x1d5089(0xd6)](_0x1d5089(0xb6))),console['error'](a0_0x451dfd[_0x1d5089(0xd6)]('\x20\x20\x20•\x20Configuration\x20problems')),await performEmergencyShutdown(_0x1d000a),process[_0x1d5089(0xa9)](0x1);}async function main(){const _0x106b12=a0_0x3664,_0x265b21=Date[_0x106b12(0xff)]();try{await Promise[_0x106b12(0x117)]([bootstrap(),new Promise((_0xd161b2,_0x3703d9)=>setTimeout(()=>_0x3703d9(new Error('Bootstrap\x20timeout')),INITIALIZATION_TIMEOUT_MS))]);}catch(_0x4de640){const _0x32a160=Date[_0x106b12(0xff)]()-_0x265b21;if(_0x4de640[_0x106b12(0xb2)]===_0x106b12(0xe9))await handleBootstrapTimeout(applicationState['services']['logger']||createInitialLogger());else throw _0x4de640;}}main()['catch'](_0x4c3dcf=>{const _0x4ee5b0=a0_0x3664,_0x48cea9=applicationState['services'][_0x4ee5b0(0xa5)]||createInitialLogger();_0x48cea9[_0x4ee5b0(0xf2)](_0x4ee5b0(0xba),_0x4c3dcf),console[_0x4ee5b0(0xf2)](a0_0x451dfd['red']('\x0a💥\x20Fatal\x20startup\x20error:')),console['error'](a0_0x451dfd[_0x4ee5b0(0xe6)]('\x20\x20\x20'+_0x4c3dcf['message'])),process[_0x4ee5b0(0xdc)]['LOXIA_DEBUG']&&_0x4c3dcf[_0x4ee5b0(0x101)]&&(console[_0x4ee5b0(0xf2)](a0_0x451dfd['gray']('\x0aStack\x20trace:')),console[_0x4ee5b0(0xf2)](a0_0x451dfd[_0x4ee5b0(0xd0)](_0x4c3dcf[_0x4ee5b0(0x101)]))),process[_0x4ee5b0(0xa9)](0x1);}),process['on'](a0_0x132b6b(0xc0),_0xac00a0=>{const _0x295015=a0_0x132b6b;applicationState['services'][_0x295015(0xa5)]&&applicationState[_0x295015(0x102)][_0x295015(0xa5)]['warn'](_0x295015(0xe0),_0xac00a0);});export{bootstrap,performGracefulShutdown,performHealthCheck};