#!/usr/bin/env node

const a0_0x59a055=a0_0xe66d;(function(_0x31a45b,_0x18ee97){const _0x4abcbf=a0_0xe66d,_0x18e42=_0x31a45b();while(!![]){try{const _0x3de8f2=parseInt(_0x4abcbf(0xb0))/0x1+parseInt(_0x4abcbf(0xc8))/0x2+parseInt(_0x4abcbf(0x97))/0x3*(parseInt(_0x4abcbf(0x8b))/0x4)+-parseInt(_0x4abcbf(0x88))/0x5*(-parseInt(_0x4abcbf(0xcf))/0x6)+-parseInt(_0x4abcbf(0xa6))/0x7+parseInt(_0x4abcbf(0xea))/0x8*(-parseInt(_0x4abcbf(0xe3))/0x9)+parseInt(_0x4abcbf(0xd0))/0xa;if(_0x3de8f2===_0x18ee97)break;else _0x18e42['push'](_0x18e42['shift']());}catch(_0x5c5d61){_0x18e42['push'](_0x18e42['shift']());}}}(a0_0x4ec0,0x92ffc));import a0_0x4664cb from'dotenv';a0_0x4664cb['config']();import{CLI}from'./core/cli.js';import{ConversationOrchestrator}from'./core/conversationOrchestrator.js';import{LoggingService}from'./services/loggingService.js';function a0_0x4ec0(){const _0x43460d=['t3jJAgvZDhjHDg9YigLUAxrPywXPEMf0Aw9UigvYCM9YoIa','B3jJAgvZDhjHDg9Y','sgvHBhrOignOzwnRigzHAwXLzdO','BwfW','nZK0ndG3ng5ID2vowa','u3rHy2SGDhjHy2u6','cVcFLi0GrM9Yig1VCMuGAgvSCdO','rw1LCMDLBMn5ihnODxrKB3DUigzHAwXLzdO','C3rHy2S','Dw5OzwfSDgH5','DgHLBG','AgvHBhrOq2HLy2TjBNrLCNzHBa','B3bLBMfP','C2LSzw50','nJK2nJe2C3nXuxrL','Aw5MBW','C2vYDMvY','u2vYDMvYihzHBgLKyxrPB24GzMfPBgvKlcb3AwXSigf0DgvTChqGzMfSBgjHy2SGDg8GBg9JywWGC2vYDMLJzxm','ywXSu2v0DgXLza','icaG4OcIifnLCNzLCIbPCYbKB3DUig9Yig92zxjSB2fKzwq','Dg9ju09tDhjPBMC','C3rHCNq','zM9YrwfJAa','v19psW','C29Tzq','C2H1DgrVD24','B3zLCMfSBa','qM9VDhn0CMfWihrPBwvVDxq','BgXTu3rYyxrLz3K','DxnHz2veAxi','Bg9JywW','icaG4OcIia','zMLSDgvY','ChjVBwLZzxm','BwvZC2fNzq','vMfSAwrHDguGy29UzMLNDxjHDgLVBJOGBg94AweGy29UzMLNic0TDMfSAwrHDgu','CMfJzq','DxnLu2vYDMvYteXn','mtK1odu4offiBK5YyG','Bg9Ntgv2zwW','Bg9N','zxHPDa','CMvZDw1L','C2vYDMLJzxm','tM9Kzs5QCYb3yxjUAw5NoG','mte5nJeWwKfgA3Pu','ndG3otqWme5vDvP5sG','yNvKz2v0','cVcFKQuGrMf0ywWGC3rHCNr1CcbLCNjVCJO','yw50AhjVCgLJ','ChvZAa','D2fYBMLUzW','zgvNCMfKzwq','C2f2zvnLC3nPB25tDgf0zq','q2HLy2SGzMLSzsbZExn0zw0GCgvYBwLZC2LVBNm','vw5Oyw5KBgvKihbYB21PC2uGCMvQzwn0Aw9UoG','q2HLy2SGEw91CIbPBNrLCM5LDcbJB25Uzwn0Aw9U','CgvYBwLZC2LVBG','Dg9tDhjPBMC','zxjYB3i','sw5PDgLHBgL6Aw5NignVBNzLCNnHDgLVBIbVCMnOzxn0CMf0B3i','tM8GqvbjigTLExmGy29UzMLNDxjLzcbMB3iGzMfSBgjHy2SGC2vYDMLJzxm','C2XPy2u','q0XjigLUAxrPywXPEMf0Aw9UigvYCM9YoIa','l2HLywX0Aa','mZuXz0PpAM51','BM93','tg94AweGq0XjigLUAxrPywXPEMvKihn1y2nLC3nMDwXSEsbPBIa','Bg9Nz2LUzW','y2XP','yxbPs2v5','vhj5ihvZAw5NigzHBgXIywnRig1Vzgu6ieXpweLbx1vtrv9trvjwrvjFteXnpwzHBhnL','mtKYodCYtLDvv0zO','AxntAhv0DgLUz0rVD24','yxjNDG','z2v0sgvHBhrOu3rHDhvZ','y2f0y2G','Dhj1zq','q29UzMLNDxjHDgLVBIbSB2fKzwqGyw5KihzHBgLKyxrLzcbZDwnJzxnZzNvSBhK','AM9PBG','Dw5JyxvNAhrfEgnLChrPB24','cLn0ywnRihrYywnLoG','te9ysufFrevcvuC','CMvK','q29UDgLUDwLUzYb3AxrOB3v0ig9Yy2HLC3rYyxrVCIbMB3iGC3rHDhvZignVBw1HBMq','Bw9KAwz5','BwTKAxi','y29TCgXLDgvuyxnR','vw5JyxvNAhqGzxHJzxb0Aw9UoG','q2HLy2SGy29UzMLNDxjHDgLVBIbMAwXLihn5BNrHEa','cVcFKQeGvhjVDwjSzxnOB290Aw5Nihn1z2DLC3rPB25ZoG','y29UC29Szq','vMvYAwz5ihrOzsbZzxj2zxiGvvjmigLUihLVDxiGy29UzMLNDxjHDgLVBG','zw52','ugvYzM9YBwLUzYbLBwvYz2vUy3KGC2H1DgrVD24','rxjYB3iGzhvYAw5NigDYywnLzNvSihnODxrKB3DUoG','Bg9Nz2vY','zgvIDwC','mZbSBeHcDwS','Aw5PDgLHBgL6yxrPB25tDgfYDfrPBwu','qM9VDhn0CMfW','mtu3ntuYng5sCg9Ivq','u2v0ihLVDxiGqvbjigTLEsb3AxrOoIbSB3HPysbRzxKGls1ZzxqGphLVDxiTyxbPlwTLEt4','AgvHBhrOEq','lI9JB25MAwCVy29UzMLNtg9HzgvYlMPZ','icaG4OcIie5LDhDVCMSGy29UBMvJDgL2Axr5igLZC3vLCW','EwvSBg93','yxbPigTLEq','q29UzMLNDxjHDgLVBIbLCNjVCJOG','zw5HyMXLza','Bg9NrgLY','C3rHDhvZ','sw5JCMvHC2uGDgLTzw91DcbZzxr0Aw5NCYbPBIbJB25MAwD1CMf0Aw9U','m0LZsvjiBa','icaG','z29Vz2XL','ywnJzxnZ','C3rHCNruyxnR','Aw5JBhvKzxm','CM91BMq','z3jHEq','t3jJAgvZDhjHDg9YihnODxrKB3DUigvYCM9YoG','rw1LCMDLBMn5ihnODxrKB3DUignVBxbSzxrLza','D2fYBG'];a0_0x4ec0=function(){return _0x43460d;};return a0_0x4ec0();}import{loadConfig}from'./config/configLoader.js';import a0_0x390321 from'chalk';import{performance}from'perf_hooks';const INITIALIZATION_TIMEOUT_MS=0x7530,GRACEFUL_SHUTDOWN_TIMEOUT_MS=0x2710,SERVICE_HEALTH_CHECK_INTERVAL_MS=0x493e0;let applicationState={'isShuttingDown':![],'initializationStartTime':null,'services':{'logger':null,'config':null,'cli':null,'orchestrator':null},'healthCheckInterval':null};async function bootstrap(){const _0x1a2a6a=a0_0xe66d;applicationState[_0x1a2a6a(0x89)]=performance['now']();const _0xfc00a4=createInitialLogger();applicationState[_0x1a2a6a(0xcd)][_0x1a2a6a(0x86)]=_0xfc00a4;try{_0xfc00a4[_0x1a2a6a(0xb1)]('Starting\x20Loxia\x20CLI\x20application'),_0xfc00a4[_0x1a2a6a(0x9b)](_0x1a2a6a(0x8a),'Initializing\x20application\x20components');const _0xfbc0f7=await initializeConfiguration(_0xfc00a4);applicationState['services']['config']=_0xfbc0f7;const _0x3a8602=createEnhancedLogger(_0xfbc0f7);applicationState[_0x1a2a6a(0xcd)]['logger']=_0x3a8602;const _0x51b775=await initializeCLI(_0xfbc0f7,_0x3a8602);applicationState[_0x1a2a6a(0xcd)][_0x1a2a6a(0xe7)]=_0x51b775,await initializeOrchestratorIfNeeded(_0x51b775,_0xfbc0f7,_0x3a8602),setupSignalHandlers(_0x3a8602),setupHealthMonitoring(_0x3a8602);const _0x34700b=performance['now']()-applicationState['initializationStartTime'];_0x3a8602['completeTask']('Bootstrap',!![],{'initializationTime':Math['round'](_0x34700b),'serverMode':_0xfbc0f7['useServerLLM'],'services':Object['keys'](applicationState[_0x1a2a6a(0xcd)])[_0x1a2a6a(0xc2)](_0x4e84b6=>applicationState[_0x1a2a6a(0xcd)][_0x4e84b6]!==null)}),_0x3a8602['info'](_0x1a2a6a(0xe5)+Math['round'](_0x34700b)+'ms'),await _0x51b775[_0x1a2a6a(0xb7)]();}catch(_0x30c753){const _0x25be5a=performance[_0x1a2a6a(0xe4)]()-applicationState[_0x1a2a6a(0x89)];_0xfc00a4[_0x1a2a6a(0x7d)]('Bootstrap',![],{'error':_0x30c753[_0x1a2a6a(0xc4)],'initializationTime':Math[_0x1a2a6a(0x9d)](_0x25be5a)}),console['error'](a0_0x390321[_0x1a2a6a(0x79)]('\x0a❌\x20Failed\x20to\x20start\x20Loxia\x20CLI:')),console['error'](a0_0x390321['red'](_0x1a2a6a(0x98)+_0x30c753['message'])),_0x30c753[_0x1a2a6a(0xaa)]&&process['env']['LOXIA_DEBUG']&&(console[_0x1a2a6a(0xdd)](a0_0x390321[_0x1a2a6a(0x9e)]('\x0aStack\x20trace:')),console['error'](a0_0x390321[_0x1a2a6a(0x9e)](_0x30c753['stack']))),provideTroubleshootingSuggestions(_0x30c753),await performEmergencyShutdown(_0xfc00a4),process['exit'](0x1);}}function a0_0xe66d(_0xaf9401,_0x3eeb9a){const _0x4ec0e8=a0_0x4ec0();return a0_0xe66d=function(_0xe66dd1,_0x488d6b){_0xe66dd1=_0xe66dd1-0x76;let _0x3fdd92=_0x4ec0e8[_0xe66dd1];if(a0_0xe66d['ZLswMO']===undefined){var _0x246cbc=function(_0x4664cb){const _0x390321='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0xfc00a4='',_0xfbc0f7='';for(let _0x3a8602=0x0,_0x51b775,_0x34700b,_0x4e84b6=0x0;_0x34700b=_0x4664cb['charAt'](_0x4e84b6++);~_0x34700b&&(_0x51b775=_0x3a8602%0x4?_0x51b775*0x40+_0x34700b:_0x34700b,_0x3a8602++%0x4)?_0xfc00a4+=String['fromCharCode'](0xff&_0x51b775>>(-0x2*_0x3a8602&0x6)):0x0){_0x34700b=_0x390321['indexOf'](_0x34700b);}for(let _0x30c753=0x0,_0x25be5a=_0xfc00a4['length'];_0x30c753<_0x25be5a;_0x30c753++){_0xfbc0f7+='%'+('00'+_0xfc00a4['charCodeAt'](_0x30c753)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0xfbc0f7);};a0_0xe66d['FzBpiR']=_0x246cbc,_0xaf9401=arguments,a0_0xe66d['ZLswMO']=!![];}const _0x36f50d=_0x4ec0e8[0x0],_0x6dec6c=_0xe66dd1+_0x36f50d,_0x2a812f=_0xaf9401[_0x6dec6c];return!_0x2a812f?(_0x3fdd92=a0_0xe66d['FzBpiR'](_0x3fdd92),_0xaf9401[_0x6dec6c]=_0x3fdd92):_0x3fdd92=_0x2a812f,_0x3fdd92;},a0_0xe66d(_0xaf9401,_0x3eeb9a);}function createInitialLogger(){const _0xf670ee=a0_0xe66d;return new LoggingService({'console':![],'file':![],'logLevel':process[_0xf670ee(0x83)]['LOXIA_LOG_LEVEL']||_0xf670ee(0xb1),'silent':process['env']['LOXIA_SILENT']===_0xf670ee(0xef)});}async function initializeConfiguration(_0x50d012){const _0xb6e16=a0_0xe66d;_0x50d012['info']('Loading\x20configuration');try{const _0x1953ce=await loadConfig();return await validateRuntimeConfiguration(_0x1953ce,_0x50d012),_0x50d012[_0xb6e16(0xb1)](_0xb6e16(0xf0),{'serverMode':_0x1953ce['useServerLLM'],'logLevel':_0x1953ce['logging'][_0xb6e16(0xc9)],'llmStrategy':_0x1953ce[_0xb6e16(0xbe)]}),_0x1953ce;}catch(_0x653c9e){_0x50d012['error']('Configuration\x20loading\x20failed:',_0x653c9e);throw new Error(_0xb6e16(0x92)+_0x653c9e['message']);}}async function validateRuntimeConfiguration(_0x56177e,_0x33508c){const _0x4d0c4a=a0_0xe66d,_0x4b0569=[];if(_0x56177e['useServerLLM'])try{const _0x27750d=await fetch(_0x56177e['serverUrl']+_0x4d0c4a(0xe2),{'method':'GET','timeout':0x1388});!_0x27750d['ok']&&_0x4b0569['push']('Server\x20health\x20check\x20failed:\x20HTTP\x20'+_0x27750d[_0x4d0c4a(0x95)]);}catch(_0x3e9694){_0x4b0569[_0x4d0c4a(0xd4)]('Cannot\x20reach\x20server\x20at\x20'+_0x56177e['serverUrl']+':\x20'+_0x3e9694[_0x4d0c4a(0xc4)]);}if(!_0x56177e['useServerLLM']){const _0x264e80=_0x56177e[_0x4d0c4a(0xcd)]['anthropic']['apiKey']||_0x56177e[_0x4d0c4a(0xcd)]['openai']['apiKey']||_0x56177e['services']['google']['apiKey'];!_0x264e80&&_0x4b0569['push'](_0x4d0c4a(0xdf));}try{const _0x2a920e=_0x56177e['budget'][_0x4d0c4a(0xbf)];await import('fs')[_0x4d0c4a(0xac)](_0x111026=>_0x111026['promises'][_0x4d0c4a(0x7c)](_0x2a920e,{'recursive':!![]})),await import('fs')['then'](_0x4f8a21=>_0x4f8a21[_0x4d0c4a(0xc3)]['access'](_0x2a920e,_0x4f8a21['constants'][_0x4d0c4a(0xb9)]));}catch(_0x502055){_0x4b0569['push']('Cannot\x20write\x20to\x20budget\x20directory:\x20'+_0x502055['message']);}if(_0x4b0569['length']>0x0){const _0xcf826d='Runtime\x20validation\x20failed:\x0a'+_0x4b0569[_0x4d0c4a(0xa5)](_0xfa2ae4=>'\x20\x20-\x20'+_0xfa2ae4)[_0x4d0c4a(0xf1)]('\x0a');if(_0x56177e['useServerLLM']&&_0x4b0569[_0x4d0c4a(0xba)](_0x5734f9=>_0x5734f9[_0x4d0c4a(0x9c)](_0x4d0c4a(0xb2))))_0x33508c['warn'](_0x4d0c4a(0xb3)),_0x56177e[_0x4d0c4a(0xc7)]=![],_0x56177e['services']['anthropic'][_0x4d0c4a(0x93)]=!!_0x56177e[_0x4d0c4a(0xcd)][_0x4d0c4a(0xd3)]['apiKey'],_0x56177e[_0x4d0c4a(0xcd)][_0x4d0c4a(0xae)]['enabled']=!!_0x56177e['services'][_0x4d0c4a(0xae)]['apiKey'],_0x56177e['services']['google']['enabled']=!!_0x56177e[_0x4d0c4a(0xcd)][_0x4d0c4a(0x99)][_0x4d0c4a(0xe8)];else throw new Error(_0xcf826d);}}function createEnhancedLogger(_0x464c66){const _0x32fc9d=a0_0xe66d;return new LoggingService({'console':_0x464c66['logging'][_0x32fc9d(0x81)]!==![],'file':_0x464c66['logging']['file']!==![],'logLevel':_0x464c66[_0x32fc9d(0xe6)]['logLevel'],'logDir':_0x464c66['logging'][_0x32fc9d(0x94)],'silent':_0x464c66['logging'][_0x32fc9d(0xaf)]===!![]});}async function initializeCLI(_0x29da5e,_0x48541b){const _0x4ac916=a0_0xe66d;_0x48541b['info']('Initializing\x20CLI');try{const _0x2f9f37=new CLI(null,_0x29da5e,_0x48541b);return await validateCLIResources(_0x2f9f37,_0x29da5e,_0x48541b),_0x48541b['info']('CLI\x20initialized\x20successfully'),_0x2f9f37;}catch(_0x56f4de){_0x48541b['error']('CLI\x20initialization\x20failed:',_0x56f4de);throw new Error(_0x4ac916(0xe1)+_0x56f4de[_0x4ac916(0xc4)]);}}async function validateCLIResources(_0x49ecea,_0x284e07,_0x2a7772){const _0x532f74=a0_0xe66d,_0x49f859=await _0x49ecea['getStoredApiKey']()[_0x532f74(0xee)](()=>null);!_0x49f859&&_0x284e07['useServerLLM']&&_0x2a7772['warn']('No\x20API\x20key\x20found\x20-\x20some\x20commands\x20will\x20not\x20be\x20available');try{const {getConfigPaths:_0x3782cf}=await import(_0x532f74(0x8e)),_0x45ffd8=_0x3782cf();await import('fs')['then'](_0x4e4472=>{const _0x45cf57=_0x532f74,_0x5e4773=[];return _0x45ffd8['global']&&_0x5e4773['push'](_0x4e4472[_0x45cf57(0xc3)][_0x45cf57(0x9a)](_0x45ffd8['global'])['catch'](()=>'no\x20global\x20config')),_0x45ffd8[_0x45cf57(0xc0)]&&_0x5e4773[_0x45cf57(0xd4)](_0x4e4472['promises'][_0x45cf57(0x9a)](_0x45ffd8[_0x45cf57(0xc0)])[_0x45cf57(0xee)](()=>'no\x20local\x20config')),Promise[_0x45cf57(0xb4)](_0x5e4773);});}catch(_0x5f3284){_0x2a7772['warn']('Configuration\x20file\x20validation\x20failed:',_0x5f3284);}}async function initializeOrchestratorIfNeeded(_0x1277fe,_0x323981,_0x25eafd){const _0x3c8cc5=a0_0xe66d,_0x42cac5=process[_0x3c8cc5(0xec)][_0x3c8cc5(0xe0)](0x2),_0x377a69=_0x42cac5[0x0],_0x49ad6c=['key',_0x3c8cc5(0x95),_0x3c8cc5(0xd1),'--help','-h','--version','-v'];if(_0x49ad6c[_0x3c8cc5(0x9c)](_0x377a69)||_0x42cac5[_0x3c8cc5(0x9c)]('--help')||_0x42cac5['includes']('-h')){_0x25eafd['debug']('Skipping\x20orchestrator\x20initialization\x20for\x20utility\x20command');return;}_0x25eafd[_0x3c8cc5(0xb1)](_0x3c8cc5(0xde));try{const _0x2d3d70=new ConversationOrchestrator(_0x323981,_0x25eafd);await _0x2d3d70['initializeServices'](),_0x1277fe['setOrchestrator'](_0x2d3d70),applicationState['services'][_0x3c8cc5(0xa3)]=_0x2d3d70,_0x25eafd[_0x3c8cc5(0xb1)]('Conversation\x20orchestrator\x20initialized\x20successfully');}catch(_0x3c411b){_0x25eafd['error']('Orchestrator\x20initialization\x20failed:',_0x3c411b);if(['status','budget'][_0x3c8cc5(0x9c)](_0x377a69))_0x25eafd[_0x3c8cc5(0xa1)](_0x3c8cc5(0x7a));else throw new Error(_0x3c8cc5(0xa2)+_0x3c411b['message']);}}function setupSignalHandlers(_0x180661){const _0x3deab3=a0_0xe66d;process['on']('SIGINT',async()=>{const _0x420505=a0_0xe66d;applicationState[_0x420505(0xeb)]&&(_0x180661[_0x420505(0xa1)]('Force\x20shutdown\x20-\x20received\x20second\x20SIGINT'),process[_0x420505(0xcb)](0x1)),_0x180661[_0x420505(0xb1)]('Received\x20SIGINT,\x20initiating\x20graceful\x20shutdown'),await performGracefulShutdown(_0x180661,'SIGINT');}),process['on']('SIGTERM',async()=>{const _0x42f4c0=a0_0xe66d;applicationState['isShuttingDown']&&(_0x180661[_0x42f4c0(0xa1)]('Force\x20shutdown\x20-\x20received\x20second\x20SIGTERM'),process[_0x42f4c0(0xcb)](0x1)),_0x180661['info']('Received\x20SIGTERM,\x20initiating\x20graceful\x20shutdown'),await performGracefulShutdown(_0x180661,'SIGTERM');}),process['on'](_0x3deab3(0x76),async _0x3c9655=>{const _0x5655ef=_0x3deab3;_0x180661['error'](_0x5655ef(0x7e),_0x3c9655),_0x3c9655[_0x5655ef(0xaa)]&&_0x180661[_0x5655ef(0xdd)](_0x5655ef(0xa7),_0x3c9655['stack']),await performEmergencyShutdown(_0x180661),process['exit'](0x1);}),process['on']('unhandledRejection',async(_0x3ad724,_0x14ca23)=>{const _0x4daa38=_0x3deab3;_0x180661[_0x4daa38(0xdd)](_0x4daa38(0xd9),{'reason':_0x3ad724?.[_0x4daa38(0xc4)]||_0x3ad724,'promise':_0x14ca23?.[_0x4daa38(0xdc)]()}),_0x3ad724?.['stack']&&_0x180661['error']('Rejection\x20stack\x20trace:',_0x3ad724[_0x4daa38(0xaa)]),await performEmergencyShutdown(_0x180661),process[_0x4daa38(0xcb)](0x1);}),process['on']('warning',_0x4047a1=>{const _0xbf382a=_0x3deab3;_0x180661[_0xbf382a(0xa1)](_0xbf382a(0xce),{'name':_0x4047a1['name'],'message':_0x4047a1[_0xbf382a(0xc4)],'stack':_0x4047a1['stack']});}),_0x180661[_0x3deab3(0x87)]('Signal\x20handlers\x20configured');}function setupHealthMonitoring(_0x4092af){const _0x34e290=a0_0xe66d,_0x381a82=process[_0x34e290(0xec)]['slice'](0x2),_0x3855c1=['do','make',_0x34e290(0xcc),_0x34e290(0x7b)];if(!_0x3855c1[_0x34e290(0xba)](_0x7ecd5e=>_0x381a82[_0x34e290(0x9c)](_0x7ecd5e)))return;applicationState['healthCheckInterval']=setInterval(async()=>{const _0x524640=_0x34e290;try{await performHealthCheck(_0x4092af);}catch(_0xbb3ae4){_0x4092af[_0x524640(0xa1)](_0x524640(0xa4),_0xbb3ae4);}},SERVICE_HEALTH_CHECK_INTERVAL_MS),_0x4092af['debug']('Health\x20monitoring\x20configured');}async function performHealthCheck(_0x3eb5ca){const _0x1ab2ea=a0_0xe66d,_0x5b5eaf={'timestamp':new Date()[_0x1ab2ea(0xb6)](),'services':{},'overall':'healthy'};if(applicationState[_0x1ab2ea(0xcd)]['cli'])try{_0x5b5eaf[_0x1ab2ea(0xcd)]['cli']=_0x1ab2ea(0x8d);}catch(_0x511031){_0x5b5eaf['services'][_0x1ab2ea(0xe7)]=_0x1ab2ea(0xab),_0x5b5eaf[_0x1ab2ea(0xbc)]='degraded';}if(applicationState[_0x1ab2ea(0xcd)]['orchestrator'])try{const _0x307d1f=await applicationState[_0x1ab2ea(0xcd)]['orchestrator'][_0x1ab2ea(0xed)]?.()||'unknown';_0x5b5eaf[_0x1ab2ea(0xcd)][_0x1ab2ea(0xa3)]=_0x307d1f[_0x1ab2ea(0xbc)]||'healthy',(_0x307d1f[_0x1ab2ea(0xbc)]===_0x1ab2ea(0xd6)||_0x307d1f['overall']==='unhealthy')&&(_0x5b5eaf['overall']='degraded');}catch(_0x20087c){_0x5b5eaf[_0x1ab2ea(0xcd)]['orchestrator']='unhealthy',_0x5b5eaf['overall']='degraded';}_0x5b5eaf[_0x1ab2ea(0xbc)]!==_0x1ab2ea(0x8d)?_0x3eb5ca['warn']('Service\x20health\x20check\x20detected\x20issues:',_0x5b5eaf):_0x3eb5ca['debug']('Health\x20check\x20passed:',_0x5b5eaf);}async function performGracefulShutdown(_0x4721cd,_0x15daf8){const _0x333ea9=a0_0xe66d;if(applicationState['isShuttingDown'])return;applicationState['isShuttingDown']=!![],_0x4721cd['startTask']('Graceful\x20shutdown','Shutting\x20down\x20due\x20to\x20'+_0x15daf8);try{applicationState[_0x333ea9(0xad)]&&(clearInterval(applicationState[_0x333ea9(0xad)]),applicationState['healthCheckInterval']=null);const _0x1a8f1a=[];applicationState[_0x333ea9(0xcd)][_0x333ea9(0xa3)]?.['shutdown']&&_0x1a8f1a[_0x333ea9(0xd4)](Promise['race']([applicationState['services'][_0x333ea9(0xa3)]['shutdown'](),new Promise((_0x207263,_0x446e49)=>setTimeout(()=>_0x446e49(new Error('Orchestrator\x20shutdown\x20timeout')),0x1388))])['catch'](_0x42cee7=>{const _0x2c8795=_0x333ea9;_0x4721cd['warn'](_0x2c8795(0x9f),_0x42cee7);})),applicationState['services'][_0x333ea9(0xe7)]?.['shutdown']&&_0x1a8f1a[_0x333ea9(0xd4)](Promise[_0x333ea9(0xc6)]([applicationState[_0x333ea9(0xcd)]['cli'][_0x333ea9(0xbb)](),new Promise((_0x2ec2e3,_0x38b45a)=>setTimeout(()=>_0x38b45a(new Error('CLI\x20shutdown\x20timeout')),0xbb8))])['catch'](_0x16d023=>{_0x4721cd['warn']('CLI\x20shutdown\x20error:',_0x16d023);})),await Promise[_0x333ea9(0xc6)]([Promise['allSettled'](_0x1a8f1a),new Promise(_0x426f3f=>setTimeout(_0x426f3f,GRACEFUL_SHUTDOWN_TIMEOUT_MS))]),_0x4721cd[_0x333ea9(0x7d)]('Graceful\x20shutdown',!![]),_0x4721cd[_0x333ea9(0xb1)]('Graceful\x20shutdown\x20completed\x20successfully');}catch(_0x334d8d){_0x4721cd['completeTask']('Graceful\x20shutdown',![],{'error':_0x334d8d[_0x333ea9(0xc4)]}),_0x4721cd['error'](_0x333ea9(0x85),_0x334d8d);}finally{setTimeout(()=>{process['exit'](0x0);},0x1f4);}}async function performEmergencyShutdown(_0x357b32){const _0x43938a=a0_0xe66d;if(applicationState[_0x43938a(0xeb)])return;applicationState['isShuttingDown']=!![],_0x357b32[_0x43938a(0xdd)](_0x43938a(0x84));try{applicationState[_0x43938a(0xad)]&&clearInterval(applicationState['healthCheckInterval']),applicationState['services']['orchestrator']?.[_0x43938a(0xd7)]&&await Promise[_0x43938a(0xc6)]([applicationState['services']['orchestrator'][_0x43938a(0xd7)](),new Promise(_0x6ebb95=>setTimeout(_0x6ebb95,0x7d0))])['catch'](()=>{}),_0x357b32[_0x43938a(0xdd)](_0x43938a(0xa0));}catch(_0x556794){console[_0x43938a(0xdd)](_0x43938a(0xa9),_0x556794['message']);}}function provideTroubleshootingSuggestions(_0x345039){const _0x2bcf0d=a0_0xe66d,_0x4a59e7=[],_0x560f85=_0x345039['message']['toLowerCase']();_0x560f85['includes'](_0x2bcf0d(0x91))&&(_0x4a59e7['push'](_0x2bcf0d(0x8c)),_0x4a59e7[_0x2bcf0d(0xd4)]('Get your API key from: https://autopilot.loxia.ai/account/api-keys')),(_0x560f85[_0x2bcf0d(0x9c)](_0x2bcf0d(0xb2))||_0x560f85['includes']('connection'))&&(_0x4a59e7[_0x2bcf0d(0xd4)](_0x2bcf0d(0xda)),_0x4a59e7[_0x2bcf0d(0xd4)](_0x2bcf0d(0x82)),_0x4a59e7['push'](_0x2bcf0d(0xe9))),(_0x560f85['includes'](_0x2bcf0d(0xdb))||_0x560f85['includes']('access'))&&(_0x4a59e7[_0x2bcf0d(0xd4)](_0x2bcf0d(0xd8)),_0x4a59e7[_0x2bcf0d(0xd4)]('Ensure\x20you\x20have\x20write\x20access\x20to\x20the\x20current\x20directory'),_0x4a59e7['push']('Try running from a different directory')),_0x560f85['includes']('timeout')&&(_0x4a59e7['push'](_0x2bcf0d(0x96)),_0x4a59e7[_0x2bcf0d(0xd4)]('Check\x20network\x20connectivity'),_0x4a59e7['push']('Try\x20again\x20in\x20a\x20few\x20moments')),_0x560f85[_0x2bcf0d(0x9c)]('config')&&(_0x4a59e7[_0x2bcf0d(0xd4)](_0x2bcf0d(0x7f)),_0x4a59e7['push']('Create default config: loxia config --create'),_0x4a59e7['push'](_0x2bcf0d(0xc5))),_0x4a59e7['length']>0x0&&(console[_0x2bcf0d(0xca)](a0_0x390321[_0x2bcf0d(0x90)](_0x2bcf0d(0x80))),_0x4a59e7[_0x2bcf0d(0xb8)](_0x5b434e=>{const _0x216f30=_0x2bcf0d;console[_0x216f30(0xca)](a0_0x390321['cyan'](_0x216f30(0xc1)+_0x5b434e));})),console['log'](a0_0x390321['gray'](_0x2bcf0d(0xa8))),console['log'](a0_0x390321['gray']('\x20\x20\x20•\x20Run:\x20loxia\x20--help')),console[_0x2bcf0d(0xca)](a0_0x390321[_0x2bcf0d(0x9e)]('\x20\x20\x20•\x20Check\x20documentation:\x20https://docs.loxia.ai')),console[_0x2bcf0d(0xca)](a0_0x390321['gray']('\x20\x20\x20•\x20Report\x20issues:\x20https://github.com/loxia-ai/cli/issues'));}async function handleBootstrapTimeout(_0x1a6dd6){const _0xd45740=a0_0xe66d;_0x1a6dd6[_0xd45740(0xdd)]('Bootstrap\x20process\x20timed\x20out'),console[_0xd45740(0xdd)](a0_0x390321['red']('\x0a⏰\x20Initialization\x20timed\x20out')),console['error'](a0_0x390321[_0xd45740(0x90)]('This\x20might\x20indicate:')),console[_0xd45740(0xdd)](a0_0x390321['yellow'](_0xd45740(0x8f))),console[_0xd45740(0xdd)](a0_0x390321[_0xd45740(0x90)](_0xd45740(0xb5))),console[_0xd45740(0xdd)](a0_0x390321[_0xd45740(0x90)]('\x20\x20\x20•\x20Configuration\x20problems')),await performEmergencyShutdown(_0x1a6dd6),process['exit'](0x1);}async function main(){const _0x553cca=a0_0xe66d,_0x36301c=Date['now']();try{await Promise['race']([bootstrap(),new Promise((_0x37c557,_0x5562e2)=>setTimeout(()=>_0x5562e2(new Error('Bootstrap\x20timeout')),INITIALIZATION_TIMEOUT_MS))]);}catch(_0x16bbcd){const _0x2118dd=Date['now']()-_0x36301c;if(_0x16bbcd['message']===_0x553cca(0xbd))await handleBootstrapTimeout(applicationState['services'][_0x553cca(0x86)]||createInitialLogger());else throw _0x16bbcd;}}main()['catch'](_0x48396d=>{const _0x4fd43b=a0_0xe66d,_0x5e49df=applicationState['services']['logger']||createInitialLogger();_0x5e49df[_0x4fd43b(0xdd)]('Fatal\x20error\x20during\x20startup:',_0x48396d),console[_0x4fd43b(0xdd)](a0_0x390321[_0x4fd43b(0x79)](_0x4fd43b(0xd2))),console['error'](a0_0x390321[_0x4fd43b(0x79)]('\x20\x20\x20'+_0x48396d['message'])),process[_0x4fd43b(0x83)][_0x4fd43b(0x78)]&&_0x48396d['stack']&&(console[_0x4fd43b(0xdd)](a0_0x390321[_0x4fd43b(0x9e)](_0x4fd43b(0x77))),console[_0x4fd43b(0xdd)](a0_0x390321[_0x4fd43b(0x9e)](_0x48396d[_0x4fd43b(0xaa)]))),process[_0x4fd43b(0xcb)](0x1);}),process['on'](a0_0x59a055(0xd5),_0x4922c3=>{const _0x47f9cf=a0_0x59a055;applicationState[_0x47f9cf(0xcd)][_0x47f9cf(0x86)]&&applicationState['services'][_0x47f9cf(0x86)][_0x47f9cf(0xa1)]('Process\x20warning:',_0x4922c3);});export{bootstrap,performGracefulShutdown,performHealthCheck};