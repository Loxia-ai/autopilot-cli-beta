#!/usr/bin/env node

function a0_0x284c(){const _0x59c38c=['tM8GqvbjigTLEsbMB3vUzcaTihnVBwuGy29TBwfUzhmGD2LSBcbUB3qGyMuGyxzHAwXHyMXL','icaG4OcIia','C3rHDhvZ','CMvK','sw5PDgLHBgL6Aw5NignVBNzLCNnHDgLVBIbVCMnOzxn0CMf0B3i','yxbPs2v5','mta3mdK0veHUB0f1','y2f0y2G','C2LSzw50','y29TCgXLDgvuyxnR','mZyZrhz3DwDe','q29UDMvYC2f0Aw9Uig9Yy2HLC3rYyxrVCIbPBML0AwfSAxPLzcbZDwnJzxnZzNvSBhK','zgvIDwC','BwTKAxi','y3LHBG','te9ysufFu0Lmru5u','lI9JB25MAwCVy29UzMLNtg9HzgvYlMPZ','z29Vz2XL','Bw9KAwz5','qM9VDhn0CMfWihbYB2nLC3mGDgLTzwqGB3v0','uMvJzwL2zwqGu0LhvevstsWGAw5PDgLHDgLUzYbNCMfJzwz1BcbZAhv0zg93BG','icaG','DgLTzw91Da','Aw5PDgLHBgL6yxrPB25tDgfYDfrPBwu','sw5PDgLHBgL6Aw5Nienmsq','ugvYzM9YBwLUzYbLBwvYz2vUy3KGC2H1DgrVD24','ChvZAa','q2HLy2SGBMv0D29YAYbJB25Uzwn0AxzPDhK','u2vYDMvYigHLywX0AcbJAgvJAYbMywLSzwq6ieHuvfaG','icaG4OcIienOzwnRigrVy3vTzw50yxrPB246igH0DhbZoI8Vzg9JCY5SB3HPys5HAq','zgvNCMfKzwq','q29UzMLNDxjHDgLVBIbSB2fKzwqGyw5KihzHBgLKyxrLzcbZDwnJzxnZzNvSBhK','zw5HyMXLza','D2fYBMLUzW','cUkpScbjBML0AwfSAxPHDgLVBIb0Aw1LzcbVDxq','q29UDgLUDwLUzYb3AxrOB3v0ig9Yy2HLC3rYyxrVCIbMB3iGC3rHDhvZignVBw1HBMq','zMLSDgvY','u2vYDMvYihzHBgLKyxrPB24GzMfPBgvKlcb3AwXSigf0DgvTChqGzMfSBgjHy2SGDg8GBg9JywWGC2vYDMLJzxm','BM93','y2XP','rM9Yy2uGC2H1DgrVD24GlsbYzwnLAxzLzcbZzwnVBMqGu0Lhsu5u','C3rHCNq','zM9YrwfJAa','AgvHBhrOq2HLy2TjBNrLCNzHBa','t3jJAgvZDhjHDg9YigLUAxrPywXPEMf0Aw9UigvYCM9YoIa','Dw5OzwfSDgH5','te9ysufFte9hx0XfvKvm','odK3ntuYD0HizfjU','C2vYDMvYvxjS','icaG4OcIifjLCg9YDcbPC3n1zxm6igH0DhbZoI8Vz2L0AhvIlMnVBs9SB3HPys1HAs9JBgKVAxnZDwvZ','EwvSBg93','Bg9Nz2LUzW','Dhj1zq','t3jJAgvZDhjHDg9YihnODxrKB3DUigvYCM9YoG','Bg9Ntgv2zwW','DxnLu2vYDMvYteXn','ls12zxjZAw9U','cLn0ywnRihrYywnLoG','u2H1DhrPBMCGzg93BIbKDwuGDg8G','DgHLBG','CMfJzq','z3jHEq','u3rHCNrPBMCGtg94AweGq0XjigfWCgXPy2f0Aw9U','z2XVyMfS','Aw5JBhvKzxm','u2v0ihLVDxiGqvbjigTLEsb3AxrOoIbSB3HPysbRzxKGls1ZzxqGphLVDxiTyxbPlwTLEt4','tg9HzgLUzYbJB25MAwD1CMf0Aw9U','uMvQzwn0Aw9Uihn0ywnRihrYywnLoG','vMfSAwrHDguGy29UzMLNDxjHDgLVBJOGBg94AweGy29UzMLNic0TDMfSAwrHDgu','cUkDJcbgywLSzwqGDg8GC3rHCNqGtg94AweGq0XjoG','ywXSu2v0DgXLza','C2XPy2u','rw1LCMDLBMn5ihnODxrKB3DUigzHAwXLzdO','Dg9ju09tDhjPBMC','mZb2ufHuu3C','zxHPDa','ndeZndm4vNDzq0Pc','u2TPChbPBMCGB3jJAgvZDhjHDg9YigLUAxrPywXPEMf0Aw9UigzVCIb1DgLSAxr5ignVBw1HBMq','murKy3P1zG','Dg9mB3DLCKnHC2u','icaG4OcIienVBMzPz3vYyxrPB24GChjVyMXLBxm','rw1LCMDLBMn5ihnODxrKB3DUignVBxbSzxrLza','C2vYDMLJzxm','BM8GBg9JywWGy29UzMLN','yxjNDG','DxnHz2veAxi','icaG4OcIifj1BJOGBg94AweGls1OzwXW','icaG4OcIifnLCNzLCIbPCYbKB3DUig9Yig92zxjSB2fKzwq','otKWndy1zeHnrfny','zxjYB3i','icaG4OcIie5LDhDVCMSGy29UBMvJDgL2Axr5igLZC3vLCW','q0XjihnODxrKB3DUihrPBwvVDxq','Aw5MBW','Bg9N','B3zLCMfSBa','A2v5','C3rHy2S','Dw5RBM93BG','mJrYyxvzBLe','zw52','mtiZmdm2wgT4yMnH','C2vYDMvY','D2fYBG','Bg9NrgLY','rM9Yy2uGC2H1DgrVD24GlsbYzwnLAxzLzcbZzwnVBMqGu0Lhvevstq','ChjVBwLZzxm','C2f2zvnLC3nPB25tDgf0zq','q2fUBM90ihjLywnOihnLCNzLCIbHDca','Bg9JywW','oeT2yLHmsa','AxntAhv0DgLUz0rVD24','C2H1DgrVD24','q29UzMLNDxjHDgLVBIbMAwXLihzHBgLKyxrPB24GzMfPBgvKoG','r3jHy2vMDwWGC2H1DgrVD24','y29UzMLN','ywnJzxnZ','r0vu','mZKZotm2CKjeExvT','B3jJAgvZDhjHDg9Y','q0XjigLUAxrPywXPEMf0Aw9UigvYCM9YoIa','q2HLy2SGy29UzMLNDxjHDgLVBIbMAwXLihn5BNrHEa','vw5JyxvNAhqGzxHJzxb0Aw9UoG','u2LNBMfSigHHBMrSzxjZignVBMzPz3vYzwq','mZqWodK1t3flz2fq','yxbPigTLEq','t3jJAgvZDhjHDg9YigLUAxrPywXPEMf0Aw9UigzHAwXLzdO','C3rHCNruyxnR','z2v0u3rVCMvKqxbPs2v5','qM9VDhn0CMfW','y29UBMvJDgLVBG','sw5JCMvHC2uGDgLTzw91DcbZzxr0Aw5NCYbPBIbJB25MAwD1CMf0Aw9U','B3bLBMfP','C2v0t3jJAgvZDhjHDg9Y','AM9PBG','BgXTu3rYyxrLz3K','u2vYDMLJzsbOzwfSDgGGy2HLy2SGzgv0zwn0zwqGAxnZDwvZoG','BwvZC2fNzq','icaTia','Aw5PDgLHBgL6zvnLCNzPy2vZ'];a0_0x284c=function(){return _0x59c38c;};return a0_0x284c();}const a0_0x48bee2=a0_0x1dce;(function(_0xeab066,_0x3d680a){const _0x385e90=a0_0x1dce,_0x340d2c=_0xeab066();while(!![]){try{const _0x34f3bd=parseInt(_0x385e90(0x1b8))/0x1*(-parseInt(_0x385e90(0x1b6))/0x2)+parseInt(_0x385e90(0x1fb))/0x3+parseInt(_0x385e90(0x1df))/0x4+parseInt(_0x385e90(0x1e5))/0x5*(-parseInt(_0x385e90(0x1cc))/0x6)+-parseInt(_0x385e90(0x1c2))/0x7*(parseInt(_0x385e90(0x1d7))/0x8)+-parseInt(_0x385e90(0x199))/0x9*(-parseInt(_0x385e90(0x1b4))/0xa)+-parseInt(_0x385e90(0x1ff))/0xb*(-parseInt(_0x385e90(0x1ce))/0xc);if(_0x34f3bd===_0x3d680a)break;else _0x340d2c['push'](_0x340d2c['shift']());}catch(_0x2a3051){_0x340d2c['push'](_0x340d2c['shift']());}}}(a0_0x284c,0x24d01));import a0_0x37b595 from'dotenv';a0_0x37b595[a0_0x48bee2(0x1dc)]();import{CLI}from'./core/cli.js';import{ConversationOrchestrator}from'./core/conversationOrchestrator.js';import{LoggingService}from'./services/loggingService.js';import{loadConfig}from'./config/configLoader.js';import a0_0x2ba384 from'chalk';import{performance}from'perf_hooks';const INITIALIZATION_TIMEOUT_MS=0x7530,GRACEFUL_SHUTDOWN_TIMEOUT_MS=0x2710,SERVICE_HEALTH_CHECK_INTERVAL_MS=0x493e0;let applicationState={'isShuttingDown':![],'initializationStartTime':null,'services':{'logger':null,'config':null,'cli':null,'orchestrator':null},'healthCheckInterval':null};async function bootstrap(){const _0x1065b4=a0_0x48bee2;applicationState['initializationStartTime']=performance[_0x1065b4(0x190)]();const _0x5e86a4=createInitialLogger();applicationState['services']['logger']=_0x5e86a4;try{_0x5e86a4[_0x1065b4(0x1c6)](_0x1065b4(0x1a8)),_0x5e86a4[_0x1065b4(0x1e8)]('Bootstrap','Initializing\x20application\x20components');const _0x12f3e4=await initializeConfiguration(_0x5e86a4);applicationState['services']['config']=_0x12f3e4;const _0x2252d3=createEnhancedLogger(_0x12f3e4);applicationState['services']['logger']=_0x2252d3;const _0x1e7530=await initializeCLI(_0x12f3e4,_0x2252d3);applicationState['services']['cli']=_0x1e7530,await initializeOrchestratorIfNeeded(_0x1e7530,_0x12f3e4,_0x2252d3),setupSignalHandlers(_0x2252d3),setupHealthMonitoring(_0x2252d3);const _0x2da67b=performance['now']()-applicationState[_0x1065b4(0x20c)];_0x2252d3[_0x1065b4(0x1fe)]('Bootstrap',!![],{'initializationTime':Math['round'](_0x2da67b),'serverMode':_0x12f3e4['useServerLLM'],'services':Object['keys'](applicationState['services'])[_0x1065b4(0x18e)](_0x4636b7=>applicationState['services'][_0x4636b7]!==null)}),_0x2252d3['info']('Loxia\x20CLI\x20initialized\x20successfully\x20in\x20'+Math['round'](_0x2da67b)+'ms'),await _0x1e7530[_0x1065b4(0x193)]();}catch(_0x14aafd){const _0x5f35e8=performance['now']()-applicationState[_0x1065b4(0x20c)];_0x5e86a4['completeTask'](_0x1065b4(0x1ea),![],{'error':_0x14aafd['message'],'initializationTime':Math['round'](_0x5f35e8)}),console[_0x1065b4(0x1c3)](a0_0x2ba384['red'](_0x1065b4(0x1af))),console[_0x1065b4(0x1c3)](a0_0x2ba384[_0x1065b4(0x1f8)]('\x20\x20\x20'+_0x14aafd['message'])),_0x14aafd['stack']&&process['env']['LOXIA_DEBUG']&&(console['error'](a0_0x2ba384[_0x1065b4(0x1a7)](_0x1065b4(0x1a3))),console['error'](a0_0x2ba384['gray'](_0x14aafd['stack']))),provideTroubleshootingSuggestions(_0x14aafd),await performEmergencyShutdown(_0x5e86a4),process['exit'](0x1);}}function createInitialLogger(){const _0x5bc96d=a0_0x48bee2;return new LoggingService({'console':![],'file':![],'logLevel':process['env'][_0x5bc96d(0x198)]||_0x5bc96d(0x1c6),'silent':process[_0x5bc96d(0x1cd)][_0x5bc96d(0x204)]===_0x5bc96d(0x19e)});}async function initializeConfiguration(_0x177be6){const _0x29a0e7=a0_0x48bee2;_0x177be6[_0x29a0e7(0x1c6)](_0x29a0e7(0x1ac));try{const _0x29938e=await loadConfig();return await validateRuntimeConfiguration(_0x29938e,_0x177be6),_0x177be6[_0x29a0e7(0x1c6)](_0x29a0e7(0x189),{'serverMode':_0x29938e['useServerLLM'],'logLevel':_0x29938e['logging']['logLevel'],'llmStrategy':_0x29938e[_0x29a0e7(0x1f0)]}),_0x29938e;}catch(_0xf88055){_0x177be6[_0x29a0e7(0x1c3)]('Configuration\x20loading\x20failed:',_0xf88055);throw new Error('Configuration\x20error:\x20'+_0xf88055[_0x29a0e7(0x1f2)]);}}async function validateRuntimeConfiguration(_0x5dfb69,_0x1ef7f3){const _0x469171=a0_0x48bee2,_0x23fa36=[];if(_0x5dfb69[_0x469171(0x1a1)])try{const _0x4ebfec=await fetch(_0x5dfb69['serverUrl']+'/health',{'method':_0x469171(0x1de),'timeout':0x1388});!_0x4ebfec['ok']&&_0x23fa36['push'](_0x469171(0x186)+_0x4ebfec[_0x469171(0x1f7)]);}catch(_0x37746f){_0x23fa36['push'](_0x469171(0x1d5)+_0x5dfb69[_0x469171(0x19a)]+':\x20'+_0x37746f['message']);}if(!_0x5dfb69['useServerLLM']){const _0x50b2ed=_0x5dfb69[_0x469171(0x1bc)]['anthropic'][_0x469171(0x1fa)]||_0x5dfb69[_0x469171(0x1bc)]['openai'][_0x469171(0x1fa)]||_0x5dfb69['services']['google']['apiKey'];!_0x50b2ed&&_0x23fa36[_0x469171(0x184)]('No\x20API\x20keys\x20configured\x20for\x20fallback\x20services');}try{const _0x24b766=_0x5dfb69['budget'][_0x469171(0x1bf)];await import('fs')[_0x469171(0x1a5)](_0x341b7e=>_0x341b7e['promises'][_0x469171(0x202)](_0x24b766,{'recursive':!![]})),await import('fs')[_0x469171(0x1a5)](_0x2da2a5=>_0x2da2a5[_0x469171(0x1d3)]['access'](_0x24b766,_0x2da2a5['constants']['W_OK']));}catch(_0x235490){_0x23fa36[_0x469171(0x184)]('Cannot\x20write\x20to\x20budget\x20directory:\x20'+_0x235490[_0x469171(0x1f2)]);}if(_0x23fa36['length']>0x0){const _0x1fc40a='Runtime\x20validation\x20failed:\x0a'+_0x23fa36['map'](_0x244247=>_0x469171(0x1f3)+_0x244247)[_0x469171(0x1ef)]('\x0a');if(_0x5dfb69['useServerLLM']&&_0x23fa36['some'](_0x3682da=>_0x3682da[_0x469171(0x1aa)](_0x469171(0x1cf))))_0x1ef7f3[_0x469171(0x1d0)](_0x469171(0x18f)),_0x5dfb69[_0x469171(0x1a1)]=![],_0x5dfb69['services']['anthropic']['enabled']=!!_0x5dfb69[_0x469171(0x1bc)]['anthropic'][_0x469171(0x1fa)],_0x5dfb69['services']['openai']['enabled']=!!_0x5dfb69['services'][_0x469171(0x1ed)]['apiKey'],_0x5dfb69[_0x469171(0x1bc)][_0x469171(0x206)][_0x469171(0x18a)]=!!_0x5dfb69[_0x469171(0x1bc)][_0x469171(0x206)][_0x469171(0x1fa)];else throw new Error(_0x1fc40a);}}function createEnhancedLogger(_0x9932e7){const _0x12e979=a0_0x48bee2;return new LoggingService({'console':_0x9932e7[_0x12e979(0x19d)]['console']!==![],'file':_0x9932e7['logging']['file']!==![],'logLevel':_0x9932e7['logging'][_0x12e979(0x1a0)],'logDir':_0x9932e7['logging'][_0x12e979(0x1d1)],'silent':_0x9932e7['logging'][_0x12e979(0x1fd)]===!![]});}async function initializeCLI(_0x597a7a,_0x18a387){const _0x5b7ed6=a0_0x48bee2;_0x18a387[_0x5b7ed6(0x1c6)](_0x5b7ed6(0x182));try{const _0x10dcf1=new CLI(null,_0x597a7a,_0x18a387);return await validateCLIResources(_0x10dcf1,_0x597a7a,_0x18a387),_0x18a387['info']('CLI\x20initialized\x20successfully'),_0x10dcf1;}catch(_0x5df41e){_0x18a387[_0x5b7ed6(0x1c3)]('CLI\x20initialization\x20failed:',_0x5df41e);throw new Error(_0x5b7ed6(0x1e1)+_0x5df41e[_0x5b7ed6(0x1f2)]);}}async function validateCLIResources(_0x2faf53,_0xbb3ca3,_0x5d5f6e){const _0x4104e1=a0_0x48bee2,_0x25f9db=await _0x2faf53[_0x4104e1(0x1e9)]()['catch'](()=>null);!_0x25f9db&&_0xbb3ca3['useServerLLM']&&_0x5d5f6e['warn'](_0x4104e1(0x1f5));try{const {getConfigPaths:_0x18c4c2}=await import(_0x4104e1(0x205)),_0x48469c=_0x18c4c2();await import('fs')['then'](_0x3c22d9=>{const _0x42cd4b=_0x4104e1,_0x563019=[];return _0x48469c[_0x42cd4b(0x1a9)]&&_0x563019[_0x42cd4b(0x184)](_0x3c22d9[_0x42cd4b(0x1d3)][_0x42cd4b(0x1dd)](_0x48469c['global'])[_0x42cd4b(0x1fc)](()=>'no\x20global\x20config')),_0x48469c['local']&&_0x563019[_0x42cd4b(0x184)](_0x3c22d9['promises'][_0x42cd4b(0x1dd)](_0x48469c[_0x42cd4b(0x1d6)])[_0x42cd4b(0x1fc)](()=>_0x42cd4b(0x1bd))),Promise[_0x42cd4b(0x1b0)](_0x563019);});}catch(_0x2ffa1a){_0x5d5f6e['warn'](_0x4104e1(0x1da),_0x2ffa1a);}}async function initializeOrchestratorIfNeeded(_0x4dd4a4,_0x516ea3,_0x158368){const _0x490d61=a0_0x48bee2,_0x5ecfbe=process['argv'][_0x490d61(0x1b1)](0x2),_0xbe9df4=_0x5ecfbe[0x0],_0x4904eb=[_0x490d61(0x1c9),_0x490d61(0x1f7),'budget','--help','-h',_0x490d61(0x1a2),'-v'];if(_0x4904eb[_0x490d61(0x1aa)](_0xbe9df4)||_0x5ecfbe[_0x490d61(0x1aa)]('--help')||_0x5ecfbe[_0x490d61(0x1aa)]('-h')){_0x158368['debug'](_0x490d61(0x1b7));return;}_0x158368[_0x490d61(0x1c6)](_0x490d61(0x1f9));try{const _0xfd134b=new ConversationOrchestrator(_0x516ea3,_0x158368);await _0xfd134b[_0x490d61(0x1f4)](),_0x4dd4a4[_0x490d61(0x1ee)](_0xfd134b),applicationState[_0x490d61(0x1bc)][_0x490d61(0x1e0)]=_0xfd134b,_0x158368[_0x490d61(0x1c6)](_0x490d61(0x200));}catch(_0x3e0586){_0x158368['error'](_0x490d61(0x1e7),_0x3e0586);if([_0x490d61(0x1f7),'budget']['includes'](_0xbe9df4))_0x158368['warn'](_0x490d61(0x18d));else throw new Error(_0x490d61(0x196)+_0x3e0586[_0x490d61(0x1f2)]);}}function setupSignalHandlers(_0x3a4f61){const _0x12b52b=a0_0x48bee2;process['on']('SIGINT',async()=>{const _0x5e1be9=a0_0x1dce;applicationState[_0x5e1be9(0x1d8)]&&(_0x3a4f61['warn'](_0x5e1be9(0x192)),process['exit'](0x1)),_0x3a4f61[_0x5e1be9(0x1c6)]('Received\x20SIGINT,\x20initiating\x20graceful\x20shutdown'),await performGracefulShutdown(_0x3a4f61,'SIGINT');}),process['on']('SIGTERM',async()=>{const _0x3b8df6=a0_0x1dce;applicationState['isShuttingDown']&&(_0x3a4f61['warn'](_0x3b8df6(0x1d2)),process['exit'](0x1)),_0x3a4f61['info'](_0x3b8df6(0x209)),await performGracefulShutdown(_0x3a4f61,'SIGTERM');}),process['on']('uncaughtException',async _0x1f58d0=>{const _0x165567=a0_0x1dce;_0x3a4f61['error'](_0x165567(0x1e3),_0x1f58d0),_0x1f58d0['stack']&&_0x3a4f61[_0x165567(0x1c3)]('Stack\x20trace:',_0x1f58d0[_0x165567(0x1ca)]),await performEmergencyShutdown(_0x3a4f61),process[_0x165567(0x1b5)](0x1);}),process['on']('unhandledRejection',async(_0x37163d,_0x49cf3e)=>{const _0x24bbe1=a0_0x1dce;_0x3a4f61['error']('Unhandled\x20promise\x20rejection:',{'reason':_0x37163d?.['message']||_0x37163d,'promise':_0x49cf3e?.['toString']()}),_0x37163d?.[_0x24bbe1(0x1ca)]&&_0x3a4f61[_0x24bbe1(0x1c3)](_0x24bbe1(0x1ad),_0x37163d[_0x24bbe1(0x1ca)]),await performEmergencyShutdown(_0x3a4f61),process['exit'](0x1);}),process['on'](_0x12b52b(0x18b),_0x11d54e=>{_0x3a4f61['warn']('Node.js\x20warning:',{'name':_0x11d54e['name'],'message':_0x11d54e['message'],'stack':_0x11d54e['stack']});}),_0x3a4f61[_0x12b52b(0x201)](_0x12b52b(0x1e4));}function setupHealthMonitoring(_0x1e2eb8){const _0x1bdd7c=a0_0x48bee2,_0x590135=process[_0x1bdd7c(0x1be)][_0x1bdd7c(0x1b1)](0x2),_0x1cd3c7=['do','make','resume',_0x1bdd7c(0x207)];if(!_0x1cd3c7['some'](_0x5e2d62=>_0x590135['includes'](_0x5e2d62)))return;applicationState['healthCheckInterval']=setInterval(async()=>{const _0x1051af=_0x1bdd7c;try{await performHealthCheck(_0x1e2eb8);}catch(_0x4e18c8){_0x1e2eb8[_0x1051af(0x1d0)]('Health\x20check\x20failed:',_0x4e18c8);}},SERVICE_HEALTH_CHECK_INTERVAL_MS),_0x1e2eb8['debug']('Health\x20monitoring\x20configured');}async function performHealthCheck(_0x22fb7e){const _0x5a24c5=a0_0x48bee2,_0x86be20={'timestamp':new Date()[_0x5a24c5(0x1b3)](),'services':{},'overall':'healthy'};if(applicationState[_0x5a24c5(0x1bc)]['cli'])try{_0x86be20[_0x5a24c5(0x1bc)][_0x5a24c5(0x191)]='healthy';}catch(_0x1d97f9){_0x86be20[_0x5a24c5(0x1bc)]['cli']=_0x5a24c5(0x197),_0x86be20['overall']=_0x5a24c5(0x188);}if(applicationState['services']['orchestrator'])try{const _0x52c188=await applicationState['services'][_0x5a24c5(0x1e0)]['getHealthStatus']?.()||_0x5a24c5(0x1cb);_0x86be20['services']['orchestrator']=_0x52c188['overall']||'healthy',(_0x52c188['overall']==='degraded'||_0x52c188[_0x5a24c5(0x1c8)]===_0x5a24c5(0x197))&&(_0x86be20[_0x5a24c5(0x1c8)]=_0x5a24c5(0x188));}catch(_0x3c77cc){_0x86be20['services']['orchestrator']=_0x5a24c5(0x197),_0x86be20[_0x5a24c5(0x1c8)]=_0x5a24c5(0x188);}_0x86be20['overall']!=='healthy'?_0x22fb7e[_0x5a24c5(0x1d0)](_0x5a24c5(0x1f1),_0x86be20):_0x22fb7e['debug']('Health\x20check\x20passed:',_0x86be20);}function a0_0x1dce(_0x1d863d,_0x3721cb){const _0x284c5b=a0_0x284c();return a0_0x1dce=function(_0x1dcec6,_0x2f18a5){_0x1dcec6=_0x1dcec6-0x182;let _0x5e2b2a=_0x284c5b[_0x1dcec6];if(a0_0x1dce['PvmOyY']===undefined){var _0x57a170=function(_0x37b595){const _0x2ba384='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x5e86a4='',_0x12f3e4='';for(let _0x2252d3=0x0,_0x1e7530,_0x2da67b,_0x4636b7=0x0;_0x2da67b=_0x37b595['charAt'](_0x4636b7++);~_0x2da67b&&(_0x1e7530=_0x2252d3%0x4?_0x1e7530*0x40+_0x2da67b:_0x2da67b,_0x2252d3++%0x4)?_0x5e86a4+=String['fromCharCode'](0xff&_0x1e7530>>(-0x2*_0x2252d3&0x6)):0x0){_0x2da67b=_0x2ba384['indexOf'](_0x2da67b);}for(let _0x14aafd=0x0,_0x5f35e8=_0x5e86a4['length'];_0x14aafd<_0x5f35e8;_0x14aafd++){_0x12f3e4+='%'+('00'+_0x5e86a4['charCodeAt'](_0x14aafd)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x12f3e4);};a0_0x1dce['KEONlj']=_0x57a170,_0x1d863d=arguments,a0_0x1dce['PvmOyY']=!![];}const _0x597632=_0x284c5b[0x0],_0x15d3ef=_0x1dcec6+_0x597632,_0x388b3a=_0x1d863d[_0x15d3ef];return!_0x388b3a?(_0x5e2b2a=a0_0x1dce['KEONlj'](_0x5e2b2a),_0x1d863d[_0x15d3ef]=_0x5e2b2a):_0x5e2b2a=_0x388b3a,_0x5e2b2a;},a0_0x1dce(_0x1d863d,_0x3721cb);}async function performGracefulShutdown(_0x309163,_0x4052fb){const _0x528478=a0_0x48bee2;if(applicationState['isShuttingDown'])return;applicationState['isShuttingDown']=!![],_0x309163[_0x528478(0x1e8)]('Graceful\x20shutdown',_0x528478(0x1a4)+_0x4052fb);try{applicationState[_0x528478(0x195)]&&(clearInterval(applicationState[_0x528478(0x195)]),applicationState['healthCheckInterval']=null);const _0xc7b853=[];applicationState[_0x528478(0x1bc)]['orchestrator']?.['shutdown']&&_0xc7b853['push'](Promise['race']([applicationState['services']['orchestrator']['shutdown'](),new Promise((_0x71dde1,_0x50b9d0)=>setTimeout(()=>_0x50b9d0(new Error('Orchestrator\x20shutdown\x20timeout')),0x1388))])[_0x528478(0x1fc)](_0x363866=>{const _0x587aec=_0x528478;_0x309163['warn'](_0x587aec(0x19f),_0x363866);})),applicationState['services'][_0x528478(0x191)]?.[_0x528478(0x1d9)]&&_0xc7b853['push'](Promise['race']([applicationState[_0x528478(0x1bc)][_0x528478(0x191)][_0x528478(0x1d9)](),new Promise((_0x14e45c,_0xc4df8d)=>setTimeout(()=>_0xc4df8d(new Error(_0x528478(0x1c5))),0xbb8))])['catch'](_0xac7768=>{_0x309163['warn']('CLI\x20shutdown\x20error:',_0xac7768);})),await Promise[_0x528478(0x1a6)]([Promise[_0x528478(0x1b0)](_0xc7b853),new Promise(_0x33db38=>setTimeout(_0x33db38,GRACEFUL_SHUTDOWN_TIMEOUT_MS))]),_0x309163[_0x528478(0x1fe)]('Graceful\x20shutdown',!![]),_0x309163[_0x528478(0x1c6)]('Graceful\x20shutdown\x20completed\x20successfully');}catch(_0x2cb479){_0x309163[_0x528478(0x1fe)](_0x528478(0x1db),![],{'error':_0x2cb479[_0x528478(0x1f2)]}),_0x309163[_0x528478(0x1c3)]('Error\x20during\x20graceful\x20shutdown:',_0x2cb479);}finally{setTimeout(()=>{process['exit'](0x0);},0x1f4);}}async function performEmergencyShutdown(_0x209c1b){const _0x40b7a1=a0_0x48bee2;if(applicationState[_0x40b7a1(0x1d8)])return;applicationState[_0x40b7a1(0x1d8)]=!![],_0x209c1b['error'](_0x40b7a1(0x183));try{applicationState['healthCheckInterval']&&clearInterval(applicationState[_0x40b7a1(0x195)]),applicationState['services'][_0x40b7a1(0x1e0)]?.['saveSessionState']&&await Promise[_0x40b7a1(0x1a6)]([applicationState[_0x40b7a1(0x1bc)][_0x40b7a1(0x1e0)][_0x40b7a1(0x1d4)](),new Promise(_0x1a17e8=>setTimeout(_0x1a17e8,0x7d0))])['catch'](()=>{}),_0x209c1b['error'](_0x40b7a1(0x1bb));}catch(_0x5de569){console[_0x40b7a1(0x1c3)](_0x40b7a1(0x1b2),_0x5de569['message']);}}function provideTroubleshootingSuggestions(_0x3ee4e8){const _0x42c877=a0_0x48bee2,_0x1723d1=[],_0x5abe9e=_0x3ee4e8['message'][_0x42c877(0x1b9)]();_0x5abe9e['includes'](_0x42c877(0x1e6))&&(_0x1723d1['push'](_0x42c877(0x1ab)),_0x1723d1['push']('Get your API key from: https://autopilot.loxia.ai/account/api-keys')),(_0x5abe9e[_0x42c877(0x1aa)]('server')||_0x5abe9e['includes'](_0x42c877(0x1eb)))&&(_0x1723d1['push']('Check\x20your\x20internet\x20connection'),_0x1723d1['push']('Verify\x20the\x20server\x20URL\x20in\x20your\x20configuration'),_0x1723d1[_0x42c877(0x184)]('Try\x20using\x20fallback\x20mode:\x20LOXIA_USE_SERVER_LLM=false')),(_0x5abe9e['includes']('permission')||_0x5abe9e[_0x42c877(0x1aa)]('access'))&&(_0x1723d1['push']('Check\x20file\x20system\x20permissions'),_0x1723d1[_0x42c877(0x184)]('Ensure\x20you\x20have\x20write\x20access\x20to\x20the\x20current\x20directory'),_0x1723d1['push']('Try running from a different directory')),_0x5abe9e[_0x42c877(0x1aa)](_0x42c877(0x20b))&&(_0x1723d1[_0x42c877(0x184)](_0x42c877(0x1ec)),_0x1723d1['push'](_0x42c877(0x185)),_0x1723d1['push']('Try\x20again\x20in\x20a\x20few\x20moments')),_0x5abe9e[_0x42c877(0x1aa)]('config')&&(_0x1723d1[_0x42c877(0x184)](_0x42c877(0x1e2)),_0x1723d1[_0x42c877(0x184)]('Create default config: loxia config --create'),_0x1723d1['push'](_0x42c877(0x1ae))),_0x1723d1['length']>0x0&&(console[_0x42c877(0x1c7)](a0_0x2ba384[_0x42c877(0x19c)]('\x0aðŸ’¡\x20Troubleshooting\x20suggestions:')),_0x1723d1[_0x42c877(0x194)](_0x377dc6=>{const _0xb8da43=_0x42c877;console['log'](a0_0x2ba384[_0xb8da43(0x203)](_0xb8da43(0x1f6)+_0x377dc6));})),console[_0x42c877(0x1c7)](a0_0x2ba384['gray']('\x0aðŸ”\x20For\x20more\x20help:')),console['log'](a0_0x2ba384['gray'](_0x42c877(0x1c0))),console[_0x42c877(0x1c7)](a0_0x2ba384[_0x42c877(0x1a7)](_0x42c877(0x187))),console['log'](a0_0x2ba384['gray'](_0x42c877(0x19b)));}async function handleBootstrapTimeout(_0x91ea4){const _0x46d1fa=a0_0x48bee2;_0x91ea4['error'](_0x46d1fa(0x208)),console[_0x46d1fa(0x1c3)](a0_0x2ba384['red'](_0x46d1fa(0x18c))),console[_0x46d1fa(0x1c3)](a0_0x2ba384['yellow']('This\x20might\x20indicate:')),console[_0x46d1fa(0x1c3)](a0_0x2ba384[_0x46d1fa(0x19c)](_0x46d1fa(0x1c4))),console['error'](a0_0x2ba384[_0x46d1fa(0x19c)](_0x46d1fa(0x1c1))),console[_0x46d1fa(0x1c3)](a0_0x2ba384['yellow'](_0x46d1fa(0x1ba))),await performEmergencyShutdown(_0x91ea4),process[_0x46d1fa(0x1b5)](0x1);}async function main(){const _0x5391b9=a0_0x48bee2,_0x4c0bd4=Date['now']();try{await Promise[_0x5391b9(0x1a6)]([bootstrap(),new Promise((_0x2c01f3,_0x2f2a69)=>setTimeout(()=>_0x2f2a69(new Error('Bootstrap\x20timeout')),INITIALIZATION_TIMEOUT_MS))]);}catch(_0x9f2975){const _0x23885c=Date[_0x5391b9(0x190)]()-_0x4c0bd4;if(_0x9f2975[_0x5391b9(0x1f2)]==='Bootstrap\x20timeout')await handleBootstrapTimeout(applicationState[_0x5391b9(0x1bc)]['logger']||createInitialLogger());else throw _0x9f2975;}}main()[a0_0x48bee2(0x1fc)](_0x284986=>{const _0x5776d4=a0_0x48bee2,_0x4f0aa7=applicationState['services']['logger']||createInitialLogger();_0x4f0aa7['error']('Fatal\x20error\x20during\x20startup:',_0x284986),console['error'](a0_0x2ba384[_0x5776d4(0x1f8)]('\x0aðŸ’¥\x20Fatal\x20startup\x20error:')),console['error'](a0_0x2ba384['red'](_0x5776d4(0x20a)+_0x284986[_0x5776d4(0x1f2)])),process['env']['LOXIA_DEBUG']&&_0x284986['stack']&&(console[_0x5776d4(0x1c3)](a0_0x2ba384[_0x5776d4(0x1a7)](_0x5776d4(0x1a3))),console[_0x5776d4(0x1c3)](a0_0x2ba384[_0x5776d4(0x1a7)](_0x284986['stack']))),process['exit'](0x1);}),process['on'](a0_0x48bee2(0x18b),_0x512840=>{const _0x19c46e=a0_0x48bee2;applicationState['services']['logger']&&applicationState[_0x19c46e(0x1bc)]['logger'][_0x19c46e(0x1d0)]('Process\x20warning:',_0x512840);});export{bootstrap,performGracefulShutdown,performHealthCheck};